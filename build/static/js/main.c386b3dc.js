/*! For license information please see main.c386b3dc.js.LICENSE.txt */
(()=>{var e={49:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var _=y.prototype=new x;_.constructor=y,f(_,v.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,A={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:A.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+M(l,0):s,b(a)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),P(a,t,r,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+M(o=e[c],c);l+=P(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,r,u=s+M(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",function(e){return t.call(n,e,r++)}),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},j={transition:null},I={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:j,ReactCurrentOwner:A};function k(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=y,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=k,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=A.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=k,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},153:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},204:(e,t,n)=>{"use strict";e.exports=n(969)},235:(e,t,n)=>{"use strict";e.exports=n(473)},340:(e,t,n)=>{"use strict";e.exports=n(761)},345:(e,t,n)=>{"use strict";var i=n(950),r=n(204);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var B,D=Object.assign;function O(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function z(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case w:return"Portal";case E:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=V(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){K(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=fe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ae=null,Se=null;function Ee(e){if(e=yr(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=br(t),we(e.stateNode,e.type,t))}}function Ce(e){Ae?Se?Se.push(e):Se=[e]:Ae=e}function Te(){if(Ae){var e=Ae,t=Se;if(Se=Ae=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Me(e,t){return e(t)}function Pe(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Me(e,t,n)}finally{Ne=!1,(null!==Ae||null!==Se)&&(Pe(),Te())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var i=br(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var je=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){je=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){je=!1}function ke(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Be=!1,De=null,Oe=!1,Fe=null,Ue={onError:function(e){Be=!0,De=e}};function ze(e,t,n,i,r,s,a,o,l){Be=!1,De=null,ke.apply(Ue,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===i)return We(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,Ze=r.unstable_shouldYield,qe=r.unstable_requestPaint,Ke=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=dt(o):0!==(s&=a)&&(i=dt(s))}else 0!==(a=n&~r)?i=dt(a):0!==s&&(i=dt(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,At,St,Et,Ct=!1,Tt=[],Mt=null,Pt=null,Nt=null,Rt=new Map,Lt=new Map,jt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Bt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Dt(e){var t=xr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Et(e.priority,function(){At(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);_e=i,n.target.dispatchEvent(i),_e=null,t.shift()}return!0}function Ft(e,t,n){Ot(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Mt&&Ot(Mt)&&(Mt=null),null!==Pt&&Ot(Pt)&&(Pt=null),null!==Nt&&Ot(Nt)&&(Nt=null),Rt.forEach(Ft),Lt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Ht(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Mt&&zt(Mt,e),null!==Pt&&zt(Pt,e),null!==Nt&&zt(Nt,e),Rt.forEach(t),Lt.forEach(t),n=0;n<jt.length;n++)(i=jt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)Dt(n),null===n.blockedOn&&jt.shift()}var Gt=_.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,i){var r=yt,s=Gt.transition;Gt.transition=null;try{yt=1,Yt(e,t,n,i)}finally{yt=r,Gt.transition=s}}function Jt(e,t,n,i){var r=yt,s=Gt.transition;Gt.transition=null;try{yt=4,Yt(e,t,n,i)}finally{yt=r,Gt.transition=s}}function Yt(e,t,n,i){if(Wt){var r=Zt(e,t,n,i);if(null===r)Wi(e,t,i,Xt,n),kt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Mt=Bt(Mt,e,t,n,i,r),!0;case"dragenter":return Pt=Bt(Pt,e,t,n,i,r),!0;case"mouseover":return Nt=Bt(Nt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Rt.set(s,Bt(Rt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Lt.set(s,Bt(Lt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(kt(e,i),4&t&&-1<It.indexOf(e)){for(;null!==r;){var s=yr(r);if(null!==s&&bt(s),null===(s=Zt(e,t,n,i))&&Wi(e,t,i,Xt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Xt=null;function Zt(e,t,n,i){if(Xt=null,null!==(e=xr(e=be(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Kt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,i=n.length,r="value"in Kt?Kt.value:Kt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=D({},cn,{view:0,detail:0}),hn=sn(dn),pn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(D({},pn,{dataTransfer:0})),gn=sn(D({},dn,{relatedTarget:0})),vn=sn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(xn),_n=sn(D({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function En(){return Sn}var Cn=D({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Cn),Mn=sn(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Rn),jn=[9,13,27,32],In=u&&"CompositionEvent"in window,kn=null;u&&"documentMode"in document&&(kn=document.documentMode);var Bn=u&&"TextEvent"in window&&!kn,Dn=u&&(!In||kn&&8<kn&&11>=kn),On=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Vn(e,t,n,i){Ce(i),0<(t=Ji(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Jn=null,Yn=null;function Xn(e){Oi(e,0)}function Zn(e){if(Y(_r(e)))return e}function qn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Qn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Qn=$n}else Qn=!1;Kn=Qn&&(!document.documentMode||9<document.documentMode)}function ti(){Jn&&(Jn.detachEvent("onpropertychange",ni),Yn=Jn=null)}function ni(e){if("value"===e.propertyName&&Zn(Yn)){var t=[];Vn(t,Yn,e,be(e)),Re(Xn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Yn=n,(Jn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Yn)}function si(e,t){if("click"===e)return Zn(t)}function ai(e,t){if("input"===e||"change"===e)return Zn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,xi=null,yi=!1;function _i(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==X(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},xi&&li(xi,i)||(xi=i,0<(i=Ji(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Ai={},Si={};function Ei(e){if(Ai[e])return Ai[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return Ai[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ci=Ei("animationend"),Ti=Ei("animationiteration"),Mi=Ei("animationstart"),Pi=Ei("transitionend"),Ni=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(e,t){Ni.set(e,t),l(t,[e])}for(var ji=0;ji<Ri.length;ji++){var Ii=Ri[ji];Li(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Li(Ci,"onAnimationEnd"),Li(Ti,"onAnimationIteration"),Li(Mi,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bi=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function Di(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(ze.apply(this,arguments),Be){if(!Be)throw Error(s(198));var u=De;Be=!1,De=null,Oe||(Oe=!0,Fe=u)}}(i,t,void 0,e),e.currentTarget=null}function Oi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Di(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Di(r,o,c),s=l}}}if(Oe)throw e=Fe,Oe=!1,Fe=null,e}function Fi(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var i=e+"__bubble";n.has(i)||(Gi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Gi(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[zi]){e[zi]=!0,a.forEach(function(t){"selectionchange"!==t&&(Bi.has(t)||Ui(t,!1,e),Ui(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zi]||(t[zi]=!0,Ui("selectionchange",!1,t))}}function Gi(e,t,n,i){switch(qt(t)){case 1:var r=Vt;break;case 4:r=Jt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=xr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}Re(function(){var i=s,r=be(n),a=[];e:{var o=Ni.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ci:case Ti:case Mi:l=vn;break;case Pi:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,m=i;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Le(m,h))&&u.push(Vi(m,f,p)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!xr(c)&&!c[mr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?xr(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,f="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:_r(l),p=null==c?o:_r(c),(o=new u(f,m+"leave",l,n,r)).target=d,o.relatedTarget=p,f=null,xr(r)===i&&((u=new u(h,m+"enter",c,n,r)).target=p,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,m=0,p=u=l;p;p=Yi(p))m++;for(p=0,f=h;f;f=Yi(f))p++;for(;0<m-p;)u=Yi(u),m--;for(;0<p-m;)h=Yi(h),p--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yi(u),h=Yi(h)}u=null}else u=null;null!==l&&Xi(a,o,l,u,!1),null!==c&&null!==d&&Xi(a,d,c,u,!0)}if("select"===(l=(o=i?_r(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=qn;else if(Wn(o))if(Kn)g=ai;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,i))?Vn(a,g,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?_r(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,xi=null);break;case"focusout":xi=vi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,_i(a,n,r);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":_i(a,n,r)}var x;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(x=en()):(Qt="value"in(Kt=r)?Kt.value:Kt.textContent,Hn=!0)),0<(v=Ji(i,y)).length&&(y=new _n(y,e,null,n,r),a.push({event:y,listeners:v}),x?y.data=x:null!==(x=zn(n))&&(y.data=x))),(x=Bn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,On);case"textInput":return(e=t.data)===On&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!In&&Un(e,t)?(e=en(),$t=Qt=Kt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ji(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=x))}Oi(a,t)})}function Vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ji(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Le(e,n))&&i.unshift(Vi(e,s,r)),null!=(s=Le(e,t))&&i.push(Vi(e,s,r))),e=e.return}return i}function Yi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Le(n,s))&&a.unshift(Vi(n,l,o)):r||null!=(l=Le(n,s))&&a.push(Vi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zi=/\r\n?/g,qi=/\u0000|\uFFFD/g;function Ki(e){return("string"===typeof e?e:""+e).replace(Zi,"\n").replace(qi,"")}function Qi(e,t,n){if(t=Ki(t),Ki(e)!==t&&n)throw Error(s(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,mr="__reactContainer$"+dr,fr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function xr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[mr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function br(e){return e[pr]||null}var wr=[],Ar=-1;function Sr(e){return{current:e}}function Er(e){0>Ar||(e.current=wr[Ar],wr[Ar]=null,Ar--)}function Cr(e,t){Ar++,wr[Ar]=e.current,e.current=t}var Tr={},Mr=Sr(Tr),Pr=Sr(!1),Nr=Tr;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function jr(){Er(Pr),Er(Mr)}function Ir(e,t,n){if(Mr.current!==Tr)throw Error(s(168));Cr(Mr,t),Cr(Pr,n)}function kr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,G(e)||"Unknown",r));return D({},n,i)}function Br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Nr=Mr.current,Cr(Mr,e),Cr(Pr,Pr.current),!0}function Dr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=kr(e,t,Nr),i.__reactInternalMemoizedMergedChildContext=e,Er(Pr),Er(Mr),Cr(Mr,e)):Er(Pr),Cr(Pr,n)}var Or=null,Fr=!1,Ur=!1;function zr(e){null===Or?Or=[e]:Or.push(e)}function Hr(){if(!Ur&&null!==Or){Ur=!0;var e=0,t=yt;try{var n=Or;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Or=null,Fr=!1}catch(r){throw null!==Or&&(Or=Or.slice(e+1)),Ye($e,Hr),r}finally{yt=t,Ur=!1}}return null}var Gr=[],Wr=0,Vr=null,Jr=0,Yr=[],Xr=0,Zr=null,qr=1,Kr="";function Qr(e,t){Gr[Wr++]=Jr,Gr[Wr++]=Vr,Vr=e,Jr=t}function $r(e,t,n){Yr[Xr++]=qr,Yr[Xr++]=Kr,Yr[Xr++]=Zr,Zr=e;var i=qr;e=Kr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,qr=1<<32-at(t)+r|n<<r|i,Kr=s+e}else qr=1<<s|n<<r|i,Kr=e}function es(e){null!==e.return&&(Qr(e,1),$r(e,1,0))}function ts(e){for(;e===Vr;)Vr=Gr[--Wr],Gr[Wr]=null,Jr=Gr[--Wr],Gr[Wr]=null;for(;e===Zr;)Zr=Yr[--Xr],Yr[Xr]=null,Kr=Yr[--Xr],Yr[Xr]=null,qr=Yr[--Xr],Yr[Xr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zr?{id:qr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=is;e;)e=cr(e.nextSibling)}function ps(){is=ns=null,rs=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=_.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Dc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===A?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&xs(s)===t.type)?((i=r(t,n.props)).ref=gs(e,t,n),i.return=e,i):((i=Ic(n.type,n.key,n.props,null,e.mode,i)).ref=gs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Oc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=kc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case w:return(t=Oc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||k(t))return(t=kc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case L:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||k(n))return null!==r?null:d(e,t,n,i,null);vs(e,n)}return null}function m(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case L:return m(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||k(i))return d(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function f(r,s,o,l){for(var c=null,u=null,d=s,f=s=0,g=null;null!==d&&f<o.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=p(r,d,o[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,f),null===u?c=v:u.sibling=v,u=v,d=g}if(f===o.length)return n(r,d),rs&&Qr(r,f),c;if(null===d){for(;f<o.length;f++)null!==(d=h(r,o[f],l))&&(s=a(d,s,f),null===u?c=d:u.sibling=d,u=d);return rs&&Qr(r,f),c}for(d=i(r,d);f<o.length;f++)null!==(g=m(d,r,f,o[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),s=a(g,s,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(r,e)}),rs&&Qr(r,f),c}function g(r,o,l,c){var u=k(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,f=o,g=o=0,v=null,x=l.next();null!==f&&!x.done;g++,x=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var y=p(r,f,x.value,c);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(r,f),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y,f=v}if(x.done)return n(r,f),rs&&Qr(r,g),u;if(null===f){for(;!x.done;g++,x=l.next())null!==(x=h(r,x.value,c))&&(o=a(x,o,g),null===d?u=x:d.sibling=x,d=x);return rs&&Qr(r,g),u}for(f=i(r,f);!x.done;g++,x=l.next())null!==(x=m(f,r,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x);return e&&f.forEach(function(e){return t(r,e)}),rs&&Qr(r,g),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===A){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&xs(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=gs(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===A?((s=kc(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Ic(a.type,a.key,a.props,null,i.mode,l)).ref=gs(i,s,a),l.return=i,i=l)}return o(i);case w:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Oc(a,i.mode,l)).return=i,i=s}return o(i);case L:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return f(i,s,a,l);if(k(a))return g(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Dc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var _s=ys(!0),bs=ys(!1),ws=Sr(null),As=null,Ss=null,Es=null;function Cs(){Es=Ss=As=null}function Ts(e){var t=ws.current;Er(ws),e._currentValue=t}function Ms(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){As=e,Es=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===As)throw Error(s(308));Ss=e,As.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Rs=null;function Ls(e){null===Rs?Rs=[e]:Rs.push(e)}function js(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ls(t)):(n.next=r.next,r.next=n),t.interleaved=n,Is(e,i)}function Is(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ks=!1;function Bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Ml)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Is(e,n)}return null===(r=i.interleaved)?(t.next=t,Ls(i)):(t.next=r.next,r.next=t),i.interleaved=t,Is(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,xt(e,n)}}function zs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,i){var r=e.updateQueue;ks=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,d,h):m)||void 0===h)break e;d=D({},d,h);break e;case 2:ks=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Bl|=a,e.lanes=a,e.memoizedState=d}}function Gs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ws={},Vs=Sr(Ws),Js=Sr(Ws),Ys=Sr(Ws);function Xs(e){if(e===Ws)throw Error(s(174));return e}function Zs(e,t){switch(Cr(Ys,t),Cr(Js,e),Cr(Vs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Vs),Cr(Vs,t)}function qs(){Er(Vs),Er(Js),Er(Ys)}function Ks(e){Xs(Ys.current);var t=Xs(Vs.current),n=le(t,e.type);t!==n&&(Cr(Js,e),Cr(Vs,n))}function Qs(e){Js.current===e&&(Er(Vs),Er(Js))}var $s=Sr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=_.ReactCurrentDispatcher,ra=_.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function pa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function fa(e,t,n,i,r,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Qa:$a,e=n(i,r),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,r)}while(ua)}if(ia.current=Ka,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function xa(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ya(e,t){return"function"===typeof t?t(e):t}function _a(e){var t=xa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,aa.lanes|=d,Bl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(yo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Bl|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ba(e){var t=xa(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(yo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function Aa(e,t){var n=aa,i=xa(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,yo=!0),i=i.queue,ka(Ca.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Na(9,Ea.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&sa)||Sa(n,t,r)}return r}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,i){t.value=n,t.getSnapshot=i,Ta(t)&&Ma(e)}function Ca(e,t,n){return n(function(){Ta(t)&&Ma(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Ma(e){var t=Is(e,1);null!==t&&nc(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,aa,e),[t.memoizedState,e]}function Na(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ra(){return xa().memoizedState}function La(e,t,n,i){var r=va();aa.flags|=e,r.memoizedState=Na(1|t,n,void 0,void 0===i?null:i)}function ja(e,t,n,i){var r=xa();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&ma(i,a.deps))return void(r.memoizedState=Na(t,n,s,i))}aa.flags|=e,r.memoizedState=Na(1|t,n,s,i)}function Ia(e,t){return La(8390656,8,e,t)}function ka(e,t){return ja(2048,8,e,t)}function Ba(e,t){return ja(4,2,e,t)}function Da(e,t){return ja(4,4,e,t)}function Oa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4,4,Oa.bind(null,t,e),n)}function Ua(){}function za(e,t){var n=xa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=xa();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ga(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(oi(n,t)||(n=ft(),aa.lanes|=n,Bl|=n,e.baseState=!0),t)}function Wa(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=ra.transition;ra.transition={};try{e(!1),t()}finally{yt=n,ra.transition=i}}function Va(){return xa().memoizedState}function Ja(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Za(t,n);else if(null!==(n=js(e,t,n,i))){nc(n,e,i,ec()),qa(n,t,i)}}function Ya(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Za(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,Ls(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=js(e,t,r,i))&&(nc(n,e,i,r=ec()),qa(n,t,i))}}function Xa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Za(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Ka={readContext:Ns,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Qa={readContext:Ns,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4194308,4,Oa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ja.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Wa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&sa)||Sa(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ia(Ca.bind(null,i,a,e),[e]),i.flags|=2048,Na(9,Ea.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Pl.identifierPrefix;if(rs){var n=Kr;t=":"+t+"R"+(n=(qr&~(1<<32-at(qr)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$a={readContext:Ns,useCallback:za,useContext:Ns,useEffect:ka,useImperativeHandle:Fa,useInsertionEffect:Ba,useLayoutEffect:Da,useMemo:Ha,useReducer:_a,useRef:Ra,useState:function(){return _a(ya)},useDebugValue:Ua,useDeferredValue:function(e){return Ga(xa(),oa.memoizedState,e)},useTransition:function(){return[_a(ya)[0],xa().memoizedState]},useMutableSource:wa,useSyncExternalStore:Aa,useId:Va,unstable_isNewReconciler:!1},eo={readContext:Ns,useCallback:za,useContext:Ns,useEffect:ka,useImperativeHandle:Fa,useInsertionEffect:Ba,useLayoutEffect:Da,useMemo:Ha,useReducer:ba,useRef:Ra,useState:function(){return ba(ya)},useDebugValue:Ua,useDeferredValue:function(e){var t=xa();return null===oa?t.memoizedState=e:Ga(t,oa.memoizedState,e)},useTransition:function(){return[ba(ya)[0],xa().memoizedState]},useMutableSource:wa,useSyncExternalStore:Aa,useId:Va,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Os(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,r))&&(nc(t,e,r,i),Us(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Os(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Fs(e,s,r))&&(nc(t,e,r,i),Us(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Os(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Fs(e,r,i))&&(nc(t,e,i,n),Us(t,e,i))}};function ro(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(e,t,n){var i=!1,r=Tr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(r=Lr(t)?Nr:Mr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Rr(e,r):Tr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Bs(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ns(s):(s=Lr(t)?Nr:Mr.current,r.context=Rr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&io.enqueueReplaceState(r,r.state,null),Hs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Vl=i),uo(0,t)},n}function mo(e,t,n){(n=Os(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Fs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var xo=_.ReactCurrentOwner,yo=!1;function _o(e,t,n,i){t.child=null===e?bs(t,null,n,i):_s(t,e.child,n,i)}function bo(e,t,n,i,r){n=n.render;var s=t.ref;return Ps(t,r),i=fa(e,t,n,i,s,r),n=ga(),null===e||yo?(rs&&n&&es(t),t.flags|=1,_o(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function wo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ao(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=jc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(yo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(yo=!0)}}return Co(e,t,n,i,r)}function So(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(jl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(jl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Cr(jl,Ll),Ll|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Cr(jl,Ll),Ll|=i;return _o(e,t,r,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,i,r){var s=Lr(n)?Nr:Mr.current;return s=Rr(t,s),Ps(t,r),n=fa(e,t,n,i,s,r),i=ga(),null===e||yo?(rs&&i&&es(t),t.flags|=1,_o(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function To(e,t,n,i,r){if(Lr(n)){var s=!0;Br(t)}else s=!1;if(Ps(t,r),null===t.stateNode)Go(e,t),so(t,n,i),oo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Rr(t,c=Lr(n)?Nr:Mr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),ks=!1;var h=t.memoizedState;a.state=h,Hs(t,i,a,r),l=t.memoizedState,o!==i||h!==l||Pr.current||ks?("function"===typeof u&&(no(t,n,u,i),l=t.memoizedState),(o=ks||ro(t,n,o,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Ds(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Rr(t,l=Lr(n)?Nr:Mr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,i,l),ks=!1,h=t.memoizedState,a.state=h,Hs(t,i,a,r);var m=t.memoizedState;o!==d||h!==m||Pr.current||ks?("function"===typeof p&&(no(t,n,p,i),m=t.memoizedState),(c=ks||ro(t,n,c,i,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),a.props=i,a.state=m,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Mo(e,t,n,i,s,r)}function Mo(e,t,n,i,r,s){Eo(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&Dr(t,n,!1),Wo(e,t,s);i=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=_s(t,e.child,null,s),t.child=_s(t,null,o,s)):_o(e,t,o,s),t.memoizedState=i.state,r&&Dr(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Ir(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ir(0,t.context,!1),Zs(e,t.containerInfo)}function No(e,t,n,i,r){return ps(),ms(r),t.flags|=256,_o(e,t,n,i),t.child}var Ro,Lo,jo,Io,ko={dehydrated:null,treeContext:null,retryLane:0};function Bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Do(e,t,n){var i,r=t.pendingProps,a=$s.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cr($s,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Bc(l,r,0,null),e=kc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Bo(n),t.memoizedState=ko,e):Oo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,i=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Bc({mode:"visible",children:i.children},r,0,null),(a=kc(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&_s(t,e.child,null,o),t.child.memoizedState=Bo(o),t.memoizedState=ko,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Fo(e,t,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(i=Pl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Is(e,r),nc(i,e,r,-1))}return fc(),Fo(e,t,o,i=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Yr[Xr++]=qr,Yr[Xr++]=Kr,Yr[Xr++]=Zr,qr=e.id,Kr=e.overflow,Zr=t),t=Oo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=jc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=jc(i,o):(o=kc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Bo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=ko,r}return e=(o=e.child).sibling,r=jc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Oo(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,i){return null!==i&&ms(i),_s(t,e.child,null,n),(e=Oo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ms(e.return,t,n)}function zo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ho(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(_o(e,t,i.children,n),0!==(2&(i=$s.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cr($s,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),zo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Go(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Jo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Yo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(t),null;case 1:case 17:return Lr(t.type)&&jr(),Jo(t),null;case 3:return i=t.stateNode,qs(),Er(Pr),Er(Mr),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Lo(e,t),Jo(t),null;case 5:Qs(t);var r=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)jo(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Jo(t),null}if(e=Xs(Vs.current),ds(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hr]=t,i[pr]=a,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<ki.length;r++)Fi(ki[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":q(i,a),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Fi("invalid",i);break;case"textarea":re(i,a),Fi("invalid",i)}for(var l in xe(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qi(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":J(i),$(i,a,!0);break;case"textarea":J(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<ki.length;r++)Fi(ki[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":q(e,i),r=Z(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=D({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(a in xe(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fi("scroll",e):null!=u&&y(e,a,u,l))}switch(n){case"input":J(e),$(e,i,!1);break;case"textarea":J(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Jo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Vs.current),ds(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Jo(t),null;case 13:if(Er($s),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=ds(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hr]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Il&&(Il=3):fc())),null!==t.updateQueue&&(t.flags|=4),Jo(t),null);case 4:return qs(),Lo(e,t),null===e&&Hi(t.stateNode.containerInfo),Jo(t),null;case 10:return Ts(t.type._context),Jo(t),null;case 19:if(Er($s),null===(a=t.memoizedState))return Jo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Vo(a,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Vo(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr($s,1&$s.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Hl&&(t.flags|=128,i=!0,Vo(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return Jo(t),null}else 2*Ke()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,i=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,n=$s.current,Cr($s,i?1&n|2:1&n),t):(Jo(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Jo(t),6&t.subtreeFlags&&(t.flags|=8192)):Jo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xo(e,t){switch(ts(t),t.tag){case 1:return Lr(t.type)&&jr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return qs(),Er(Pr),Er(Mr),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Er($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er($s),null;case 4:return qs(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},jo=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Xs(Vs.current);var s,a=null;switch(n){case"input":r=Z(e,r),i=Z(e,i),a=[];break;case"select":r=D({},r,{value:void 0}),i=D({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in xe(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Io=function(e,t,n,i){n!==i&&(t.flags|=4)};var Zo=!1,qo=!1,Ko="function"===typeof WeakSet?WeakSet:Set,Qo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Sc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Sc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[fr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:qo||$o(n,t);case 6:var i=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=i)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=i,dl=r;break;case 0:case 11:case 14:case 15:if(!qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!qo&&($o(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(qo=(i=qo)||null!==n.memoizedState,hl(e,t,n),qo=i):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ko),t.forEach(function(t){var i=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(a,o,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&i&&null!==n&&$o(n,n.return);break;case 5:if(fl(t,e),vl(e),512&i&&null!==n&&$o(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Sc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(r,a),ye(l,o);var u=ye(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):y(r,d,h,u)}switch(l){case"input":Q(r,a);break;case"textarea":se(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(r,!!a.multiple,m,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(zl=Ke())),4&i&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(qo=(u=qo)||d,fl(t,e),qo=u):fl(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qo=e,d=e.child;null!==d;){for(h=Qo=d;null!==Qo;){switch(m=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$o(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){i=p,n=p.return;try{t=i,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Sc(i,n,g)}}break;case 5:$o(p,p.return);break;case 22:if(null!==p.memoizedState){bl(h);continue}}null!==m?(m.return=p,Qo=m):bl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&i&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Qo=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Qo;){var r=Qo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Zo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||qo;o=Zo;var c=qo;if(Zo=a,(qo=l)&&!c)for(Qo=r;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?wl(r):null!==l?(l.return=a,Qo=l):wl(r);for(;null!==s;)Qo=s,yl(s,t,n),s=s.sibling;Qo=r,Zo=o,qo=c}_l(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Qo=s):_l(e)}}function _l(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!qo)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Gs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(s(163))}qo||512&t.flags&&rl(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function bl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Sc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){Sc(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Al,Sl=Math.ceil,El=_.ReactCurrentDispatcher,Cl=_.ReactCurrentOwner,Tl=_.ReactCurrentBatchConfig,Ml=0,Pl=null,Nl=null,Rl=0,Ll=0,jl=Sr(0),Il=0,kl=null,Bl=0,Dl=0,Ol=0,Fl=null,Ul=null,zl=0,Hl=1/0,Gl=null,Wl=!1,Vl=null,Jl=null,Yl=!1,Xl=null,Zl=0,ql=0,Kl=null,Ql=-1,$l=0;function ec(){return 0!==(6&Ml)?Ke():-1!==Ql?Ql:Ql=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Rl?Rl&-Rl:null!==fs.transition?(0===$l&&($l=ft()),$l):0!==(e=yt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function nc(e,t,n,i){if(50<ql)throw ql=0,Kl=null,Error(s(185));vt(e,n,i),0!==(2&Ml)&&e===Pl||(e===Pl&&(0===(2&Ml)&&(Dl|=n),4===Il&&oc(e,Rl)),ic(e,i),1===n&&0===Ml&&0===(1&t.mode)&&(Hl=Ke()+500,Fr&&Hr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ht(e,e===Pl?Rl:0);if(0===i)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Fr=!0,zr(e)}(lc.bind(null,e)):zr(lc.bind(null,e)),ar(function(){0===(6&Ml)&&Hr()}),n=null;else{switch(_t(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,$l=0,0!==(6&Ml))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=ht(e,e===Pl?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Ml;Ml|=2;var a=mc();for(Pl===e&&Rl===t||(Gl=null,Hl=Ke()+500,hc(e,t));;)try{xc();break}catch(l){pc(e,l)}Cs(),El.current=a,Ml=r,null!==Nl?t=0:(Pl=null,Rl=0,t=Il)}if(0!==t){if(2===t&&(0!==(r=mt(e))&&(i=r,t=sc(e,r))),1===t)throw n=kl,hc(e,0),oc(e,i),ic(e,Ke()),n;if(6===t)oc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(a=mt(e))&&(i=a,t=sc(e,a))),1===t))throw n=kl,hc(e,0),oc(e,i),ic(e,Ke()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:bc(e,Ul,Gl);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=zl+500-Ke())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(bc.bind(null,e,Ul,Gl),t);break}bc(e,Ul,Gl);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Ke()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){e.timeoutHandle=ir(bc.bind(null,e,Ul,Gl),i);break}bc(e,Ul,Gl);break;default:throw Error(s(329))}}}return ic(e,Ke()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ol,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Ml))throw Error(s(327));wc();var t=ht(e,0);if(0===(1&t))return ic(e,Ke()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=mt(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=kl,hc(e,0),oc(e,t),ic(e,Ke()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Ul,Gl),ic(e,Ke()),null}function cc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Hl=Ke()+500,Fr&&Hr())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Ml)&&wc();var t=Ml;Ml|=1;var n=Tl.transition,i=yt;try{if(Tl.transition=null,yt=1,e)return e()}finally{yt=i,Tl.transition=n,0===(6&(Ml=t))&&Hr()}}function dc(){Ll=jl.current,Er(jl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Nl)for(n=Nl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&jr();break;case 3:qs(),Er(Pr),Er(Mr),na();break;case 5:Qs(i);break;case 4:qs();break;case 13:case 19:Er($s);break;case 10:Ts(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Nl=e=jc(e.current,null),Rl=Ll=t,Il=0,kl=null,Ol=Dl=Bl=0,Ul=Fl=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(i=(n=Rs[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Rs=null}return e}function pc(e,t){for(;;){var n=Nl;try{if(Cs(),ia.current=Ka,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Cl.current=null,null===n||null===n.return){Il=1,kl=t,Nl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&fo(a,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,u,t),fc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ms(lo(c,l));break e}}a=c=lo(c,l),4!==Il&&(Il=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(0,c,t));break e;case 1:l=c;var x=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Jl||!Jl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}_c(n)}catch(_){t=_,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function mc(){var e=El.current;return El.current=Ka,null===e?Ka:e}function fc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Pl||0===(268435455&Bl)&&0===(268435455&Dl)||oc(Pl,Rl)}function gc(e,t){var n=Ml;Ml|=2;var i=mc();for(Pl===e&&Rl===t||(Gl=null,hc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(Cs(),Ml=n,El.current=i,null!==Nl)throw Error(s(261));return Pl=null,Rl=0,Il}function vc(){for(;null!==Nl;)yc(Nl)}function xc(){for(;null!==Nl&&!Ze();)yc(Nl)}function yc(e){var t=Al(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?_c(e):Nl=t,Cl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ll)))return void(Nl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Il=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Il&&(Il=5)}function bc(e,t,n){var i=yt,r=Tl.transition;try{Tl.transition=null,yt=1,function(e,t,n,i){do{wc()}while(null!==Xl);if(0!==(6&Ml))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===Pl&&(Nl=Pl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,function(){return wc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=yt;yt=1;var l=Ml;Ml|=4,Cl.current=null,function(e,t){if(er=Wt,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=o),p===a&&++d===i&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,n),gl(n,e),mi(tr),Wt=!!er,tr=er=null,e.current=n,xl(n,e,r),qe(),Ml=l,yt=o,Tl.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Zl=r),a=e.pendingLanes,0===a&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ke()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Zl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Kl?ql++:(ql=0,Kl=e):ql=0,Hr()}(e,t,n,i)}finally{Tl.transition=r,yt=i}return null}function wc(){if(null!==Xl){var e=_t(Zl),t=Tl.transition,n=yt;try{if(Tl.transition=null,yt=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Zl=0,0!==(6&Ml))throw Error(s(331));var r=Ml;for(Ml|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var d=Qo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Qo=h;else for(;null!==Qo;){var p=(d=Qo).sibling,m=d.return;if(sl(d),d===u){Qo=null;break}if(null!==p){p.return=m,Qo=p;break}Qo=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Qo=x;break e}Qo=a.return}}var y=e.current;for(Qo=y;null!==Qo;){var _=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,Qo=_;else e:for(o=y;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Sc(l,l.return,w)}if(l===o){Qo=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qo=b;break e}Qo=l.return}}if(Ml=r,Hr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{yt=n,Tl.transition=t}}return!1}function Ac(e,t,n){e=Fs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jl||!Jl.has(i))){t=Fs(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Rl&n)===n&&(4===Il||3===Il&&(130023424&Rl)===Rl&&500>Ke()-zl?hc(e,0):Ol|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Is(e,t))&&(vt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Cc(e,n)}function Pc(e,t){return Ye(e,t)}function Nc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new Nc(e,t,n,i)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Lc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case A:return kc(n.children,r,a,t);case S:o=8,r|=8;break;case E:return(e=Rc(12,n,t,2|r)).elementType=E,e.lanes=a,e;case P:return(e=Rc(13,n,t,r)).elementType=P,e.lanes=a,e;case N:return(e=Rc(19,n,t,r)).elementType=N,e.lanes=a,e;case j:return Bc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case T:o=9;break e;case M:o=11;break e;case R:o=14;break e;case L:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function kc(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function Bc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Oc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bs(s),e}function zc(e){if(!e)return Tr;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Lr(n))return kr(e,n,t)}return t}function Hc(e,t,n,i,r,s,a,o,l){return(e=Uc(n,i,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Os(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Fs(n,s,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Gc(e,t,n,i){var r=t.current,s=ec(),a=tc(r);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Fs(r,t,a))&&(nc(e,r,a,s),Us(e,r,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ps();break;case 5:Ks(t);break;case 1:Lr(t.type)&&Br(t);break;case 4:Zs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Cr(ws,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Cr($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Do(e,t,n):(Cr($s,1&$s.current),null!==(e=Wo(e,t,n))?e.sibling:null);Cr($s,1&$s.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ho(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr($s,$s.current),i)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Wo(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,rs&&0!==(1048576&t.flags)&&$r(t,Jr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Go(e,t),e=t.pendingProps;var r=Rr(t,Mr.current);Ps(t,n),r=fa(null,t,i,e,r,n);var a=ga();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(i)?(a=!0,Br(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Bs(t),r.updater=io,t.stateNode=r,r._reactInternals=t,oo(t,i,e,n),t=Mo(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),_o(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Go(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(i),e=to(i,e),r){case 0:t=Co(null,t,i,e,n);break e;case 1:t=To(null,t,i,e,n);break e;case 11:t=bo(null,t,i,e,n);break e;case 14:t=wo(null,t,i,to(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Co(e,t,i,r=t.elementType===i?r:to(i,r),n);case 1:return i=t.type,r=t.pendingProps,To(e,t,i,r=t.elementType===i?r:to(i,r),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,Ds(e,t),Hs(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=No(e,t,i,n,r=lo(Error(s(423)),t));break e}if(i!==r){t=No(e,t,i,n,r=lo(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=bs(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){t=Wo(e,t,n);break e}_o(e,t,i,n)}t=t.child}return t;case 5:return Ks(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Eo(e,t),_o(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Do(e,t,n);case 4:return Zs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=_s(t,null,i,n):_o(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,bo(e,t,i,r=t.elementType===i?r:to(i,r),n);case 7:return _o(e,t,t.pendingProps,n),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Cr(ws,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Pr.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Os(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ms(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ms(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}_o(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ps(t,n),i=i(r=Ns(r)),t.flags|=1,_o(e,t,i,n),t.child;case 14:return r=to(i=t.type,t.pendingProps),wo(e,t,i,r=to(i.type,r),n);case 15:return Ao(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:to(i,r),Go(e,t),t.tag=1,Lr(i)?(e=!0,Br(t)):e=!1,Ps(t,n),so(t,i,r),oo(t,i,r,n),Mo(null,t,i,!0,e,n);case 19:return Ho(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function $c(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}Gc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Wc(a);s.call(e)}}var a=Hc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[mr]=a.current,Hi(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Wc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mr]=l.current,Hi(8===e.nodeType?e.parentNode:e),uc(function(){Gc(t,l,n,i)}),l}(n,t,e,r,i);return Wc(a)}Zc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},Zc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Gc(null,e,null,null)}),t[mr]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&Dt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(xt(t,1|n),ic(t,Ke()),0===(6&Ml)&&(Hl=Ke()+500,Hr()))}break;case 13:uc(function(){var t=Is(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Jc(e,1)}},wt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)nc(t,e,134217728,ec());Jc(e,134217728)}},At=function(e){if(13===e.tag){var t=tc(e),n=Is(e,t);if(null!==n)nc(n,e,t,ec());Jc(e,t)}},St=function(){return yt},Et=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=br(i);if(!r)throw Error(s(90));Y(i),Q(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[yr,_r,br,Ce,Te,cc]},tu={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(s(299));var n=!1,i="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[mr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Kc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,r,0,a,o),e[mr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Zc(t)},t.render=function(e,t,n){if(!Kc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Kc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{"use strict";var i=n(119);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},403:e=>{e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!o(c))return!1;var u=e[c],d=t[c];if(!1===(r=n?n.call(i,u,d,c):void 0)||void 0===r&&u!==d)return!1}return!0}},414:(e,t,n)=>{"use strict";e.exports=n(654)},473:(e,t,n)=>{e.exports=function(e){var t={},i=n(950),r=n(340),s=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=b&&e[b]||e["@@iterator"])?e:null}function A(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case m:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case f:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:A(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return A(e(t))}catch(n){}}return null}function S(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function E(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function C(e){if(E(e)!==e)throw Error(a(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=E(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return C(r),e;if(s===i)return C(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function M(e){return null!==(e=T(e))?P(e):null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=P(e);if(null!==t)return t;e=e.sibling}return null}function N(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=N(e);if(null!==t)return t}e=e.sibling}return null}var R,L=Array.isArray,j=e.getPublicInstance,I=e.getRootHostContext,k=e.getChildHostContext,B=e.prepareForCommit,D=e.resetAfterCommit,O=e.createInstance,F=e.appendInitialChild,U=e.finalizeInitialChildren,z=e.prepareUpdate,H=e.shouldSetTextContent,G=e.createTextInstance,W=e.scheduleTimeout,V=e.cancelTimeout,J=e.noTimeout,Y=e.isPrimaryRenderer,X=e.supportsMutation,Z=e.supportsPersistence,q=e.supportsHydration,K=e.getInstanceFromNode,Q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,se=e.getBoundingRect,ae=e.getTextContent,oe=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,de=e.appendChild,he=e.appendChildToContainer,pe=e.commitTextUpdate,me=e.commitMount,fe=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,xe=e.removeChild,ye=e.removeChildFromContainer,_e=e.resetTextContent,be=e.hideInstance,we=e.hideTextInstance,Ae=e.unhideInstance,Se=e.unhideTextInstance,Ee=e.clearContainer,Ce=e.cloneInstance,Te=e.createContainerChildSet,Me=e.appendChildToContainerChildSet,Pe=e.finalizeContainerChildren,Ne=e.replaceContainerChildren,Re=e.cloneHiddenInstance,Le=e.cloneHiddenTextInstance,je=e.canHydrateInstance,Ie=e.canHydrateTextInstance,ke=e.canHydrateSuspenseInstance,Be=e.isSuspenseInstancePending,De=e.isSuspenseInstanceFallback,Oe=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,Ue=e.getFirstHydratableChild,ze=e.getFirstHydratableChildWithinContainer,He=e.getFirstHydratableChildWithinSuspenseInstance,Ge=e.hydrateInstance,We=e.hydrateTextInstance,Ve=e.hydrateSuspenseInstance,Je=e.getNextHydratableInstanceAfterSuspenseInstance,Ye=e.commitHydratedContainer,Xe=e.commitHydratedSuspenseInstance,Ze=e.clearSuspenseBoundary,qe=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],st=-1;function at(e){return{current:e}}function ot(e){0>st||(e.current=rt[st],rt[st]=null,st--)}function lt(e,t){st++,rt[st]=e.current,e.current=t}var ct={},ut=at(ct),dt=at(!1),ht=ct;function pt(e,t){var n=e.type.contextTypes;if(!n)return ct;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ft(){ot(dt),ot(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(a(168));lt(ut,t),lt(dt,n)}function vt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,S(e)||"Unknown",r));return s({},n,i)}function xt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,ht=ut.current,lt(ut,e),lt(dt,dt.current),!0}function yt(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=vt(e,t,ht),i.__reactInternalMemoizedMergedChildContext=e,ot(dt),ot(ut),lt(ut,e)):ot(dt),lt(dt,n)}var _t=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bt(e)/wt|0)|0},bt=Math.log,wt=Math.LN2;var At=64,St=4194304;function Et(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=Et(o):0!==(s&=a)&&(i=Et(s))}else 0!==(a=n&~r)?i=Et(a):0!==s&&(i=Et(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-_t(t)),i|=e[n],t&=~r;return i}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-_t(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-_t(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Lt=0;function jt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var It=r.unstable_scheduleCallback,kt=r.unstable_cancelCallback,Bt=r.unstable_shouldYield,Dt=r.unstable_requestPaint,Ot=r.unstable_now,Ft=r.unstable_ImmediatePriority,Ut=r.unstable_UserBlockingPriority,zt=r.unstable_NormalPriority,Ht=r.unstable_IdlePriority,Gt=null,Wt=null;var Vt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Jt=null,Yt=!1,Xt=!1;function Zt(e){null===Jt?Jt=[e]:Jt.push(e)}function qt(){if(!Xt&&null!==Jt){Xt=!0;var e=0,t=Lt;try{var n=Jt;for(Lt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Jt=null,Yt=!1}catch(r){throw null!==Jt&&(Jt=Jt.slice(e+1)),It(Ft,qt),r}finally{Lt=t,Xt=!1}}return null}var Kt=o.ReactCurrentBatchConfig;function Qt(e,t){if(Vt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!Vt(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=at(null),nn=null,rn=null,sn=null;function an(){sn=rn=nn=null}function on(e,t,n){Y?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;ot(tn),Y?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,sn=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Br=!0),e.firstContext=null)}function dn(e){var t=Y?e._currentValue:e._currentValue2;if(sn!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,pn=!1;function mn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Xs&&0!==(1&e.mode)&&0===(2&Ys)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function xn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function yn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _n(e,t,n,i){var r=e.updateQueue;pn=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?a=u:o.next=u,o=c;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===l?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(null!==a){var h=r.baseState;for(o=0,d=u=c=null,l=a;;){var p=l.lane,m=l.eventTime;if((i&p)===p){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,g=l;switch(p=t,m=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(m,h,p);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(m,h,p):f)||void 0===p)break e;h=s({},h,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(u=d=m,c=h):d=d.next=m,o|=p;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(p=l).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===d&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);ta|=o,e.lanes=o,e.memoizedState=h}}function bn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var wn=(new i.Component).refs;function An(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:s({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Sn={isMounted:function(e){return!!(e=e._reactInternals)&&E(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=_a(),r=ba(e),s=gn(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),vn(e,s),null!==(t=wa(e,r,i))&&xn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=_a(),r=ba(e),s=gn(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),vn(e,s),null!==(t=wa(e,r,i))&&xn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_a(),i=ba(e),r=gn(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),vn(e,r),null!==(t=wa(e,i,n))&&xn(t,e,i)}};function En(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Qt(n,i)||!Qt(r,s))}function Cn(e,t,n){var i=!1,r=ct,s=t.contextType;return"object"===typeof s&&null!==s?s=dn(s):(r=mt(t)?ht:ut.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?pt(e,r):ct),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Sn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Tn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Sn.enqueueReplaceState(t,t.state,null)}function Mn(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=wn,mn(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=dn(s):(s=mt(t)?ht:ut.current,r.context=pt(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(An(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Sn.enqueueReplaceState(r,r.state,null),_n(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var Pn=[],Nn=0,Rn=null,Ln=0,jn=[],In=0,kn=null,Bn=1,Dn="";function On(e,t){Pn[Nn++]=Ln,Pn[Nn++]=Rn,Rn=e,Ln=t}function Fn(e,t,n){jn[In++]=Bn,jn[In++]=Dn,jn[In++]=kn,kn=e;var i=Bn;e=Dn;var r=32-_t(i)-1;i&=~(1<<r),n+=1;var s=32-_t(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Bn=1<<32-_t(t)+r|n<<r|i,Dn=s+e}else Bn=1<<s|n<<r|i,Dn=e}function Un(e){null!==e.return&&(On(e,1),Fn(e,1,0))}function zn(e){for(;e===Rn;)Rn=Pn[--Nn],Pn[Nn]=null,Ln=Pn[--Nn],Pn[Nn]=null;for(;e===kn;)kn=jn[--In],jn[In]=null,Dn=jn[--In],jn[In]=null,Bn=jn[--In],jn[In]=null}var Hn=null,Gn=null,Wn=!1,Vn=!1,Jn=null;function Yn(e,t){var n=Ka(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Xn(e,t){switch(e.tag){case 5:return null!==(t=je(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=Ue(t),!0);case 6:return null!==(t=Ie(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=null,!0);case 13:if(null!==(t=ke(t))){var n=null!==kn?{id:Bn,overflow:Dn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ka(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Gn=null,!0}return!1;default:return!1}}function Zn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function qn(e){if(Wn){var t=Gn;if(t){var n=t;if(!Xn(e,t)){if(Zn(e))throw Error(a(418));t=Fe(n);var i=Hn;t&&Xn(e,t)?Yn(i,n):(e.flags=-4097&e.flags|2,Wn=!1,Hn=e)}}else{if(Zn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Wn=!1,Hn=e}}}function Kn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Qn(e){if(!q||e!==Hn)return!1;if(!Wn)return Kn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ke(e.type)&&!H(e.type,e.memoizedProps))){var t=Gn;if(t){if(Zn(e)){for(e=Gn;e;)e=Fe(e);throw Error(a(418))}for(;t;)Yn(e,t),t=Fe(t)}}if(Kn(e),13===e.tag){if(!q)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Gn=Je(e)}else Gn=Hn?Fe(e.stateNode):null;return!0}function $n(){q&&(Gn=Hn=null,Vn=Wn=!1)}function ei(e){null===Jn?Jn=[e]:Jn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===wn&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=$a(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function d(e,t,n,i){return null===t||6!==t.tag?((t=io(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n,i){var s=n.type;return s===u?m(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===y&&ii(s)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=eo(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function p(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ro(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function m(e,t,n,i,s){return null===t||7!==t.tag?((t=to(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=io(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case c:return(t=ro(t,e.mode,n)).return=e,t;case y:return f(e,(0,t._init)(t._payload),n)}if(L(t)||w(t))return(t=to(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function g(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:d(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?h(e,t,n,i):null;case c:return n.key===r?p(e,t,n,i):null;case y:return g(e,t,(r=n._init)(n._payload),i)}if(L(n)||w(n))return null!==r?null:m(e,t,n,i,null);ni(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return d(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case c:return p(t,e=e.get(null===i.key?n:i.key)||null,i,r);case y:return v(e,t,n,(0,i._init)(i._payload),r)}if(L(i)||w(i))return m(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function x(r,a,o,l){for(var c=null,u=null,d=a,h=a=0,p=null;null!==d&&h<o.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var m=g(r,d,o[h],l);if(null===m){null===d&&(d=p);break}e&&d&&null===m.alternate&&t(r,d),a=s(m,a,h),null===u?c=m:u.sibling=m,u=m,d=p}if(h===o.length)return n(r,d),Wn&&On(r,h),c;if(null===d){for(;h<o.length;h++)null!==(d=f(r,o[h],l))&&(a=s(d,a,h),null===u?c=d:u.sibling=d,u=d);return Wn&&On(r,h),c}for(d=i(r,d);h<o.length;h++)null!==(p=v(d,r,h,o[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),a=s(p,a,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(r,e)}),Wn&&On(r,h),c}function _(r,o,l,c){var u=w(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,h=o,p=o=0,m=null,x=l.next();null!==h&&!x.done;p++,x=l.next()){h.index>p?(m=h,h=null):m=h.sibling;var y=g(r,h,x.value,c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),o=s(y,o,p),null===d?u=y:d.sibling=y,d=y,h=m}if(x.done)return n(r,h),Wn&&On(r,p),u;if(null===h){for(;!x.done;p++,x=l.next())null!==(x=f(r,x.value,c))&&(o=s(x,o,p),null===d?u=x:d.sibling=x,d=x);return Wn&&On(r,p),u}for(h=i(r,h);!x.done;p++,x=l.next())null!==(x=v(h,r,p,x.value,c))&&(e&&null!==x.alternate&&h.delete(null===x.key?p:x.key),o=s(x,o,p),null===d?u=x:d.sibling=x,d=x);return e&&h.forEach(function(e){return t(r,e)}),Wn&&On(r,p),u}return function e(i,s,a,d){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:e:{for(var h=a.key,p=s;null!==p;){if(p.key===h){if((h=a.type)===u){if(7===p.tag){n(i,p.sibling),(s=r(p,a.props.children)).return=i,i=s;break e}}else if(p.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===y&&ii(h)===p.type){n(i,p.sibling),(s=r(p,a.props)).ref=ti(i,p,a),s.return=i,i=s;break e}n(i,p);break}t(i,p),p=p.sibling}a.type===u?((s=to(a.props.children,i.mode,d,a.key)).return=i,i=s):((d=eo(a.type,a.key,a.props,null,i.mode,d)).ref=ti(i,s,a),d.return=i,i=d)}return o(i);case c:e:{for(p=a.key;null!==s;){if(s.key===p){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=ro(a,i.mode,d)).return=i,i=s}return o(i);case y:return e(i,s,(p=a._init)(a._payload),d)}if(L(a))return x(i,s,a,d);if(w(a))return _(i,s,a,d);ni(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=io(a,i.mode,d)).return=i,i=s),o(i)):n(i,s)}}var si=ri(!0),ai=ri(!1),oi={},li=at(oi),ci=at(oi),ui=at(oi);function di(e){if(e===oi)throw Error(a(174));return e}function hi(e,t){lt(ui,t),lt(ci,e),lt(li,oi),e=I(t),ot(li),lt(li,e)}function pi(){ot(li),ot(ci),ot(ui)}function mi(e){var t=di(ui.current),n=di(li.current);n!==(t=k(n,e.type,t))&&(lt(ci,e),lt(li,t))}function fi(e){ci.current===e&&(ot(li),ot(ci))}var gi=at(0);function vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Be(n)||De(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xi=[];function yi(){for(var e=0;e<xi.length;e++){var t=xi[e];Y?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}xi.length=0}var _i=o.ReactCurrentDispatcher,bi=o.ReactCurrentBatchConfig,wi=0,Ai=null,Si=null,Ei=null,Ci=!1,Ti=!1,Mi=0,Pi=0;function Ni(){throw Error(a(321))}function Ri(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Li(e,t,n,i,r,s){if(wi=s,Ai=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_i.current=null===e||null===e.memoizedState?mr:fr,e=n(i,r),Ti){s=0;do{if(Ti=!1,Mi=0,25<=s)throw Error(a(301));s+=1,Ei=Si=null,t.updateQueue=null,_i.current=gr,e=n(i,r)}while(Ti)}if(_i.current=pr,t=null!==Si&&null!==Si.next,wi=0,Ei=Si=Ai=null,Ci=!1,t)throw Error(a(300));return e}function ji(){var e=0!==Mi;return Mi=0,e}function Ii(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ei?Ai.memoizedState=Ei=e:Ei=Ei.next=e,Ei}function ki(){if(null===Si){var e=Ai.alternate;e=null!==e?e.memoizedState:null}else e=Si.next;var t=null===Ei?Ai.memoizedState:Ei.next;if(null!==t)Ei=t,Si=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Si=e).memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},null===Ei?Ai.memoizedState=Ei=e:Ei=Ei.next=e}return Ei}function Bi(e,t){return"function"===typeof t?t(e):t}function Di(e){var t=ki(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=Si,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((wi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,Ai.lanes|=d,ta|=d}u=u.next}while(null!==u&&u!==s);null===c?o=i:c.next=l,Vt(i,t.memoizedState)||(Br=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,Ai.lanes|=s,ta|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oi(e){var t=ki(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);Vt(s,t.memoizedState)||(Br=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Fi(){}function Ui(e,t){var n=Ai,i=ki(),r=t(),s=!Vt(i.memoizedState,r);if(s&&(i.memoizedState=r,Br=!0),i=i.queue,Ki(Gi.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==Ei&&1&Ei.memoizedState.tag){if(n.flags|=2048,Ji(9,Hi.bind(null,n,i,r,t),void 0,null),null===Xs)throw Error(a(349));0!==(30&wi)||zi(n,t,r)}return r}function zi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ai.updateQueue)?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hi(e,t,n,i){t.value=n,t.getSnapshot=i,Wi(t)&&wa(e,1,-1)}function Gi(e,t,n){return n(function(){Wi(t)&&wa(e,1,-1)})}function Wi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch(i){return!0}}function Vi(e){var t=Ii();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,Ai,e),[t.memoizedState,e]}function Ji(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Ai.updateQueue)?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Yi(){return ki().memoizedState}function Xi(e,t,n,i){var r=Ii();Ai.flags|=e,r.memoizedState=Ji(1|t,n,void 0,void 0===i?null:i)}function Zi(e,t,n,i){var r=ki();i=void 0===i?null:i;var s=void 0;if(null!==Si){var a=Si.memoizedState;if(s=a.destroy,null!==i&&Ri(i,a.deps))return void(r.memoizedState=Ji(t,n,s,i))}Ai.flags|=e,r.memoizedState=Ji(1|t,n,s,i)}function qi(e,t){return Xi(8390656,8,e,t)}function Ki(e,t){return Zi(2048,8,e,t)}function Qi(e,t){return Zi(4,2,e,t)}function $i(e,t){return Zi(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zi(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=ki();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=ki();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function sr(e,t){var n=Lt;Lt=0!==n&&4>n?n:4,e(!0);var i=bi.transition;bi.transition={};try{e(!1),t()}finally{Lt=n,bi.transition=i}}function ar(){return ki().memoizedState}function or(e,t,n){var i=ba(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(e)?ur(t,n):(dr(e,t,n),null!==(e=wa(e,i,n=_a()))&&hr(e,t,i))}function lr(e,t,n){var i=ba(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(e))ur(t,r);else{dr(e,t,r);var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Vt(o,a))return}catch(l){}null!==(e=wa(e,i,n=_a()))&&hr(e,t,i)}}function cr(e){var t=e.alternate;return e===Ai||null!==t&&t===Ai}function ur(e,t){Ti=Ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dr(e,t,n){null!==Xs&&0!==(1&e.mode)&&0===(2&Ys)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var pr={readContext:dn,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},mr={readContext:dn,useCallback:function(e,t){return Ii().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:qi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Xi(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xi(4,2,e,t)},useMemo:function(e,t){var n=Ii();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ii();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=or.bind(null,Ai,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ii().memoizedState=e},useState:Vi,useDebugValue:nr,useDeferredValue:function(e){var t=Vi(e),n=t[0],i=t[1];return qi(function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}},[e]),n},useTransition:function(){var e=Vi(!1),t=e[0];return e=sr.bind(null,e[1]),Ii().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Ai,r=Ii();if(Wn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Xs)throw Error(a(349));0!==(30&wi)||zi(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,qi(Gi.bind(null,i,s,e),[e]),i.flags|=2048,Ji(9,Hi.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Ii(),t=Xs.identifierPrefix;if(Wn){var n=Dn;t=":"+t+"R"+(n=(Bn&~(1<<32-_t(Bn)-1)).toString(32)+n),0<(n=Mi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fr={readContext:dn,useCallback:ir,useContext:dn,useEffect:Ki,useImperativeHandle:tr,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:Di,useRef:Yi,useState:function(){return Di(Bi)},useDebugValue:nr,useDeferredValue:function(e){var t=Di(Bi),n=t[0],i=t[1];return Ki(function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}},[e]),n},useTransition:function(){return[Di(Bi)[0],ki().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Ui,useId:ar,unstable_isNewReconciler:!1},gr={readContext:dn,useCallback:ir,useContext:dn,useEffect:Ki,useImperativeHandle:tr,useInsertionEffect:Qi,useLayoutEffect:$i,useMemo:rr,useReducer:Oi,useRef:Yi,useState:function(){return Oi(Bi)},useDebugValue:nr,useDeferredValue:function(e){var t=Oi(Bi),n=t[0],i=t[1];return Ki(function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}},[e]),n},useTransition:function(){return[Oi(Bi)[0],ki().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Ui,useId:ar,unstable_isNewReconciler:!1};function vr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r}}function xr(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yr,_r,br,wr,Ar="function"===typeof WeakMap?WeakMap:Map;function Sr(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ua||(ua=!0,da=i),xr(0,t)},n}function Er(e,t,n){(n=gn(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){xr(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){xr(0,t),"function"!==typeof i&&(null===ha?ha=new Set([this]):ha.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Cr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Ar;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Va.bind(null,e,t,n),t.then(e,e))}function Tr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Mr(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function Pr(e){e.flags|=4}function Nr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(X)yr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_r=function(){},br=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var s=t.stateNode,a=di(li.current);n=z(s,n,e,i,r,a),(t.updateQueue=n)&&Pr(t)}},wr=function(e,t,n,i){n!==i&&Pr(t)};else if(Z){yr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=Re(s,r.type,r.memoizedProps,r)),F(e,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=Le(s,r.memoizedProps,r)),F(e,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),yr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Rr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=Re(s,r.type,r.memoizedProps,r)),Me(e,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=Le(s,r.memoizedProps,r)),Me(e,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),Rr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_r=function(e,t){var n=t.stateNode;if(!Nr(e,t)){e=n.containerInfo;var i=Te(e);Rr(i,t,!1,!1),n.pendingChildren=i,Pr(t),Pe(e,i)}},br=function(e,t,n,i,r){var s=e.stateNode,a=e.memoizedProps;if((e=Nr(e,t))&&a===i)t.stateNode=s;else{var o=t.stateNode,l=di(li.current),c=null;a!==i&&(c=z(o,n,a,i,r,l)),e&&null===c?t.stateNode=s:(s=Ce(s,c,n,a,i,t,e,o),U(s,n,i,r,l)&&Pr(t),t.stateNode=s,e?Pr(t):yr(s,t,!1,!1))}},wr=function(e,t,n,i){n!==i?(e=di(ui.current),n=di(li.current),t.stateNode=G(i,e,n,t),Pr(t)):t.stateNode=e.stateNode}}else _r=function(){},br=function(){},wr=function(){};function Lr(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function jr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ir(e,t,n){var i=t.pendingProps;switch(zn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(t),null;case 1:case 17:return mt(t.type)&&ft(),jr(t),null;case 3:return i=t.stateNode,pi(),ot(dt),ot(ut),yi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Qn(t)?Pr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jn&&(Ta(Jn),Jn=null))),_r(e,t),jr(t),null;case 5:fi(t),n=di(ui.current);var r=t.type;if(null!==e&&null!=t.stateNode)br(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return jr(t),null}if(e=di(li.current),Qn(t)){if(!q)throw Error(a(175));e=Ge(t.stateNode,t.type,t.memoizedProps,n,e,t,!Vn),t.updateQueue=e,null!==e&&Pr(t)}else{var s=O(r,i,n,e,t);yr(s,t,!1,!1),t.stateNode=s,U(s,r,i,n,e)&&Pr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return jr(t),null;case 6:if(e&&null!=t.stateNode)wr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=di(ui.current),n=di(li.current),Qn(t)){if(!q)throw Error(a(176));if(e=t.stateNode,i=t.memoizedProps,(n=We(e,i,t,!Vn))&&null!==(r=Hn))switch(s=0!==(1&r.mode),r.tag){case 3:Qe(r.stateNode.containerInfo,e,i,s);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,s)}n&&Pr(t)}else t.stateNode=G(i,e,n,t)}return jr(t),null;case 13:if(ot(gi),i=t.memoizedState,Wn&&null!==Gn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Gn;e;)e=Fe(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Qn(t),null===e){if(!i)throw Error(a(318));if(!q)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));Ve(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return jr(t),null}return null!==Jn&&(Ta(Jn),Jn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Qn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gi.current)?0===$s&&($s=3):ka())),null!==t.updateQueue&&(t.flags|=4),jr(t),null);case 4:return pi(),_r(e,t),null===e&&Q(t.stateNode.containerInfo),jr(t),null;case 10:return ln(t.type._context),jr(t),null;case 19:if(ot(gi),null===(r=t.memoizedState))return jr(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)Lr(r,!1);else{if(0!==$s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=vi(e))){for(t.flags|=128,Lr(r,!1),null!==(e=s.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(s=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,r=s.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return lt(gi,1&gi.current|2),t.child}e=e.sibling}null!==r.tail&&Ot()>oa&&(t.flags|=128,i=!0,Lr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=vi(s))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Lr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!Wn)return jr(t),null}else 2*Ot()-r.renderingStartTime>oa&&1073741824!==n&&(t.flags|=128,i=!0,Lr(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ot(),t.sibling=null,e=gi.current,lt(gi,i?1&e|2:1&e),t):(jr(t),null);case 22:case 23:return Ra(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ks)&&(jr(t),X&&6&t.subtreeFlags&&(t.flags|=8192)):jr(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var kr=o.ReactCurrentOwner,Br=!1;function Dr(e,t,n,i){t.child=null===e?ai(t,null,n,i):si(t,e.child,n,i)}function Or(e,t,n,i,r){n=n.render;var s=t.ref;return un(t,r),i=Li(e,t,n,i,s,r),n=ji(),null===e||Br?(Wn&&n&&Un(t),t.flags|=1,Dr(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,rs(e,t,r))}function Fr(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Qa(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ur(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qt)(a,i)&&e.ref===t.ref)return rs(e,t,r)}return t.flags|=1,(e=$a(s,i)).ref=t.ref,e.return=t,t.child=e}function Ur(e,t,n,i,r){if(null!==e&&Qt(e.memoizedProps,i)&&e.ref===t.ref){if(Br=!1,0===(e.lanes&r))return t.lanes=e.lanes,rs(e,t,r);0!==(131072&e.flags)&&(Br=!0)}return Gr(e,t,n,i,r)}function zr(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Qs,Ks),Ks|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Qs,Ks),Ks|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==s?s.baseLanes:n,lt(Qs,Ks),Ks|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,lt(Qs,Ks),Ks|=i;return Dr(e,t,r,n),t.child}function Hr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gr(e,t,n,i,r){var s=mt(n)?ht:ut.current;return s=pt(t,s),un(t,r),n=Li(e,t,n,i,s,r),i=ji(),null===e||Br?(Wn&&i&&Un(t),t.flags|=1,Dr(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,rs(e,t,r))}function Wr(e,t,n,i,r){if(mt(n)){var s=!0;xt(t)}else s=!1;if(un(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Cn(t,n,i),Mn(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=dn(c):c=pt(t,c=mt(n)?ht:ut.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&Tn(t,a,i,c),pn=!1;var h=t.memoizedState;a.state=h,_n(t,i,a,r),l=t.memoizedState,o!==i||h!==l||dt.current||pn?("function"===typeof u&&(An(t,n,u,i),l=t.memoizedState),(o=pn||En(t,n,o,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,fn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=dn(l):l=pt(t,l=mt(n)?ht:ut.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&Tn(t,a,i,l),pn=!1,h=t.memoizedState,a.state=h,_n(t,i,a,r);var m=t.memoizedState;o!==d||h!==m||dt.current||pn?("function"===typeof p&&(An(t,n,p,i),m=t.memoizedState),(c=pn||En(t,n,c,i,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),a.props=i,a.state=m,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Vr(e,t,n,i,s,r)}function Vr(e,t,n,i,r,s){Hr(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&yt(t,n,!1),rs(e,t,s);i=t.stateNode,kr.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=si(t,e.child,null,s),t.child=si(t,null,o,s)):Dr(e,t,o,s),t.memoizedState=i.state,r&&yt(t,n,!0),t.child}function Jr(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hi(e,t.containerInfo)}function Yr(e,t,n,i,r){return $n(),ei(r),t.flags|=256,Dr(e,t,n,i),t.child}var Xr={dehydrated:null,treeContext:null,retryLane:0};function Zr(e){return{baseLanes:e,cachePool:null}}function qr(e,t,n){var i,r=t.pendingProps,s=gi.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),lt(gi,1&s),null===e)return qn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:De(e)?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=s):o=no(s,r,0,null),e=to(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Zr(n),t.memoizedState=Xr,e):Kr(t,s));if(null!==(s=e.memoizedState)){if(null!==(i=s.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,es(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=no({mode:"visible",children:r.children},s,0,null),(o=to(o,s,n,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&si(t,e.child,null,n),t.child.memoizedState=Zr(n),t.memoizedState=Xr,o);if(0===(1&t.mode))t=es(e,t,n,null);else if(De(i))t=es(e,t,n,Error(a(419)));else if(r=0!==(n&e.childLanes),Br||r){if(null!==(r=Xs)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(r=0!==(o&(r.suspendedLanes|n))?0:o)&&r!==s.retryLane&&(s.retryLane=r,wa(e,r,-1))}ka(),t=es(e,t,n,Error(a(421)))}else Be(i)?(t.flags|=128,t.child=e.child,t=Ya.bind(null,e),Oe(i,t),t=null):(n=s.treeContext,q&&(Gn=He(i),Hn=t,Wn=!0,Jn=null,Vn=!1,null!==n&&(jn[In++]=Bn,jn[In++]=Dn,jn[In++]=kn,Bn=n.id,Dn=n.overflow,kn=t)),(t=Kr(t,t.pendingProps.children)).flags|=4096);return t}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Zr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Xr,r):(n=Qr(e,t,r.children,n),t.memoizedState=null,n)}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Zr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Xr,r):(n=Qr(e,t,r.children,n),t.memoizedState=null,n)}function Kr(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qr(e,t,n,i){var r=e.child;return e=r.sibling,n=$a(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var s=t.mode,a=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&s)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$a(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==a?i=$a(a,i):(i=to(i,s,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function es(e,t,n,i){return null!==i&&ei(i),si(t,e.child,null,n),(e=Kr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ts(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),cn(e.return,t,n)}function ns(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function is(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Dr(e,t,i.children,n),0!==(2&(i=gi.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ts(e,n,t);else if(19===e.tag)ts(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lt(gi,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===vi(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ns(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===vi(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ns(t,!0,n,null,s);break;case"together":ns(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ta|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=$a(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$a(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ss(e,t){switch(zn(t),t.tag){case 1:return mt(t.type)&&ft(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pi(),ot(dt),ot(ut),yi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return fi(t),null;case 13:if(ot(gi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(gi),null;case 4:return pi(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Ra(),null;default:return null}}var as=!1,os=!1,ls="function"===typeof WeakSet?WeakSet:Set,cs=null;function us(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Wa(e,t,i)}else n.current=null}function ds(e,t,n){try{n()}catch(i){Wa(e,t,i)}}var hs=!1;function ps(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&ds(t,n,s)}r=r.next}while(r!==i)}}function ms(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function fs(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=j(n);else e=n;"function"===typeof t?t(e):t.current=e}}function gs(e,t,n){if(Wt&&"function"===typeof Wt.onCommitFiberUnmount)try{Wt.onCommitFiberUnmount(Gt,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,s=r.destroy;r=r.tag,void 0!==s&&(0!==(2&r)||0!==(4&r))&&ds(t,n,s),i=i.next}while(i!==e)}break;case 1:if(us(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Wa(t,n,a)}break;case 5:us(t,n);break;case 4:X?Ss(e,t,n):Z&&Z&&(t=t.stateNode.containerInfo,n=Te(t),Ne(t,n))}}function vs(e,t,n){for(var i=t;;)if(gs(e,i,n),null===i.child||X&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function xs(e){var t=e.alternate;null!==t&&(e.alternate=null,xs(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ys(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bs(e){if(X){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(_e(t),n.flags&=-33),As(e,n=_s(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ws(e,n=_s(e),t);break;default:throw Error(a(161))}}}function ws(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==i&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function As(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==i&&null!==(e=e.child))for(As(e,t,n),e=e.sibling;null!==e;)As(e,t,n),e=e.sibling}function Ss(e,t,n){for(var i,r,s=t,o=!1;;){if(!o){o=s.return;e:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===s.tag||6===s.tag)vs(e,s,n),r?ye(i,s.stateNode):xe(i,s.stateNode);else if(18===s.tag)r?qe(i,s.stateNode):Ze(i,s.stateNode);else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(gs(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function Es(e,t){if(X){switch(t.tag){case 0:case 11:case 14:case 15:return ps(3,t,t.return),ms(3,t),void ps(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&fe(n,s,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(q&&null!==e&&e.memoizedState.isDehydrated&&Ye(t.stateNode.containerInfo));case 13:case 19:return void Cs(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return ps(3,t,t.return),ms(3,t),void ps(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Cs(t);case 3:q&&null!==e&&e.memoizedState.isDehydrated&&Ye(t.stateNode.containerInfo)}e:if(Z){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ne(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ls),t.forEach(function(t){var i=Xa.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function Ts(e,t,n){cs=e,Ms(e,t,n)}function Ms(e,t,n){for(var i=0!==(1&e.mode);null!==cs;){var r=cs,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||as;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||os;o=as;var c=os;if(as=a,(os=l)&&!c)for(cs=r;null!==cs;)l=(a=cs).child,22===a.tag&&null!==a.memoizedState?Rs(r):null!==l?(l.return=a,cs=l):Rs(r);for(;null!==s;)cs=s,Ms(s,t,n),s=s.sibling;cs=r,as=o,os=c}Ps(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,cs=s):Ps(e)}}function Ps(e){for(;null!==cs;){var t=cs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:os||ms(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!os)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&bn(t,s,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=j(t.child.stateNode);break;case 1:n=t.child.stateNode}bn(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&me(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(q&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Xe(d)}}}break;default:throw Error(a(163))}os||512&t.flags&&fs(t)}catch(h){Wa(t,t.return,h)}}if(t===e){cs=null;break}if(null!==(n=t.sibling)){n.return=t.return,cs=n;break}cs=t.return}}function Ns(e){for(;null!==cs;){var t=cs;if(t===e){cs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,cs=n;break}cs=t.return}}function Rs(e){for(;null!==cs;){var t=cs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ms(4,t)}catch(l){Wa(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Wa(t,r,l)}}var s=t.return;try{fs(t)}catch(l){Wa(t,s,l)}break;case 5:var a=t.return;try{fs(t)}catch(l){Wa(t,a,l)}}}catch(l){Wa(t,t.return,l)}if(t===e){cs=null;break}var o=t.sibling;if(null!==o){o.return=t.return,cs=o;break}cs=t.return}}var Ls=0,js=1,Is=2,ks=3,Bs=4;if("function"===typeof Symbol&&Symbol.for){var Ds=Symbol.for;Ls=Ds("selector.component"),js=Ds("selector.has_pseudo_class"),Is=Ds("selector.role"),ks=Ds("selector.test_id"),Bs=Ds("selector.text")}function Os(e){var t=K(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=re(e)))throw Error(a(362));return e.stateNode.current}function Fs(e,t){switch(t.$$typeof){case Ls:if(e.type===t.value)return!0;break;case js:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],s=t[r];if(5!==i.tag||!oe(i)){for(;null!=s&&Fs(i,s);)s=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Is:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Bs:if((5===e.tag||6===e.tag)&&(null!==(e=ae(e))&&0<=e.indexOf(t.value)))return!0;break;case ks:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Us(e){switch(e.$$typeof){case Ls:return"<"+(A(e.value)||"Unknown")+">";case js:return":has("+(Us(e)||"")+")";case Is:return'[role="'+e.value+'"]';case Bs:return'"'+e.value+'"';case ks:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function zs(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],s=e[i++],a=t[s];if(5!==r.tag||!oe(r)){for(;null!=a&&Fs(r,a);)a=t[++s];if(s===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,s),r=r.sibling}}return n}function Hs(e,t){if(!ie)throw Error(a(363));e=zs(e=Os(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)oe(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var Gs=Math.ceil,Ws=o.ReactCurrentDispatcher,Vs=o.ReactCurrentOwner,Js=o.ReactCurrentBatchConfig,Ys=0,Xs=null,Zs=null,qs=0,Ks=0,Qs=at(0),$s=0,ea=null,ta=0,na=0,ia=0,ra=null,sa=null,aa=0,oa=1/0;function la(){oa=Ot()+500}var ca,ua=!1,da=null,ha=null,pa=!1,ma=null,fa=0,ga=0,va=null,xa=-1,ya=0;function _a(){return 0!==(6&Ys)?Ot():-1!==xa?xa:xa=Ot()}function ba(e){return 0===(1&e.mode)?1:0!==(2&Ys)&&0!==qs?qs&-qs:null!==Kt.transition?(0===ya&&(e=At,0===(4194240&(At<<=1))&&(At=64),ya=e),ya):0!==(e=Lt)?e:$()}function wa(e,t,n){if(50<ga)throw ga=0,va=null,Error(a(185));var i=Aa(e,t);return null===i?null:(Nt(i,t,n),0!==(2&Ys)&&i===Xs||(i===Xs&&(0===(2&Ys)&&(na|=t),4===$s&&Ma(i,qs)),Sa(i,n),1===t&&0===Ys&&0===(1&e.mode)&&(la(),Yt&&qt())),i)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Sa(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-_t(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=Tt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=Ct(e,e===Xs?qs:0);if(0===i)null!==n&&kt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&kt(n),1===t)0===e.tag?function(e){Yt=!0,Zt(e)}(Pa.bind(null,e)):Zt(Pa.bind(null,e)),te?ne(function(){0===Ys&&qt()}):It(Ft,qt),n=null;else{switch(jt(i)){case 1:n=Ft;break;case 4:n=Ut;break;case 16:default:n=zt;break;case 536870912:n=Ht}n=Za(n,Ea.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ea(e,t){if(xa=-1,ya=0,0!==(6&Ys))throw Error(a(327));var n=e.callbackNode;if(Ha()&&e.callbackNode!==n)return null;var i=Ct(e,e===Xs?qs:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Ba(e,i);else{t=i;var r=Ys;Ys|=2;var s=Ia();for(Xs===e&&qs===t||(la(),La(e,t));;)try{Oa();break}catch(l){ja(e,l)}an(),Ws.current=s,Ys=r,null!==Zs?t=0:(Xs=null,qs=0,t=$s)}if(0!==t){if(2===t&&(0!==(r=Mt(e))&&(i=r,t=Ca(e,r))),1===t)throw n=ea,La(e,0),Ma(e,i),Sa(e,Ot()),n;if(6===t)Ma(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Vt(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Ba(e,i))&&(0!==(s=Mt(e))&&(i=s,t=Ca(e,s))),1===t))throw n=ea,La(e,0),Ma(e,i),Sa(e,Ot()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:za(e,sa);break;case 3:if(Ma(e,i),(130023424&i)===i&&10<(t=aa+500-Ot())){if(0!==Ct(e,0))break;if(((r=e.suspendedLanes)&i)!==i){_a(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=W(za.bind(null,e,sa),t);break}za(e,sa);break;case 4:if(Ma(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-_t(i);s=1<<o,(o=t[o])>r&&(r=o),i&=~s}if(i=r,10<(i=(120>(i=Ot()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Gs(i/1960))-i)){e.timeoutHandle=W(za.bind(null,e,sa),i);break}za(e,sa);break;default:throw Error(a(329))}}}return Sa(e,Ot()),e.callbackNode===n?Ea.bind(null,e):null}function Ca(e,t){var n=ra;return e.current.memoizedState.isDehydrated&&(La(e,t).flags|=256),2!==(e=Ba(e,t))&&(t=sa,sa=n,null!==t&&Ta(t)),e}function Ta(e){null===sa?sa=e:sa.push.apply(sa,e)}function Ma(e,t){for(t&=~ia,t&=~na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),i=1<<n;e[n]=-1,t&=~i}}function Pa(e){if(0!==(6&Ys))throw Error(a(327));Ha();var t=Ct(e,0);if(0===(1&t))return Sa(e,Ot()),null;var n=Ba(e,t);if(0!==e.tag&&2===n){var i=Mt(e);0!==i&&(t=i,n=Ca(e,i))}if(1===n)throw n=ea,La(e,0),Ma(e,t),Sa(e,Ot()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,za(e,sa),Sa(e,Ot()),null}function Na(e){null!==ma&&0===ma.tag&&0===(6&Ys)&&Ha();var t=Ys;Ys|=1;var n=Js.transition,i=Lt;try{if(Js.transition=null,Lt=1,e)return e()}finally{Lt=i,Js.transition=n,0===(6&(Ys=t))&&qt()}}function Ra(){Ks=Qs.current,ot(Qs)}function La(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==J&&(e.timeoutHandle=J,V(n)),null!==Zs)for(n=Zs.return;null!==n;){var i=n;switch(zn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&ft();break;case 3:pi(),ot(dt),ot(ut),yi();break;case 5:fi(i);break;case 4:pi();break;case 13:case 19:ot(gi);break;case 10:ln(i.type._context);break;case 22:case 23:Ra()}n=n.return}if(Xs=e,Zs=e=$a(e.current,null),qs=Ks=t,$s=0,ea=null,ia=na=ta=0,sa=ra=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(i=(n=hn[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}hn=null}return e}function ja(e,t){for(;;){var n=Zs;try{if(an(),_i.current=pr,Ci){for(var i=Ai.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ci=!1}if(wi=0,Ei=Si=Ai=null,Ti=!1,Mi=0,Vs.current=null,null===n||null===n.return){$s=1,ea=t,Zs=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=qs,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Tr(o);if(null!==m){m.flags&=-257,Mr(m,o,l,0,t),1&m.mode&&Cr(s,u,t),c=u;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){Cr(s,u,t),ka();break e}c=Error(a(426))}else if(Wn&&1&l.mode){var v=Tr(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Mr(v,o,l,0,t),ei(c);break e}}s=c,4!==$s&&($s=2),null===ra?ra=[s]:ra.push(s),c=vr(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,yn(l,Sr(0,c,t));break e;case 1:s=c;var x=l.type,y=l.stateNode;if(0===(128&l.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ha||!ha.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,yn(l,Er(l,s,t));break e}}l=l.return}while(null!==l)}Ua(n)}catch(_){t=_,Zs===n&&null!==n&&(Zs=n=n.return);continue}break}}function Ia(){var e=Ws.current;return Ws.current=pr,null===e?pr:e}function ka(){0!==$s&&3!==$s&&2!==$s||($s=4),null===Xs||0===(268435455&ta)&&0===(268435455&na)||Ma(Xs,qs)}function Ba(e,t){var n=Ys;Ys|=2;var i=Ia();for(Xs===e&&qs===t||La(e,t);;)try{Da();break}catch(r){ja(e,r)}if(an(),Ys=n,Ws.current=i,null!==Zs)throw Error(a(261));return Xs=null,qs=0,$s}function Da(){for(;null!==Zs;)Fa(Zs)}function Oa(){for(;null!==Zs&&!Bt();)Fa(Zs)}function Fa(e){var t=ca(e.alternate,e,Ks);e.memoizedProps=e.pendingProps,null===t?Ua(e):Zs=t,Vs.current=null}function Ua(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ir(n,t,Ks)))return void(Zs=n)}else{if(null!==(n=ss(n,t)))return n.flags&=32767,void(Zs=n);if(null===e)return $s=6,void(Zs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Zs=t);Zs=t=e}while(null!==t);0===$s&&($s=5)}function za(e,t){var n=Lt,i=Js.transition;try{Js.transition=null,Lt=1,function(e,t,n){do{Ha()}while(null!==ma);if(0!==(6&Ys))throw Error(a(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-_t(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,s),e===Xs&&(Zs=Xs=null,qs=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||pa||(pa=!0,Za(zt,function(){return Ha(),null})),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=Js.transition,Js.transition=null;var o=Lt;Lt=1;var l=Ys;Ys|=4,Vs.current=null,function(e,t){for(B(e.containerInfo),cs=t;null!==cs;)if(t=(e=cs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,cs=t;else for(;null!==cs;){e=cs;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,s=e.stateNode,o=s.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);s.__reactInternalSnapshotBeforeUpdate=o}break;case 3:X&&Ee(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,cs=t;break}cs=e.return}n=hs,hs=!1}(e,i),function(e,t){for(cs=t;null!==cs;){var n=(t=cs).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e;X?Ss(s,r,t):vs(s,r,t);var a=r.alternate;null!==a&&(a.return=null),r.return=null}catch(b){Wa(r,t,b)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,cs=n;else for(;null!==cs;){t=cs;try{var o=t.flags;if(32&o&&X&&_e(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(aa=Ot())}break;case 22:var d=null!==t.memoizedState,h=t.alternate,p=null!==h&&null!==h.memoizedState;if(n=t,X)e:if(i=n,r=d,s=null,X)for(var m=i;;){if(5===m.tag){if(null===s){s=m;var f=m.stateNode;r?be(f):Ae(m.stateNode,m.memoizedProps)}}else if(6===m.tag){if(null===s){var g=m.stateNode;r?we(g):Se(g,m.memoizedProps)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===i)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===i)break;for(;null===m.sibling;){if(null===m.return||m.return===i)break e;s===m&&(s=null),m=m.return}s===m&&(s=null),m.sibling.return=m.return,m=m.sibling}if(d&&!p&&0!==(1&n.mode)){cs=n;for(var v=n.child;null!==v;){for(n=cs=v;null!==cs;){var x=(i=cs).child;switch(i.tag){case 0:case 11:case 14:case 15:ps(4,i,i.return);break;case 1:us(i,i.return);var y=i.stateNode;if("function"===typeof y.componentWillUnmount){var _=i.return;try{y.props=i.memoizedProps,y.state=i.memoizedState,y.componentWillUnmount()}catch(b){Wa(i,_,b)}}break;case 5:us(i,i.return);break;case 22:if(null!==i.memoizedState){Ns(n);continue}}null!==x?(x.return=i,cs=x):Ns(n)}v=v.sibling}}}switch(4102&o){case 2:bs(t),t.flags&=-3;break;case 6:bs(t),t.flags&=-3,Es(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Es(t.alternate,t);break;case 4:Es(t.alternate,t)}}catch(b){Wa(t,t.return,b)}if(null!==(n=t.sibling)){n.return=t.return,cs=n;break}cs=t.return}}}(e,i),D(e.containerInfo),e.current=i,Ts(i,e,r),Dt(),Ys=l,Lt=o,Js.transition=s}else e.current=i;if(pa&&(pa=!1,ma=e,fa=r),s=e.pendingLanes,0===s&&(ha=null),function(e){if(Wt&&"function"===typeof Wt.onCommitFiberRoot)try{Wt.onCommitFiberRoot(Gt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Sa(e,Ot()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(ua)throw ua=!1,e=da,da=null,e;0!==(1&fa)&&0!==e.tag&&Ha(),s=e.pendingLanes,0!==(1&s)?e===va?ga++:(ga=0,va=e):ga=0,qt()}(e,t,n)}finally{Js.transition=i,Lt=n}return null}function Ha(){if(null!==ma){var e=jt(fa),t=Js.transition,n=Lt;try{if(Js.transition=null,Lt=16>e?16:e,null===ma)var i=!1;else{if(e=ma,ma=null,fa=0,0!==(6&Ys))throw Error(a(331));var r=Ys;for(Ys|=4,cs=e.current;null!==cs;){var s=cs,o=s.child;if(0!==(16&cs.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(cs=u;null!==cs;){var d=cs;switch(d.tag){case 0:case 11:case 15:ps(8,d,s)}var h=d.child;if(null!==h)h.return=d,cs=h;else for(;null!==cs;){var p=(d=cs).sibling,m=d.return;if(xs(d),d===u){cs=null;break}if(null!==p){p.return=m,cs=p;break}cs=m}}}var f=s.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}cs=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,cs=o;else e:for(;null!==cs;){if(0!==(2048&(s=cs).flags))switch(s.tag){case 0:case 11:case 15:ps(9,s,s.return)}var x=s.sibling;if(null!==x){x.return=s.return,cs=x;break e}cs=s.return}}var y=e.current;for(cs=y;null!==cs;){var _=(o=cs).child;if(0!==(2064&o.subtreeFlags)&&null!==_)_.return=o,cs=_;else e:for(o=y;null!==cs;){if(0!==(2048&(l=cs).flags))try{switch(l.tag){case 0:case 11:case 15:ms(9,l)}}catch(w){Wa(l,l.return,w)}if(l===o){cs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,cs=b;break e}cs=l.return}}if(Ys=r,qt(),Wt&&"function"===typeof Wt.onPostCommitFiberRoot)try{Wt.onPostCommitFiberRoot(Gt,e)}catch(w){}i=!0}return i}finally{Lt=n,Js.transition=t}}return!1}function Ga(e,t,n){vn(e,t=Sr(0,t=vr(n,t),1)),t=_a(),null!==(e=Aa(e,1))&&(Nt(e,1,t),Sa(e,t))}function Wa(e,t,n){if(3===e.tag)Ga(e,e,n);else for(;null!==t;){if(3===t.tag){Ga(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ha||!ha.has(i))){vn(t,e=Er(t,e=vr(n,e),1)),e=_a(),null!==(t=Aa(t,1))&&(Nt(t,1,e),Sa(t,e));break}}t=t.return}}function Va(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=_a(),e.pingedLanes|=e.suspendedLanes&n,Xs===e&&(qs&n)===n&&(4===$s||3===$s&&(130023424&qs)===qs&&500>Ot()-aa?La(e,0):ia|=n),Sa(e,t)}function Ja(e,t){0===t&&(0===(1&e.mode)?t=1:(t=St,0===(130023424&(St<<=1))&&(St=4194304)));var n=_a();null!==(e=Aa(e,t))&&(Nt(e,t,n),Sa(e,n))}function Ya(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ja(e,n)}function Xa(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Ja(e,n)}function Za(e,t){return It(e,t)}function qa(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ka(e,t,n,i){return new qa(e,t,n,i)}function Qa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $a(e,t){var n=e.alternate;return null===n?((n=Ka(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,r,s){var o=2;if(i=e,"function"===typeof e)Qa(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case u:return to(n.children,r,s,t);case d:o=8,r|=8;break;case h:return(e=Ka(12,n,t,2|r)).elementType=h,e.lanes=s,e;case g:return(e=Ka(13,n,t,r)).elementType=g,e.lanes=s,e;case v:return(e=Ka(19,n,t,r)).elementType=v,e.lanes=s,e;case _:return no(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:o=10;break e;case m:o=9;break e;case f:o=11;break e;case x:o=14;break e;case y:o=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ka(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function to(e,t,n,i){return(e=Ka(7,e,i,t)).lanes=n,e}function no(e,t,n,i){return(e=Ka(22,e,i,t)).elementType=_,e.lanes=n,e.stateNode={},e}function io(e,t,n){return(e=Ka(6,e,null,t)).lanes=n,e}function ro(e,t,n){return(t=Ka(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function so(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=J,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=i,this.onRecoverableError=r,q&&(this.mutableSourceEagerHydrationData=null)}function ao(e,t,n,i,r,s,a,o,l){return e=new so(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ka(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},mn(s),e}function oo(e){if(!e)return ct;e:{if(E(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(mt(n))return vt(e,n,t)}return t}function lo(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=M(t))?null:e.stateNode}function co(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uo(e,t){co(e,t),(e=e.alternate)&&co(e,t)}function ho(e){return null===(e=M(e))?null:e.stateNode}function po(){return null}return ca=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||dt.current)Br=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Br=!1,function(e,t,n){switch(t.tag){case 3:Jr(t),$n();break;case 5:mi(t);break;case 1:mt(t.type)&&xt(t);break;case 4:hi(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(lt(gi,1&gi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?qr(e,t,n):(lt(gi,1&gi.current),null!==(e=rs(e,t,n))?e.sibling:null);lt(gi,1&gi.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return is(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(gi,gi.current),i)break;return null;case 22:case 23:return t.lanes=0,zr(e,t,n)}return rs(e,t,n)}(e,t,n);Br=0!==(131072&e.flags)}else Br=!1,Wn&&0!==(1048576&t.flags)&&Fn(t,Ln,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=pt(t,ut.current);un(t,n),r=Li(null,t,i,e,r,n);var s=ji();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(i)?(s=!0,xt(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,mn(t),r.updater=Sn,t.stateNode=r,r._reactInternals=t,Mn(t,i,e,n),t=Vr(null,t,i,!0,s,n)):(t.tag=0,Wn&&s&&Un(t),Dr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Qa(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===f)return 11;if(e===x)return 14}return 2}(i),e=en(i,e),r){case 0:t=Gr(null,t,i,e,n);break e;case 1:t=Wr(null,t,i,e,n);break e;case 11:t=Or(null,t,i,e,n);break e;case 14:t=Fr(null,t,i,en(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Gr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,Wr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(Jr(t),null===e)throw Error(a(387));i=t.pendingProps,r=(s=t.memoizedState).element,fn(e,t),_n(t,i,null,n);var o=t.memoizedState;if(i=o.element,q&&s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Yr(e,t,i,n,r=Error(a(423)));break e}if(i!==r){t=Yr(e,t,i,n,r=Error(a(424)));break e}for(q&&(Gn=ze(t.stateNode.containerInfo),Hn=t,Wn=!0,Jn=null,Vn=!1),n=ai(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=rs(e,t,n);break e}Dr(e,t,i,n)}t=t.child}return t;case 5:return mi(t),null===e&&qn(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,o=r.children,H(i,r)?o=null:null!==s&&H(i,s)&&(t.flags|=32),Hr(e,t),Dr(e,t,o,n),t.child;case 6:return null===e&&qn(t),null;case 13:return qr(e,t,n);case 4:return hi(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=si(t,null,i,n):Dr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Or(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return Dr(e,t,t.pendingProps,n),t.child;case 8:case 12:return Dr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,on(0,i,o=r.value),null!==s)if(Vt(s.value,o)){if(s.children===r.children&&!dt.current){t=rs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=gn(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),cn(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Dr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,un(t,n),i=i(r=dn(r)),t.flags|=1,Dr(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),Fr(e,t,i,r=en(i.type,r),n);case 15:return Ur(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mt(i)?(e=!0,xt(t)):e=!1,un(t,n),Cn(t,i,r),Mn(t,i,r,n),Vr(null,t,i,!0,e,n);case 19:return is(e,t,n);case 22:return zr(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wa(e,134217728,_a()),uo(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=_a(),n=ba(e);wa(e,n,t),uo(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Et(t.pendingLanes);0!==n&&(Rt(t,1|n),Sa(t,Ot()),0===(6&Ys)&&(la(),qt()))}break;case 13:var i=_a();Na(function(){return wa(e,1,i)}),uo(e,1)}},t.batchedUpdates=function(e,t){var n=Ys;Ys|=1;try{return e(t)}finally{0===(Ys=n)&&(la(),Yt&&qt())}},t.createComponentSelector=function(e){return{$$typeof:Ls,value:e}},t.createContainer=function(e,t,n,i,r,s,a){return ao(e,t,!1,null,0,i,0,s,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:js,value:e}},t.createHydrationContainer=function(e,t,n,i,r,s,a,o,l){return(e=ao(n,i,!0,e,0,s,0,o,l)).context=oo(null),n=e.current,(s=gn(i=_a(),r=ba(n))).callback=void 0!==t&&null!==t?t:null,vn(n,s),e.current.lanes=r,Nt(e,r,i),Sa(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Is,value:e}},t.createTestNameSelector=function(e){return{$$typeof:ks,value:e}},t.createTextSelector=function(e){return{$$typeof:Bs,value:e}},t.deferredUpdates=function(e){var t=Lt,n=Js.transition;try{return Js.transition=null,Lt=16,e()}finally{Lt=t,Js.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var s=Lt,a=Js.transition;try{return Js.transition=null,Lt=1,e(t,n,i,r)}finally{Lt=s,Js.transition=a,0===Ys&&la()}},t.findAllNodes=Hs,t.findBoundingRects=function(e,t){if(!ie)throw Error(a(363));t=Hs(e,t),e=[];for(var n=0;n<t.length;n++)e.push(se(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,s=n.y,o=s+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,p=h+c.height;if(i>=u&&s>=h&&r<=d&&o<=p){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||p<s||h>o)){h>s&&(c.height+=h-s,c.y=s),p<o&&(c.height=o-h),e.splice(t,1);break}if(!(s!==h||n.height!==c.height||d<i||u>r)){u>i&&(c.width+=u-i,c.x=i),d<r&&(c.width=r-u),e.splice(t,1);break}}return e},t.findHostInstance=lo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?N(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return lo(e)},t.flushControlled=function(e){var t=Ys;Ys|=1;var n=Js.transition,i=Lt;try{Js.transition=null,Lt=1,e()}finally{Lt=i,Js.transition=n,0===(Ys=t)&&(la(),qt())}},t.flushPassiveEffects=Ha,t.flushSync=Na,t.focusWithin=function(e,t){if(!ie)throw Error(a(363));for(t=zs(e=Os(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Lt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(a(363));var n=0,i=[];e=[Os(e),0];for(var r=0;r<e.length;){var s=e[r++],o=e[r++],l=t[o];if((5!==s.tag||!oe(s))&&(Fs(s,l)&&(i.push(Us(l)),++o>n&&(n=o)),o<t.length))for(s=s.child;null!==s;)e.push(s,o),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Us(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?j(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:e.findFiberByHostInstance||po,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Gt=t.inject(e),Wt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(a(363));e=Hs(e,t);var r=ue(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Lt;try{return Lt=e,t()}finally{Lt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,s=_a(),a=ba(r);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),vn(r,t),null!==(e=wa(r,a,s))&&xn(e,r,a),a},t}},527:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(t in r=arguments[n])e[t]=r[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var s=0;function a(e){return"_leaflet_id"in e||(e._leaflet_id=++s),e._leaflet_id}function o(e,t,n){var i,r,s,a;return a=function(){i=!1,r&&(s.apply(n,r),r=!1)},s=function(){i?r=arguments:(e.apply(n,arguments),setTimeout(a,t),i=!0)},s}function l(e,t,n){var i=t[1],r=t[0],s=i-r;return e===i&&n?e:((e-r)%s+s)%s+r}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function m(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var f=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(f,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function x(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var b=0;function w(e){var t=+new Date,n=Math.max(0,16-(t-b));return b=t+n,window.setTimeout(e,n)}var A=window.requestAnimationFrame||_("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function E(e,t,n){if(!n||A!==w)return A.call(window,r(e,t));e.call(t)}function C(e){e&&S.call(window,e)}var T={__proto__:null,extend:n,create:i,bind:r,get lastId(){return s},stamp:a,throttle:o,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:p,getParamString:m,template:g,isArray:v,indexOf:x,emptyImageUrl:y,requestFn:A,cancelFn:S,requestAnimFrame:E,cancelAnimFrame:C};function M(){}function P(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}M.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,s=i(r);for(var a in s.constructor=t,t.prototype=s,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(t[a]=this[a]);return e.statics&&n(t,e.statics),e.includes&&(P(e.includes),n.apply(null,[s].concat(e.includes))),n(s,e),delete s.statics,delete s.includes,s.options&&(s.options=r.options?i(r.options):{},n(s.options,e.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=s._initHooks.length;e<t;e++)s._initHooks[e].call(this)}},t},M.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},M.mergeOptions=function(e){return n(this.prototype.options,e),this},M.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var N={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var r=0,s=(e=h(e)).length;r<s;r++)this._on(e[r],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=h(e);for(var r=1===arguments.length,s=0,a=e.length;s<a;s++)r?this._off(e[s]):this._off(e[s],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var r={fn:t,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(r)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,r,s;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var a=this._listens(e,t,n);if(!1!==a){var o=i[a];this._firingCount&&(o.fn=c,this._events[e]=i=i.slice()),i.splice(a,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(r=0,s=i.length;r<s;r++)i[r].fn=c;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var a=0,o=s.length;a<o;a++){var l=s[a],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var r=t;"function"!==typeof t&&(i=!!t,r=void 0,n=void 0);var s=this._events&&this._events[e];if(s&&s.length&&!1!==this._listens(e,r,n))return!0;if(i)for(var a in this._eventParents)if(this._eventParents[a].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var r=0,s=i.length;r<s;r++)if(i[r].fn===t&&i[r].ctx===n)return r;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var r=0,s=(e=h(e)).length;r<s;r++)this._on(e[r],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[a(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[a(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};N.addEventListener=N.on,N.removeEventListener=N.clearAllEventListeners=N.off,N.addOneTimeEventListener=N.once,N.fireEvent=N.fire,N.hasEventListeners=N.listens;var R=M.extend(N);function j(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var I=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function k(e,t,n){return e instanceof j?e:v(e)?new j(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new j(e.x,e.y):new j(e,t,n)}function B(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function D(e,t){return!e||e instanceof B?e:new B(e,t)}function O(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function F(e,t){return e instanceof O?e:new O(e,t)}function U(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function z(e,t,n){return e instanceof U?e:v(e)&&"object"!==typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,n)}j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(k(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(k(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new j(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new j(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(e){var t=(e=k(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=k(e)).x===this.x&&e.y===this.y},contains:function(e){return e=k(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},B.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof j||"number"===typeof e[0]||"x"in e)t=n=k(e);else if(t=(e=D(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return k(this.min.x,this.max.y)},getTopRight:function(){return k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof j?k(e):D(e))instanceof B?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=D(e);var t=this.min,n=this.max,i=e.min,r=e.max,s=r.x>=t.x&&i.x<=n.x,a=r.y>=t.y&&i.y<=n.y;return s&&a},overlaps:function(e){e=D(e);var t=this.min,n=this.max,i=e.min,r=e.max,s=r.x>t.x&&i.x<n.x,a=r.y>t.y&&i.y<n.y;return s&&a},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,r=Math.abs(t.y-n.y)*e;return D(k(t.x-i,t.y-r),k(n.x+i,n.y+r))},equals:function(e){return!!e&&(e=D(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},O.prototype={extend:function(e){var t,n,i=this._southWest,r=this._northEast;if(e instanceof U)t=e,n=e;else{if(!(e instanceof O))return e?this.extend(z(e)||F(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||r?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,r=Math.abs(t.lng-n.lng)*e;return new O(new U(t.lat-i,t.lng-r),new U(n.lat+i,n.lng+r))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof U||"lat"in e?z(e):F(e);var t,n,i=this._southWest,r=this._northEast;return e instanceof O?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=r.lat&&t.lng>=i.lng&&n.lng<=r.lng},intersects:function(e){e=F(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),s=r.lat>=t.lat&&i.lat<=n.lat,a=r.lng>=t.lng&&i.lng<=n.lng;return s&&a},overlaps:function(e){e=F(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),s=r.lat>t.lat&&i.lat<n.lat,a=r.lng>t.lng&&i.lng<n.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=F(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=z(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return G.distance(this,z(e))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var H={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new B(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,r=t.lng-n.lng;if(0===i&&0===r)return e;var s=e.getSouthWest(),a=e.getNorthEast();return new O(new U(s.lat-i,s.lng-r),new U(a.lat-i,a.lng-r))}},G=n({},H,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,r=t.lat*n,s=Math.sin((t.lat-e.lat)*n/2),a=Math.sin((t.lng-e.lng)*n/2),o=s*s+Math.cos(i)*Math.cos(r)*a*a,l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return this.R*l}}),W=6378137,V={R:W,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),r=Math.sin(i*t);return new j(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=W*Math.PI;return new B([-e,-e],[e,e])}()};function J(e,t,n,i){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function Y(e,t,n,i){return new J(e,t,n,i)}J.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new j((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var X=n({},G,{code:"EPSG:3857",projection:V,transformation:function(){var e=.5/(Math.PI*V.R);return Y(e,.5,-e,.5)}()}),Z=n({},X,{code:"EPSG:900913"});function q(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function K(e,t){var n,i,r,s,a,o,l="";for(n=0,r=e.length;n<r;n++){for(i=0,s=(a=e[n]).length;i<s;i++)l+=(i?"L":"M")+(o=a[i]).x+" "+o.y;l+=t?Be.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,ee=$&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=ke("webkit"),ie=ke("android"),re=ke("android 2")||ke("android 3"),se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ae=ie&&ke("Google")&&se<537&&!("AudioNode"in window),oe=!!window.opera,le=!te&&ke("chrome"),ce=ke("gecko")&&!ne&&!oe&&!$,ue=!le&&ke("safari"),de=ke("phantom"),he="OTransition"in Q,pe=0===navigator.platform.indexOf("Win"),me=$&&"transition"in Q,fe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,ge="MozPerspective"in Q,ve=!window.L_DISABLE_3D&&(me||fe||ge)&&!he&&!de,xe="undefined"!==typeof orientation||ke("mobile"),ye=xe&&ne,_e=xe&&fe,be=!window.PointerEvent&&window.MSPointerEvent,we=!(!window.PointerEvent&&!be),Ae="ontouchstart"in window||!!window.TouchEvent,Se=!window.L_NO_TOUCH&&(Ae||we),Ee=xe&&oe,Ce=xe&&ce,Te=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Me=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Pe=!!document.createElement("canvas").getContext,Ne=!(!document.createElementNS||!q("svg").createSVGRect),Re=!!Ne&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Le=!Ne&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),je=0===navigator.platform.indexOf("Mac"),Ie=0===navigator.platform.indexOf("Linux");function ke(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Be={ie:$,ielt9:ee,edge:te,webkit:ne,android:ie,android23:re,androidStock:ae,opera:oe,chrome:le,gecko:ce,safari:ue,phantom:de,opera12:he,win:pe,ie3d:me,webkit3d:fe,gecko3d:ge,any3d:ve,mobile:xe,mobileWebkit:ye,mobileWebkit3d:_e,msPointer:be,pointer:we,touch:Se,touchNative:Ae,mobileOpera:Ee,mobileGecko:Ce,retina:Te,passiveEvents:Me,canvas:Pe,svg:Ne,vml:Le,inlineSvg:Re,mac:je,linux:Ie},De=Be.msPointer?"MSPointerDown":"pointerdown",Oe=Be.msPointer?"MSPointerMove":"pointermove",Fe=Be.msPointer?"MSPointerUp":"pointerup",Ue=Be.msPointer?"MSPointerCancel":"pointercancel",ze={touchstart:De,touchmove:Oe,touchend:Fe,touchcancel:Ue},He={touchstart:Qe,touchmove:Ke,touchend:Ke,touchcancel:Ke},Ge={},We=!1;function Ve(e,t,n){return"touchstart"===t&&qe(),He[t]?(n=He[t].bind(this,n),e.addEventListener(ze[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Je(e,t,n){ze[t]?e.removeEventListener(ze[t],n,!1):console.warn("wrong event specified:",t)}function Ye(e){Ge[e.pointerId]=e}function Xe(e){Ge[e.pointerId]&&(Ge[e.pointerId]=e)}function Ze(e){delete Ge[e.pointerId]}function qe(){We||(document.addEventListener(De,Ye,!0),document.addEventListener(Oe,Xe,!0),document.addEventListener(Fe,Ze,!0),document.addEventListener(Ue,Ze,!0),We=!0)}function Ke(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],Ge)t.touches.push(Ge[n]);t.changedTouches=[t],e(t)}}function Qe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Yt(t),Ke(e,t)}function $e(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function r(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var r=Zt(e);if(!r.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||r.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var s=Date.now();s-i<=et?2===++n&&t($e(e)):n=1,i=s}}}else n=e.detail}return e.addEventListener("click",r),{dblclick:t,simDblclick:r}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,rt,st,at,ot,lt=Et(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=Et(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function dt(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function pt(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function mt(e){var t=e.parentNode;t&&t.removeChild(e)}function ft(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function xt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=wt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function yt(e,t){if(void 0!==e.classList)for(var n=h(t),i=0,r=n.length;i<r;i++)e.classList.add(n[i]);else if(!xt(e,t)){var s=wt(e);bt(e,(s?s+" ":"")+t)}}function _t(e,t){void 0!==e.classList?e.classList.remove(t):bt(e,d((" "+wt(e)+" ").replace(" "+t+" "," ")))}function bt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function wt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function At(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&St(e,t)}function St(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function Et(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Ct(e,t,n){var i=t||new j(0,0);e.style[lt]=(Be.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Tt(e,t){e._leaflet_pos=t,Be.any3d?Ct(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Mt(e){return e._leaflet_pos||new j(0,0)}if("onselectstart"in document)it=function(){Dt(window,"selectstart",Yt)},rt=function(){Ft(window,"selectstart",Yt)};else{var Pt=Et(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Pt){var e=document.documentElement.style;st=e[Pt],e[Pt]="none"}},rt=function(){Pt&&(document.documentElement.style[Pt]=st,st=void 0)}}function Nt(){Dt(window,"dragstart",Yt)}function Rt(){Ft(window,"dragstart",Yt)}function Lt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(jt(),at=e,ot=e.style.outlineStyle,e.style.outlineStyle="none",Dt(window,"keydown",jt))}function jt(){at&&(at.style.outlineStyle=ot,at=void 0,ot=void 0,Ft(window,"keydown",jt))}function It(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function kt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Bt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:dt,getStyle:ht,create:pt,remove:mt,empty:ft,toFront:gt,toBack:vt,hasClass:xt,addClass:yt,removeClass:_t,setClass:bt,getClass:wt,setOpacity:At,testProp:Et,setTransform:Ct,setPosition:Tt,getPosition:Mt,get disableTextSelection(){return it},get enableTextSelection(){return rt},disableImageDrag:Nt,enableImageDrag:Rt,preventOutline:Lt,restoreOutline:jt,getSizedParentNode:It,getScale:kt};function Dt(e,t,n,i){if(t&&"object"===typeof t)for(var r in t)Ht(e,r,t[r],n);else for(var s=0,a=(t=h(t)).length;s<a;s++)Ht(e,t[s],n,i);return this}var Ot="_leaflet_events";function Ft(e,t,n,i){if(1===arguments.length)Ut(e),delete e[Ot];else if(t&&"object"===typeof t)for(var r in t)Gt(e,r,t[r],n);else if(t=h(t),2===arguments.length)Ut(e,function(e){return-1!==x(t,e)});else for(var s=0,a=t.length;s<a;s++)Gt(e,t[s],n,i);return this}function Ut(e,t){for(var n in e[Ot]){var i=n.split(/\d/)[0];t&&!t(i)||Gt(e,i,null,null,n)}}var zt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ht(e,t,n,i){var r=t+a(n)+(i?"_"+a(i):"");if(e[Ot]&&e[Ot][r])return this;var s=function(t){return n.call(i||e,t||window.event)},o=s;!Be.touchNative&&Be.pointer&&0===t.indexOf("touch")?s=Ve(e,t,s):Be.touch&&"dblclick"===t?s=tt(e,s):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(zt[t]||t,s,!!Be.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(s=function(t){t=t||window.event,$t(e,t)&&o(t)},e.addEventListener(zt[t],s,!1)):e.addEventListener(t,o,!1):e.attachEvent("on"+t,s),e[Ot]=e[Ot]||{},e[Ot][r]=s}function Gt(e,t,n,i,r){r=r||t+a(n)+(i?"_"+a(i):"");var s=e[Ot]&&e[Ot][r];if(!s)return this;!Be.touchNative&&Be.pointer&&0===t.indexOf("touch")?Je(e,t,s):Be.touch&&"dblclick"===t?nt(e,s):"removeEventListener"in e?e.removeEventListener(zt[t]||t,s,!1):e.detachEvent("on"+t,s),e[Ot][r]=null}function Wt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Vt(e){return Ht(e,"wheel",Wt),this}function Jt(e){return Dt(e,"mousedown touchstart dblclick contextmenu",Wt),e._leaflet_disable_click=!0,this}function Yt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Xt(e){return Yt(e),Wt(e),this}function Zt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function qt(e,t){if(!t)return new j(e.clientX,e.clientY);var n=kt(t),i=n.boundingClientRect;return new j((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var Kt=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qt(e){return Be.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Kt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function $t(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:Dt,off:Ft,stopPropagation:Wt,disableScrollPropagation:Vt,disableClickPropagation:Jt,preventDefault:Yt,stop:Xt,getPropagationPath:Zt,getMousePosition:qt,getWheelDelta:Qt,isExternalTarget:$t,addListener:Dt,removeListener:Ft},tn=R.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Mt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Tt(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=R.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(z(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Dt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(z(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),r=this.getSize().divideBy(2),s=(e instanceof j?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(s));return this.setView(a,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():F(e);var n=k(t.paddingTopLeft||t.padding||[0,0]),i=k(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,n.add(i));if((r="number"===typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var s=i.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),r),o=this.project(e.getNorthEast(),r);return{center:this.unproject(a.add(o).divideBy(2).add(s),r),zoom:r}},fitBounds:function(e,t){if(!(e=F(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=k(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){yt(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Be.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),r=this.project(e),s=this.getSize(),a=this._zoom;e=z(e),t=void 0===t?a:t;var o=Math.max(s.x,s.y),l=o*this.getZoomScale(a,t),c=r.distanceTo(i)||1,u=1.42,d=u*u;function h(e){var t=(l*l-o*o+(e?-1:1)*d*d*c*c)/(2*(e?l:o)*d*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function f(e){return p(e)/m(e)}var g=h(0);function v(e){return o*(m(g)/m(g+u*e))}function x(e){return o*(m(g)*f(g+u*e)-p(g))/d}function y(e){return 1-Math.pow(1-e,1.5)}var _=Date.now(),b=(h(1)-g)/u,w=n.duration?1e3*n.duration:1e3*b*.8;function A(){var n=(Date.now()-_)/w,s=y(n)*b;n<=1?(this._flyToFrame=E(A,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(x(s)/c)),a),this.getScaleZoom(o/v(s),a),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),A.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=F(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,F(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=k((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=k(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),s=this.project(e),a=this.getPixelBounds(),o=D([a.min.add(n),a.max.subtract(i)]),l=o.getSize();if(!o.contains(s)){this._enforcingBounds=!0;var c=s.subtract(o.getCenter()),u=o.extend(s).getSize().subtract(l);r.x+=c.x<0?-u.x:u.x,r.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=t.divideBy(2).round(),a=i.divideBy(2).round(),o=s.subtract(a);return o.x||o.y?(e.animate&&e.pan?this.panBy(o):(e.pan&&this._rawPanBy(o),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new U(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(r,i.maxZoom):r)}var s={latlng:t,bounds:n,timestamp:e.timestamp};for(var a in e.coords)"number"===typeof e.coords[a]&&(s[a]=e.coords[a]);this.fire("locationfound",s)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)mt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=pt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new O(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=F(e),n=k(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),s=this.getMaxZoom(),a=e.getNorthWest(),o=e.getSouthEast(),l=this.getSize().subtract(n),c=D(this.project(o,i),this.project(a,i)).getSize(),u=Be.any3d?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,p=t?Math.max(d,h):Math.min(d,h);return i=this.getScaleZoom(p,i),u&&(i=Math.round(i/(u/100))*(u/100),i=t?Math.ceil(i/u)*u:Math.floor(i/u)*u),Math.max(r,Math.min(s,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new j(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new B(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(z(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(k(e),t)},layerPointToLatLng:function(e){var t=k(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(z(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(z(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(F(e))},distance:function(e,t){return this.options.crs.distance(z(e),z(t))},containerPointToLayerPoint:function(e){return k(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return k(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(k(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(e)))},mouseEventToContainerPoint:function(e){return qt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=dt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Dt(t,"scroll",this._onScroll,this),this._containerId=a(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,yt(e,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new j(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(e.markerPane,"leaflet-zoom-hide"),yt(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Tt(this._mapPane,new j(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,n)._move(e,t)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Tt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[a(this._container)]=this;var t=e?Ft:Dt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],r="mouseout"===t||"mouseover"===t,s=e.target||e.srcElement,o=!1;s;){if((n=this._targets[a(s)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){o=!0;break}if(n&&n.listens(t,!0)){if(r&&!$t(s,e))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||o||r||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Lt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var r=n({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var s=this._findEventTargets(e,t);if(i){for(var a=[],o=0;o<i.length;o++)i[o].listens(t,!0)&&a.push(i[o]);s=a.concat(s)}if(s.length){"contextmenu"===t&&Yt(e);var l=s[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(o=0;o<s.length;o++)if(s[o].fire(t,c,!0),c.originalEvent._stopped||!1===s[o].options.bubblingMouseEvents&&-1!==x(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Mt(this._mapPane)||new j(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return D([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),r=this.getSize().divideBy(2),s=new B(i.subtract(r),i.add(r)),a=this._getBoundsOffset(s,n,t);return Math.abs(a.x)<=1&&Math.abs(a.y)<=1?e:this.unproject(i.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new B(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=D(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),r=i.min.subtract(e.min),s=i.max.subtract(e.max);return new j(this._rebound(r.x,-s.x),this._rebound(r.y,-s.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=Be.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_t(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=pt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Ct(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Ct(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(E(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_t(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var sn=M.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return yt(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),an=function(e){return new sn(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=pt("div",t+"control-container",this._container);function i(i,r){var s=t+i+" "+t+r;e[i+r]=pt("div",s,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)mt(this._controlCorners[e]);mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var on=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return sn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(a(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):_t(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _t(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=pt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Jt(t),Vt(t);var i=this._section=pt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Dt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=pt("a",e+"-toggle",t);r.href="#",r.title="Layers",r.setAttribute("role","button"),Dt(r,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Yt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=pt("div",e+"-base",i),this._separator=pt("div",e+"-separator",i),this._overlaysList=pt("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&a(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ft(this._baseLayersList),ft(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(a(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(t),t.layerId=a(e.layer),Dt(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var s=document.createElement("span");return n.appendChild(s),s.appendChild(t),s.appendChild(r),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var s=n.length-1;s>=0;s--)e=n[s],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||r.push(t);for(s=0;s<r.length;s++)this._map.hasLayer(r[s])&&this._map.removeLayer(r[s]);for(s=0;s<i.length;s++)this._map.hasLayer(i[s])||this._map.addLayer(i[s]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=n[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Dt(e,"click",Yt),this.expand();var t=this;setTimeout(function(){Ft(e,"click",Yt),t._preventClick=!1})}}),ln=function(e,t,n){return new on(e,t,n)},cn=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=pt("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,r){var s=pt("a",n,i);return s.innerHTML=e,s.href="#",s.title=t,s.setAttribute("role","button"),s.setAttribute("aria-label",t),Jt(s),Dt(s,"click",Xt),Dt(s,"click",r,this),Dt(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";_t(this._zoomInButton,t),_t(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(yt(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(yt(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},dn=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=pt("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=pt("div",t,n)),e.imperial&&(this._iScale=pt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,r=3.2808399*e;r>5280?(t=r/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new dn(e)},pn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mn=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?pn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=pt("div","leaflet-control-attribution"),Jt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new mn).addTo(this)});var fn=function(e){return new mn(e)};sn.Layers=on,sn.Zoom=cn,sn.Scale=dn,sn.Attribution=mn,an.layers=ln,an.zoom=un,an.scale=hn,an.attribution=fn;var gn=M.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:N},xn=Be.touch?"touchstart mousedown":"mousedown",yn=R.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){p(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Dt(this._dragStartTarget,xn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yn._dragging===this&&this.finishDrag(!0),Ft(this._dragStartTarget,xn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!xt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)yn._dragging===this&&this.finishDrag();else if(!(yn._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(yn._dragging=this,this._preventOutline&&Lt(this._element),Nt(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=It(this._element);this._startPoint=new j(t.clientX,t.clientY),this._startPos=Mt(this._element),this._parentScale=kt(n);var i="mousedown"===e.type;Dt(document,i?"mousemove":"touchmove",this._onMove,this),Dt(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new j(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Yt(e),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Tt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){_t(document.body,"leaflet-dragging"),this._lastTarget&&(_t(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ft(document,"mousemove touchmove",this._onMove,this),Ft(document,"mouseup touchend touchcancel",this._onUp,this),Rt(),rt();var t=this._moved&&this._moving;this._moving=!1,yn._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function _n(e,t,n){var i,r,s,a,o,l,c,u,d,h=[1,4,2,8];for(r=0,c=e.length;r<c;r++)e[r]._code=jn(e[r],t);for(a=0;a<4;a++){for(u=h[a],i=[],r=0,s=(c=e.length)-1;r<c;s=r++)o=e[r],l=e[s],o._code&u?l._code&u||((d=Ln(l,o,u,t,n))._code=jn(d,t),i.push(d)):(l._code&u&&((d=Ln(l,o,u,t,n))._code=jn(d,t),i.push(d)),i.push(o));e=i}return e}function bn(e,t){var n,i,r,s,a,o,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Bn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=z([0,0]),h=F(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=wn(e));var p=e.length,m=[];for(n=0;n<p;n++){var f=z(e[n]);m.push(t.project(z([f.lat-d.lat,f.lng-d.lng])))}for(o=l=c=0,n=0,i=p-1;n<p;i=n++)r=m[n],s=m[i],a=r.y*s.x-s.y*r.x,l+=(r.x+s.x)*a,c+=(r.y+s.y)*a,o+=3*a;u=0===o?m[0]:[l/o,c/o];var g=t.unproject(k(u));return z([g.lat+d.lat,g.lng+d.lng])}function wn(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var s=z(e[r]);t+=s.lat,n+=s.lng,i++}return z([t/i,n/i])}var An,Sn={__proto__:null,clipPolygon:_n,polygonCenter:bn,centroid:wn};function En(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Mn(e=Nn(e,n),n)}function Cn(e,t,n){return Math.sqrt(kn(e,t,n,!0))}function Tn(e,t,n){return kn(e,t,n)}function Mn(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Pn(e,i,t,0,n-1);var r,s=[];for(r=0;r<n;r++)i[r]&&s.push(e[r]);return s}function Pn(e,t,n,i,r){var s,a,o,l=0;for(a=i+1;a<=r-1;a++)(o=kn(e[a],e[i],e[r],!0))>l&&(s=a,l=o);l>n&&(t[s]=1,Pn(e,t,n,i,s),Pn(e,t,n,s,r))}function Nn(e,t){for(var n=[e[0]],i=1,r=0,s=e.length;i<s;i++)In(e[i],e[r])>t&&(n.push(e[i]),r=i);return r<s-1&&n.push(e[s-1]),n}function Rn(e,t,n,i,r){var s,a,o,l=i?An:jn(e,n),c=jn(t,n);for(An=c;;){if(!(l|c))return[e,t];if(l&c)return!1;o=jn(a=Ln(e,t,s=l||c,n,r),n),s===l?(e=a,l=o):(t=a,c=o)}}function Ln(e,t,n,i,r){var s,a,o=t.x-e.x,l=t.y-e.y,c=i.min,u=i.max;return 8&n?(s=e.x+o*(u.y-e.y)/l,a=u.y):4&n?(s=e.x+o*(c.y-e.y)/l,a=c.y):2&n?(s=u.x,a=e.y+l*(u.x-e.x)/o):1&n&&(s=c.x,a=e.y+l*(c.x-e.x)/o),new j(s,a,r)}function jn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function In(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function kn(e,t,n,i){var r,s=t.x,a=t.y,o=n.x-s,l=n.y-a,c=o*o+l*l;return c>0&&((r=((e.x-s)*o+(e.y-a)*l)/c)>1?(s=n.x,a=n.y):r>0&&(s+=o*r,a+=l*r)),o=e.x-s,l=e.y-a,i?o*o+l*l:new j(s,a)}function Bn(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function Dn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Bn(e)}function On(e,t){var n,i,r,s,a,o,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Bn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=z([0,0]),d=F(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=wn(e));var h=e.length,p=[];for(n=0;n<h;n++){var m=z(e[n]);p.push(t.project(z([m.lat-u.lat,m.lng-u.lng])))}for(n=0,i=0;n<h-1;n++)i+=p[n].distanceTo(p[n+1])/2;if(0===i)c=p[0];else for(n=0,s=0;n<h-1;n++)if(a=p[n],o=p[n+1],(s+=r=a.distanceTo(o))>i){l=(s-i)/r,c=[o.x-l*(o.x-a.x),o.y-l*(o.y-a.y)];break}var f=t.unproject(k(c));return z([f.lat+u.lat,f.lng+u.lng])}var Fn={__proto__:null,simplify:En,pointToSegmentDistance:Cn,closestPointOnSegment:Tn,clipSegment:Rn,_getEdgeIntersection:Ln,_getBitCode:jn,_sqClosestPointOnSegment:kn,isFlat:Bn,_flat:Dn,polylineCenter:On},Un={project:function(e){return new j(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new B([-180,-90],[180,90])},zn={R:6378137,R_MINOR:6356752.314245179,bounds:new B([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,r=this.R_MINOR/n,s=Math.sqrt(1-r*r),a=s*Math.sin(i),o=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),s/2);return i=-n*Math.log(Math.max(o,1e-10)),new j(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,s=Math.sqrt(1-r*r),a=Math.exp(-e.y/i),o=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=s*Math.sin(o),t=Math.pow((1-t)/(1+t),s/2),o+=c=Math.PI/2-2*Math.atan(a*t)-o;return new U(o*n,e.x*n/i)}},Hn={__proto__:null,LonLat:Un,Mercator:zn,SphericalMercator:V},Gn=n({},G,{code:"EPSG:3395",projection:zn,transformation:function(){var e=.5/(Math.PI*zn.R);return Y(e,.5,-e,.5)}()}),Wn=n({},G,{code:"EPSG:4326",projection:Un,transformation:Y(1/180,1,-1/180,.5)}),Vn=n({},H,{projection:Un,transformation:Y(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});H.Earth=G,H.EPSG3395=Gn,H.EPSG3857=X,H.EPSG900913=Z,H.EPSG4326=Wn,H.Simple=Vn;var Jn=R.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[a(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[a(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=a(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=a(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return a(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[a(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=a(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yn=Jn.extend({initialize:function(e,t){var n,i;if(p(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return a(e)}}),Xn=function(e,t){return new Yn(e,t)},Zn=Yn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Yn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Yn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new O;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),qn=function(e,t){return new Zn(e,t)},Kn=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var r=k(i),s=k("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),s&&(e.style.marginLeft=-s.x+"px",e.style.marginTop=-s.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Be.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Qn(e){return new Kn(e)}var $n=Kn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Kn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=pt("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new yn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_t(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,s=Mt(t._icon),a=n.getPixelBounds(),o=n.getPixelOrigin(),l=D(a.min._subtract(o).add(r),a.max._subtract(o).subtract(r));if(!l.contains(s)){var c=k((Math.max(l.max.x,s.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,s.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,s.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,s.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(i);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Tt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=E(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=Mt(t._icon),r=t._map.layerPointToLatLng(i);n&&Tt(n,i),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=Jn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=z(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),yt(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(n,"focus",this._panOnFocus,this);var r=e.icon.createShadow(this._shadow),s=!1;r!==this._shadow&&(this._removeShadow(),s=!0),r&&(yt(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&s&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(this._icon,"focus",this._panOnFocus,this),mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Tt(this._icon,e),this._shadow&&Tt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&At(this._icon,e),this._shadow&&At(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?k(t.iconSize):k(0,0),i=t.iconAnchor?k(t.iconAnchor):k(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=Jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=z(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new B(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function si(e,t){return new ri(e,t)}var ai=ri.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),p(this,t),this._latlng=z(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new O(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===G.distance){var r=Math.PI/180,s=this._mRadius/G.R/r,a=n.project([t+s,e]),o=n.project([t-s,e]),l=a.add(o).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(s*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(u)||0===u)&&(u=s/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-a.y}else{var d=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function oi(e,t,n){return new ai(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,r=null,s=kn,a=0,o=this._parts.length;a<o;a++)for(var l=this._parts[a],c=1,u=l.length;c<u;c++){var d=s(e,t=l[c-1],n=l[c],!0);d<i&&(i=d,r=s(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return On(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=z(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new O,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Bn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Bn(e),i=0,r=e.length;i<r;i++)n?(t[i]=z(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new j(e,e);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,r,s=e[0]instanceof U,a=e.length;if(s){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(e[i]),n.extend(r[i]);t.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,r,s,a,o,l=this._parts;for(t=0,i=0,r=this._rings.length;t<r;t++)for(n=0,s=(o=this._rings[t]).length;n<s-1;n++)(a=Rn(o[n],o[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(a[0]),a[1]===o[n+1]&&n!==s-2||(l[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=En(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,r,s,a,o,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,s=this._parts.length;n<s;n++)for(i=0,r=(a=(o=this._parts[n]).length)-1;i<a;r=i++)if((t||0!==i)&&Cn(e,o[r],o[i])<=l)return!0;return!1}});function ci(e,t){return new li(e,t)}li._flat=Dn;var ui=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof U&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),Bn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Bn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new j(t,t);if(e=new B(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,s=this._rings.length;r<s;r++)(i=_n(this._rings[r],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,r,s,a,o,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,o=this._parts.length;r<o;r++)for(s=0,a=(l=(t=this._parts[r]).length)-1;s<l;a=s++)n=t[s],i=t[a],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c||li.prototype._containsPoint.call(this,e,!0)}});function di(e,t){return new ui(e,t)}var hi=Zn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,r=v(e)?e:e.features;if(r){for(t=0,n=r.length;t<n;t++)((i=r[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var s=this.options;if(s.filter&&!s.filter(e))return this;var a=pi(e,s);return a?(a.feature=_i(e),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(e,a),this.addLayer(a)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function pi(e,t){var n,i,r,s,a="Feature"===e.type?e.geometry:e,o=a?a.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||fi;if(!o&&!a)return null;switch(a.type){case"Point":return mi(c,e,n=u(o),t);case"MultiPoint":for(r=0,s=o.length;r<s;r++)n=u(o[r]),l.push(mi(c,e,n,t));return new Zn(l);case"LineString":case"MultiLineString":return i=gi(o,"LineString"===a.type?0:1,u),new li(i,t);case"Polygon":case"MultiPolygon":return i=gi(o,"Polygon"===a.type?1:2,u),new ui(i,t);case"GeometryCollection":for(r=0,s=a.geometries.length;r<s;r++){var d=pi({geometry:a.geometries[r],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Zn(l);case"FeatureCollection":for(r=0,s=a.features.length;r<s;r++){var h=pi(a.features[r],t);h&&l.push(h)}return new Zn(l);default:throw new Error("Invalid GeoJSON object.")}}function mi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function fi(e){return new U(e[1],e[0],e[2])}function gi(e,t,n){for(var i,r=[],s=0,a=e.length;s<a;s++)i=t?gi(e[s],t-1,n):(n||fi)(e[s]),r.push(i);return r}function vi(e,t){return void 0!==(e=z(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function xi(e,t,n,i){for(var r=[],s=0,a=e.length;s<a;s++)r.push(t?xi(e[s],Bn(e[s])?0:t-1,n,i):vi(e[s],i));return!t&&n&&r.length>0&&r.push(r[0].slice()),r}function yi(e,t){return e.feature?n({},e.feature,{geometry:t}):_i(t)}function _i(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var bi={toGeoJSON:function(e){return yi(this,{type:"Point",coordinates:vi(this.getLatLng(),e)})}};function wi(e,t){return new hi(e,t)}ti.include(bi),ai.include(bi),ri.include(bi),li.include({toGeoJSON:function(e){var t=!Bn(this._latlngs);return yi(this,{type:(t?"Multi":"")+"LineString",coordinates:xi(this._latlngs,t?1:0,!1,e)})}}),ui.include({toGeoJSON:function(e){var t=!Bn(this._latlngs),n=t&&!Bn(this._latlngs[0]),i=xi(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),yi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Yn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),yi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(n)i.push(r.geometry);else{var s=_i(r);"FeatureCollection"===s.type?i.push.apply(i,s.features):i.push(s)}}}),n?yi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Ai=wi,Si=Jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=F(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=F(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:pt("img");yt(t,"leaflet-image-layer"),this._zoomAnimated&&yt(t,"leaflet-zoom-animated"),this.options.className&&yt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Ct(this._image,n,t)},_reset:function(){var e=this._image,t=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Tt(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){At(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ei=function(e,t,n){return new Si(e,t,n)},Ci=Si.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:pt("video");if(yt(t,"leaflet-image-layer"),this._zoomAnimated&&yt(t,"leaflet-zoom-animated"),this.options.className&&yt(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=r(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],s=0;s<n.length;s++)i.push(n[s].src);this._url=n.length>0?i:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var a=0;a<this._url.length;a++){var o=pt("source");o.src=this._url[a],t.appendChild(o)}}}});function Ti(e,t,n){return new Ci(e,t,n)}var Mi=Si.extend({_initImage:function(){var e=this._image=this._url;yt(e,"leaflet-image-layer"),this._zoomAnimated&&yt(e,"leaflet-zoom-animated"),this.options.className&&yt(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Pi(e,t,n){return new Mi(e,t,n)}var Ni=Jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof U||v(e))?(this._latlng=z(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&At(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&At(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(At(this._container,0),this._removeTimeout=setTimeout(r(mt,void 0,this._container),200)):mt(this._container),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=z(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Zn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=k(this.options.offset),n=this._getAnchor();this._zoomAnimated?Tt(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var r=t;return r instanceof e||(r=new e(i).setContent(t)),n&&r.setLatLng(n),r}}),Jn.include({_initOverlay:function(e,t,n,i){var r=n;return r instanceof e?(p(r,i),r._source=this):(r=t&&!i?t:new e(i,this)).setContent(n),r}});var Ri=Ni.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ni.prototype.openOn.call(this,e)},onAdd:function(e){Ni.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",Wt))},onRemove:function(e){Ni.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",Wt))},getEvents:function(){var e=Ni.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=pt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=pt("div",e+"-content-wrapper",t);if(this._contentNode=pt("div",e+"-content",n),Jt(t),Vt(this._contentNode),Dt(t,"contextmenu",Wt),this._tipContainer=pt("div",e+"-tip-container",t),this._tip=pt("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=pt("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Dt(i,"click",function(e){Yt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,r=this.options.maxHeight,s="leaflet-popup-scrolled";r&&i>r?(t.height=r+"px",yt(e,s)):_t(e,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Tt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,r=new j(this._containerLeft,-n-this._containerBottom);r._add(Mt(this._container));var s=e.layerPointToContainerPoint(r),a=k(this.options.autoPanPadding),o=k(this.options.autoPanPaddingTopLeft||a),l=k(this.options.autoPanPaddingBottomRight||a),c=e.getSize(),u=0,d=0;s.x+i+l.x>c.x&&(u=s.x+i-c.x+l.x),s.x-u-o.x<0&&(u=s.x-o.x),s.y+n+l.y>c.y&&(d=s.y+n-c.y+l.y),s.y-d-o.y<0&&(d=s.y-o.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,d]))}},_getAnchor:function(){return k(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Li=function(e,t){return new Ri(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ri,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Jn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ri,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Zn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Xt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var ji=Ni.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ni.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ni.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ni.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=pt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,r=this._container,s=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(e),o=this.options.direction,l=r.offsetWidth,c=r.offsetHeight,u=k(this.options.offset),d=this._getAnchor();"top"===o?(t=l/2,n=c):"bottom"===o?(t=l/2,n=0):"center"===o?(t=l/2,n=c/2):"right"===o?(t=0,n=c/2):"left"===o?(t=l,n=c/2):a.x<s.x?(o="right",t=0,n=c/2):(o="left",t=l+2*(u.x+d.x),n=c/2),e=e.subtract(k(t,n,!0)).add(u).add(d),_t(r,"leaflet-tooltip-right"),_t(r,"leaflet-tooltip-left"),_t(r,"leaflet-tooltip-top"),_t(r,"leaflet-tooltip-bottom"),yt(r,"leaflet-tooltip-"+o),Tt(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&At(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return k(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ii=function(e,t){return new ji(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(ji,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Jn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ji,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Zn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(Dt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Dt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ki=Kn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ft(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=k(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Bi(e){return new ki(e)}Kn.Default=$n;var Di=Jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),mt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof j?e:new j(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),r=0,s=n.length;r<s;r++)t=n[r].style.zIndex,n[r]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Be.ielt9){At(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var s=Math.min(1,(e-r.loaded)/200);At(r.el,s),s<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(C(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=pt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(mt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],r=this._map;return i||((i=this._levels[e]={}).el=pt("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,r.getCenter(),r.getZoom()),c(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)mt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),s=Math.floor(t/2),a=n-1,o=new j(+r,+s);o.z=+a;var l=this._tileCoordsToKey(o),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(r,s,a,i))},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var s=2*t;s<2*t+2;s++){var a=new j(r,s);a.z=n+1;var o=this._tileCoordsToKey(a),l=this._tiles[o];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,s,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var r=Math.round(t);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var s=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!s||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),r=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();Be.any3d?Ct(e.el,r,i):Tt(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),r=t.project(e,this._tileZoom).floor(),s=t.getSize().divideBy(2*i);return new B(r.subtract(s),r.add(s))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(i),s=r.getCenter(),a=[],o=this.options.keepBuffer,l=new B(r.getBottomLeft().subtract([o,-o]),r.getTopRight().add([o,-o]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new j(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=r.min.y;d<=r.max.y;d++)for(var h=r.min.x;h<=r.max.x;h++){var p=new j(h,d);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:a.push(p)}}if(a.sort(function(e,t){return e.distanceTo(s)-t.distanceTo(s)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(h=0;h<a.length;h++)this._addTile(a[h],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return F(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),r=i.add(n);return[t.unproject(i,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new O(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new j(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(mt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){yt(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Be.ielt9&&this.options.opacity<1&&At(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&E(r(this._tileReady,this,e,null,s)),Tt(s,n),this._tiles[i]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(At(n.el,0),C(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(yt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new j(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new B(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Oi(e){return new Di(e)}var Fi=Di.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Be.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Dt(n,"load",r(this._tileOnLoad,this,t,n)),Dt(n,"error",r(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Be.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Be.ielt9?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=y;var n=this._tiles[e].coords;mt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",y),Di.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==y))return Di.prototype._tileReady.call(this,e,t,n)}});function Ui(e,t){return new Fi(e,t)}var zi=Fi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);var s=(t=p(this,t)).detectRetina&&Be.retina?2:1,a=this.getTileSize();i.width=a.x*s,i.height=a.y*s,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Fi.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=D(n.project(t[0]),n.project(t[1])),r=i.min,s=i.max,a=(this._wmsVersion>=1.3&&this._crs===Wn?[r.y,r.x,s.y,s.x]:[r.x,r.y,s.x,s.y]).join(","),o=Fi.prototype.getTileUrl.call(this,e);return o+m(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Hi(e,t){return new zi(e,t)}Fi.WMS=zi,Ui.wms=Hi;var Gi=Jn.extend({options:{padding:.1},initialize:function(e){p(this,e),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),s=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(e,t));Be.any3d?Ct(this._container,s,n):Tt(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new B(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wi=Gi.extend({options:{tolerance:0},getEvents:function(){var e=Gi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Dt(e,"mousemove",this._onMouseMove,this),Dt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Dt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,mt(this._container),Ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Gi.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=Be.retina?2:1;Tt(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[a(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[a(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,r,s,a=e._parts,o=a.length,l=this._ctx;if(o){for(l.beginPath(),n=0;n<o;n++){for(i=0,r=a[n].length;i<r;i++)s=a[n][i],l[i?"lineTo":"moveTo"](s.x,s.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(_t(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,s=this._drawFirst;s;s=s.next)(n=s.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(yt(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Vi(e){return Be.canvas?new Wi(e):null}var Ji=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yi={_initContainer:function(){this._container=pt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Gi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Ji("shape");yt(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Ji("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;mt(t),e.removeInteractiveTarget(t),delete this._layers[a(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,r=e._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(t||(t=e._stroke=Ji("stroke")),r.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(r.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=Ji("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Xi=Be.vml?Ji:q,Zi=Gi.extend({_initContainer:function(){this._container=Xi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mt(this._container),Ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Gi.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Tt(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Xi("path");e.options.className&&yt(t,e.options.className),e.options.interactive&&yt(t,"leaflet-interactive"),this._updateStyle(e),this._layers[a(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){mt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[a(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,K(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function qi(e){return Be.svg||Be.vml?new Zi(e):null}Be.vml&&Zi.include(Yi),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Vi(e)||qi(e)}});var Ki=ui.extend({initialize:function(e,t){ui.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=F(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Qi(e,t){return new Ki(e,t)}Zi.create=Xi,Zi.pointsToPath=K,hi.geometryToLayer=pi,hi.coordsToLatLng=fi,hi.coordsToLatLngs=gi,hi.latLngToCoords=vi,hi.latLngsToCoords=xi,hi.getFeature=yi,hi.asFeature=_i,nn.mergeOptions({boxZoom:!0});var $i=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),Nt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Dt(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=pt("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new B(this._point,this._startPoint),n=t.getSize();Tt(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(mt(this._box),_t(this._container,"leaflet-crosshair")),rt(),Rt(),Ft(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new O(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$i),nn.mergeOptions({doubleClickZoom:!0});var er=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,r=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});nn.addInitHook("addHandler","doubleClickZoom",er),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tr=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new yn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_t(this._map._container,"leaflet-grab"),_t(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=F(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,s=(i+t+n)%e-t-n,a=Math.abs(r+n)<Math.abs(s+n)?r:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,o=r.multiplyBy(a/s),l=o.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=o.multiplyBy(c/l),d=c/(n.inertiaDeceleration*a),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),E(function(){t.panBy(h,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",tr),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Dt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;t<n;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;t<n;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;t<n;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;t<n;t++)i[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;t<n;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;t<n;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=k(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(k(t),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(r)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Xt(e)}}});nn.addInitHook("addHandler","keyboard",nr),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=gn.extend({addHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Qt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Xt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,s=n?Math.ceil(r/n)*n:r,a=e._limitZoom(t+(this._delta>0?s:-s))-t;this._delta=0,this._startTime=null,a&&("center"===e.options.scrollWheelZoom?e.setZoom(t+a):e.setZoomAround(this._lastMousePos,t+a))}});nn.addInitHook("addHandler","scrollWheelZoom",ir);var rr=600;nn.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var sr=gn.extend({addHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new j(t.clientX,t.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Dt(document,"touchend",Yt),Dt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),rr),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Ft(document,"touchend",Yt),Ft(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new j(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",sr),nn.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var ar=gn.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),Yt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),s=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===a.x&&0===a.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var o=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(o,this,!0),Yt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",ar),nn.BoxZoom=$i,nn.DoubleClickZoom=er,nn.Drag=tr,nn.Keyboard=nr,nn.ScrollWheelZoom=ir,nn.TapHold=sr,nn.TouchZoom=ar,e.Bounds=B,e.Browser=Be,e.CRS=H,e.Canvas=Wi,e.Circle=ai,e.CircleMarker=ri,e.Class=M,e.Control=sn,e.DivIcon=ki,e.DivOverlay=Ni,e.DomEvent=en,e.DomUtil=Bt,e.Draggable=yn,e.Evented=R,e.FeatureGroup=Zn,e.GeoJSON=hi,e.GridLayer=Di,e.Handler=gn,e.Icon=Kn,e.ImageOverlay=Si,e.LatLng=U,e.LatLngBounds=O,e.Layer=Jn,e.LayerGroup=Yn,e.LineUtil=Fn,e.Map=nn,e.Marker=ti,e.Mixin=vn,e.Path=ii,e.Point=j,e.PolyUtil=Sn,e.Polygon=ui,e.Polyline=li,e.Popup=Ri,e.PosAnimation=tn,e.Projection=Hn,e.Rectangle=Ki,e.Renderer=Gi,e.SVG=Zi,e.SVGOverlay=Mi,e.TileLayer=Fi,e.Tooltip=ji,e.Transformation=J,e.Util=T,e.VideoOverlay=Ci,e.bind=r,e.bounds=D,e.canvas=Vi,e.circle=oi,e.circleMarker=si,e.control=an,e.divIcon=Bi,e.extend=n,e.featureGroup=qn,e.geoJSON=wi,e.geoJson=Ai,e.gridLayer=Oi,e.icon=Qn,e.imageOverlay=Ei,e.latLng=z,e.latLngBounds=F,e.layerGroup=Xn,e.map=rn,e.marker=ni,e.point=k,e.polygon=di,e.polyline=ci,e.popup=Li,e.rectangle=Qi,e.setOptions=p,e.stamp=a,e.svg=qi,e.svgOverlay=Pi,e.tileLayer=Ui,e.tooltip=Ii,e.transformation=Y,e.version=t,e.videoOverlay=Ti;var or=window.L;e.noConflict=function(){return window.L=or,this},window.L=e}(t)},654:(e,t,n)=>{"use strict";var i=n(950),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(g=!1,_(e),!f)if(null!==i(c))f=!0,j(w);else{var t=i(u);null!==t&&I(b,t.startTime-e)}}function w(e,n){f=!1,g&&(g=!1,x(C),C=-1),m=!0;var s=p;try{for(_(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),_(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&I(b,d.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,S=!1,E=null,C=-1,T=5,M=-1;function P(){return!(t.unstable_now()-M<T)}function N(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?A():(S=!1,E=null)}}else S=!1}if("function"===typeof y)A=function(){y(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,L=R.port2;R.port1.onmessage=N,A=function(){L.postMessage(null)}}else A=function(){v(N,0)};function j(e){E=e,S||(S=!0,A())}function I(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,j(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(x(C),C=-1):g=!0,I(b,s-a))):(e.sortIndex=o,n(c,e),f||m||(f=!0,j(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},878:(e,t,n)=>{"use strict";e.exports=n(153)},950:(e,t,n)=>{"use strict";e.exports=n(49)},969:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(g=!1,_(e),!f)if(null!==i(c))f=!0,j(w);else{var t=i(u);null!==t&&I(b,t.startTime-e)}}function w(e,n){f=!1,g&&(g=!1,x(C),C=-1),m=!0;var s=p;try{for(_(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&r(c),_(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&I(b,d.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,S=!1,E=null,C=-1,T=5,M=-1;function P(){return!(t.unstable_now()-M<T)}function N(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?A():(S=!1,E=null)}}else S=!1}if("function"===typeof y)A=function(){y(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,L=R.port2;R.port1.onmessage=N,A=function(){L.postMessage(null)}}else A=function(){v(N,0)};function j(e){E=e,S||(S=!0,A())}function I(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,j(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(x(C),C=-1):g=!0,I(b,s-a))):(e.sortIndex=o,n(c,e),f||m||(f=!0,j(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&i;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>i[e]);return a.default=()=>i,n.d(s,a),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Yt,hasStandardBrowserEnv:()=>Zt,hasStandardBrowserWebWorkerEnv:()=>qt,navigator:()=>Xt,origin:()=>Kt});var t={};n.r(t),n.d(t,{ACESFilmicToneMapping:()=>Vu,AddEquation:()=>uu,AddOperation:()=>Uu,AdditiveAnimationBlendMode:()=>Ph,AdditiveBlending:()=>au,AgXToneMapping:()=>Yu,AlphaFormat:()=>Md,AlwaysCompare:()=>pp,AlwaysDepth:()=>Ru,AlwaysStencilFunc:()=>sp,AmbientLight:()=>fb,AnimationAction:()=>sw,AnimationClip:()=>O_,AnimationLoader:()=>Y_,AnimationMixer:()=>ow,AnimationObjectGroup:()=>rw,AnimationUtils:()=>E_,ArcCurve:()=>Ux,ArrayCamera:()=>kb,ArrowHelper:()=>nA,AttachedBindMode:()=>Zu,Audio:()=>Gb,AudioAnalyser:()=>Zb,AudioContext:()=>Pb,AudioListener:()=>Hb,AudioLoader:()=>Nb,AxesHelper:()=>iA,BackSide:()=>nu,BasicDepthPacking:()=>jh,BasicShadowMap:()=>Kc,BatchedMesh:()=>lx,Bone:()=>Sv,BooleanKeyframeTrack:()=>R_,Box2:()=>Aw,Box3:()=>ym,Box3Helper:()=>Kw,BoxGeometry:()=>Mg,BoxHelper:()=>qw,BufferAttribute:()=>Kf,BufferGeometry:()=>mg,BufferGeometryLoader:()=>wb,ByteType:()=>vd,Cache:()=>U_,Camera:()=>Ig,CameraHelper:()=>Yw,CanvasTexture:()=>Bx,CapsuleGeometry:()=>oy,CatmullRomCurve3:()=>Jx,CineonToneMapping:()=>Wu,CircleGeometry:()=>ly,ClampToEdgeWrapping:()=>rd,Clock:()=>Bb,Color:()=>Ff,ColorKeyframeTrack:()=>L_,ColorManagement:()=>Qp,CompressedArrayTexture:()=>Ix,CompressedCubeTexture:()=>kx,CompressedTexture:()=>jx,CompressedTextureLoader:()=>X_,ConeGeometry:()=>uy,ConstantAlphaFactor:()=>Mu,ConstantColorFactor:()=>Cu,Controls:()=>sA,CubeCamera:()=>Ug,CubeReflectionMapping:()=>Qu,CubeRefractionMapping:()=>$u,CubeTexture:()=>zg,CubeTextureLoader:()=>q_,CubeUVReflectionMapping:()=>nd,CubicBezierCurve:()=>qx,CubicBezierCurve3:()=>Kx,CubicInterpolant:()=>T_,CullFaceBack:()=>Xc,CullFaceFront:()=>Zc,CullFaceFrontBack:()=>qc,CullFaceNone:()=>Yc,Curve:()=>Ox,CurvePath:()=>ry,CustomBlending:()=>cu,CustomToneMapping:()=>Ju,CylinderGeometry:()=>cy,Cylindrical:()=>_w,Data3DTexture:()=>pm,DataArrayTexture:()=>dm,DataTexture:()=>Ev,DataTextureLoader:()=>K_,DataUtils:()=>Xf,DecrementStencilOp:()=>Xh,DecrementWrapStencilOp:()=>qh,DefaultLoadingManager:()=>H_,DepthFormat:()=>jd,DepthStencilFormat:()=>Id,DepthTexture:()=>Dx,DetachedBindMode:()=>qu,DirectionalLight:()=>mb,DirectionalLightHelper:()=>Ww,DiscreteInterpolant:()=>P_,DodecahedronGeometry:()=>hy,DoubleSide:()=>iu,DstAlphaFactor:()=>bu,DstColorFactor:()=>Au,DynamicCopyUsage:()=>bp,DynamicDrawUsage:()=>fp,DynamicReadUsage:()=>xp,EdgesGeometry:()=>vy,EllipseCurve:()=>Fx,EqualCompare:()=>lp,EqualDepth:()=>Iu,EqualStencilFunc:()=>ep,EquirectangularReflectionMapping:()=>ed,EquirectangularRefractionMapping:()=>td,Euler:()=>nf,EventDispatcher:()=>Tp,ExtrudeGeometry:()=>Yy,FileLoader:()=>J_,Float16BufferAttribute:()=>sg,Float32BufferAttribute:()=>ag,FloatType:()=>wd,Fog:()=>Wg,FogExp2:()=>Gg,FramebufferTexture:()=>Lx,FrontSide:()=>tu,Frustum:()=>Wv,GLBufferAttribute:()=>mw,GLSL1:()=>Ap,GLSL3:()=>Sp,GreaterCompare:()=>up,GreaterDepth:()=>Bu,GreaterEqualCompare:()=>hp,GreaterEqualDepth:()=>ku,GreaterEqualStencilFunc:()=>rp,GreaterStencilFunc:()=>np,GridHelper:()=>Fw,Group:()=>Nx,HalfFloatType:()=>Ad,HemisphereLight:()=>eb,HemisphereLightHelper:()=>Ow,IcosahedronGeometry:()=>Zy,ImageBitmapLoader:()=>Tb,ImageLoader:()=>Z_,ImageUtils:()=>nm,IncrementStencilOp:()=>Yh,IncrementWrapStencilOp:()=>Zh,InstancedBufferAttribute:()=>Pv,InstancedBufferGeometry:()=>bb,InstancedInterleavedBuffer:()=>pw,InstancedMesh:()=>Dv,Int16BufferAttribute:()=>tg,Int32BufferAttribute:()=>ig,Int8BufferAttribute:()=>Qf,IntType:()=>_d,InterleavedBuffer:()=>Jg,InterleavedBufferAttribute:()=>Xg,Interpolant:()=>C_,InterpolateDiscrete:()=>wh,InterpolateLinear:()=>Ah,InterpolateSmooth:()=>Sh,InvertStencilOp:()=>Kh,KeepStencilOp:()=>Vh,KeyframeTrack:()=>N_,LOD:()=>pv,LatheGeometry:()=>ay,Layers:()=>rf,LessCompare:()=>op,LessDepth:()=>Lu,LessEqualCompare:()=>cp,LessEqualDepth:()=>ju,LessEqualStencilFunc:()=>tp,LessStencilFunc:()=>$h,Light:()=>$_,LightProbe:()=>xb,Line:()=>vx,Line3:()=>Cw,LineBasicMaterial:()=>cx,LineCurve:()=>Qx,LineCurve3:()=>$x,LineDashedMaterial:()=>y_,LineLoop:()=>wx,LineSegments:()=>bx,LinearFilter:()=>dd,LinearInterpolant:()=>M_,LinearMipMapLinearFilter:()=>fd,LinearMipMapNearestFilter:()=>pd,LinearMipmapLinearFilter:()=>md,LinearMipmapNearestFilter:()=>hd,LinearSRGBColorSpace:()=>zh,LinearToneMapping:()=>Hu,LinearTransfer:()=>Hh,Loader:()=>G_,LoaderUtils:()=>_b,LoadingManager:()=>z_,LoopOnce:()=>yh,LoopPingPong:()=>bh,LoopRepeat:()=>_h,LuminanceAlphaFormat:()=>Ld,LuminanceFormat:()=>Rd,MOUSE:()=>Vc,Material:()=>Hf,MaterialLoader:()=>yb,MathUtils:()=>Op,Matrix2:()=>bw,Matrix3:()=>Up,Matrix4:()=>Jm,MaxEquation:()=>mu,Mesh:()=>Cg,MeshBasicMaterial:()=>Gf,MeshDepthMaterial:()=>g_,MeshDistanceMaterial:()=>v_,MeshLambertMaterial:()=>f_,MeshMatcapMaterial:()=>x_,MeshNormalMaterial:()=>m_,MeshPhongMaterial:()=>h_,MeshPhysicalMaterial:()=>d_,MeshStandardMaterial:()=>u_,MeshToonMaterial:()=>p_,MinEquation:()=>pu,MirroredRepeatWrapping:()=>sd,MixOperation:()=>Fu,MultiplyBlending:()=>lu,MultiplyOperation:()=>Ou,NearestFilter:()=>ad,NearestMipMapLinearFilter:()=>ud,NearestMipMapNearestFilter:()=>ld,NearestMipmapLinearFilter:()=>cd,NearestMipmapNearestFilter:()=>od,NeutralToneMapping:()=>Xu,NeverCompare:()=>ap,NeverDepth:()=>Nu,NeverStencilFunc:()=>Qh,NoBlending:()=>ru,NoColorSpace:()=>Fh,NoToneMapping:()=>zu,NormalAnimationBlendMode:()=>Mh,NormalBlending:()=>su,NotEqualCompare:()=>dp,NotEqualDepth:()=>Du,NotEqualStencilFunc:()=>ip,NumberKeyframeTrack:()=>j_,Object3D:()=>_f,ObjectLoader:()=>Ab,ObjectSpaceNormalMap:()=>Oh,OctahedronGeometry:()=>qy,OneFactor:()=>gu,OneMinusConstantAlphaFactor:()=>Pu,OneMinusConstantColorFactor:()=>Tu,OneMinusDstAlphaFactor:()=>wu,OneMinusDstColorFactor:()=>Su,OneMinusSrcAlphaFactor:()=>_u,OneMinusSrcColorFactor:()=>xu,OrthographicCamera:()=>hb,PCFShadowMap:()=>Qc,PCFSoftShadowMap:()=>$c,PMREMGenerator:()=>jA,Path:()=>sy,PerspectiveCamera:()=>Og,Plane:()=>zv,PlaneGeometry:()=>Ky,PlaneHelper:()=>Qw,PointLight:()=>db,PointLightHelper:()=>Iw,Points:()=>Mx,PointsMaterial:()=>Ax,PolarGridHelper:()=>Uw,PolyhedronGeometry:()=>dy,PositionalAudio:()=>Xb,PropertyBinding:()=>iw,PropertyMixer:()=>qb,QuadraticBezierCurve:()=>ey,QuadraticBezierCurve3:()=>ty,Quaternion:()=>fm,QuaternionKeyframeTrack:()=>k_,QuaternionLinearInterpolant:()=>I_,RED_GREEN_RGTC2_Format:()=>vh,RED_RGTC1_Format:()=>fh,REVISION:()=>Wc,RGBADepthPacking:()=>Ih,RGBAFormat:()=>Nd,RGBAIntegerFormat:()=>Ud,RGBA_ASTC_10x10_Format:()=>ch,RGBA_ASTC_10x5_Format:()=>ah,RGBA_ASTC_10x6_Format:()=>oh,RGBA_ASTC_10x8_Format:()=>lh,RGBA_ASTC_12x10_Format:()=>uh,RGBA_ASTC_12x12_Format:()=>dh,RGBA_ASTC_4x4_Format:()=>Qd,RGBA_ASTC_5x4_Format:()=>$d,RGBA_ASTC_5x5_Format:()=>eh,RGBA_ASTC_6x5_Format:()=>th,RGBA_ASTC_6x6_Format:()=>nh,RGBA_ASTC_8x5_Format:()=>ih,RGBA_ASTC_8x6_Format:()=>rh,RGBA_ASTC_8x8_Format:()=>sh,RGBA_BPTC_Format:()=>hh,RGBA_ETC2_EAC_Format:()=>Kd,RGBA_PVRTC_2BPPV1_Format:()=>Xd,RGBA_PVRTC_4BPPV1_Format:()=>Yd,RGBA_S3TC_DXT1_Format:()=>Hd,RGBA_S3TC_DXT3_Format:()=>Gd,RGBA_S3TC_DXT5_Format:()=>Wd,RGBDepthPacking:()=>kh,RGBFormat:()=>Pd,RGBIntegerFormat:()=>Fd,RGB_BPTC_SIGNED_Format:()=>ph,RGB_BPTC_UNSIGNED_Format:()=>mh,RGB_ETC1_Format:()=>Zd,RGB_ETC2_Format:()=>qd,RGB_PVRTC_2BPPV1_Format:()=>Jd,RGB_PVRTC_4BPPV1_Format:()=>Vd,RGB_S3TC_DXT1_Format:()=>zd,RGDepthPacking:()=>Bh,RGFormat:()=>Dd,RGIntegerFormat:()=>Od,RawShaderMaterial:()=>c_,Ray:()=>Vm,Raycaster:()=>gw,RectAreaLight:()=>gb,RedFormat:()=>kd,RedIntegerFormat:()=>Bd,ReinhardToneMapping:()=>Gu,RenderTarget:()=>cm,RenderTarget3D:()=>lw,RenderTargetArray:()=>cw,RepeatWrapping:()=>id,ReplaceStencilOp:()=>Jh,ReverseSubtractEquation:()=>hu,RingGeometry:()=>Qy,SIGNED_RED_GREEN_RGTC2_Format:()=>xh,SIGNED_RED_RGTC1_Format:()=>gh,SRGBColorSpace:()=>Uh,SRGBTransfer:()=>Gh,Scene:()=>Vg,ShaderChunk:()=>uA,ShaderLib:()=>hA,ShaderMaterial:()=>jg,ShadowMaterial:()=>l_,Shape:()=>xy,ShapeGeometry:()=>$y,ShapePath:()=>rA,ShapeUtils:()=>Wy,ShortType:()=>xd,Skeleton:()=>Mv,SkeletonHelper:()=>Lw,SkinnedMesh:()=>Av,Source:()=>rm,Sphere:()=>Dm,SphereGeometry:()=>e_,Spherical:()=>yw,SphericalHarmonics3:()=>vb,SplineCurve:()=>ny,SpotLight:()=>ab,SpotLightHelper:()=>Mw,Sprite:()=>cv,SpriteMaterial:()=>Zg,SrcAlphaFactor:()=>yu,SrcAlphaSaturateFactor:()=>Eu,SrcColorFactor:()=>vu,StaticCopyUsage:()=>_p,StaticDrawUsage:()=>mp,StaticReadUsage:()=>vp,StereoCamera:()=>Ib,StreamCopyUsage:()=>wp,StreamDrawUsage:()=>gp,StreamReadUsage:()=>yp,StringKeyframeTrack:()=>B_,SubtractEquation:()=>du,SubtractiveBlending:()=>ou,TOUCH:()=>Jc,TangentSpaceNormalMap:()=>Dh,TetrahedronGeometry:()=>t_,Texture:()=>om,TextureLoader:()=>Q_,TextureUtils:()=>oA,TorusGeometry:()=>n_,TorusKnotGeometry:()=>i_,Triangle:()=>If,TriangleFanDrawMode:()=>Lh,TriangleStripDrawMode:()=>Rh,TrianglesDrawMode:()=>Nh,TubeGeometry:()=>r_,UVMapping:()=>Ku,Uint16BufferAttribute:()=>ng,Uint32BufferAttribute:()=>rg,Uint8BufferAttribute:()=>$f,Uint8ClampedBufferAttribute:()=>eg,Uniform:()=>uw,UniformsGroup:()=>hw,UniformsLib:()=>dA,UniformsUtils:()=>Lg,UnsignedByteType:()=>gd,UnsignedInt248Type:()=>Cd,UnsignedInt5999Type:()=>Td,UnsignedIntType:()=>bd,UnsignedShort4444Type:()=>Sd,UnsignedShort5551Type:()=>Ed,UnsignedShortType:()=>yd,VSMShadowMap:()=>eu,Vector2:()=>Fp,Vector3:()=>gm,Vector4:()=>lm,VectorKeyframeTrack:()=>D_,VideoTexture:()=>Rx,WebGL3DRenderTarget:()=>mm,WebGLArrayRenderTarget:()=>hm,WebGLCoordinateSystem:()=>Ep,WebGLCubeRenderTarget:()=>Hg,WebGLRenderTarget:()=>um,WebGLRenderer:()=>WE,WebGLUtils:()=>kE,WebGPUCoordinateSystem:()=>Cp,WireframeGeometry:()=>s_,WrapAroundEnding:()=>Th,ZeroCurvatureEnding:()=>Eh,ZeroFactor:()=>fu,ZeroSlopeEnding:()=>Ch,ZeroStencilOp:()=>Wh,createCanvasElement:()=>Jp});var i,r=n(950),s=n.t(r,2),a=n(352),o=n(119),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,i){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=i.Pop,h=null,g=v();function v(){return(o.state||{idx:null}).idx}function x(){l=i.Pop;let e=v(),t=null==e?null:e-g;g=e,h&&h({action:l,location:_.location,delta:t})}function y(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let _={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(u,x),h=e,()=>{s.removeEventListener(u,x),h=null}},createHref:e=>t(s,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=m(_.location,e,t);n&&n(r,e),g=v()+1;let c=p(r,g),u=_.createHref(r);try{o.pushState(c,"",u)}catch(RT){if(RT instanceof DOMException&&"DataCloneError"===RT.name)throw RT;s.location.assign(u)}a&&h&&h({action:l,location:_.location,delta:1})},replace:function(e,t){l=i.Replace;let r=m(_.location,e,t);n&&n(r,e),g=v();let s=p(r,g),c=_.createHref(r);o.replaceState(s,"",c),a&&h&&h({action:l,location:_.location,delta:0})},go:e=>o.go(e)};return _}var x;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(x||(x={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),_(e,t,n,!1)}function _(e,t,n,i){let r=I(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let s=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=j(r);a=R(s[o],e,i)}return a}function b(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let o=F([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of w(e.path))r(e,t,i);else r(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=w(i.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),r&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const A=/^:[\w-]+$/,S=3,E=2,C=1,T=10,M=-2,P=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(P)&&(i+=M),t&&(i+=E),n.filter(e=>!P(e)).reduce((e,t)=>e+(A.test(t)?S:""===t?C:T),i)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:F([s,u.pathname]),pathnameBase:U(F([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return a}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function j(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(RT){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+RT+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function k(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function B(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=B(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function O(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=g(e):(r=c({},e),d(!r.pathname||!r.pathname.includes("?"),k("?","pathname","search",r)),d(!r.pathname||!r.pathname.includes("#"),k("#","pathname","hash",r)),d(!r.search||!r.search.includes("#"),k("#","search","hash",r)));let s,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:z(i),hash:H(r)}}(r,s),u=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],V=(new Set(W),["get",...W]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},J.apply(this,arguments)}const Y=r.createContext(null);const X=r.createContext(null);const Z=r.createContext(null);const q=r.createContext(null);const K=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function $(){return null!=r.useContext(q)}function ee(){return $()||d(!1),r.useContext(q).location}function te(e){r.useContext(Z).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(K);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=fe(he.UseNavigateStable),n=r.useRef(!1);return te(()=>{n.current=!0}),r.useCallback(function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,J({fromRouteId:t},r)))},[e,t])}():function(){$()||d(!1);let e=r.useContext(Y),{basename:t,future:n,navigator:i}=r.useContext(Z),{matches:s}=r.useContext(K),{pathname:a}=ee(),o=JSON.stringify(D(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return te(()=>{l.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=O(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)},[t,i,o,a,e])}()}function ie(){let{matches:e}=r.useContext(K),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(Z),{matches:s}=r.useContext(K),{pathname:a}=ee(),o=JSON.stringify(D(s,i.v7_relativeSplatPath));return r.useMemo(()=>O(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function se(e,t,n,s){$()||d(!1);let{navigator:a}=r.useContext(Z),{matches:o}=r.useContext(K),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||d(!1),h=e}else h=p;let f=h.pathname||"/",v=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=y(e,{pathname:v});let _=ue(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&_?r.createElement(q.Provider,{value:{location:J({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},_):_}function ae(){let e=function(){var e;let t=r.useContext(Q),n=me(he.UseRouteError),i=fe(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const oe=r.createElement(ae,null);class le extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(K.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(Y);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(K.Provider,{value:t},i)}function ue(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,i,s)=>{let a,d=!1,h=null,p=null;var m;n&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||oe,c&&(u<0&&0===s?(m="route-fallback",!1||ge[m]||(ge[m]=!0),d=!0,p=null):u===s&&(d=!0,p=i.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?h:d?p:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ce,{match:i,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function pe(e){let t=r.useContext(Y);return t||d(!1),t}function me(e){let t=r.useContext(X);return t||d(!1),t}function fe(e){let t=function(){let e=r.useContext(K);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ge={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function xe(e){let{to:t,replace:n,state:i,relative:s}=e;$()||d(!1);let{future:a,static:o}=r.useContext(Z),{matches:l}=r.useContext(K),{pathname:c}=ee(),u=ne(),h=O(t,D(l,a.v7_relativeSplatPath),c,"path"===s),p=JSON.stringify(h);return r.useEffect(()=>u(JSON.parse(p),{replace:n,state:i,relative:s}),[u,p,s,n,i]),null}function ye(e){d(!1)}function _e(e){let{basename:t="/",children:n=null,location:s,navigationType:a=i.Pop,navigator:o,static:l=!1,future:c}=e;$()&&d(!1);let u=t.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:u,navigator:o,static:l,future:J({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:p="/",search:m="",hash:f="",state:v=null,key:x="default"}=s,y=r.useMemo(()=>{let e=I(p,u);return null==e?null:{location:{pathname:e,search:m,hash:f,state:v,key:x},navigationType:a}},[u,p,m,f,v,x,a]);return null==y?null:r.createElement(Z.Provider,{value:h},r.createElement(q.Provider,{children:n,value:y}))}function be(e){let{children:t,location:n}=e;return function(e,t){return se(e,t)}(we(t),n)}new Promise(()=>{});r.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,we(e.props.children,s));e.type!==ye&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=we(e.props.children,s)),n.push(a)}),n}function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ae.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(e=>[n,e]):[[n,i]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(tR){}new Map;const Te=s.startTransition;l.flushSync,s.useId;function Me(e){let{basename:t,children:n,future:i,window:s}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),v(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return m("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=a.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback(e=>{d&&Te?Te(()=>u(e)):u(e)},[u,d]);return r.useLayoutEffect(()=>l.listen(h),[l,h]),r.useEffect(()=>ve(i),[i]),r.createElement(_e,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=r.forwardRef(function(e,t){let n,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:p}=e,m=Se(e,Ce),{basename:g}=r.useContext(Z),v=!1;if("string"===typeof u&&Ne.test(u)&&(n=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=I(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(tR){}let x=function(e,t){let{relative:n}=void 0===t?{}:t;$()||d(!1);let{basename:i,navigator:s}=r.useContext(Z),{hash:a,pathname:o,search:l}=re(e,{relative:n}),c=o;return"/"!==i&&(c="/"===o?i:F([i,o])),s.createHref({pathname:c,search:l,hash:a})}(u,{relative:s}),y=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ne(),u=ee(),d=re(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:f(u)===f(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,i,s,n,e,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:p});return r.createElement("a",Ae({},m,{href:n||x,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:c}))});var Le,je;function Ie(e){let t=r.useRef(Ee(e)),n=r.useRef(!1),i=ee(),s=r.useMemo(()=>function(e,t){let n=Ee(e);return t&&t.forEach((e,i)=>{n.has(i)||t.getAll(i).forEach(e=>{n.append(i,e)})}),n}(i.search,n.current?null:t.current),[i.search]),a=ne(),o=r.useCallback((e,t)=>{const i=Ee("function"===typeof e?e(s):e);n.current=!0,a("?"+i,t)},[a,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Le||(Le={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(je||(je={}));function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Be(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}function De(e,t,n){return(t=Be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach(function(t){De(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ue(e,t){return function(){return e.apply(t,arguments)}}const{toString:ze}=Object.prototype,{getPrototypeOf:He}=Object,{iterator:Ge,toStringTag:We}=Symbol,Ve=(Je=Object.create(null),e=>{const t=ze.call(e);return Je[t]||(Je[t]=t.slice(8,-1).toLowerCase())});var Je;const Ye=e=>(e=e.toLowerCase(),t=>Ve(t)===e),Xe=e=>t=>typeof t===e,{isArray:Ze}=Array,qe=Xe("undefined");function Ke(e){return null!==e&&!qe(e)&&null!==e.constructor&&!qe(e.constructor)&&et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qe=Ye("ArrayBuffer");const $e=Xe("string"),et=Xe("function"),tt=Xe("number"),nt=e=>null!==e&&"object"===typeof e,it=e=>{if("object"!==Ve(e))return!1;const t=He(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(We in e)&&!(Ge in e)},rt=Ye("Date"),st=Ye("File"),at=Ye("Blob"),ot=Ye("FileList"),lt=Ye("URLSearchParams"),[ct,ut,dt,ht]=["ReadableStream","Request","Response","Headers"].map(Ye);function pt(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ze(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(Ke(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let a;for(n=0;n<s;n++)a=i[n],t.call(null,e[a],a,e)}}function mt(e,t){if(Ke(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const ft="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,gt=e=>!qe(e)&&e!==ft;const vt=(xt="undefined"!==typeof Uint8Array&&He(Uint8Array),e=>xt&&e instanceof xt);var xt;const yt=Ye("HTMLFormElement"),_t=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),bt=Ye("RegExp"),wt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};pt(n,(n,r)=>{let s;!1!==(s=t(n,r,e))&&(i[r]=s||n)}),Object.defineProperties(e,i)};const At=Ye("AsyncFunction"),St=(Et="function"===typeof setImmediate,Ct=et(ft.postMessage),Et?setImmediate:Ct?((e,t)=>(ft.addEventListener("message",n=>{let{source:i,data:r}=n;i===ft&&r===e&&t.length&&t.shift()()},!1),n=>{t.push(n),ft.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var Et,Ct;const Tt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ft):"undefined"!==typeof process&&process.nextTick||St,Mt={isArray:Ze,isArrayBuffer:Qe,isBuffer:Ke,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||et(e.append)&&("formdata"===(t=Ve(e))||"object"===t&&et(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Qe(e.buffer),t},isString:$e,isNumber:tt,isBoolean:e=>!0===e||!1===e,isObject:nt,isPlainObject:it,isEmptyObject:e=>{if(!nt(e)||Ke(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(tR){return!1}},isReadableStream:ct,isRequest:ut,isResponse:dt,isHeaders:ht,isUndefined:qe,isDate:rt,isFile:st,isBlob:at,isRegExp:bt,isFunction:et,isStream:e=>nt(e)&&et(e.pipe),isURLSearchParams:lt,isTypedArray:vt,isFileList:ot,forEach:pt,merge:function e(){const{caseless:t,skipUndefined:n}=gt(this)&&this||{},i={},r=(r,s)=>{const a=t&&mt(i,s)||s;it(i[a])&&it(r)?i[a]=e(i[a],r):it(r)?i[a]=e({},r):Ze(r)?i[a]=r.slice():n&&qe(r)||(i[a]=r)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&pt(arguments[s],r);return i},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return pt(t,(t,i)=>{n&&et(t)?e[i]=Ue(t,n):e[i]=t},{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,s,a;const o={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)a=r[s],i&&!i(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&He(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Ve,kindOfTest:Ye,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(Ze(e))return e;let t=e.length;if(!tt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Ge]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:yt,hasOwnProperty:_t,hasOwnProp:_t,reduceDescriptors:wt,freezeMethods:e=>{wt(e,(t,n)=>{if(et(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];et(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach(e=>{n[e]=!0})};return Ze(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:mt,global:ft,isContextDefined:gt,isSpecCompliantForm:function(e){return!!(e&&et(e.append)&&"FormData"===e[We]&&e[Ge])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(nt(e)){if(t.indexOf(e)>=0)return;if(Ke(e))return e;if(!("toJSON"in e)){t[i]=e;const r=Ze(e)?[]:{};return pt(e,(e,t)=>{const s=n(e,i+1);!qe(s)&&(r[t]=s)}),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:At,isThenable:e=>e&&(nt(e)||et(e))&&et(e.then)&&et(e.catch),setImmediate:St,asap:Tt,isIterable:e=>null!=e&&et(e[Ge])};function Pt(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Mt.inherits(Pt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Mt.toJSONObject(this.config),code:this.code,status:this.status}}});const Nt=Pt.prototype,Rt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Rt[e]={value:e}}),Object.defineProperties(Pt,Rt),Object.defineProperty(Nt,"isAxiosError",{value:!0}),Pt.from=(e,t,n,i,r,s)=>{const a=Object.create(Nt);Mt.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Pt.call(a,o,l,n,i,r),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};const Lt=Pt;function jt(e){return Mt.isPlainObject(e)||Mt.isArray(e)}function It(e){return Mt.endsWith(e,"[]")?e.slice(0,-2):e}function kt(e,t,n){return e?e.concat(t).map(function(e,t){return e=It(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Bt=Mt.toFlatObject(Mt,{},null,function(e){return/^is[A-Z]/.test(e)});const Dt=function(e,t,n){if(!Mt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Mt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Mt.isUndefined(t[e])})).metaTokens,r=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Mt.isSpecCompliantForm(t);if(!Mt.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Mt.isDate(e))return e.toISOString();if(Mt.isBoolean(e))return e.toString();if(!o&&Mt.isBlob(e))throw new Lt("Blob is not supported. Use a Buffer instead.");return Mt.isArrayBuffer(e)||Mt.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let o=e;if(e&&!r&&"object"===typeof e)if(Mt.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Mt.isArray(e)&&function(e){return Mt.isArray(e)&&!e.some(jt)}(e)||(Mt.isFileList(e)||Mt.endsWith(n,"[]"))&&(o=Mt.toArray(e)))return n=It(n),o.forEach(function(e,i){!Mt.isUndefined(e)&&null!==e&&t.append(!0===a?kt([n],i,s):null===a?n:n+"[]",l(e))}),!1;return!!jt(e)||(t.append(kt(r,n,s),l(e)),!1)}const u=[],d=Object.assign(Bt,{defaultVisitor:c,convertValue:l,isVisitable:jt});if(!Mt.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Mt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),Mt.forEach(n,function(n,s){!0===(!(Mt.isUndefined(n)||null===n)&&r.call(t,n,Mt.isString(s)?s.trim():s,i,d))&&e(n,i?i.concat(s):[s])}),u.pop()}}(e),t};function Ot(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Ft(e,t){this._pairs=[],e&&Dt(e,this,t)}const Ut=Ft.prototype;Ut.append=function(e,t){this._pairs.push([e,t])},Ut.toString=function(e){const t=e?function(t){return e.call(this,t,Ot)}:Ot;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const zt=Ft;function Ht(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gt(e,t,n){if(!t)return e;const i=n&&n.encode||Ht;Mt.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):Mt.isURLSearchParams(t)?t.toString():new zt(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Wt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Mt.forEach(this.handlers,function(t){null!==t&&e(t)})}},Vt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:zt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Yt="undefined"!==typeof window&&"undefined"!==typeof document,Xt="object"===typeof navigator&&navigator||void 0,Zt=Yt&&(!Xt||["ReactNative","NativeScript","NS"].indexOf(Xt.product)<0),qt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Kt=Yt&&window.location.href||"http://localhost",Qt=Fe(Fe({},e),Jt);const $t=function(e){function t(e,n,i,r){let s=e[r++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=r>=e.length;if(s=!s&&Mt.isArray(i)?i.length:s,o)return Mt.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a;i[s]&&Mt.isObject(i[s])||(i[s]=[]);return t(e,n,i[s],r)&&Mt.isArray(i[s])&&(i[s]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}(i[s])),!a}if(Mt.isFormData(e)&&Mt.isFunction(e.entries)){const n={};return Mt.forEachEntry(e,(e,i)=>{t(function(e){return Mt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),i,n,0)}),n}return null};const en={transitional:Vt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=Mt.isObject(e);r&&Mt.isHTMLForm(e)&&(e=new FormData(e));if(Mt.isFormData(e))return i?JSON.stringify($t(e)):e;if(Mt.isArrayBuffer(e)||Mt.isBuffer(e)||Mt.isStream(e)||Mt.isFile(e)||Mt.isBlob(e)||Mt.isReadableStream(e))return e;if(Mt.isArrayBufferView(e))return e.buffer;if(Mt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Dt(e,new Qt.classes.URLSearchParams,Fe({visitor:function(e,t,n,i){return Qt.isNode&&Mt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Mt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Dt(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(Mt.isString(e))try{return(t||JSON.parse)(e),Mt.trim(e)}catch(tR){if("SyntaxError"!==tR.name)throw tR}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||en.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Mt.isResponse(e)||Mt.isReadableStream(e))return e;if(e&&Mt.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(tR){if(n){if("SyntaxError"===tR.name)throw Lt.from(tR,Lt.ERR_BAD_RESPONSE,this,null,this.response);throw tR}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qt.classes.FormData,Blob:Qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Mt.forEach(["delete","get","head","post","put","patch"],e=>{en.headers[e]={}});const tn=en,nn=Mt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rn=Symbol("internals");function sn(e){return e&&String(e).trim().toLowerCase()}function an(e){return!1===e||null==e?e:Mt.isArray(e)?e.map(an):String(e)}function on(e,t,n,i,r){return Mt.isFunction(i)?i.call(this,t,n):(r&&(t=n),Mt.isString(t)?Mt.isString(i)?-1!==t.indexOf(i):Mt.isRegExp(i)?i.test(t):void 0:void 0)}class ln{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=sn(t);if(!r)throw new Error("header name must be a non-empty string");const s=Mt.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=an(e))}const s=(e,t)=>Mt.forEach(e,(e,n)=>r(e,n,t));if(Mt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Mt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&nn[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t})(e),t);else if(Mt.isObject(e)&&Mt.isIterable(e)){let n,i,r={};for(const t of e){if(!Mt.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[i=t[0]]=(n=r[i])?Mt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=sn(e)){const n=Mt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Mt.isFunction(t))return t.call(this,e,n);if(Mt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sn(e)){const n=Mt.findKey(this,e);return!(!n||void 0===this[n]||t&&!on(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=sn(e)){const r=Mt.findKey(n,e);!r||t&&!on(0,n[r],r,t)||(delete n[r],i=!0)}}return Mt.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!on(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return Mt.forEach(this,(i,r)=>{const s=Mt.findKey(n,r);if(s)return t[s]=an(i),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(r):String(r).trim();a!==r&&delete t[r],t[a]=an(i),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Mt.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Mt.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[rn]=this[rn]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=sn(e);t[i]||(!function(e,t){const n=Mt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})})}(n,e),t[i]=!0)}return Mt.isArray(e)?e.forEach(i):i(e),this}}ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Mt.reduceDescriptors(ln.prototype,(e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}}),Mt.freezeMethods(ln);const cn=ln;function un(e,t){const n=this||tn,i=t||n,r=cn.from(i.headers);let s=i.data;return Mt.forEach(e,function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function dn(e){return!(!e||!e.__CANCEL__)}function hn(e,t,n){Lt.call(this,null==e?"canceled":e,Lt.ERR_CANCELED,t,n),this.name="CanceledError"}Mt.inherits(hn,Lt,{__CANCEL__:!0});const pn=hn;function mn(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new Lt("Request failed with status code "+n.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const fn=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=i[a];r||(r=l),n[s]=o,i[s]=l;let u=a,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const gn=function(e,t){let n,i,r=0,s=1e3/t;const a=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),e(...t)};return[function(){const e=Date.now(),t=e-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?a(l,e):(n=l,i||(i=setTimeout(()=>{i=null,a(n)},s-t)))},()=>n&&a(n)]},vn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=fn(50,250);return gn(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-i,l=r(o);i=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},xn=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},yn=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Mt.asap(()=>e(...n))},_n=Qt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Qt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Qt.origin),Qt.navigator&&/(msie|trident)/i.test(Qt.navigator.userAgent)):()=>!0,bn=Qt.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const a=[e+"="+encodeURIComponent(t)];Mt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Mt.isString(i)&&a.push("path="+i),Mt.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function wn(e,t,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const An=e=>e instanceof cn?Fe({},e):e;function Sn(e,t){t=t||{};const n={};function i(e,t,n,i){return Mt.isPlainObject(e)&&Mt.isPlainObject(t)?Mt.merge.call({caseless:i},e,t):Mt.isPlainObject(t)?Mt.merge({},t):Mt.isArray(t)?t.slice():t}function r(e,t,n,r){return Mt.isUndefined(t)?Mt.isUndefined(e)?void 0:i(void 0,e,0,r):i(e,t,0,r)}function s(e,t){if(!Mt.isUndefined(t))return i(void 0,t)}function a(e,t){return Mt.isUndefined(t)?Mt.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>r(An(e),An(t),0,!0)};return Mt.forEach(Object.keys(Fe(Fe({},e),t)),function(i){const s=l[i]||r,a=s(e[i],t[i],i);Mt.isUndefined(a)&&s!==o||(n[i]=a)}),n}const En=e=>{const t=Sn({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=t;if(t.headers=a=cn.from(a),t.url=Gt(wn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Mt.isFormData(n))if(Qt.hasStandardBrowserEnv||Qt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Mt.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,i]=e;t.includes(n.toLowerCase())&&a.set(n,i)})}if(Qt.hasStandardBrowserEnv&&(i&&Mt.isFunction(i)&&(i=i(t)),i||!1!==i&&_n(t.url))){const e=r&&s&&bn.read(s);e&&a.set(r,e)}return t},Cn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const i=En(e);let r=i.data;const s=cn.from(i.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=i;function m(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const i=cn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());mn(function(e){t(e),m()},function(e){n(e),m()},{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:e,request:f}),f=null}f.open(i.method.toUpperCase(),i.url,!0),f.timeout=i.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Lt("Request aborted",Lt.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const i=t&&t.message?t.message:"Network Error",r=new Lt(i,Lt.ERR_NETWORK,e,f);r.event=t||null,n(r),f=null},f.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||Vt;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new Lt(t,r.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,e,f)),f=null},void 0===r&&s.setContentType(null),"setRequestHeader"in f&&Mt.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),Mt.isUndefined(i.withCredentials)||(f.withCredentials=!!i.withCredentials),d&&"json"!==d&&(f.responseType=i.responseType),p&&([l,u]=vn(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=vn(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=t=>{f&&(n(!t||t.type?new pn(null,e,f):t),f.abort(),f=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);v&&-1===Qt.protocols.indexOf(v)?n(new Lt("Unsupported protocol "+v+":",Lt.ERR_BAD_REQUEST,e)):f.send(r||null)})},Tn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const r=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof Lt?t:new pn(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,r(new Lt("timeout ".concat(t," of ms exceeded"),Lt.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:o}=i;return o.unsubscribe=()=>Mt.asap(a),o}};function Mn(e,t){this.v=e,this.k=t}function Pn(e){return function(){return new Nn(e.apply(this,arguments))}}function Nn(e){var t,n;function i(t,n){try{var s=e[t](n),a=s.value,o=a instanceof Mn;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return i(l,n);n=e[l](n).value}r(s.done?"return":"normal",n)},function(e){i("throw",e)})}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(s,a){var o={key:e,arg:r,resolve:s,reject:a,next:null};n?n=n.next=o:(t=n=o,i(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}function Rn(e){return new Mn(e,0)}function Ln(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise(function(n){n(e[t](i))}),{done:!1,value:new Mn(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function jn(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new In(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function In(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return In=function(e){this.s=e,this.n=e.next},In.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new In(e)}Nn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Nn.prototype.next=function(e){return this._invoke("next",e)},Nn.prototype.throw=function(e){return this._invoke("throw",e)},Nn.prototype.return=function(e){return this._invoke("return",e)};const kn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,r=0;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Bn=function(){var e=Pn(function*(e,t){var n,i=!1,r=!1;try{for(var s,a=jn(Dn(e));i=!(s=yield Rn(a.next())).done;i=!1){const e=s.value;yield*Ln(jn(kn(e,t)))}}catch(o){r=!0,n=o}finally{try{i&&null!=a.return&&(yield Rn(a.return()))}finally{if(r)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Dn=function(){var e=Pn(function*(e){if(e[Symbol.asyncIterator])return void(yield*Ln(jn(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Rn(t.read());if(e)break;yield n}}finally{yield Rn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),On=(e,t,n,i)=>{const r=Bn(e,t);let s,a=0,o=e=>{s||(s=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await r.next();if(t)return o(),void e.close();let s=i.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},{isFunction:Fn}=Mt,Un=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Mt.global),{ReadableStream:zn,TextEncoder:Hn}=Mt.global,Gn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(tR){return!1}},Wn=e=>{e=Mt.merge.call({skipUndefined:!0},Un,e);const{fetch:t,Request:n,Response:i}=e,r=t?Fn(t):"function"===typeof fetch,s=Fn(n),a=Fn(i);if(!r)return!1;const o=r&&Fn(zn),l=r&&("function"===typeof Hn?(c=new Hn,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const u=s&&o&&Gn(()=>{let e=!1;const t=new n(Qt.origin,{body:new zn,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=a&&o&&Gn(()=>Mt.isReadableStream(new i("").body)),h={stream:d&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,n)=>{let i=t&&t[e];if(i)return i.call(t);throw new Lt("Response type '".concat(e,"' is not supported"),Lt.ERR_NOT_SUPPORT,n)})});const p=async(e,t)=>{const i=Mt.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(Mt.isBlob(e))return e.size;if(Mt.isSpecCompliantForm(e)){const t=new n(Qt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Mt.isArrayBufferView(e)||Mt.isArrayBuffer(e)?e.byteLength:(Mt.isURLSearchParams(e)&&(e+=""),Mt.isString(e)?(await l(e)).byteLength:void 0)})(t):i};return async e=>{let{url:r,method:a,data:o,signal:l,cancelToken:c,timeout:m,onDownloadProgress:f,onUploadProgress:g,responseType:v,headers:x,withCredentials:y="same-origin",fetchOptions:_}=En(e),b=t||fetch;v=v?(v+"").toLowerCase():"text";let w=Tn([l,c&&c.toAbortSignal()],m),A=null;const S=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let E;try{if(g&&u&&"get"!==a&&"head"!==a&&0!==(E=await p(x,o))){let e,t=new n(r,{method:"POST",body:o,duplex:"half"});if(Mt.isFormData(o)&&(e=t.headers.get("content-type"))&&x.setContentType(e),t.body){const[e,n]=xn(E,vn(yn(g)));o=On(t.body,65536,e,n)}}Mt.isString(y)||(y=y?"include":"omit");const t=s&&"credentials"in n.prototype,l=Fe(Fe({},_),{},{signal:w,method:a.toUpperCase(),headers:x.normalize().toJSON(),body:o,duplex:"half",credentials:t?y:void 0});A=s&&new n(r,l);let c=await(s?b(A,_):b(r,l));const m=d&&("stream"===v||"response"===v);if(d&&(f||m&&S)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Mt.toFiniteNumber(c.headers.get("content-length")),[n,r]=f&&xn(t,vn(yn(f),!0))||[];c=new i(On(c.body,65536,n,()=>{r&&r(),S&&S()}),e)}v=v||"text";let C=await h[Mt.findKey(h,v)||"text"](c,e);return!m&&S&&S(),await new Promise((t,n)=>{mn(t,n,{data:C,headers:cn.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:A})})}catch(C){if(S&&S(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,e,A),{cause:C.cause||C});throw Lt.from(C,C&&C.code,e,A)}}},Vn=new Map,Jn=e=>{let t=e?e.env:{};const{fetch:n,Request:i,Response:r}=t,s=[i,r,n];let a,o,l=s.length,c=Vn;for(;l--;)a=s[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:Wn(t)),c=o;return o},Yn=(Jn(),{http:null,xhr:Cn,fetch:{get:Jn}});Mt.forEach(Yn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(tR){}Object.defineProperty(e,"adapterName",{value:t})}});const Xn=e=>"- ".concat(e),Zn=e=>Mt.isFunction(e)||null===e||!1===e,qn=(e,t)=>{e=Mt.isArray(e)?e:[e];const{length:n}=e;let i,r;const s={};for(let a=0;a<n;a++){let n;if(i=e[a],r=i,!Zn(i)&&(r=Yn[(n=String(i)).toLowerCase()],void 0===r))throw new Lt("Unknown adapter '".concat(n,"'"));if(r&&(Mt.isFunction(r)||(r=r.get(t))))break;s[n||"#"+a]=r}if(!r){const e=Object.entries(s).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(Xn).join("\n"):" "+Xn(e[0]):"as no adapter specified";throw new Lt("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r};function Kn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pn(null,e)}function Qn(e){Kn(e),e.headers=cn.from(e.headers),e.data=un.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return qn(e.adapter||tn.adapter,e)(e).then(function(t){return Kn(e),t.data=un.call(e,e.transformResponse,t),t.headers=cn.from(t.headers),t},function(t){return dn(t)||(Kn(e),t&&t.response&&(t.response.data=un.call(e,e.transformResponse,t.response),t.response.headers=cn.from(t.response.headers))),Promise.reject(t)})}const $n="1.12.2",ei={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ei[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ti={};ei.transitional=function(e,t,n){function i(e,t){return"[Axios v"+$n+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new Lt(i(r," has been removed"+(t?" in "+t:"")),Lt.ERR_DEPRECATED);return t&&!ti[r]&&(ti[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},ei.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const ni={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new Lt("option "+s+" must be "+n,Lt.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Lt("Unknown option "+s,Lt.ERR_BAD_OPTION)}},validators:ei},ii=ni.validators;class ri{constructor(e){this.defaults=e||{},this.interceptors={request:new Wt,response:new Wt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(tR){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Sn(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&ni.assertOptions(n,{silentJSONParsing:ii.transitional(ii.boolean),forcedJSONParsing:ii.transitional(ii.boolean),clarifyTimeoutError:ii.transitional(ii.boolean)},!1),null!=i&&(Mt.isFunction(i)?t.paramsSerializer={serialize:i}:ni.assertOptions(i,{encode:ii.function,serialize:ii.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ni.assertOptions(t,{baseUrl:ii.spelling("baseURL"),withXsrfToken:ii.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&Mt.merge(r.common,r[t.method]);r&&Mt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=cn.concat(s,r);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[Qn.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(RT){t.call(this,RT);break}}try{c=Qn.call(this,h)}catch(RT){return Promise.reject(RT)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Gt(wn((e=Sn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Mt.forEach(["delete","get","head","options"],function(e){ri.prototype[e]=function(t,n){return this.request(Sn(n||{},{method:e,url:t,data:(n||{}).data}))}}),Mt.forEach(["post","put","patch"],function(e){function t(t){return function(n,i,r){return this.request(Sn(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ri.prototype[e]=t(),ri.prototype[e+"Form"]=t(!0)});const si=ri;class ai{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const i=new Promise(e=>{n.subscribe(e),t=e}).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e(function(e,i,r){n.reason||(n.reason=new pn(e,i,r),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ai(function(t){e=t}),cancel:e}}}const oi=ai;const li={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(li).forEach(e=>{let[t,n]=e;li[n]=t});const ci=li;const ui=function e(t){const n=new si(t),i=Ue(si.prototype.request,n);return Mt.extend(i,si.prototype,n,{allOwnKeys:!0}),Mt.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Sn(t,n))},i}(tn);ui.Axios=si,ui.CanceledError=pn,ui.CancelToken=oi,ui.isCancel=dn,ui.VERSION=$n,ui.toFormData=Dt,ui.AxiosError=Lt,ui.Cancel=ui.CanceledError,ui.all=function(e){return Promise.all(e)},ui.spread=function(e){return function(t){return e.apply(null,t)}},ui.isAxiosError=function(e){return Mt.isObject(e)&&!0===e.isAxiosError},ui.mergeConfig=Sn,ui.AxiosHeaders=cn,ui.formToJSON=e=>$t(Mt.isHTMLForm(e)?new FormData(e):e),ui.getAdapter=qn,ui.HttpStatusCode=ci,ui.default=ui;const di=ui;const hi=new class{constructor(){this.baseURL="https://designxcellinv-production.up.railway.app","development"===this.environment&&(this.baseURL="http://localhost:5000"),this.baseURL.startsWith("http")||console.warn("\u26a0\ufe0f API URL should start with http:// or https://"),this.apiVersion={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_API_VERSION||"v1",this.websocketURL={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_WEBSOCKET_URL||"https://designxcellinv-production.up.railway.app",this.environment="production",this.debugMode="true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_DEBUG_MODE,this.logLevel="error",this.features={configurator3D:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_ENABLE_3D_CONFIGURATOR,realTimeUpdates:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_ENABLE_REAL_TIME_UPDATES,adminDashboard:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_ENABLE_ADMIN_DASHBOARD,paymentProcessing:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_ENABLE_PAYMENT_PROCESSING},this.payment={},this.assets={modelsPath:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_MODELS_PATH||"/models",imagesPath:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_IMAGES_PATH||"/images",assetsURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_ASSETS_URL||"/"},this.endpoints={auth:"/api/auth",products:"/api/products",inventory:"/api/inventory",orders:"/api/orders",suppliers:"/api/suppliers",admin:"/api/admin",payments:"/api/payments",health:"/health"}}getApiUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.startsWith("/")?e:"/".concat(e);return"".concat(this.baseURL).concat(t)}getWebSocketUrl(){return this.websocketURL}getEndpoint(e){const t=this.endpoints[e];if(!t)throw new Error("Unknown endpoint: ".concat(e));return this.getApiUrl(t)}isFeatureEnabled(e){return this.features[e]||!1}getAssetUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assets";const n=this.assets["".concat(t,"Path")]||this.assets.assetsURL,i=e.startsWith("/")?e.substring(1):e;return"".concat(n,"/").concat(i)}getPaymentConfig(){return this.payment}logConfig(){this.debugMode&&(console.group("\ud83d\udd27 API Configuration"),console.log("Base URL:",this.baseURL),console.log("WebSocket URL:",this.websocketURL),console.log("Environment:",this.environment),console.log("Features:",this.features),console.log("Endpoints:",this.endpoints),console.groupEnd())}validateConfig(){const e=[];return this.baseURL||e.push("REACT_APP_API_URL is required"),!(e.length>0)||(console.error("\u274c API Configuration Errors:",e),!1)}};hi.validateConfig(),hi.debugMode&&hi.logConfig();const pi=hi;const mi=new class{constructor(){this.client=di.create({baseURL:pi.baseURL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),this.client.interceptors.request.use(e=>{if(!(e.url&&(e.url.includes("/api/customer/")||e.url.includes("/api/auth/customer/")||e.url.includes("/api/auth/validate-session")||e.url.includes("/api/create-checkout-session")||e.url.includes("/api/terms")||e.url.includes("/api/public/")||e.url.includes("/api/test-webhook")||e.url.includes("/api/auth/refresh-token")))){const t=this.getAuthToken();t&&(this.isTokenExpired(t)&&console.log("\ud83d\udd04 Access token expired, attempting refresh..."),e.headers.Authorization="Bearer ".concat(t))}try{"undefined"!==typeof FormData&&e.data instanceof FormData&&e.headers&&(delete e.headers["Content-Type"],delete e.headers["content-type"])}catch(tR){}var t;pi.debugMode&&(e.metadata={startTime:new Date},console.log("\ud83d\ude80 API Request: ".concat(null===(t=e.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.url)));return e},e=>(console.error("\u274c Request Error:",e),Promise.reject(e))),this.client.interceptors.response.use(e=>{if(pi.debugMode&&e.config.metadata){var t;const n=new Date-e.config.metadata.startTime;console.log("\u2705 API Response: ".concat(null===(t=e.config.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.config.url," (").concat(n,"ms)"))}return e},e=>{if(e.response){const{status:o,data:l}=e.response;if(401===o){var t,n,i;if((null===(t=e.config)||void 0===t?void 0:t.url)&&(e.config.url.includes("/api/customer/")||e.config.url.includes("/api/auth/customer/")||e.config.url.includes("/api/auth/validate-session")))console.log("\ud83d\udd12 401 error for customer endpoint - redirecting to login"),"/login"!==window.location.pathname&&(window.location.href="/login");else if(null===(n=e.config)||void 0===n||null===(i=n.url)||void 0===i||!i.includes("/validate-session")){const t=["/api/customer/addresses","/api/create-checkout-session"],n=["/api/terms","/api/public/","/api/test-webhook"],i=["/api/customer/profile","/api/auth/customer/login"].some(t=>{var n,i;return null===(n=e.config)||void 0===n||null===(i=n.url)||void 0===i?void 0:i.includes(t)}),r=t.some(t=>{var n,i;return null===(n=e.config)||void 0===n||null===(i=n.url)||void 0===i?void 0:i.includes(t)}),s=n.some(t=>{var n,i;return null===(n=e.config)||void 0===n||null===(i=n.url)||void 0===i?void 0:i.includes(t)});if(i)console.log("\ud83d\udd12 401 error on critical endpoint - clearing auth"),this.clearAuthToken(),localStorage.removeItem("lastValidation"),"/login"!==window.location.pathname&&(window.location.href="/login");else if(r){console.log("\ud83d\udd12 401 error on checkout endpoint - redirecting to login with return URL"),this.clearAuthToken(),localStorage.removeItem("lastValidation");const e=encodeURIComponent(window.location.pathname+window.location.search);window.location.href="/login?returnUrl=".concat(e)}else s?console.log("\ud83d\udd12 401 error on public endpoint - this should not happen"):console.log("\ud83d\udd12 401 error on non-critical endpoint - continuing with cached auth")}}else 403===o?l.message&&(l.message.includes("token")||l.message.includes("expired")||l.message.includes("invalid"))?(this.clearAuthToken(),"/login"!==window.location.pathname&&(window.location.href="/login")):console.error("\u274c Access Denied:",l.message||"Insufficient permissions"):o>=500&&console.error("\u274c Server Error:",l.message||"Internal server error");var r,s,a;if(pi.debugMode)console.error("\u274c API Error: ".concat(null===(r=e.config)||void 0===r||null===(s=r.method)||void 0===s?void 0:s.toUpperCase()," ").concat(null===(a=e.config)||void 0===a?void 0:a.url),{status:o,data:l,headers:e.response.headers})}else e.request?console.error("\u274c Network Error:",e.message):console.error("\u274c Request Setup Error:",e.message);return Promise.reject(e)}),this.client.interceptors.response.use(e=>e,async e=>{var t,n,i;const r=e.config;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&"TOKEN_EXPIRED"===(null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.code)&&!r._retry){r._retry=!0;try{console.log("\ud83d\udd04 Attempting to refresh expired token...");const e=await this.refreshAccessToken();return r.headers.Authorization="Bearer ".concat(e),this.client(r)}catch(s){return console.error("\u274c Token refresh failed:",s),this.clearAuthToken(),window.location.href="/login",Promise.reject(s)}}return Promise.reject(e)})}getAuthToken(){return localStorage.getItem("accessToken")}getRefreshToken(){return localStorage.getItem("refreshToken")}setTokens(e){e&&e.accessToken&&localStorage.setItem("accessToken",e.accessToken),e&&e.refreshToken&&localStorage.setItem("refreshToken",e.refreshToken)}clearAuthToken(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("userData"),localStorage.removeItem("authToken"),localStorage.removeItem("rememberMe"),localStorage.removeItem("loginTime"),localStorage.removeItem("persistentAccount")}isTokenExpired(e){if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])),n=Math.floor(Date.now()/1e3);return t.exp<n}catch(RT){return!0}}async refreshAccessToken(){const e=this.getRefreshToken();if(!e)throw new Error("No refresh token available");try{const t=await this.post("/api/auth/refresh-token",{refreshToken:e});if(t.success&&t.accessToken)return localStorage.setItem("accessToken",t.accessToken),t.accessToken;throw new Error("Token refresh failed")}catch(RT){throw console.error("Token refresh failed:",RT),this.clearAuthToken(),RT}}async attemptSessionRestoration(e){try{console.log("\ud83d\udd12 Attempting session restoration for:",e);const t=await this.post("/api/auth/restore-session",{email:e});return t.success?(console.log("\u2705 Session restored successfully"),t.tokens&&this.setTokens(t.tokens),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("userData",JSON.stringify(t.user)),localStorage.setItem("persistentAccount","true"),window.dispatchEvent(new CustomEvent("sessionRestored",{detail:{user:t.user}})),{success:!0,user:t.user}):(console.log("\u274c Session restoration failed:",t.message),this.clearAuthToken(),"/login"!==window.location.pathname&&(window.location.href="/login"),{success:!1,error:t.message})}catch(RT){return console.error("\u274c Session restoration error:",RT),this.clearAuthToken(),"/login"!==window.location.pathname&&(window.location.href="/login"),{success:!1,error:RT.message}}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await this.client.get(e,t)).data}catch(RT){throw this.handleError(RT)}}async post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await this.client.post(e,t,n)).data}catch(RT){throw this.handleError(RT)}}async put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await this.client.put(e,t,n)).data}catch(RT){throw this.handleError(RT)}}async patch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await this.client.patch(e,t,n)).data}catch(RT){throw this.handleError(RT)}}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await this.client.delete(e,t)).data}catch(RT){throw this.handleError(RT)}}handleError(e){var t,n,i,r,s;if(console.error("\u274c API Error Details:",{message:e.message,response:null===(t=e.response)||void 0===t?void 0:t.data,status:null===(n=e.response)||void 0===n?void 0:n.status,statusText:null===(i=e.response)||void 0===i?void 0:i.statusText,url:null===(r=e.config)||void 0===r?void 0:r.url,baseURL:null===(s=e.config)||void 0===s?void 0:s.baseURL}),e.response){var a,o;const t=(null===(a=e.response.data)||void 0===a?void 0:a.message)||(null===(o=e.response.data)||void 0===o?void 0:o.error)||"Server error occurred";return new Error(t)}return e.request?(console.error("\u274c Network Error - No response received:",e.request),new Error("Network error - please check your connection")):(console.error("\u274c Other Error:",e.message),new Error(e.message||"An unexpected error occurred"))}async healthCheck(){try{return await this.get("/health")}catch(RT){return console.error("\u274c Backend health check failed:",RT.message),null}}async testConnection(){try{return!!await this.healthCheck()&&(console.log("\u2705 Backend connection successful"),!0)}catch(RT){return console.error("\u274c Backend connection failed:",RT.message),!1}}},fi=mi;var gi=n(414);const vi=(0,r.createContext)(),xi=()=>{const e=(0,r.useContext)(vi);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},yi=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{try{a(!0);const e=localStorage.getItem("authToken"),t=localStorage.getItem("userData");if(e&&t){const n=JSON.parse(t);i(n),l(e),await h()}else await h()}catch(RT){console.error("Auth initialization error:",RT),g()}finally{a(!1)}},[]),h=(0,r.useCallback)(async()=>{try{const e=await fi.get("/api/auth/status");if(e.success&&e.authenticated){const{user:t,sessionId:n}=e;return i(t),u(n),t&&localStorage.setItem("userData",JSON.stringify(t)),!0}return g(),!1}catch(RT){var e;return console.error("Auth status check error:",RT),401===(null===(e=RT.response)||void 0===e?void 0:e.status)&&g(),!1}},[]),p=(0,r.useCallback)(async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{a(!0);const r=await fi.post("/api/auth/customer/login",{email:e,password:t,rememberMe:n});if(r.success){const{user:e,tokens:t,sessionId:n}=r;return i(e),u(n),t&&(t.accessToken&&(l(t.accessToken),localStorage.setItem("accessToken",t.accessToken)),t.refreshToken&&localStorage.setItem("refreshToken",t.refreshToken)),localStorage.setItem("userData",JSON.stringify(e)),{success:!0,user:e}}return{success:!1,error:r.message||"Login failed"}}catch(RT){console.error("Customer login error:",RT);const t=RT.message||"Login failed",n=RT.code;return{success:!1,error:t,code:n,isAccountInactive:"ACCOUNT_INACTIVE"===n}}finally{a(!1)}},[]),m=(0,r.useCallback)(async e=>{try{a(!0);const t=await fi.post("/api/auth/customer/register",e);if(t.success){const{user:e,tokens:n}=t;return i(e),n&&(n.accessToken&&(l(n.accessToken),localStorage.setItem("accessToken",n.accessToken)),n.refreshToken&&localStorage.setItem("refreshToken",n.refreshToken)),localStorage.setItem("userData",JSON.stringify(e)),{success:!0,user:e}}return{success:!1,error:t.message||"Registration failed"}}catch(RT){return console.error("Customer registration error:",RT),{success:!1,error:RT.message||"Registration failed",code:RT.code}}finally{a(!1)}},[]),f=(0,r.useCallback)(async()=>{try{await fi.post("/auth/logout")}catch(RT){console.error("Logout error:",RT)}finally{g()}},[]),g=(0,r.useCallback)(()=>{i(null),l(null),u(null),localStorage.removeItem("authToken"),localStorage.removeItem("userData")},[]),v=(0,r.useCallback)(async e=>{try{const t=await fi.put("/api/auth/profile",e);if(t.data.success){const e=Fe(Fe({},n),t.data.user);return i(e),localStorage.setItem("userData",JSON.stringify(e)),{success:!0,user:e}}return{success:!1,error:t.data.message||"Profile update failed"}}catch(RT){var t,r;return console.error("Profile update error:",RT),{success:!1,error:(null===(t=RT.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||RT.message||"Profile update failed"}}},[n]),x=(0,r.useCallback)(async(e,t,n)=>{try{const i=await fi.post("/api/auth/change-password",{currentPassword:e,newPassword:t,confirmPassword:n});return i.data.success?{success:!0,message:i.data.message}:{success:!1,error:i.data.message||"Password change failed"}}catch(RT){var i,r;return console.error("Password change error:",RT),{success:!1,error:(null===(i=RT.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||RT.message||"Password change failed"}}},[]),y=(0,r.useCallback)(async()=>{try{const e=localStorage.getItem("refreshToken");if(!e)throw new Error("Refresh token is required");const t=await fi.post("/api/auth/refresh-token",{refreshToken:e});if(t.success){const e=t.accessToken;return l(e),localStorage.setItem("accessToken",e),{success:!0,token:e}}return{success:!1,error:t.message||"Token refresh failed"}}catch(RT){var e,t,n;return console.error("Token refresh error:",RT),401===(null===(e=RT.response)||void 0===e?void 0:e.status)&&g(),{success:!1,error:(null===(t=RT.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||RT.message||"Token refresh failed"}}},[g]),_=Boolean(n),b="Customer"===(null===n||void 0===n?void 0:n.role)||"customer"===(null===n||void 0===n?void 0:n.type),w="employee"===(null===n||void 0===n?void 0:n.type)||(null===n||void 0===n?void 0:n.role)&&"Customer"!==n.role,A="Admin"===(null===n||void 0===n?void 0:n.role);(0,r.useEffect)(()=>{d()},[d]),(0,r.useEffect)(()=>{const e=fi.client.interceptors.request.use(e=>(o&&(e.headers.Authorization="Bearer ".concat(o)),e),e=>Promise.reject(e)),t=fi.client.interceptors.response.use(e=>e,async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&!e.config._retry){e.config._retry=!0;const t=await y();if(t.success)return e.config.headers.Authorization="Bearer ".concat(t.token),fi.client.request(e.config);g()}return Promise.reject(e)});return()=>{fi.client.interceptors.request.eject(e),fi.client.interceptors.response.eject(t)}},[o,y,g]);const S={user:n,token:o,loading:s,sessionId:c,loginCustomer:p,registerCustomer:m,logout:f,updateProfile:v,changePassword:x,refreshToken:y,checkAuthStatus:h,isAuthenticated:_,isCustomer:b,isEmployee:w,isAdmin:A,getUserRole:()=>(null===n||void 0===n?void 0:n.role)||null};return(0,gi.jsx)(vi.Provider,{value:S,children:t})},_i="ADD_ITEM",bi="REMOVE_ITEM",wi="UPDATE_QUANTITY",Ai="CLEAR_CART",Si="LOAD_CART",Ei="SET_LOADING",Ci=(e,t)=>{switch(t.type){case _i:{var n,i;const{product:r,quantity:s=1,customization:a={}}=t.payload,o=null===(n=r.selectedVariation)||void 0===n?void 0:n.id,l=null===(i=r.selectedVariation)||void 0===i?void 0:i.name,c=r.useOriginalProduct,u=r.selectedVariation,d="".concat(r.id,"-").concat(o||"original","-").concat(JSON.stringify(a)),h=e.items.findIndex(e=>e.product.id===r.id&&e.variationId===o&&JSON.stringify(e.customization)===JSON.stringify(a));if(h>=0){const t=[...e.items];return t[h].quantity+=s,Fe(Fe({},e),{},{items:t})}{const t={id:d,product:r,quantity:s,customization:a,price:r.hasDiscount&&r.discountInfo?r.discountInfo.discountedPrice:r.price,variationId:o,variationName:l,useOriginalProduct:c,selectedVariation:u};return Fe(Fe({},e),{},{items:[...e.items,t]})}}case bi:return Fe(Fe({},e),{},{items:e.items.filter(e=>e.id!==t.payload.itemId)});case wi:{const{itemId:n,quantity:i}=t.payload;return Fe(Fe({},e),{},i<=0?{items:e.items.filter(e=>e.id!==n)}:{items:e.items.map(e=>e.id===n?Fe(Fe({},e),{},{quantity:i,variationId:e.variationId,variationName:e.variationName,useOriginalProduct:e.useOriginalProduct,selectedVariation:e.selectedVariation}):e)})}case Ai:return Fe(Fe({},e),{},{items:[]});case Si:{const n=t.payload.items&&t.payload.items.length>0||0===e.items.length;return Fe(Fe({},e),{},{items:n?t.payload.items||[]:e.items,isLoading:!1})}case Ei:return Fe(Fe({},e),{},{isLoading:t.payload});default:return e}},Ti={items:[],isOpen:!1,isLoading:!0},Mi=(0,r.createContext)(),Pi=e=>{let{children:t,userId:n}=e;const[i,s]=(0,r.useReducer)(Ci,Ti),[a,o]=(0,r.useState)(n),l=()=>{console.log("[CartContext] Force refreshing cart for userId:",n);const e=localStorage.getItem("shopping-cart-".concat(n)),t=localStorage.getItem("shopping-cart-guest");if(e)try{const t=JSON.parse(e);s({type:Si,payload:t})}catch(RT){console.error("Error refreshing cart:",RT)}else if(t&&"guest"!==n)try{const e=JSON.parse(t);e.items&&e.items.length>0&&(s({type:Si,payload:e}),localStorage.removeItem("shopping-cart-guest"))}catch(RT){console.error("Error refreshing guest cart:",RT)}};(0,r.useEffect)(()=>{const e=()=>{console.log("[CartContext] Login success event received, refreshing cart"),setTimeout(()=>{l()},200)};return window.addEventListener("loginSuccess",e),()=>{window.removeEventListener("loginSuccess",e)}},[n]),(0,r.useEffect)(()=>{if("loading"===n)return void s({type:Ei,payload:!0});s({type:Ei,payload:!1});const e=localStorage.getItem("shopping-cart-".concat(n)),t=localStorage.getItem("shopping-cart-guest"),r="guest"===a&&"guest"!==n;if(e)try{const n=JSON.parse(e);if(r&&t)try{const e=JSON.parse(t);if(e.items&&e.items.length>0){const t=[...n.items||[]];e.items.forEach(e=>{const n=t.findIndex(t=>t.product.id===e.product.id&&t.variationId===e.variationId&&JSON.stringify(t.customization)===JSON.stringify(e.customization));n>=0?t[n].quantity+=e.quantity:t.push(e)});const i=Fe(Fe({},n),{},{items:t});return s({type:Si,payload:i}),void localStorage.removeItem("shopping-cart-guest")}}catch(RT){console.error("Error merging carts during login transition:",RT)}n.items&&n.items.length>0||0===i.items.length?s({type:Si,payload:n}):s({type:Ei,payload:!1})}catch(RT){console.error("Error loading cart from localStorage:",RT),s({type:Si,payload:{items:[]}})}else if(t&&"guest"!==n)try{const e=JSON.parse(t);e.items&&e.items.length>0?(s({type:Si,payload:e}),localStorage.removeItem("shopping-cart-guest")):s({type:Si,payload:{items:[]}})}catch(RT){console.error("Error merging guest cart:",RT),s({type:Si,payload:{items:[]}})}else if(e&&t&&"guest"!==n)try{const n=JSON.parse(e),i=JSON.parse(t);if(i.items&&i.items.length>0){const e=[...n.items||[]];i.items.forEach(t=>{const n=e.findIndex(e=>e.product.id===t.product.id&&e.variationId===t.variationId&&JSON.stringify(e.customization)===JSON.stringify(t.customization));n>=0?e[n].quantity+=t.quantity:e.push(t)});const t=Fe(Fe({},n),{},{items:e});s({type:Si,payload:t}),localStorage.removeItem("shopping-cart-guest")}else s({type:Si,payload:n})}catch(RT){console.error("Error merging carts:",RT),s({type:Si,payload:{items:[]}})}else s({type:Si,payload:{items:[]}});o(n)},[n,a]),(0,r.useEffect)(()=>{"loading"!==n&&localStorage.setItem("shopping-cart-".concat(n),JSON.stringify(i))},[i,n]);const c=()=>i.items.reduce((e,t)=>e+t.price*t.quantity,0),u={items:i.items,isOpen:i.isOpen,isLoading:i.isLoading,addToCart:function(e){s({type:_i,payload:{product:e,quantity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,customization:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}})},removeFromCart:e=>{s({type:bi,payload:{itemId:e}})},updateQuantity:(e,t)=>{console.log("[CartContext] updateQuantity called:",{itemId:e,quantity:t}),s({type:wi,payload:{itemId:e,quantity:t}})},clearCart:()=>{s({type:Ai})},refreshCart:l,getItemCount:()=>i.items.reduce((e,t)=>e+t.quantity,0),getSubtotal:c,getTotal:()=>c()};return(0,gi.jsx)(Mi.Provider,{value:u,children:t})},Ni=()=>{const e=(0,r.useContext)(Mi);if(!e)throw new Error("useCart must be used within a CartProvider");return e},Ri=(0,r.createContext)(),Li="SET_CURRENCY",ji="SET_EXCHANGE_RATES",Ii="LOAD_CURRENCY",ki={currentCurrency:"PHP",exchangeRates:{PHP:1,USD:.018},currencies:[{code:"PHP",name:"Philippine Peso",symbol:"\u20b1"},{code:"USD",name:"US Dollar",symbol:"$"}]},Bi=(e,t)=>{switch(t.type){case Li:return Fe(Fe({},e),{},{currentCurrency:t.payload});case ji:return Fe(Fe({},e),{},{exchangeRates:t.payload});case Ii:return Fe(Fe({},e),{},{currentCurrency:t.payload});default:return e}},Di=e=>{let{children:t}=e;const[n,i]=(0,r.useReducer)(Bi,ki);(0,r.useEffect)(()=>{const e=localStorage.getItem("selected-currency");e&&["PHP","USD"].includes(e)&&i({type:Ii,payload:e})},[]),(0,r.useEffect)(()=>{localStorage.setItem("selected-currency",n.currentCurrency)},[n.currentCurrency]);const s=e=>{if("PHP"===n.currentCurrency)return e;return e*(n.exchangeRates[n.currentCurrency]||1)},a=()=>n.currencies.find(e=>e.code===n.currentCurrency)||n.currencies[0],o={currentCurrency:n.currentCurrency,currencies:n.currencies,exchangeRates:n.exchangeRates,setCurrency:e=>{["PHP","USD"].includes(e)&&i({type:Li,payload:e})},updateExchangeRates:e=>{i({type:ji,payload:e})},formatPrice:e=>{if(null===e||void 0===e||isNaN(e))return"\u20b10.00";const t=s(e),n=a();return"PHP"===n.code?"\u20b1".concat(t.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})):"USD"===n.code?"$".concat(t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):"".concat(n.symbol).concat(t.toLocaleString())},convertPrice:s,getCurrentCurrency:a};return(0,gi.jsx)(Ri.Provider,{value:o,children:t})},Oi=()=>{const e=(0,r.useContext)(Ri);if(!e)throw new Error("useCurrency must be used within a CurrencyProvider");return e},Fi=(0,r.createContext)(),Ui="SET_LANGUAGE",zi="LOAD_LANGUAGE",Hi={currentLanguage:"en",languages:[{code:"en",name:"English"},{code:"fil",name:"Filipino"}],translations:{en:{home:"HOME",products:"Products",customFurniture:"3D Products Furniture",projects:"Projects",about:"About Us",contact:"Contact Us",payments:"Payments",search:"Search",searchProducts:"Search products...",searchPlaceholder:"Search for furniture, chairs, desks...",addToCart:"Add to Cart",buyNow:"Buy Now",viewDetails:"View Details",quantity:"Quantity",price:"Price",total:"Total",subtotal:"Subtotal",tax:"Tax",shipping:"Shipping",featuredProducts:"Featured Products",newArrivals:"New Arrivals",bestSellers:"Best Sellers",productCatalog:"Product Catalog",allProducts:"All Products",inStock:"In Stock",outOfStock:"Out of Stock",filters:"Filters",category:"Category",priceRange:"Price Range",sortBy:"Sort By",clearFilters:"Clear All Filters",cart:"Cart",emptyCart:"Your cart is empty",removeFromCart:"Remove from cart",updateQuantity:"Update quantity",checkout:"Checkout",proceedToCheckout:"Proceed to Checkout",orderSummary:"Order Summary",loading:"Loading...",error:"Error",success:"Success",specialOffer:"SPECIAL OFFER",offerText:"Get 25% off premium office furniture collections - Limited time offer ending soon!",shopNow:"Shop Now",excellenceInDesign:"EXCELLENCE IN DESIGN"},fil:{home:"TAHANAN",products:"Mga Produkto",customFurniture:"3D Custom na Muwebles",projects:"Mga Proyekto",about:"Tungkol Sa Amin",contact:"Makipag-ugnayan",payments:"Mga Bayad",search:"Maghanap",searchProducts:"Maghanap ng mga produkto...",searchPlaceholder:"Maghanap ng muwebles, upuan, mesa...",addToCart:"Idagdag sa Cart",buyNow:"Bilhin Ngayon",viewDetails:"Tingnan ang Detalye",quantity:"Dami",price:"Presyo",total:"Kabuuan",subtotal:"Subtotal",tax:"Buwis",shipping:"Pagpapadala",featuredProducts:"Mga Tampok na Produkto",newArrivals:"Mga Bagong Dating",bestSellers:"Mga Pinakamabenta",productCatalog:"Katalogo ng Produkto",allProducts:"Lahat ng Produkto",inStock:"May Stock",outOfStock:"Walang Stock",filters:"Mga Filter",category:"Kategorya",priceRange:"Saklaw ng Presyo",sortBy:"Ayusin Ayon Sa",clearFilters:"Burahin Lahat ng Filter",cart:"Cart",emptyCart:"Walang laman ang inyong cart",removeFromCart:"Alisin sa cart",updateQuantity:"I-update ang dami",checkout:"Checkout",proceedToCheckout:"Magpatuloy sa Checkout",orderSummary:"Buod ng Order",loading:"Naglo-load...",error:"May Mali",success:"Tagumpay",specialOffer:"ESPESYAL NA ALOK",offerText:"Makakuha ng 25% discount sa premium office furniture collections - Limitadong oras lamang!",shopNow:"Mamili Ngayon",excellenceInDesign:"KAHUSAYAN SA DISENYO"}}},Gi=(e,t)=>{switch(t.type){case Ui:case zi:return Fe(Fe({},e),{},{currentLanguage:t.payload});default:return e}},Wi=e=>{let{children:t}=e;const[n,i]=(0,r.useReducer)(Gi,Hi);(0,r.useEffect)(()=>{const e=localStorage.getItem("selected-language");e&&i({type:zi,payload:e})},[]),(0,r.useEffect)(()=>{localStorage.setItem("selected-language",n.currentLanguage)},[n.currentLanguage]);const s={currentLanguage:n.currentLanguage,languages:n.languages,setLanguage:e=>{i({type:Ui,payload:e})},t:e=>n.translations[n.currentLanguage][e]||e,getCurrentLanguage:()=>n.languages.find(e=>e.code===n.currentLanguage)||n.languages[0]};return(0,gi.jsx)(Fi.Provider,{value:s,children:t})},Vi=(0,r.createContext)(),Ji=()=>{const e=(0,r.useContext)(Vi);if(!e)throw new Error("useWishlist must be used within a WishlistProvider");return e},Yi=e=>{let{children:t,userId:n}=e;const[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(n);(0,r.useEffect)(()=>{if("loading"===n)return void c(!0);c(!1);const e=localStorage.getItem("wishlist-".concat(n)),t=localStorage.getItem("wishlist-guest"),r="guest"===u&&"guest"!==n;if(e)try{const a=JSON.parse(e);if(r&&t)try{const e=JSON.parse(t);if(e&&e.length>0){const t=[...a];return e.forEach(e=>{-1===t.findIndex(t=>t.id===e.id)&&t.push(e)}),s(t),localStorage.removeItem("wishlist-guest"),void d(n)}}catch(RT){console.error("Error merging wishlists during login transition:",RT)}a&&a.length>0||0===i.length?s(a):c(!1)}catch(RT){console.error("Error loading wishlist from localStorage:",RT),s([])}else if(t&&"guest"!==n)try{const e=JSON.parse(t);e&&e.length>0?(s(e),localStorage.removeItem("wishlist-guest")):s([])}catch(RT){console.error("Error merging guest wishlist:",RT),s([])}else if(e&&t&&"guest"!==n)try{const n=JSON.parse(e),i=JSON.parse(t);if(i&&i.length>0){const e=[...n];i.forEach(t=>{-1===e.findIndex(e=>e.id===t.id)&&e.push(t)}),s(e),localStorage.removeItem("wishlist-guest")}else s(n)}catch(RT){console.error("Error merging wishlists:",RT),s([])}else s([]);d(n)},[n,u]),(0,r.useEffect)(()=>{"loading"!==n&&localStorage.setItem("wishlist-".concat(n),JSON.stringify(i))},[i,n]),(0,r.useEffect)(()=>{const e=()=>{setTimeout(()=>{d("guest")},200)};return window.addEventListener("loginSuccess",e),()=>{window.removeEventListener("loginSuccess",e)}},[n]);const h=e=>{s(t=>{if(!t.find(t=>t.id===e.id)){return[...t,Fe(Fe({},e),{},{addedAt:(new Date).toISOString()})]}return t})},p=e=>{s(t=>t.filter(t=>t.id!==e))},m=e=>i.some(t=>t.id===e),f={wishlist:i,isWishlistOpen:a,isLoading:l,addToWishlist:h,removeFromWishlist:p,isInWishlist:m,toggleWishlist:e=>{m(e.id)?p(e.id):h(e)},clearWishlist:()=>{s([])},openWishlist:()=>{o(!0)},closeWishlist:()=>{o(!1)},wishlistCount:i.length};return(0,gi.jsx)(Vi.Provider,{value:f,children:t})},Xi=[{id:1,name:"Executive Office Table",description:"Premium executive office table with modern design and customizable features.",basePrice:500,category:"Tables",image:"/images/table-1.jpg",features:["Adjustable height","Premium materials","Modern design","Customizable"]},{id:2,name:"Ergonomic Office Chair",description:"Comfortable ergonomic office chair with lumbar support and adjustable features.",basePrice:200,category:"Chairs",image:"/images/chair-1.jpg",features:["Ergonomic design","Lumbar support","Adjustable height","Breathable mesh"]},{id:3,name:"Storage Cabinet",description:"Modern storage cabinet with multiple compartments and secure locking system.",basePrice:800,category:"Storage",image:"/images/cabinet-1.jpg",features:["Multiple compartments","Secure locks","Modern design","Durable materials"]}],Zi=[{id:1,name:"Tables",description:"Office tables and desks"},{id:2,name:"Chairs",description:"Office chairs and seating"},{id:3,name:"Storage",description:"Storage solutions and cabinets"},{id:4,name:"Workstations",description:"Complete workstation setups"}],qi={getProducts:()=>Promise.resolve({success:!0,data:Xi}),getProduct:e=>{const t=Xi.find(t=>t.id===parseInt(e));return Promise.resolve({success:!0,data:t||null})},getCategories:()=>Promise.resolve({success:!0,data:Zi}),getProjects:async()=>{try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/projects"));if(!t.ok)throw new Error("Failed to fetch project data");return{success:!0,data:await t.json()}}catch(RT){return console.error("Error fetching projects:",RT),{success:!1,data:[]}}},login:e=>"admin@designxcel.com"===e.email&&"admin123"===e.password?Promise.resolve({success:!0,data:{token:"mock-admin-jwt-token",user:{id:1,firstName:"Admin",lastName:"User",email:e.email,role:"Admin"}}}):"manager@designxcel.com"===e.email&&"admin123"===e.password?Promise.resolve({success:!0,data:{token:"mock-employee-jwt-token",user:{id:2,firstName:"Manager",lastName:"User",email:e.email,role:"Employee"}}}):Promise.resolve({success:!0,data:{token:"mock-jwt-token",user:{id:3,firstName:"Demo",lastName:"User",email:e.email,role:"Customer"}}}),register:e=>Promise.resolve({success:!0,data:{token:"mock-jwt-token",user:{id:1,name:e.name,email:e.email}}})},Ki=qi,Qi={async getAllProducts(){try{const e=await fi.get("/api/products");if(e.success&&Array.isArray(e.products))return{products:e.products,total:e.products.length,page:1,totalPages:1};throw new Error("Invalid response from backend API")}catch(RT){throw console.error("Failed to fetch products from backend:",RT),new Error("Unable to load products. Please check your connection and try again.")}},async getProductById(e){try{const t=await fi.get("/api/products/".concat(e));if(t.success&&t.product)return console.log("Fetched product data from backend:",t.product),{product:t.product};throw new Error("Product not found")}catch(RT){throw console.error("Failed to fetch product from backend:",RT),new Error("Unable to load product details. Please check your connection and try again.")}},async searchProducts(e){try{const t=await fi.get("/api/products/search?q=".concat(encodeURIComponent(e)));return t.success&&Array.isArray(t.products)?t.products:[]}catch(RT){return console.error("Search error:",RT),[]}},async getFeaturedProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;try{const t=await fi.get("/api/products");if(t.success&&Array.isArray(t.products)){const n=t.products.filter(e=>e.featured).slice(0,e);return{products:n}}throw new Error("Invalid response from backend API")}catch(RT){throw console.error("Failed to fetch featured products from backend:",RT),new Error("Unable to load featured products. Please check your connection and try again.")}},async getCategories(){try{const e=await fi.get("/api/public/categories");if(e.success&&Array.isArray(e.categories))return{categories:e.categories};throw new Error("Invalid response from backend API")}catch(RT){throw console.error("Failed to fetch categories from backend:",RT),new Error("Unable to load categories. Please check your connection and try again.")}},async getCategoriesWithCounts(){try{const e=await fi.get("/api/public/categories");if(e.success&&Array.isArray(e.categories))return e.categories.map(e=>({name:e.name||e,count:e.count||0,categoryName:e.name||e}));throw new Error("Invalid response from backend API")}catch(RT){throw console.error("Failed to fetch categories with counts from backend:",RT),new Error("Unable to load categories. Please check your connection and try again.")}},async getMaterials(){try{const e=await fi.get("/api/public/materials");if(e.success&&Array.isArray(e.materials))return{materials:e.materials};throw new Error("Invalid response from backend API")}catch(RT){throw console.error("Failed to fetch materials from backend:",RT),new Error("Unable to load materials. Please check your connection and try again.")}},async getProductVariations(e){try{const t=await fi.get("/api/products/".concat(e,"/variations"));if(t.success&&Array.isArray(t.variations))return{variations:t.variations}}catch(RT){console.log("Backend not available for variations, returning empty array")}var t;return await(t=200,new Promise(e=>setTimeout(e,t))),{variations:[]}},async checkout(e){let{productId:t,quantity:n,variationId:i}=e;const r={productId:t,quantity:n,variationId:i};try{return await fi.post("/api/checkout",r)}catch(RT){throw console.error("Checkout failed:",RT.message),RT}}},$i=Qi.getAllProducts,er=Qi.getProductById,tr=(Qi.searchProducts,Qi.getFeaturedProducts),nr=Qi.getCategories,ir=(Qi.getMaterials,Qi.getProductVariations);var rr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sr=r.createContext&&r.createContext(rr),ar=function(){return ar=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ar.apply(this,arguments)},or=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function lr(e){return e&&e.map(function(e,t){return r.createElement(e.tag,ar({key:t},e.attr),lr(e.child))})}function cr(e){return function(t){return r.createElement(ur,ar({attr:ar({},e.attr)},t),lr(e.child))}}function ur(e){var t=function(t){var n,i=e.attr,s=e.size,a=e.title,o=or(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",ar({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:n,style:ar(ar({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),e.children)};return void 0!==sr?r.createElement(sr.Consumer,null,function(e){return t(e)}):t(rr)}function dr(e){return cr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function hr(e){return cr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(e)}function pr(e){return cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function mr(e){return cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)}function fr(e){return cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"}}]})(e)}function gr(e){return cr({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function vr(e){return cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(e)}function xr(e){return cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"}}]})(e)}function yr(e){return cr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function _r(e){return cr({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(e)}function br(e){return cr({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(e)}function wr(e){return cr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}const Ar=()=>"https://designxcellinv-production.up.railway.app",Sr=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?"".concat("https://designxcellinv-production.up.railway.app").concat(e):"".concat("https://designxcellinv-production.up.railway.app","/uploads/").concat(e):"",Er=e=>{var t,n;if(!e)return"/logo192.png";const i=[e.ImageURL,e.image,null===(t=e.images)||void 0===t?void 0:t[0],null===(n=e.Images)||void 0===n?void 0:n[0]];for(const r of i)if(r)return Sr(r);return"/logo192.png"},Cr=e=>{if(!e)return null;const t=[e.model3d,e.Model3D,e.model3D,e.model_3d];for(const n of t)if(n&&(n.includes(".glb")||n.includes(".gltf"))){const e=Sr(n);return console.log("3D Model URL constructed:",{originalField:n,constructedUrl:e,backendUrl:Ar()}),e}return null},Tr=e=>{let{className:t="",size:n="medium"}=e;const[i,s]=(0,r.useState)("default"),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),u=()=>(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,gi.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,gi.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,gi.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,gi.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,gi.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,gi.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,gi.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,gi.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),d=()=>(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,gi.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),h=()=>(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,gi.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,gi.jsx)("path",{d:"M2 12l10 5 10-5"})]});(0,r.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat("https://designxcellinv-production.up.railway.app","/api/theme/public"));if(e.ok){const t=await e.json();t.success&&s(t.activeTheme||"default")}}catch(RT){s("default")}})()},[]);const p=async()=>{if(a)return;const e=["default","dark","christmas"],t=e.indexOf(i),n=e[(t+1)%e.length];o(!0),c(!0);try{const e=await fetch("".concat("https://designxcellinv-production.up.railway.app","/api/theme/public"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({activeTheme:n})});if(e.ok){(await e.json()).success&&(s(n),window.themeManager?window.themeManager.applyTheme(n):(document.body.className=document.body.className.replace(/theme-\w+/g,"").trim(),"default"!==n&&document.body.classList.add("theme-".concat(n))))}}catch(RT){}finally{setTimeout(()=>{o(!1),c(!1)},300)}};return(0,gi.jsx)("div",{className:"modern-theme-switcher ".concat(t," ").concat({small:"theme-switcher-small",medium:"theme-switcher-medium",large:"theme-switcher-large"}[n]),children:(0,gi.jsxs)("div",{className:"theme-toggle-container",children:[(0,gi.jsx)("div",{className:"theme-toggle-wrapper",children:(0,gi.jsx)("div",{className:"theme-toggle-switch ".concat("christmas"===i?"christmas-mode":"dark"===i?"dark-mode":"default-mode"),onClick:p,children:(0,gi.jsx)("div",{className:"theme-toggle-thumb",children:"christmas"===i?(0,gi.jsx)(h,{}):"dark"===i?(0,gi.jsx)(d,{}):(0,gi.jsx)(u,{})})})}),(0,gi.jsx)("button",{onClick:p,disabled:a,className:"theme-toggle-hidden-btn",title:"Switch to ".concat("default"===i?"christmas":"default"," theme"),"aria-label":"Switch to ".concat("default"===i?"christmas":"default"," theme"),children:a&&(0,gi.jsx)("div",{className:"theme-loading",children:(0,gi.jsx)("div",{className:"loading-spinner"})})})]})})},Mr={Tree:e=>{let{size:t=24,color:n="#228B22"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M12 2L8 8H6L10 14H8L12 20L16 14H14L18 8H16L12 2Z",fill:n}),(0,gi.jsx)("rect",{x:"11",y:"20",width:"2",height:"2",fill:"#8B4513"})]})},Star:e=>{let{size:t=24,color:n="#FFD700"}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:(0,gi.jsx)("path",{d:"M12 2L13.5 8.5H20L15 12.5L16.5 19L12 15L7.5 19L9 12.5L4 8.5H10.5L12 2Z",fill:n})})},Gift:e=>{let{size:t=24,color:n="#DC143C"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("rect",{x:"4",y:"6",width:"16",height:"12",fill:n}),(0,gi.jsx)("rect",{x:"4",y:"6",width:"16",height:"3",fill:"#228B22"}),(0,gi.jsx)("rect",{x:"11",y:"2",width:"2",height:"16",fill:"#228B22"})]})},Bell:e=>{let{size:t=24,color:n="#FFD700"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M12 2C8 2 5 5 5 9C5 11 6 13 8 14V18C8 19 9 20 10 20H14C15 20 16 19 16 18V14C18 13 19 11 19 9C19 5 16 2 12 2Z",fill:n}),(0,gi.jsx)("rect",{x:"11",y:"20",width:"2",height:"2",fill:"#8B4513"})]})},Snowflake:e=>{let{size:t=24,color:n="#FFFFFF"}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:(0,gi.jsx)("path",{d:"M12 2L12 22M2 12L22 12M5.5 5.5L18.5 18.5M18.5 5.5L5.5 18.5M12 2L8 8L12 12L16 8L12 2M12 12L8 16L12 20L16 16L12 12M12 2L16 8L12 12L8 8L12 2M12 12L16 16L12 20L8 16L12 12",stroke:n,strokeWidth:"1.5",fill:"none"})})},CandyCane:e=>{let{size:t=24,color:n="#DC143C"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M8 2L8 22",stroke:n,strokeWidth:"3",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M8 2L8 8",stroke:"#FFFFFF",strokeWidth:"3",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M8 10L8 16",stroke:"#FFFFFF",strokeWidth:"3",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M8 18L8 22",stroke:"#FFFFFF",strokeWidth:"3",strokeLinecap:"round"})]})},Holly:e=>{let{size:t=24,color:n="#228B22"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M12 2C10 4 8 6 8 8C8 10 10 12 12 12C14 12 16 10 16 8C16 6 14 4 12 2Z",fill:n}),(0,gi.jsx)("path",{d:"M12 12C10 14 8 16 8 18C8 20 10 22 12 22C14 22 16 20 16 18C16 16 14 14 12 12Z",fill:n}),(0,gi.jsx)("circle",{cx:"6",cy:"6",r:"2",fill:"#DC143C"}),(0,gi.jsx)("circle",{cx:"18",cy:"6",r:"2",fill:"#DC143C"}),(0,gi.jsx)("circle",{cx:"6",cy:"18",r:"2",fill:"#DC143C"}),(0,gi.jsx)("circle",{cx:"18",cy:"18",r:"2",fill:"#DC143C"})]})},Wreath:e=>{let{size:t=24,color:n="#228B22"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:n,strokeWidth:"2",fill:"none"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"8",stroke:n,strokeWidth:"1",fill:"none"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"6",stroke:n,strokeWidth:"1",fill:"none"}),(0,gi.jsx)("path",{d:"M12 2L14 6L18 6L15 9L16 13L12 11L8 13L9 9L6 6L10 6L12 2Z",fill:"#FFD700"})]})},Ornament:e=>{let{size:t=24,color:n="#DC143C"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("ellipse",{cx:"12",cy:"14",rx:"6",ry:"8",fill:n}),(0,gi.jsx)("rect",{x:"11",y:"2",width:"2",height:"4",fill:"#8B4513"}),(0,gi.jsx)("circle",{cx:"12",cy:"6",r:"1",fill:"#FFD700"})]})},Sleigh:e=>{let{size:t=24,color:n="#8B4513"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M2 18L22 18",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M4 16L20 16",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M6 14L18 14",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M8 12L16 12",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M10 10L14 10",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M12 8L12 18",stroke:n,strokeWidth:"2",strokeLinecap:"round"})]})},Reindeer:e=>{let{size:t=24,color:n="#8B4513"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("ellipse",{cx:"12",cy:"8",rx:"4",ry:"3",fill:n}),(0,gi.jsx)("ellipse",{cx:"8",cy:"6",rx:"1",ry:"1",fill:"#000000"}),(0,gi.jsx)("ellipse",{cx:"16",cy:"6",rx:"1",ry:"1",fill:"#000000"}),(0,gi.jsx)("path",{d:"M12 11L12 18",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M8 15L6 18",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M16 15L18 18",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M6 8L4 6",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M18 8L20 6",stroke:n,strokeWidth:"2",strokeLinecap:"round"})]})},Fireplace:e=>{let{size:t=24,color:n="#8B4513"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("rect",{x:"4",y:"8",width:"16",height:"14",fill:n}),(0,gi.jsx)("rect",{x:"6",y:"6",width:"12",height:"2",fill:"#DC143C"}),(0,gi.jsx)("path",{d:"M8 10L10 16L12 12L14 18L16 10",stroke:"#FFD700",strokeWidth:"2",fill:"none"}),(0,gi.jsx)("circle",{cx:"10",cy:"14",r:"1",fill:"#FF4500"}),(0,gi.jsx)("circle",{cx:"14",cy:"16",r:"1",fill:"#FF4500"})]})},Stocking:e=>{let{size:t=24,color:n="#DC143C"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M8 4L8 20C8 21 9 22 10 22H14C15 22 16 21 16 20L16 4L8 4Z",fill:n}),(0,gi.jsx)("rect",{x:"8",y:"2",width:"8",height:"2",fill:"#FFFFFF"}),(0,gi.jsx)("path",{d:"M10 8L14 8M10 12L14 12M10 16L14 16",stroke:"#FFFFFF",strokeWidth:"1"})]})},Cookie:e=>{let{size:t=24,color:n="#DEB887"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:n}),(0,gi.jsx)("circle",{cx:"8",cy:"8",r:"1",fill:"#8B4513"}),(0,gi.jsx)("circle",{cx:"16",cy:"8",r:"1",fill:"#8B4513"}),(0,gi.jsx)("circle",{cx:"8",cy:"16",r:"1",fill:"#8B4513"}),(0,gi.jsx)("circle",{cx:"16",cy:"16",r:"1",fill:"#8B4513"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"#8B4513"}),(0,gi.jsx)("path",{d:"M6 12L18 12",stroke:"#8B4513",strokeWidth:"1"}),(0,gi.jsx)("path",{d:"M12 6L12 18",stroke:"#8B4513",strokeWidth:"1"})]})},HotChocolate:e=>{let{size:t=24,color:n="#8B4513"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("rect",{x:"6",y:"8",width:"12",height:"12",fill:n}),(0,gi.jsx)("rect",{x:"6",y:"6",width:"12",height:"2",fill:"#FFFFFF"}),(0,gi.jsx)("path",{d:"M8 4L8 6M10 4L10 6M12 4L12 6M14 4L14 6M16 4L16 6",stroke:"#8B4513",strokeWidth:"1"}),(0,gi.jsx)("circle",{cx:"10",cy:"14",r:"1",fill:"#FFFFFF"}),(0,gi.jsx)("circle",{cx:"14",cy:"16",r:"1",fill:"#FFFFFF"})]})},Candle:e=>{let{size:t=24,color:n="#FFFFFF"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("rect",{x:"10",y:"4",width:"4",height:"16",fill:n}),(0,gi.jsx)("rect",{x:"9",y:"2",width:"6",height:"2",fill:"#8B4513"}),(0,gi.jsx)("path",{d:"M12 2L12 0",stroke:"#FF4500",strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("circle",{cx:"12",cy:"1",r:"1",fill:"#FF4500"})]})},Angel:e=>{let{size:t=24,color:n="#FFFFFF"}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"6",r:"3",fill:n}),(0,gi.jsx)("path",{d:"M12 9L12 20",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M8 12L16 12",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M6 16L18 16",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M4 20L20 20",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("path",{d:"M12 2L14 4L12 6L10 4L12 2Z",fill:"#FFD700"})]})}},Pr=Mr,Nr=()=>(0,gi.jsxs)("div",{className:"christmas-header-decoration",children:[(0,gi.jsxs)("div",{className:"christmas-header-left",children:[(0,gi.jsx)(Mr.Tree,{size:20}),(0,gi.jsx)(Mr.Star,{size:16}),(0,gi.jsx)(Mr.Bell,{size:18})]}),(0,gi.jsx)("div",{className:"christmas-header-center",children:(0,gi.jsx)(Mr.Wreath,{size:24})}),(0,gi.jsxs)("div",{className:"christmas-header-right",children:[(0,gi.jsx)(Mr.Holly,{size:18}),(0,gi.jsx)(Mr.Ornament,{size:16}),(0,gi.jsx)(Mr.Snowflake,{size:20})]})]}),Rr=()=>(0,gi.jsxs)("div",{className:"christmas-footer-decoration",children:[(0,gi.jsxs)("div",{className:"christmas-footer-left",children:[(0,gi.jsx)(Mr.Sleigh,{size:20}),(0,gi.jsx)(Mr.Reindeer,{size:18})]}),(0,gi.jsx)("div",{className:"christmas-footer-center",children:(0,gi.jsx)(Mr.Fireplace,{size:24})}),(0,gi.jsxs)("div",{className:"christmas-footer-right",children:[(0,gi.jsx)(Mr.Stocking,{size:18}),(0,gi.jsx)(Mr.Cookie,{size:16}),(0,gi.jsx)(Mr.HotChocolate,{size:20})]})]}),Lr=e=>{let{position:t="top-right",size:n=32,icon:i="tree"}=e;const r=Mr[i.charAt(0).toUpperCase()+i.slice(1)];return r?(0,gi.jsx)("div",{className:"christmas-page-decoration christmas-page-decoration-".concat(t),children:(0,gi.jsx)(r,{size:n})}):null},jr=()=>{const e=ne(),{searchProducts:t,searchResults:n,isSearching:i,clearSearch:s}=(()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(""),o=(0,r.useCallback)(async e=>{if(!e||e.trim().length<2)t([]);else{i(!0),a(e);try{const n=await Qi.searchProducts(e);t(n)}catch(RT){console.error("Search error:",RT),t([])}finally{i(!1)}}},[]);return{searchProducts:o,searchResults:e,isSearching:n,searchQuery:s,clearSearch:(0,r.useCallback)(()=>{t([]),a(""),i(!1)},[])}})(),{getItemCount:a}=Ni(),{wishlistCount:o}=Ji(),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[m,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)("default"),[x,y]=(0,r.useState)(!1),[_,b]=(0,r.useState)(!1),[w,A]=(0,r.useState)({contactBgColor:"#f8f9fa",contactTextColor:"#6c757d",contactIconColor:"#F0B21B",mainBgColor:"#ffffff",navBgColor:"#F0B21B",navTextColor:"#333333",navHoverColor:"#d69e16",searchBorderColor:"#ffc107",iconColor:"#F0B21B",contactEmail:"designexcellence1@gmail.com",contactPhone:"(02) 413-6682",contactAddress:"#1 Binmaka Street Cor. Biak na Bato Brgy. Manresa, Quezon City",searchPlaceholder:"Search",contactFontSize:"0.6rem",contactSpacing:"0.8rem",contactShowIcons:!0,logoUrl:null}),S=(0,r.useRef)(null),E=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=async()=>{try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/header-banner"));if(t.ok){const e=await t.json();e.success&&e.banner&&A(t=>Fe(Fe({},t),e.banner))}}catch(RT){}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]),(0,r.useEffect)(()=>{const e=()=>{const e=document.body.className;e.includes("theme-christmas")?v("christmas"):e.includes("theme-dark")?v("dark"):v("default")};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const C=async()=>{try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/header-offer-bar")),n=await t.json();n.isActive?(c(n),d(!0)):n.showInactive?(c(Fe(Fe({},n),{},{offerText:"",buttonText:"",showContent:!1})),d(!0)):d(!1)}catch(RT){d(!1)}};(0,r.useEffect)(()=>{C();const e=setInterval(C,3e5);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{const e=()=>{const e=S.current?S.current.offsetHeight:70;document.documentElement.style.setProperty("--header-main-height",e+"px")};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const T=async e=>{e.preventDefault(),h.trim()&&(await t(h.trim()),f(!0))},M=e=>{const t=e.target.value;p(t),t.trim()?f(!0):(f(!1),s())},P=t=>{f(!1),p(""),s(),e("/products/".concat(t.id))},N=()=>{setTimeout(()=>{f(!1)},200)},R=()=>{h.trim()&&n.length>0&&f(!0)},L=()=>{y(!x)},j=()=>{b(!_)};return(0,r.useEffect)(()=>{const e=e=>{E.current&&!E.current.contains(e.target)&&f(!1)};return m&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("style",{children:"\n          .header-nav-link {\n            color: #fff !important;\n            font-weight: 700 !important;\n          }\n          .header-nav-link:hover {\n            color: #fff !important;\n            font-weight: 700 !important;\n            text-decoration: underline;\n            text-decoration-color: white;\n            text-underline-offset: 4px;\n            transition: text-decoration 0.3s ease;\n          }\n          ".concat(l&&l.textColor?"\n            .header-offer-bar .offer-text {\n              color: ".concat(l.textColor," !important;\n            }\n          "):"","\n        ")}),(0,gi.jsxs)("header",{className:"header-main",style:{marginTop:0,paddingTop:0},children:[u&&l&&(0,gi.jsx)("div",{className:"header-offer-bar",style:{backgroundColor:l.backgroundColor,color:l.textColor,minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginTop:0,paddingTop:(()=>{const e=window.innerWidth;return e<=480?"4px":e<=768?"8px":"0.5rem"})()},children:!1!==l.showContent&&l.offerText&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("span",{className:"offer-text",style:{color:l.textColor},children:(0,gi.jsxs)("b",{children:["\u26a1  ",l.offerText]})}),l.buttonText&&(0,gi.jsx)("button",{className:"offer-shop-btn",onClick:()=>e(l.offerLink||"/products"),style:{background:"white",color:l.backgroundColor,border:"1px solid white",padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer",marginLeft:"1rem",transition:"all 0.3s ease"},children:l.buttonText}),(0,gi.jsx)("div",{className:"offer-bar-theme-switcher",style:{marginLeft:"1rem",display:"flex",alignItems:"center"},children:(0,gi.jsx)(Tr,{size:"small"})})]})}),(!u||!l)&&(0,gi.jsx)("div",{className:"header-theme-switcher-fallback",style:{position:"absolute",top:"0.5rem",right:"1rem",zIndex:1e3},children:(0,gi.jsx)(Tr,{size:"small"})}),(0,gi.jsxs)("div",{ref:S,className:"header-main-row",style:{backgroundColor:w.mainBgColor},children:[(0,gi.jsx)("div",{className:"header-mobile-menu-btn",children:(0,gi.jsx)("button",{className:"mobile-menu-toggle",onClick:L,"aria-label":"Toggle mobile menu",children:(0,gi.jsx)(dr,{style:{color:w.iconColor,fontSize:"1.2rem"}})})}),(0,gi.jsx)("div",{className:"header-main-left",children:(0,gi.jsxs)("div",{className:"header-contact-info",children:[(0,gi.jsxs)("span",{className:"header-contact-item",children:[(0,gi.jsx)(pr,{className:"header-icon",style:{color:w.contactIconColor,fontSize:"0.8rem",display:"inline-block"}}),w.contactEmail]}),(0,gi.jsxs)("span",{className:"header-contact-item",children:[(0,gi.jsx)(vr,{className:"header-icon",style:{color:w.contactIconColor,fontSize:"0.8rem",display:"inline-block"}}),w.contactPhone]}),(0,gi.jsxs)("span",{className:"header-contact-item",children:[(0,gi.jsx)(gr,{className:"header-icon",style:{color:w.contactIconColor,fontSize:"0.8rem",display:"inline-block"}}),w.contactAddress]})]})}),(0,gi.jsx)("div",{className:"header-main-center",children:(0,gi.jsxs)(Re,{to:"/",className:"header-logo",children:[w.logoUrl?(0,gi.jsx)("img",{src:w.logoUrl&&w.logoUrl.startsWith("/")?"".concat("https://designxcellinv-production.up.railway.app").concat(w.logoUrl):w.logoUrl,alt:"Design Excellence Logo",style:{height:"40px",width:"auto",maxWidth:"200px"},onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}):null,(0,gi.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.5rem",color:"#333333",letterSpacing:"1px",display:w.logoUrl?"none":"block"},children:"DESIGN EXCELLENCE"})]})}),(0,gi.jsxs)("div",{className:"header-main-right",ref:E,children:[(0,gi.jsx)(Re,{to:"/account",className:"header-icon-btn desktop-user-btn",title:"Account",children:(0,gi.jsx)("div",{className:"icon-circle",style:{backgroundColor:"#f0f0f0",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,gi.jsx)(wr,{style:{color:w.iconColor,fontSize:"1rem"}})})}),(0,gi.jsx)(Re,{to:"/wishlist",className:"header-icon-btn desktop-wishlist-btn",title:"Wishlist",children:(0,gi.jsxs)("div",{className:"icon-circle",style:{backgroundColor:"#f0f0f0",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[(0,gi.jsx)(mr,{style:{color:w.iconColor,fontSize:"1rem"}}),o>0&&(0,gi.jsx)("span",{className:"wishlist-count",style:{position:"absolute",top:"-8px",right:"-8px",backgroundColor:"#F0B21B",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"0.7rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"20px",boxShadow:"0 2px 4px rgba(240, 178, 27, 0.3)"},children:o>99?"99+":o})]})}),(0,gi.jsx)(Re,{to:"/cart",className:"header-icon-btn",title:"Cart",children:(0,gi.jsxs)("div",{className:"icon-circle",style:{backgroundColor:"#f0f0f0",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[(0,gi.jsx)(_r,{style:{color:w.iconColor,fontSize:"1rem"}}),a()>0&&(0,gi.jsx)("span",{className:"cart-count",style:{position:"absolute",top:"-8px",right:"-8px",background:"#F0B21B",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",boxShadow:"0 2px 4px rgba(240, 178, 27, 0.3)"},children:a()>99?"99+":a()})]})}),(0,gi.jsx)(Re,{to:"/orders",className:"header-icon-btn",title:"Orders",children:(0,gi.jsx)("div",{className:"icon-circle",style:{backgroundColor:"#f0f0f0",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,gi.jsx)(fr,{style:{color:w.iconColor,fontSize:"1rem"}})})}),(0,gi.jsx)("button",{className:"header-icon-btn mobile-search-btn",title:"Search",onClick:j,children:(0,gi.jsx)("div",{className:"icon-circle",style:{backgroundColor:"#f0f0f0",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,gi.jsx)(yr,{style:{color:w.iconColor,fontSize:"1rem"}})})}),(0,gi.jsxs)("form",{className:"header-search-form",onSubmit:T,children:[(0,gi.jsxs)("div",{className:"header-search-container",style:{display:"flex",alignItems:"center",backgroundColor:"#ffffff",border:"2px solid ".concat(w.searchBorderColor),borderRadius:"20px",padding:"6px 12px",width:"200px",height:"36px"},children:[(0,gi.jsx)(yr,{className:"search-icon",style:{color:w.iconColor,fontSize:"0.9rem",marginRight:"6px",flexShrink:0}}),(0,gi.jsx)("input",{type:"text",placeholder:w.searchPlaceholder,className:"header-search-input",value:h,onChange:M,onFocus:R,onBlur:N,style:{border:"none",outline:"none",backgroundColor:"transparent",fontSize:"0.85rem",color:"#333333",flex:1,padding:"2px 0",height:"100%"}})]}),m&&n.length>0&&(0,gi.jsxs)("div",{className:"header-search-results",children:[(0,gi.jsxs)("div",{className:"search-results-header",children:[(0,gi.jsxs)("span",{children:["Search Results (",n.length,")"]}),(0,gi.jsx)("button",{type:"button",className:"close-search-btn",onClick:()=>f(!1),children:"\xd7"})]}),(0,gi.jsx)("div",{className:"search-results-list",children:n.map(e=>{var t;return(0,gi.jsxs)("div",{className:"search-result-item",onClick:()=>P(e),children:[(0,gi.jsx)("div",{className:"search-result-image",children:(0,gi.jsx)("img",{src:Sr(null===(t=e.images)||void 0===t?void 0:t[0]),alt:e.name,onError:e=>{e.target.src="/logo192.png"}})}),(0,gi.jsxs)("div",{className:"search-result-info",children:[(0,gi.jsx)("div",{className:"search-result-name",children:e.name}),(0,gi.jsx)("div",{className:"search-result-category",children:e.categoryName}),(0,gi.jsx)("div",{className:"search-result-price",children:e.hasDiscount&&e.discountInfo?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("span",{className:"original-price",children:["\u20b1",e.price.toLocaleString()]}),(0,gi.jsxs)("span",{className:"discount-price",children:["\u20b1",e.discountInfo.discountedPrice.toLocaleString()]})]}):(0,gi.jsxs)("span",{className:"price",children:["\u20b1",e.price.toLocaleString()]})})]})]},e.id)})}),(0,gi.jsx)("div",{className:"search-results-footer",children:(0,gi.jsx)("button",{type:"button",className:"view-all-results-btn",onClick:()=>{e("/products?search=".concat(encodeURIComponent(h))),f(!1),p(""),s()},children:"View All Results"})})]}),m&&h.trim()&&0===n.length&&!i&&(0,gi.jsxs)("div",{className:"header-search-results no-results",children:[(0,gi.jsxs)("div",{className:"search-results-header",children:[(0,gi.jsx)("span",{children:"No Results Found"}),(0,gi.jsx)("button",{type:"button",className:"close-search-btn",onClick:()=>f(!1),children:"\xd7"})]}),(0,gi.jsxs)("div",{className:"search-no-results",children:[(0,gi.jsxs)("p",{children:['No products found for "',h,'"']}),(0,gi.jsx)("p",{children:"Try different keywords or browse our categories"})]})]})]})]})]}),_&&(0,gi.jsx)("div",{className:"mobile-search-popup",children:(0,gi.jsxs)("div",{className:"mobile-search-content",children:[(0,gi.jsx)("form",{onSubmit:T,children:(0,gi.jsxs)("div",{className:"mobile-search-container",children:[(0,gi.jsx)(yr,{style:{color:w.iconColor,fontSize:"1rem",marginRight:"10px"}}),(0,gi.jsx)("input",{type:"text",placeholder:w.searchPlaceholder,className:"mobile-search-input",value:h,onChange:M,onFocus:R,onBlur:N,autoFocus:!0}),(0,gi.jsx)("button",{type:"button",className:"close-search-popup",onClick:j,children:"\xd7"})]})}),m&&n.length>0&&(0,gi.jsx)("div",{className:"mobile-search-results",children:n.slice(0,5).map(e=>{var t;return(0,gi.jsxs)("div",{className:"mobile-search-result-item",onClick:()=>P(e),children:[(0,gi.jsx)("div",{className:"mobile-search-result-image",children:(0,gi.jsx)("img",{src:Sr(null===(t=e.images)||void 0===t?void 0:t[0]),alt:e.name,onError:e=>{e.target.src="/logo192.png"}})}),(0,gi.jsxs)("div",{className:"mobile-search-result-info",children:[(0,gi.jsx)("div",{className:"mobile-search-result-name",children:e.name}),(0,gi.jsx)("div",{className:"mobile-search-result-price",children:e.hasDiscount&&e.discountInfo?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("span",{className:"original-price",children:["\u20b1",e.price.toLocaleString()]}),(0,gi.jsxs)("span",{className:"discount-price",children:["\u20b1",e.discountInfo.discountedPrice.toLocaleString()]})]}):(0,gi.jsxs)("span",{className:"price",children:["\u20b1",e.price.toLocaleString()]})})]})]},e.id)})})]})}),x&&(0,gi.jsx)("div",{className:"mobile-nav-menu",children:(0,gi.jsxs)("div",{className:"mobile-nav-content",children:[(0,gi.jsx)("button",{className:"close-mobile-menu",onClick:L,children:"\xd7"}),(0,gi.jsxs)("nav",{className:"mobile-nav-links",children:[(0,gi.jsx)(Re,{to:"/",className:"mobile-nav-link",onClick:L,children:"HOME"}),(0,gi.jsx)(Re,{to:"/products",className:"mobile-nav-link",onClick:L,children:"Products"}),(0,gi.jsx)(Re,{to:"/projects",className:"mobile-nav-link",onClick:L,children:"Projects"}),(0,gi.jsx)(Re,{to:"/3d-products-furniture",className:"mobile-nav-link",onClick:L,children:"3D Products"}),(0,gi.jsx)(Re,{to:"/about",className:"mobile-nav-link",onClick:L,children:"About Us"}),(0,gi.jsx)(Re,{to:"/contact",className:"mobile-nav-link",onClick:L,children:"Contact Us"}),(0,gi.jsxs)(Re,{to:"/wishlist",className:"mobile-nav-link",onClick:L,children:[(0,gi.jsx)(mr,{style:{marginRight:"8px",fontSize:"1rem"}}),"Wishlist ",o>0&&"(".concat(o,")")]}),(0,gi.jsxs)(Re,{to:"/cart",className:"mobile-nav-link",onClick:L,children:[(0,gi.jsx)(_r,{style:{marginRight:"8px",fontSize:"1rem"}}),"Cart ",a()>0&&"(".concat(a(),")")]}),(0,gi.jsxs)(Re,{to:"/account",className:"mobile-nav-link mobile-login-btn",onClick:L,children:[(0,gi.jsx)(wr,{style:{marginRight:"8px",fontSize:"1rem"}}),"Login / Account"]})]})]})}),(0,gi.jsxs)("nav",{className:"header-nav-bar",style:{backgroundColor:w.navBgColor,color:w.navTextColor},children:["christmas"===g&&(0,gi.jsx)("div",{className:"christmas-nav-decoration",children:(0,gi.jsx)(Pr.Tree,{size:16})}),(0,gi.jsx)(Re,{to:"/",className:"header-nav-link",children:"HOME"}),(0,gi.jsx)(Re,{to:"/products",className:"header-nav-link",children:"Products"}),(0,gi.jsx)(Re,{to:"/projects",className:"header-nav-link",children:"Projects"}),(0,gi.jsx)(Re,{to:"/3d-products-furniture",className:"header-nav-link",children:"3D Products"}),(0,gi.jsx)(Re,{to:"/about",className:"header-nav-link",children:"About Us"}),(0,gi.jsx)(Re,{to:"/contact",className:"header-nav-link",children:"Contact Us"}),"christmas"===g&&(0,gi.jsx)("div",{className:"christmas-nav-decoration",children:(0,gi.jsx)(Pr.Star,{size:16})})]})]})]})},Ir=()=>{const[e,t]=(0,r.useState)({email:"info@designxcel.com",phone:"+1 (555) 123-4567",address:"123 Business District, Office Plaza, Suite 500, Metro City, MC 12345"}),[n,i]=(0,r.useState)("default");return(0,r.useEffect)(()=>{(async()=>{try{const e="https://designxcellinv-production.up.railway.app",n=await fetch("".concat(e,"/api/header-banner"));if(n.ok){const e=await n.json();e&&t({email:e.contactEmail||"designexcellence1@gmail.com",phone:e.contactPhone||"(02) 413-6682",address:e.contactAddress||"#1 Binmaka Street Cor. Biak na Bato Brgy. Manresa, Quezon City"})}}catch(RT){}})()},[]),(0,r.useEffect)(()=>{const e=()=>{const e=document.body.className;e.includes("theme-christmas")?i("christmas"):e.includes("theme-dark")?i("dark"):i("default")};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),(0,gi.jsx)("footer",{className:"footer-main",style:{padding:"1rem 0 0",minHeight:"240px"},children:(0,gi.jsxs)("div",{className:"footer-container",style:{padding:"0 1rem"},children:[(0,gi.jsxs)("div",{className:"footer-content",style:{gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1.5rem",marginBottom:"1rem",paddingBottom:"1rem"},children:[(0,gi.jsxs)("div",{className:"footer-section footer-company",style:{textAlign:"left"},children:[(0,gi.jsx)("div",{className:"footer-logo",style:{width:"160px",height:"40px"},children:(0,gi.jsx)("img",{src:"/design-excellence-logo.png",alt:"Design Excellence Logo",className:"footer-logo-img",width:160,height:40,style:{width:"160px",height:"40px",objectFit:"contain"}})}),(0,gi.jsx)("p",{className:"footer-description",style:{color:"#FFFFFF",fontSize:"0.8rem",lineHeight:"1.4",marginBottom:"0.5rem"},children:"Premium office furniture for modern workplaces. We specialize in ergonomic solutions that enhance productivity and comfort for your business."}),(0,gi.jsx)("div",{className:"social-links",style:{gap:"0.5rem",display:"flex",justifyContent:"flex-start",flexWrap:"wrap"},children:(0,gi.jsx)("a",{href:"https://www.facebook.com/designexcellence01/",target:"_blank",rel:"noopener noreferrer",className:"social-link","aria-label":"Facebook",style:{textDecoration:"none"},children:(0,gi.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#FFFFFF",children:(0,gi.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})})]}),(0,gi.jsxs)("div",{className:"footer-section",style:{textAlign:"left"},children:[(0,gi.jsx)("h4",{className:"footer-subtitle",style:{color:"#FFFFFF",fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.4rem"},children:"Company"}),(0,gi.jsxs)("ul",{className:"footer-links",style:{listStyle:"none",padding:0,margin:0},children:[(0,gi.jsx)("li",{style:{marginBottom:"0.3rem"},children:(0,gi.jsx)(Re,{to:"/about",className:"footer-link",style:{color:"#FFFFFF",textDecoration:"none",fontSize:"0.8rem"},children:"About Us"})}),(0,gi.jsx)("li",{style:{marginBottom:"0.3rem"},children:(0,gi.jsx)(Re,{to:"/products",className:"footer-link",style:{color:"#FFFFFF",textDecoration:"none",fontSize:"0.8rem"},children:"Our Products"})}),(0,gi.jsx)("li",{style:{marginBottom:"0.3rem"},children:(0,gi.jsx)(Re,{to:"/contact",className:"footer-link",style:{color:"#FFFFFF",textDecoration:"none",fontSize:"0.8rem"},children:"Contact Us"})})]})]}),(0,gi.jsxs)("div",{className:"footer-section",style:{textAlign:"left"},children:[(0,gi.jsx)("h4",{className:"footer-subtitle",style:{color:"#FFFFFF",fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.4rem"},children:"Customer Services"}),(0,gi.jsxs)("ul",{className:"footer-links",style:{listStyle:"none",padding:0,margin:0},children:[(0,gi.jsx)("li",{style:{marginBottom:"0.3rem"},children:(0,gi.jsx)(Re,{to:"/account",className:"footer-link",style:{color:"#FFFFFF",textDecoration:"none",fontSize:"0.8rem"},children:"My Account"})}),(0,gi.jsx)("li",{style:{marginBottom:"0.3rem"},children:(0,gi.jsx)(Re,{to:"/orders",className:"footer-link",style:{color:"#FFFFFF",textDecoration:"none",fontSize:"0.8rem"},children:"Track Your Order"})}),(0,gi.jsx)("li",{style:{marginBottom:"0.3rem"},children:(0,gi.jsx)(Re,{to:"/faq",className:"footer-link",style:{color:"#FFFFFF",textDecoration:"none",fontSize:"0.8rem"},children:"FAQ"})})]})]}),(0,gi.jsxs)("div",{className:"footer-section footer-contact",style:{textAlign:"left",maxWidth:"250px"},children:[(0,gi.jsx)("h4",{className:"footer-subtitle",style:{color:"#FFFFFF",fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.4rem"},children:"Contact Info"}),(0,gi.jsxs)("ul",{className:"footer-links",style:{listStyle:"none",padding:0,margin:0},children:[(0,gi.jsxs)("li",{style:{marginBottom:"0.25rem",display:"flex",alignItems:"flex-start",gap:"0.4rem"},children:[(0,gi.jsx)("span",{className:"contact-label",style:{color:"#FFFFFF",fontSize:"0.75rem",fontWeight:"500",minWidth:"45px",flexShrink:0},children:"Phone:"}),(0,gi.jsx)("span",{className:"contact-value",style:{color:"#FFFFFF",fontSize:"0.75rem",lineHeight:"1.3"},children:e.phone})]}),(0,gi.jsxs)("li",{style:{marginBottom:"0.25rem",display:"flex",alignItems:"flex-start",gap:"0.4rem"},children:[(0,gi.jsx)("span",{className:"contact-label",style:{color:"#FFFFFF",fontSize:"0.75rem",fontWeight:"500",minWidth:"45px",flexShrink:0},children:"Email:"}),(0,gi.jsx)("span",{className:"contact-value",style:{color:"#FFFFFF",fontSize:"0.75rem",lineHeight:"1.3"},children:e.email})]}),(0,gi.jsxs)("li",{style:{marginBottom:"0.25rem",display:"flex",alignItems:"flex-start",gap:"0.4rem"},children:[(0,gi.jsx)("span",{className:"contact-label",style:{color:"#FFFFFF",fontSize:"0.75rem",fontWeight:"500",minWidth:"45px",flexShrink:0},children:"Address:"}),(0,gi.jsx)("span",{className:"contact-value",style:{color:"#FFFFFF",fontSize:"0.75rem",lineHeight:"1.3"},children:e.address})]})]})]})]}),(0,gi.jsx)("div",{className:"footer-bottom",style:{padding:"0.5rem 0",borderTop:"1px solid rgba(255,255,255,0.2)"},children:(0,gi.jsx)("div",{className:"footer-container",children:(0,gi.jsxs)("div",{className:"footer-bottom-content",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem"},children:["christmas"===n&&(0,gi.jsxs)("div",{className:"christmas-footer-decoration",children:[(0,gi.jsx)(Pr.Sleigh,{size:16}),(0,gi.jsx)(Pr.Reindeer,{size:16})]}),(0,gi.jsx)("p",{className:"copyright",style:{color:"#FFFFFF",fontSize:"0.8rem",margin:0},children:"Copyright \xa9 2024 DesignXcel. All Rights Reserved."}),"christmas"===n&&(0,gi.jsxs)("div",{className:"christmas-footer-decoration",children:[(0,gi.jsx)(Pr.Gift,{size:16}),(0,gi.jsx)(Pr.Bell,{size:16})]})]})})})]})})};function kr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Br=function(){return Br=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Br.apply(this,arguments)};Object.create;function Dr(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Or=n(403),Fr=n.n(Or),Ur="-ms-",zr="-moz-",Hr="-webkit-",Gr="comm",Wr="rule",Vr="decl",Jr="@keyframes",Yr=Math.abs,Xr=String.fromCharCode,Zr=Object.assign;function qr(e){return e.trim()}function Kr(e,t){return(e=t.exec(e))?e[0]:e}function Qr(e,t,n){return e.replace(t,n)}function $r(e,t,n){return e.indexOf(t,n)}function es(e,t){return 0|e.charCodeAt(t)}function ts(e,t,n){return e.slice(t,n)}function ns(e){return e.length}function is(e){return e.length}function rs(e,t){return t.push(e),e}function ss(e,t){return e.filter(function(e){return!Kr(e,t)})}var as=1,os=1,ls=0,cs=0,us=0,ds="";function hs(e,t,n,i,r,s,a,o){return{value:e,root:t,parent:n,type:i,props:r,children:s,line:as,column:os,length:a,return:"",siblings:o}}function ps(e,t){return Zr(hs("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function ms(e){for(;e.root;)e=ps(e.root,{children:[e]});rs(e,e.siblings)}function fs(){return us=cs>0?es(ds,--cs):0,os--,10===us&&(os=1,as--),us}function gs(){return us=cs<ls?es(ds,cs++):0,os++,10===us&&(os=1,as++),us}function vs(){return es(ds,cs)}function xs(){return cs}function ys(e,t){return ts(ds,e,t)}function _s(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bs(e){return as=os=1,ls=ns(ds=e),cs=0,[]}function ws(e){return ds="",e}function As(e){return qr(ys(cs-1,Cs(91===e?e+2:40===e?e+1:e)))}function Ss(e){for(;(us=vs())&&us<33;)gs();return _s(e)>2||_s(us)>3?"":" "}function Es(e,t){for(;--t&&gs()&&!(us<48||us>102||us>57&&us<65||us>70&&us<97););return ys(e,xs()+(t<6&&32==vs()&&32==gs()))}function Cs(e){for(;gs();)switch(us){case e:return cs;case 34:case 39:34!==e&&39!==e&&Cs(us);break;case 40:41===e&&Cs(e);break;case 92:gs()}return cs}function Ts(e,t){for(;gs()&&e+us!==57&&(e+us!==84||47!==vs()););return"/*"+ys(t,cs-1)+"*"+Xr(47===e?e:gs())}function Ms(e){for(;!_s(vs());)gs();return ys(e,cs)}function Ps(e,t){for(var n="",i=0;i<e.length;i++)n+=t(e[i],i,e,t)||"";return n}function Ns(e,t,n,i){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Vr:return e.return=e.return||e.value;case Gr:return"";case Jr:return e.return=e.value+"{"+Ps(e.children,i)+"}";case Wr:if(!ns(e.value=e.props.join(",")))return""}return ns(n=Ps(e.children,i))?e.return=e.value+"{"+n+"}":""}function Rs(e,t,n){switch(function(e,t){return 45^es(e,0)?(((t<<2^es(e,0))<<2^es(e,1))<<2^es(e,2))<<2^es(e,3):0}(e,t)){case 5103:return Hr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Hr+e+e;case 4789:return zr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Hr+e+zr+e+Ur+e+e;case 5936:switch(es(e,t+11)){case 114:return Hr+e+Ur+Qr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Hr+e+Ur+Qr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Hr+e+Ur+Qr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Hr+e+Ur+e+e;case 6165:return Hr+e+Ur+"flex-"+e+e;case 5187:return Hr+e+Qr(e,/(\w+).+(:[^]+)/,Hr+"box-$1$2"+Ur+"flex-$1$2")+e;case 5443:return Hr+e+Ur+"flex-item-"+Qr(e,/flex-|-self/g,"")+(Kr(e,/flex-|baseline/)?"":Ur+"grid-row-"+Qr(e,/flex-|-self/g,""))+e;case 4675:return Hr+e+Ur+"flex-line-pack"+Qr(e,/align-content|flex-|-self/g,"")+e;case 5548:return Hr+e+Ur+Qr(e,"shrink","negative")+e;case 5292:return Hr+e+Ur+Qr(e,"basis","preferred-size")+e;case 6060:return Hr+"box-"+Qr(e,"-grow","")+Hr+e+Ur+Qr(e,"grow","positive")+e;case 4554:return Hr+Qr(e,/([^-])(transform)/g,"$1"+Hr+"$2")+e;case 6187:return Qr(Qr(Qr(e,/(zoom-|grab)/,Hr+"$1"),/(image-set)/,Hr+"$1"),e,"")+e;case 5495:case 3959:return Qr(e,/(image-set\([^]*)/,Hr+"$1$`$1");case 4968:return Qr(Qr(e,/(.+:)(flex-)?(.*)/,Hr+"box-pack:$3"+Ur+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Hr+e+e;case 4200:if(!Kr(e,/flex-|baseline/))return Ur+"grid-column-align"+ts(e,t)+e;break;case 2592:case 3360:return Ur+Qr(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,Kr(e.props,/grid-\w+-end/)})?~$r(e+(n=n[t].value),"span",0)?e:Ur+Qr(e,"-start","")+e+Ur+"grid-row-span:"+(~$r(n,"span",0)?Kr(n,/\d+/):+Kr(n,/\d+/)-+Kr(e,/\d+/))+";":Ur+Qr(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return Kr(e.props,/grid-\w+-start/)})?e:Ur+Qr(Qr(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Qr(e,/(.+)-inline(.+)/,Hr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ns(e)-1-t>6)switch(es(e,t+1)){case 109:if(45!==es(e,t+4))break;case 102:return Qr(e,/(.+:)(.+)-([^]+)/,"$1"+Hr+"$2-$3$1"+zr+(108==es(e,t+3)?"$3":"$2-$3"))+e;case 115:return~$r(e,"stretch",0)?Rs(Qr(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Qr(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,i,r,s,a,o){return Ur+n+":"+i+o+(r?Ur+n+"-span:"+(s?a:+a-+i)+o:"")+e});case 4949:if(121===es(e,t+6))return Qr(e,":",":"+Hr)+e;break;case 6444:switch(es(e,45===es(e,14)?18:11)){case 120:return Qr(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Hr+(45===es(e,14)?"inline-":"")+"box$3$1"+Hr+"$2$3$1"+Ur+"$2box$3")+e;case 100:return Qr(e,":",":"+Ur)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Qr(e,"scroll-","scroll-snap-")+e}return e}function Ls(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case Vr:return void(e.return=Rs(e.value,e.length,n));case Jr:return Ps([ps(e,{value:Qr(e.value,"@","@"+Hr)})],i);case Wr:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(Kr(t,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ms(ps(e,{props:[Qr(t,/:(read-\w+)/,":-moz-$1")]})),ms(ps(e,{props:[t]})),Zr(e,{props:ss(n,i)});break;case"::placeholder":ms(ps(e,{props:[Qr(t,/:(plac\w+)/,":"+Hr+"input-$1")]})),ms(ps(e,{props:[Qr(t,/:(plac\w+)/,":-moz-$1")]})),ms(ps(e,{props:[Qr(t,/:(plac\w+)/,Ur+"input-$1")]})),ms(ps(e,{props:[t]})),Zr(e,{props:ss(n,i)})}return""})}}function js(e){return ws(Is("",null,null,null,[""],e=bs(e),0,[0],e))}function Is(e,t,n,i,r,s,a,o,l){for(var c=0,u=0,d=a,h=0,p=0,m=0,f=1,g=1,v=1,x=0,y="",_=r,b=s,w=i,A=y;g;)switch(m=x,x=gs()){case 40:if(108!=m&&58==es(A,d-1)){-1!=$r(A+=Qr(As(x),"&","&\f"),"&\f",Yr(c?o[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:A+=As(x);break;case 9:case 10:case 13:case 32:A+=Ss(m);break;case 92:A+=Es(xs()-1,7);continue;case 47:switch(vs()){case 42:case 47:rs(Bs(Ts(gs(),xs()),t,n,l),l);break;default:A+="/"}break;case 123*f:o[c++]=ns(A)*v;case 125*f:case 59:case 0:switch(x){case 0:case 125:g=0;case 59+u:-1==v&&(A=Qr(A,/\f/g,"")),p>0&&ns(A)-d&&rs(p>32?Ds(A+";",i,n,d-1,l):Ds(Qr(A," ","")+";",i,n,d-2,l),l);break;case 59:A+=";";default:if(rs(w=ks(A,t,n,c,u,r,o,y,_=[],b=[],d,s),s),123===x)if(0===u)Is(A,t,w,w,_,s,d,o,b);else switch(99===h&&110===es(A,3)?100:h){case 100:case 108:case 109:case 115:Is(e,w,w,i&&rs(ks(e,w,w,0,0,r,o,y,r,_=[],d,b),b),r,b,d,o,i?_:b);break;default:Is(A,w,w,w,[""],b,0,o,b)}}c=u=p=0,f=v=1,y=A="",d=a;break;case 58:d=1+ns(A),p=m;default:if(f<1)if(123==x)--f;else if(125==x&&0==f++&&125==fs())continue;switch(A+=Xr(x),x*f){case 38:v=u>0?1:(A+="\f",-1);break;case 44:o[c++]=(ns(A)-1)*v,v=1;break;case 64:45===vs()&&(A+=As(gs())),h=vs(),u=d=ns(y=A+=Ms(xs())),x++;break;case 45:45===m&&2==ns(A)&&(f=0)}}return s}function ks(e,t,n,i,r,s,a,o,l,c,u,d){for(var h=r-1,p=0===r?s:[""],m=is(p),f=0,g=0,v=0;f<i;++f)for(var x=0,y=ts(e,h+1,h=Yr(g=a[f])),_=e;x<m;++x)(_=qr(g>0?p[x]+" "+y:Qr(y,/&\f/g,p[x])))&&(l[v++]=_);return hs(e,t,n,0===r?Wr:o,l,c,u,d)}function Bs(e,t,n,i){return hs(e,t,n,Gr,Xr(us),ts(e,2,-2),0,i)}function Ds(e,t,n,i,r){return hs(e,t,n,Vr,ts(e,0,i),ts(e,i+1,-1),i,r)}var Os={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fs="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.SC_ATTR)||"data-styled",Us="active",zs="data-styled-version",Hs="6.1.19",Gs="/*!sc*/\n",Ws="undefined"!=typeof window&&"undefined"!=typeof document,Vs=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.SC_DISABLE_SPEEDY)),Js=(new Set,Object.freeze([])),Ys=Object.freeze({});function Xs(e,t,n){return void 0===n&&(n=Ys),e.theme!==n.theme&&e.theme||t||n.theme}var Zs=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),qs=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ks=/(^-|-$)/g;function Qs(e){return e.replace(qs,"-").replace(Ks,"")}var $s=/(a)(d)/gi,ea=function(e){return String.fromCharCode(e+(e>25?39:97))};function ta(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=ea(t%52)+n;return(ea(t%52)+n).replace($s,"$1-$2")}var na,ia=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ra=function(e){return ia(5381,e)};function sa(e){return ta(ra(e)>>>0)}function aa(e){return e.displayName||e.name||"Component"}function oa(e){return"string"==typeof e&&!0}var la="function"==typeof Symbol&&Symbol.for,ca=la?Symbol.for("react.memo"):60115,ua=la?Symbol.for("react.forward_ref"):60112,da={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ha={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},pa={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ma=((na={})[ua]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},na[ca]=pa,na);function fa(e){return("type"in(t=e)&&t.type.$$typeof)===ca?pa:"$$typeof"in e?ma[e.$$typeof]:da;var t}var ga=Object.defineProperty,va=Object.getOwnPropertyNames,xa=Object.getOwnPropertySymbols,ya=Object.getOwnPropertyDescriptor,_a=Object.getPrototypeOf,ba=Object.prototype;function wa(e,t,n){if("string"!=typeof t){if(ba){var i=_a(t);i&&i!==ba&&wa(e,i,n)}var r=va(t);xa&&(r=r.concat(xa(t)));for(var s=fa(e),a=fa(t),o=0;o<r.length;++o){var l=r[o];if(!(l in ha||n&&n[l]||a&&l in a||s&&l in s)){var c=ya(t,l);try{ga(e,l,c)}catch(e){}}}}return e}function Aa(e){return"function"==typeof e}function Sa(e){return"object"==typeof e&&"styledComponentId"in e}function Ea(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Ca(e,t){if(0===e.length)return"";for(var n=e[0],i=1;i<e.length;i++)n+=t?t+e[i]:e[i];return n}function Ta(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Ma(e,t,n){if(void 0===n&&(n=!1),!n&&!Ta(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=Ma(e[i],t[i]);else if(Ta(t))for(var i in t)e[i]=Ma(e[i],t[i]);return e}function Pa(e,t){Object.defineProperty(e,"toString",{value:t})}function Na(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Ra=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;e>=r;)if((r<<=1)<0)throw Na(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var s=i;s<r;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(e+1),o=(s=0,t.length);s<o;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n,s=i;s<r;s++)t+="".concat(this.tag.getRule(s)).concat(Gs);return t},e}(),La=new Map,ja=new Map,Ia=1,ka=function(e){if(La.has(e))return La.get(e);for(;ja.has(Ia);)Ia++;var t=Ia++;return La.set(e,t),ja.set(t,e),t},Ba=function(e,t){Ia=t+1,La.set(e,t),ja.set(t,e)},Da="style[".concat(Fs,"][").concat(zs,'="').concat(Hs,'"]'),Oa=new RegExp("^".concat(Fs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Fa=function(e,t,n){for(var i,r=n.split(","),s=0,a=r.length;s<a;s++)(i=r[s])&&e.registerName(t,i)},Ua=function(e,t){for(var n,i=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Gs),r=[],s=0,a=i.length;s<a;s++){var o=i[s].trim();if(o){var l=o.match(Oa);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Ba(u,c),Fa(e,u,l[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(o)}}},za=function(e){for(var t=document.querySelectorAll(Da),n=0,i=t.length;n<i;n++){var r=t[n];r&&r.getAttribute(Fs)!==Us&&(Ua(e,r),r.parentNode&&r.parentNode.removeChild(r))}};function Ha(){return n.nc}var Ga=function(e){var t=document.head,n=e||t,i=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Fs,"]")));return t[t.length-1]}(n),s=void 0!==r?r.nextSibling:null;i.setAttribute(Fs,Us),i.setAttribute(zs,Hs);var a=Ha();return a&&i.setAttribute("nonce",a),n.insertBefore(i,s),i},Wa=function(){function e(e){this.element=Ga(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var r=t[n];if(r.ownerNode===e)return r}throw Na(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Va=function(){function e(e){this.element=Ga(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Ja=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Ya=Ws,Xa={isServer:!Ws,useCSSOMInjection:!Vs},Za=function(){function e(e,t,n){void 0===e&&(e=Ys),void 0===t&&(t={});var i=this;this.options=Br(Br({},Xa),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Ws&&Ya&&(Ya=!1,za(this)),Pa(this,function(){return function(e){for(var t=e.getTag(),n=t.length,i="",r=function(n){var r=function(e){return ja.get(e)}(n);if(void 0===r)return"continue";var s=e.names.get(r),a=t.getGroup(n);if(void 0===s||!s.size||0===a.length)return"continue";var o="".concat(Fs,".g").concat(n,'[id="').concat(r,'"]'),l="";void 0!==s&&s.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),i+="".concat(a).concat(o,'{content:"').concat(l,'"}').concat(Gs)},s=0;s<n;s++)r(s);return i}(i)})}return e.registerId=function(e){return ka(e)},e.prototype.rehydrate=function(){!this.server&&Ws&&za(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Br(Br({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Ja(n):t?new Wa(n):new Va(n)}(this.options),new Ra(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(ka(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(ka(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(ka(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),qa=/&/g,Ka=/^\s*\/\/.*$/gm;function Qa(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Qa(e.children,t)),e})}function $a(e){var t,n,i,r=void 0===e?Ys:e,s=r.options,a=void 0===s?Ys:s,o=r.plugins,l=void 0===o?Js:o,c=function(e,i,r){return r.startsWith(n)&&r.endsWith(n)&&r.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push(function(e){e.type===Wr&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(qa,n).replace(i,c))}),a.prefix&&u.push(Ls),u.push(Ns);var d=function(e,r,s,o){void 0===r&&(r=""),void 0===s&&(s=""),void 0===o&&(o="&"),t=o,n=r,i=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Ka,""),c=js(s||r?"".concat(s," ").concat(r," { ").concat(l," }"):l);a.namespace&&(c=Qa(c,a.namespace));var d,h=[];return Ps(c,function(e){var t=is(e);return function(n,i,r,s){for(var a="",o=0;o<t;o++)a+=e[o](n,i,r,s)||"";return a}}(u.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return d.hash=l.length?l.reduce(function(e,t){return t.name||Na(15),ia(e,t.name)},5381).toString():"",d}var eo=new Za,to=$a(),no=r.createContext({shouldForwardProp:void 0,styleSheet:eo,stylis:to}),io=(no.Consumer,r.createContext(void 0));function ro(){return(0,r.useContext)(no)}function so(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],s=ro().styleSheet,a=(0,r.useMemo)(function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,s]),o=(0,r.useMemo)(function(){return $a({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})},[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)(function(){Fr()(n,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,r.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:o}},[e.shouldForwardProp,a,o]);return r.createElement(no.Provider,{value:l},r.createElement(io.Provider,{value:o},e.children))}var ao=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=to);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Pa(this,function(){throw Na(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=to),this.name+e.hash},e}(),oo=function(e){return e>="A"&&e<="Z"};function lo(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(1===n&&"-"===i&&"-"===e[0])return e;oo(i)?t+="-"+i.toLowerCase():t+=i}return t.startsWith("ms-")?"-"+t:t}var co=function(e){return null==e||!1===e||""===e},uo=function(e){var t,n,i=[];for(var r in e){var s=e[r];e.hasOwnProperty(r)&&!co(s)&&(Array.isArray(s)&&s.isCss||Aa(s)?i.push("".concat(lo(r),":"),s,";"):Ta(s)?i.push.apply(i,Dr(Dr(["".concat(r," {")],uo(s),!1),["}"],!1)):i.push("".concat(lo(r),": ").concat((t=r,null==(n=s)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Os||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return i};function ho(e,t,n,i){return co(e)?[]:Sa(e)?[".".concat(e.styledComponentId)]:Aa(e)?!Aa(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:ho(e(t),t,n,i):e instanceof ao?n?(e.inject(n,i),[e.getName(i)]):[e]:Ta(e)?uo(e):Array.isArray(e)?Array.prototype.concat.apply(Js,e.map(function(e){return ho(e,t,n,i)})):[e.toString()];var r}function po(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Aa(n)&&!Sa(n))return!1}return!0}var mo=ra(Hs),fo=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&po(e),this.componentId=t,this.baseHash=ia(mo,t),this.baseStyle=n,Za.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Ea(i,this.staticRulesId);else{var r=Ca(ho(this.rules,e,t,n)),s=ta(ia(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,s)){var a=n(r,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,a)}i=Ea(i,s),this.staticRulesId=s}else{for(var o=ia(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=Ca(ho(u,e,t,n));o=ia(o,d+c),l+=d}}if(l){var h=ta(o>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),i=Ea(i,h)}}return i},e}(),go=r.createContext(void 0);go.Consumer;var vo={};new Set;function xo(e,t,n){var i=Sa(e),s=e,a=!oa(e),o=t.attrs,l=void 0===o?Js:o,c=t.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Qs(e);vo[n]=(vo[n]||0)+1;var i="".concat(n,"-").concat(sa(Hs+n+vo[n]));return t?"".concat(t,"-").concat(i):i}(t.displayName,t.parentComponentId):c,d=t.displayName,h=void 0===d?function(e){return oa(e)?"styled.".concat(e):"Styled(".concat(aa(e),")")}(e):d,p=t.displayName&&t.componentId?"".concat(Qs(t.displayName),"-").concat(t.componentId):t.componentId||u,m=i&&s.attrs?s.attrs.concat(l).filter(Boolean):l,f=t.shouldForwardProp;if(i&&s.shouldForwardProp){var g=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;f=function(e,t){return g(e,t)&&v(e,t)}}else f=g}var x=new fo(n,p,i?s.componentStyle:void 0);function y(e,t){return function(e,t,n){var i=e.attrs,s=e.componentStyle,a=e.defaultProps,o=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=r.useContext(go),d=ro(),h=e.shouldForwardProp||d.shouldForwardProp,p=Xs(t,u,a)||Ys,m=function(e,t,n){for(var i,r=Br(Br({},t),{className:void 0,theme:n}),s=0;s<e.length;s+=1){var a=Aa(i=e[s])?i(r):i;for(var o in a)r[o]="className"===o?Ea(r[o],a[o]):"style"===o?Br(Br({},r[o]),a[o]):a[o]}return t.className&&(r.className=Ea(r.className,t.className)),r}(i,t,p),f=m.as||c,g={};for(var v in m)void 0===m[v]||"$"===v[0]||"as"===v||"theme"===v&&m.theme===p||("forwardedAs"===v?g.as=m.forwardedAs:h&&!h(v,f)||(g[v]=m[v]));var x=function(e,t){var n=ro();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(s,m),y=Ea(o,l);return x&&(y+=" "+x),m.className&&(y+=" "+m.className),g[oa(f)&&!Zs.has(f)?"class":"className"]=y,n&&(g.ref=n),(0,r.createElement)(f,g)}(_,e,t)}y.displayName=h;var _=r.forwardRef(y);return _.attrs=m,_.componentStyle=x,_.displayName=h,_.shouldForwardProp=f,_.foldedComponentIds=i?Ea(s.foldedComponentIds,s.styledComponentId):"",_.styledComponentId=p,_.target=i?s.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,r=t;i<r.length;i++)Ma(e,r[i],!0);return e}({},s.defaultProps,e):e}}),Pa(_,function(){return".".concat(_.styledComponentId)}),a&&wa(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function yo(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n}var _o=function(e){return Object.assign(e,{isCss:!0})};function bo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Aa(e)||Ta(e))return _o(ho(yo(Js,Dr([e],t,!0))));var i=e;return 0===t.length&&1===i.length&&"string"==typeof i[0]?ho(i):_o(ho(yo(i,t)))}function wo(e,t,n){if(void 0===n&&(n=Ys),!t)throw Na(1,t);var i=function(i){for(var r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return e(t,n,bo.apply(void 0,Dr([i],r,!1)))};return i.attrs=function(i){return wo(e,t,Br(Br({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i.withConfig=function(i){return wo(e,t,Br(Br({},n),i))},i}var Ao=function(e){return wo(xo,e)},So=Ao;Zs.forEach(function(e){So[e]=Ao(e)});!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=po(e),Za.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,i){var r=i(Ca(ho(this.rules,t,n,i)),""),s=this.componentId+e;n.insertRules(s,s,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,i){e>2&&Za.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)}}();function Eo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Ca(bo.apply(void 0,Dr([e],t,!1))),r=sa(i);return new ao(r,i)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Ha(),i=Ca([n&&'nonce="'.concat(n,'"'),"".concat(Fs,'="true"'),"".concat(zs,'="').concat(Hs,'"')].filter(Boolean)," ");return"<style ".concat(i,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw Na(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw Na(2);var n=e.instance.toString();if(!n)return[];var i=((t={})[Fs]="",t[zs]=Hs,t.dangerouslySetInnerHTML={__html:n},t),s=Ha();return s&&(i.nonce=s),[r.createElement("style",Br({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Za({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw Na(2);return r.createElement(so,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw Na(3)}})(),"__sc-".concat(Fs,"__");function Co(e){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(e)}var To=/^\s+/,Mo=/\s+$/;function Po(e,t){if(t=t||{},(e=e||"")instanceof Po)return e;if(!(this instanceof Po))return new Po(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,i=null,r=null,s=null,a=!1,o=!1;"string"==typeof e&&(e=function(e){e=e.replace(To,"").replace(Mo,"").toLowerCase();var t,n=!1;if(Jo[e])e=Jo[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=dl.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=dl.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=dl.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=dl.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=dl.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=dl.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=dl.hex8.exec(e))return{r:Ko(t[1]),g:Ko(t[2]),b:Ko(t[3]),a:tl(t[4]),format:n?"name":"hex8"};if(t=dl.hex6.exec(e))return{r:Ko(t[1]),g:Ko(t[2]),b:Ko(t[3]),format:n?"name":"hex"};if(t=dl.hex4.exec(e))return{r:Ko(t[1]+""+t[1]),g:Ko(t[2]+""+t[2]),b:Ko(t[3]+""+t[3]),a:tl(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=dl.hex3.exec(e))return{r:Ko(t[1]+""+t[1]),g:Ko(t[2]+""+t[2]),b:Ko(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==Co(e)&&(hl(e.r)&&hl(e.g)&&hl(e.b)?(t=function(e,t,n){return{r:255*Zo(e,255),g:255*Zo(t,255),b:255*Zo(n,255)}}(e.r,e.g,e.b),a=!0,o="%"===String(e.r).substr(-1)?"prgb":"rgb"):hl(e.h)&&hl(e.s)&&hl(e.v)?(i=$o(e.s),r=$o(e.v),t=function(e,t,n){e=6*Zo(e,360),t=Zo(t,100),n=Zo(n,100);var i=Math.floor(e),r=e-i,s=n*(1-t),a=n*(1-r*t),o=n*(1-(1-r)*t),l=i%6,c=[n,a,s,s,o,n][l],u=[o,n,n,a,s,s][l],d=[s,s,o,n,n,a][l];return{r:255*c,g:255*u,b:255*d}}(e.h,i,r),a=!0,o="hsv"):hl(e.h)&&hl(e.s)&&hl(e.l)&&(i=$o(e.s),s=$o(e.l),t=function(e,t,n){var i,r,s;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=Zo(e,360),t=Zo(t,100),n=Zo(n,100),0===t)i=r=s=n;else{var o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;i=a(l,o,e+1/3),r=a(l,o,e),s=a(l,o,e-1/3)}return{r:255*i,g:255*r,b:255*s}}(e.h,i,s),a=!0,o="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=Xo(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function No(e,t,n){e=Zo(e,255),t=Zo(t,255),n=Zo(n,255);var i,r,s=Math.max(e,t,n),a=Math.min(e,t,n),o=(s+a)/2;if(s==a)i=r=0;else{var l=s-a;switch(r=o>.5?l/(2-s-a):l/(s+a),s){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,l:o}}function Ro(e,t,n){e=Zo(e,255),t=Zo(t,255),n=Zo(n,255);var i,r,s=Math.max(e,t,n),a=Math.min(e,t,n),o=s,l=s-a;if(r=0===s?0:l/s,s==a)i=0;else{switch(s){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,v:o}}function Lo(e,t,n,i){var r=[Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16)),Qo(Math.round(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function jo(e,t,n,i){return[Qo(el(i)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16)),Qo(Math.round(n).toString(16))].join("")}function Io(e,t){t=0===t?0:t||10;var n=Po(e).toHsl();return n.s-=t/100,n.s=qo(n.s),Po(n)}function ko(e,t){t=0===t?0:t||10;var n=Po(e).toHsl();return n.s+=t/100,n.s=qo(n.s),Po(n)}function Bo(e){return Po(e).desaturate(100)}function Do(e,t){t=0===t?0:t||10;var n=Po(e).toHsl();return n.l+=t/100,n.l=qo(n.l),Po(n)}function Oo(e,t){t=0===t?0:t||10;var n=Po(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Po(n)}function Fo(e,t){t=0===t?0:t||10;var n=Po(e).toHsl();return n.l-=t/100,n.l=qo(n.l),Po(n)}function Uo(e,t){var n=Po(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,Po(n)}function zo(e){var t=Po(e).toHsl();return t.h=(t.h+180)%360,Po(t)}function Ho(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Po(e).toHsl(),i=[Po(e)],r=360/t,s=1;s<t;s++)i.push(Po({h:(n.h+s*r)%360,s:n.s,l:n.l}));return i}function Go(e){var t=Po(e).toHsl(),n=t.h;return[Po(e),Po({h:(n+72)%360,s:t.s,l:t.l}),Po({h:(n+216)%360,s:t.s,l:t.l})]}function Wo(e,t,n){t=t||6,n=n||30;var i=Po(e).toHsl(),r=360/n,s=[Po(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,s.push(Po(i));return s}function Vo(e,t){t=t||6;for(var n=Po(e).toHsv(),i=n.h,r=n.s,s=n.v,a=[],o=1/t;t--;)a.push(Po({h:i,s:r,v:s})),s=(s+o)%1;return a}Po.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,i=this.toRgb();return e=i.r/255,t=i.g/255,n=i.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=Xo(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Ro(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Ro(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=No(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=No(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),i=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return Lo(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,i,r){var s=[Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16)),Qo(Math.round(n).toString(16)),Qo(el(i))];if(r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1))return s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0);return s.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Zo(this._r,255))+"%",g:Math.round(100*Zo(this._g,255))+"%",b:Math.round(100*Zo(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Zo(this._r,255))+"%, "+Math.round(100*Zo(this._g,255))+"%, "+Math.round(100*Zo(this._b,255))+"%)":"rgba("+Math.round(100*Zo(this._r,255))+"%, "+Math.round(100*Zo(this._g,255))+"%, "+Math.round(100*Zo(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Yo[Lo(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+jo(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=Po(e);n="#"+jo(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Po(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Do,arguments)},brighten:function(){return this._applyModification(Oo,arguments)},darken:function(){return this._applyModification(Fo,arguments)},desaturate:function(){return this._applyModification(Io,arguments)},saturate:function(){return this._applyModification(ko,arguments)},greyscale:function(){return this._applyModification(Bo,arguments)},spin:function(){return this._applyModification(Uo,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Wo,arguments)},complement:function(){return this._applyCombination(zo,arguments)},monochromatic:function(){return this._applyCombination(Vo,arguments)},splitcomplement:function(){return this._applyCombination(Go,arguments)},triad:function(){return this._applyCombination(Ho,[3])},tetrad:function(){return this._applyCombination(Ho,[4])}},Po.fromRatio=function(e,t){if("object"==Co(e)){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:$o(e[i]));e=n}return Po(e,t)},Po.equals=function(e,t){return!(!e||!t)&&Po(e).toRgbString()==Po(t).toRgbString()},Po.random=function(){return Po.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Po.mix=function(e,t,n){n=0===n?0:n||50;var i=Po(e).toRgb(),r=Po(t).toRgb(),s=n/100;return Po({r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a})},Po.readability=function(e,t){var n=Po(e),i=Po(t);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},Po.isReadable=function(e,t,n){var i,r,s=Po.readability(e,t);switch(r=!1,(i=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=s>=4.5;break;case"AAlarge":r=s>=3;break;case"AAAsmall":r=s>=7}return r},Po.mostReadable=function(e,t,n){var i,r,s,a,o=null,l=0;r=(n=n||{}).includeFallbackColors,s=n.level,a=n.size;for(var c=0;c<t.length;c++)(i=Po.readability(e,t[c]))>l&&(l=i,o=Po(t[c]));return Po.isReadable(e,o,{level:s,size:a})||!r?o:(n.includeFallbackColors=!1,Po.mostReadable(e,["#fff","#000"],n))};var Jo=Po.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Yo=Po.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Jo);function Xo(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Zo(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function qo(e){return Math.min(1,Math.max(0,e))}function Ko(e){return parseInt(e,16)}function Qo(e){return 1==e.length?"0"+e:""+e}function $o(e){return e<=1&&(e=100*e+"%"),e}function el(e){return Math.round(255*parseFloat(e)).toString(16)}function tl(e){return Ko(e)/255}var nl,il,rl,sl,al,ol,ll,cl,ul,dl=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hl(e){return!!dl.CSS_UNIT.exec(e)}var pl="#4fa94d",ml={"aria-busy":!0,role:"progressbar"},fl=So.div(nl||(nl=kr(["\n  display: ",";\n"])),e=>e.$visible?"flex":"none"),gl="http://www.w3.org/2000/svg",vl=e=>{let{height:t=80,width:n=80,color:i=pl,ariaLabel:s="bars-loading",wrapperStyle:a,wrapperClass:o,visible:l=!0}=e;return r.createElement(fl,Fe({$visible:l,style:Fe({},a),className:o,"data-testid":"bars-loading","aria-label":s},ml),r.createElement("svg",{width:n,height:t,fill:i,viewBox:"0 0 135 140",xmlns:gl,"data-testid":"bars-svg"},r.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},r.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},r.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},r.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},r.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},r.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"}))))},xl=242.776657104492,yl=Eo(il||(il=kr(["\n12.5% {\n  stroke-dasharray: ","px, ","px;\n  stroke-dashoffset: -","px;\n}\n43.75% {\n  stroke-dasharray: ","px, ","px;\n  stroke-dashoffset: -","px;\n}\n100% {\n  stroke-dasharray: ","px, ","px;\n  stroke-dashoffset: -","px;\n}\n"])),.14*xl,xl,.11*xl,.35*xl,xl,.35*xl,.01*xl,xl,.99*xl),_l=(So.path(rl||(rl=kr(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),.01*xl,xl,yl,1.6),Eo(sl||(sl=kr(["\nto {\n   transform: rotate(360deg);\n }\n"])))),bl=(So.svg(al||(al=kr(["\n  animation: "," "," steps(12, end) infinite;\n"])),_l,e=>String(e.$animationDuration).endsWith("s")?String(e.$animationDuration):"".concat(e.$animationDuration,"s")),So.polyline(ol||(ol=kr(["\n  stroke-width: ",";\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),e=>"".concat(e.$strokeWidth,"px")),Eo(ll||(ll=kr(["\nto {\n   stroke-dashoffset: 136;\n }\n"])))),wl=(So.polygon(cl||(cl=kr(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),bl),So.svg(ul||(ul=kr(["\n  transform-origin: 50% 65%;\n"]))),n(527)),Al=n.n(wl);delete Al().Icon.Default.prototype._getIconUrl,Al().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Sl=e=>{let{height:t="450px",width:n="100%"}=e;const i=(0,r.useRef)(null),s=(0,r.useRef)(null),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)({coordinates:[14.640700042873558,121.00340179095328],address:"1 Binmaka St, cor Biak na Bato, Quezon City, 1115 Kalakhang Maynila",isGeocoded:!0});return(0,r.useEffect)(()=>{if(!i.current||s.current)return;const e=()=>{try{if(!i.current||0===i.current.offsetWidth||0===i.current.offsetHeight)return void setTimeout(e,100);if("undefined"===typeof Al()||!Al().map)return void console.error("Leaflet is not properly loaded");const h=Al().map(i.current,{center:l.coordinates,zoom:16,zoomControl:!0,attributionControl:!0,preferCanvas:!1,renderer:Al().canvas(),zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0});s.current=h;try{Al().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(h)}catch(t){console.error("Error adding tile layer:",t)}const p=Al().divIcon({className:"custom-marker",html:'\n            <div style="\n              background: linear-gradient(135deg, #F0B21B 0%, #e6a632 100%);\n              width: 40px;\n              height: 40px;\n              border-radius: 50% 50% 50% 0;\n              border: 4px solid #ffffff;\n              box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);\n              transform: rotate(-45deg);\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              position: relative;\n              cursor: pointer;\n            ">\n              <div style="\n                transform: rotate(45deg);\n                color: #2c3e50;\n                font-weight: bold;\n                font-size: 16px;\n                line-height: 1;\n              ">DE</div>\n            </div>\n          ',iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]}),m='\n          <div style="\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n            max-width: 300px;\n            padding: 0;\n          ">\n            <div style="\n              background: linear-gradient(135deg, #F0B21B 0%, #e6a632 100%);\n              color: #2c3e50;\n              padding: 15px;\n              margin: -10px -10px 10px -10px;\n              border-radius: 8px 8px 0 0;\n              text-align: center;\n            ">\n              <h3 style="margin: 0; font-size: 18px; font-weight: bold;">Design Excellence</h3>\n              <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.9;">Our Main Office</p>\n            </div>\n            \n            <div style="padding: 0 10px 10px 10px;">\n              <div style="\n                display: flex;\n                align-items: flex-start;\n                gap: 10px;\n                margin-bottom: 12px;\n              ">\n                <div style="\n                  background: rgba(240, 178, 27, 0.1);\n                  border-radius: 50%;\n                  width: 30px;\n                  height: 30px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  flex-shrink: 0;\n                ">\n                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F0B21B" stroke-width="2">\n                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>\n                    <circle cx="12" cy="10" r="3"/>\n                  </svg>\n                </div>\n                <div>\n                  <strong style="color: #2c3e50; font-size: 14px;">Address:</strong><br>\n                  <span style="color: #495057; font-size: 13px; line-height: 1.4;">\n                    1 Binmaka St, cor Biak na Bato<br>\n                    Quezon City, 1115 Kalakhang Maynila<br>\n                    Philippines\n                  </span>\n                </div>\n              </div>\n              \n              <div style="\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                margin-bottom: 12px;\n              ">\n                <div style="\n                  background: rgba(240, 178, 27, 0.1);\n                  border-radius: 50%;\n                  width: 30px;\n                  height: 30px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  flex-shrink: 0;\n                ">\n                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F0B21B" stroke-width="2">\n                    <circle cx="12" cy="12" r="10"/>\n                    <polyline points="12,6 12,12 16,14"/>\n                  </svg>\n                </div>\n                <div>\n                  <strong style="color: #2c3e50; font-size: 14px;">Business Hours:</strong><br>\n                  <span style="color: #495057; font-size: 13px;">\n                    Mon-Fri: 9:00 AM - 6:00 PM<br>\n                    Sat: 9:00 AM - 4:00 PM<br>\n                    Sun: Closed\n                  </span>\n                </div>\n              </div>\n              \n              <div style="\n                display: flex;\n                gap: 8px;\n                margin-top: 15px;\n              ">\n                <a href="tel:+63-2-1234-5678" style="\n                  background: #F0B21B;\n                  color: #2c3e50;\n                  padding: 8px 12px;\n                  border-radius: 6px;\n                  text-decoration: none;\n                  font-size: 12px;\n                  font-weight: 600;\n                  flex: 1;\n                  text-align: center;\n                  transition: all 0.2s ease;\n                " onmouseover="this.style.background=\'#e6a632\'" onmouseout="this.style.background=\'#F0B21B\'">\n                  \ud83d\udcde Call Us\n                </a>\n                <a href="/contact" style="\n                  background: #ffffff;\n                  color: #F0B21B;\n                  border: 2px solid #F0B21B;\n                  padding: 8px 12px;\n                  border-radius: 6px;\n                  text-decoration: none;\n                  font-size: 12px;\n                  font-weight: 600;\n                  flex: 1;\n                  text-align: center;\n                  transition: all 0.2s ease;\n                " onmouseover="this.style.background=\'#F0B21B\'; this.style.color=\'#ffffff\'" onmouseout="this.style.background=\'#ffffff\'; this.style.color=\'#F0B21B\'">\n                  \ud83d\udce7 Contact\n                </a>\n              </div>\n            </div>\n          </div>\n        ';let f=null;try{f=Al().marker(l.coordinates,{icon:p}).addTo(h),f.bindPopup(m,{maxWidth:350,className:"custom-popup"})}catch(n){console.error("Error adding main marker:",n);try{f=Al().marker(l.coordinates).addTo(h),f.bindPopup(l.address)}catch(r){console.error("Error adding fallback marker:",r)}}const g=[{name:"Quezon City Hall",coordinates:[14.65,121.03],type:"government"},{name:"SM North EDSA",coordinates:[14.656,121.028],type:"shopping"},{name:"Trinoma Mall",coordinates:[14.652,121.025],type:"shopping"},{name:"Araneta Center",coordinates:[14.62,121],type:"shopping"},{name:"Gateway Mall",coordinates:[14.625,121.005],type:"shopping"}];try{g.forEach(e=>{try{const t=Al().divIcon({className:"landmark-marker",html:'\n                  <div style="\n                    background: '.concat("shopping"===e.type?"#28a745":"#007bff",';\n                    width: 20px;\n                    height: 20px;\n                    border-radius: 50%;\n                    border: 2px solid #ffffff;\n                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    color: white;\n                    font-size: 10px;\n                    font-weight: bold;\n                  ">\n                    ').concat("shopping"===e.type?"\ud83d\udecd\ufe0f":"\ud83c\udfdb\ufe0f","\n                  </div>\n                "),iconSize:[20,20],iconAnchor:[10,10]});Al().marker(e.coordinates,{icon:t}).addTo(h).bindPopup('\n                  <div style="font-size: 13px;">\n                    <strong>'.concat(e.name,'</strong><br>\n                    <span style="color: #666;">').concat("shopping"===e.type?"Shopping Center":"Government Building","</span>\n                  </div>\n                "))}catch(t){console.error("Error adding landmark ".concat(e.name,":"),t)}})}catch(a){console.error("Error adding landmarks:",a)}try{if(f){const e=new(Al().featureGroup)([f,...g.map(e=>Al().marker(e.coordinates))]);h.fitBounds(e.getBounds().pad(.1))}else h.setView(l.coordinates,16)}catch(c){console.error("Error setting map bounds:",c);try{h.setView(l.coordinates,16)}catch(u){console.error("Error setting map view:",u)}}try{Al().control.scale({position:"bottomright",metric:!0,imperial:!1}).addTo(h)}catch(d){console.error("Error adding scale control:",d)}setTimeout(()=>{try{h&&h.invalidateSize&&h.invalidateSize()}catch(e){console.error("Error invalidating map size:",e)}},100),o(!0)}catch(RT){console.error("Map initialization error:",RT)}},t=setTimeout(e,200);return()=>{if(clearTimeout(t),s.current)try{s.current.off&&s.current.off(),s.current.eachLayer&&s.current.eachLayer(function(e){try{s.current.removeLayer(e)}catch(t){console.error("Error removing layer:",t)}}),s.current.remove&&s.current.remove()}catch(RT){console.error("Map cleanup error:",RT)}finally{s.current=null}o(!1)}},[l.coordinates]),(0,gi.jsx)("div",{ref:i,style:{height:t,width:n,borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",backgroundColor:"#f8f9fa",position:"relative",minHeight:"300px"},className:"enhanced-leaflet-map-container ".concat(a?"":"loading"),children:!a&&(0,gi.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#6c757d",fontSize:"14px",zIndex:1e3},children:"Loading map..."})})},El=()=>{const[e,t]=(0,r.useState)({name:"",email:"",message:""}),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null),o=e=>{const{name:n,value:i}=e.target;t(e=>Fe(Fe({},e),{},{[n]:i}))};return(0,gi.jsx)("section",{className:"contact-section",children:(0,gi.jsxs)("div",{className:"contact-container",children:[(0,gi.jsxs)("div",{className:"contact-content",children:[(0,gi.jsxs)("div",{className:"contact-info-column",children:[(0,gi.jsx)("h2",{className:"contact-title",children:"Get Touch in Excellence"}),(0,gi.jsx)("p",{className:"contact-description",children:"Have questions about our premium office solutions? Our team is here to help you create the perfect workspace."}),(0,gi.jsxs)("div",{className:"contact-methods",children:[(0,gi.jsxs)("div",{className:"contact-method",children:[(0,gi.jsx)("div",{className:"contact-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M22 6L12 13L2 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsxs)("div",{className:"contact-details",children:[(0,gi.jsx)("h4",{children:"Email Us"}),(0,gi.jsx)("p",{children:"info@designexcellence.com"})]})]}),(0,gi.jsxs)("div",{className:"contact-method",children:[(0,gi.jsx)("div",{className:"contact-icon",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7294C21.7209 20.9846 21.5573 21.2136 21.3521 21.4019C21.1469 21.5902 20.9046 21.7335 20.6407 21.8227C20.3768 21.9119 20.0974 21.9454 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3146 6.72533 15.2661 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.09456 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85685 2.63476 2.65219C2.82196 2.44753 3.04965 2.28369 3.30351 2.17162C3.55737 2.05956 3.83197 2.00195 4.10999 2H7.10999C7.59522 1.99522 8.06569 2.16708 8.43373 2.48353C8.80177 2.79999 9.04201 3.23945 9.10999 3.72C9.23662 4.68007 9.47144 5.62273 9.80999 6.53C9.94454 6.88792 9.97351 7.27675 9.89382 7.65353C9.81413 8.03031 9.62902 8.37769 9.35999 8.65L8.08999 9.92C9.51351 12.4135 11.5865 14.4865 14.08 15.91L15.35 14.64C15.6223 14.3709 15.9697 14.1858 16.3465 14.1061C16.7233 14.0264 17.1121 14.0554 17.47 14.19C18.3773 14.5286 19.3199 14.7634 20.28 14.89C20.7658 14.9585 21.2094 15.2032 21.5265 15.5765C21.8437 15.9498 22.0122 16.4258 22 16.92Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,gi.jsxs)("div",{className:"contact-details",children:[(0,gi.jsx)("h4",{children:"Call Us"}),(0,gi.jsx)("p",{children:"+1 234 567 890"})]})]}),(0,gi.jsxs)("div",{className:"contact-method",children:[(0,gi.jsx)("div",{className:"contact-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M21 10C21 17 12 23 12 23S3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsxs)("div",{className:"contact-details",children:[(0,gi.jsx)("h4",{children:"Visit Us"}),(0,gi.jsx)("p",{children:"1 Binmaka St, cor Biak na Bato, Quezon City, 1115 Kalakhang Maynila"})]})]})]}),(0,gi.jsx)("div",{className:"contact-tagline",children:"Creating exceptional office environments through innovative furniture solutions."}),(0,gi.jsxs)("div",{className:"contact-social-links",children:[(0,gi.jsx)("h4",{className:"social-links-title",children:"Follow Us"}),(0,gi.jsx)("div",{className:"social-links",children:(0,gi.jsxs)("a",{href:"https://www.facebook.com/designexcellence01/",target:"_blank",rel:"noopener noreferrer",className:"social-link","aria-label":"Facebook",children:[(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),(0,gi.jsx)("span",{children:"Facebook"})]})})]})]}),(0,gi.jsxs)("div",{className:"contact-form-column",children:[(0,gi.jsx)("div",{className:"contact-form-header",children:"Contact Form"}),(0,gi.jsxs)("form",{className:"contact-form",onSubmit:async n=>{n.preventDefault(),i(!0),a(null);try{const n=await fetch(pi.getApiUrl("/api/contact/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});(await n.json()).success?(a("success"),t({name:"",email:"",message:""})):a("error")}catch(RT){a("error")}finally{i(!1)}},children:["success"===s&&(0,gi.jsxs)("div",{className:"form-message form-message-success",children:[(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Thank you for your message! We will get back to you soon."]}),"error"===s&&(0,gi.jsxs)("div",{className:"form-message form-message-error",children:[(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Failed to send your message. Please try again later."]}),(0,gi.jsx)("div",{className:"form-group",children:(0,gi.jsx)("input",{type:"text",name:"name",placeholder:"Enter your name",value:e.name,onChange:o,required:!0,disabled:n})}),(0,gi.jsx)("div",{className:"form-group",children:(0,gi.jsx)("input",{type:"email",name:"email",placeholder:"Enter your email",value:e.email,onChange:o,required:!0,disabled:n})}),(0,gi.jsx)("div",{className:"form-group",children:(0,gi.jsx)("textarea",{name:"message",placeholder:"Message",value:e.message,onChange:o,rows:"4",required:!0,disabled:n})}),(0,gi.jsx)("button",{type:"submit",className:"contact-submit-btn",disabled:n,children:n?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)(vl,{color:"#ffffff",height:20,width:20}),"Sending..."]}):"Send Message"})]})]})]}),(0,gi.jsx)("div",{className:"contact-map-section",children:(0,gi.jsxs)("div",{className:"map-container",children:[(0,gi.jsx)("h3",{className:"map-title",children:"Find Us"}),(0,gi.jsx)("div",{className:"map-wrapper",children:(0,gi.jsx)(Sl,{height:"450px",width:"100%"})}),(0,gi.jsxs)("div",{className:"map-address",children:[(0,gi.jsx)("div",{className:"address-icon",children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M21 10C21 17 12 23 12 23S3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsxs)("div",{className:"address-text",children:[(0,gi.jsx)("strong",{children:"Address:"}),(0,gi.jsx)("br",{}),"1 Binmaka St, cor Biak na Bato, Quezon City, 1115 Kalakhang Maynila"]})]})]})})]})})},Cl=e=>{let{items:t}=e;return(0,gi.jsx)("nav",{className:"breadcrumb-nav","aria-label":"Breadcrumb",children:(0,gi.jsx)("ol",{className:"breadcrumb-list",children:t.map((e,t)=>(0,gi.jsxs)("li",{className:"breadcrumb-item",children:[t>0&&(0,gi.jsx)("span",{className:"breadcrumb-separator","aria-hidden":"true",children:(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.href?(0,gi.jsxs)(Re,{to:e.href,className:"breadcrumb-link",children:[e.icon&&(0,gi.jsx)("span",{className:"breadcrumb-icon",children:e.icon}),e.label]}):(0,gi.jsx)("span",{className:"breadcrumb-current","aria-current":"page",children:e.label})]},t))})})},Tl=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),p=(0,r.useRef)(null),m=500;(0,r.useEffect)(()=>{if(e){const e=async()=>{try{const n="https://designxcellinv-production.up.railway.app",r=await fetch("".concat(n,"/api/customer/profile"),{credentials:"include"}),s=await r.json();if(s.success&&s.customer){l(!0);try{const e=await fetch("".concat(n,"/api/chat/messages"),{credentials:"include"}),t=await e.json();if(t.success&&Array.isArray(t.messages)){const e=t.messages.map(e=>({from:"customer"===e.SenderType?"user":"support",text:e.MessageText,sentAt:e.SentAt,sent:!0}));i(e),e.length>0&&h(!1)}else i([])}catch(e){console.error("Error fetching chat messages:",e),i([])}}else try{const e=await fetch("".concat(n,"/api/chat/messages"),{credentials:"include"}),t=await e.json();if(401===e.status)l(!1),i([]);else if(t.success)if(l(!0),Array.isArray(t.messages)){const e=t.messages.map(e=>({from:"customer"===e.SenderType?"user":"support",text:e.MessageText,sentAt:e.SentAt,sent:!0}));i(e),e.length>0&&h(!1)}else i([]);else l(!1),i([])}catch(t){console.error("Error checking chat authentication:",t),l(!1),i([])}}catch(RT){console.error("Error checking authentication:",RT),l(!1),i([])}};e();fetch("".concat("https://designxcellinv-production.up.railway.app","/api/auto-messages")).then(e=>e.json()).then(e=>{e.success&&Array.isArray(e.items)?u(e.items.slice(0,6)):u([])}).catch(()=>u([]))}},[e]);const f=async e=>{try{console.log("Sending message:",e,"isLoggedIn:",o),i(t=>[...t,{from:"user",text:e,sentAt:(new Date).toISOString(),sent:!0}]);const t="https://designxcellinv-production.up.railway.app",n="".concat(t,o?"/api/chat/messages":"/api/chat/messages/guest");console.log("Using endpoint:",n);const r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({message:e})});console.log("Response status:",r.status);const s=await r.json();console.log("Response data:",s),s.success?(s.autoReply&&i(e=>[...e,{from:"support",text:s.autoReply,sentAt:(new Date).toISOString(),sent:!0}]),o&&setTimeout(()=>{fetch("".concat("https://designxcellinv-production.up.railway.app","/api/chat/messages"),{credentials:"include"}).then(e=>e.json()).then(e=>{e.success&&Array.isArray(e.messages)&&i(e.messages.map(e=>({from:"customer"===e.SenderType?"user":"support",text:e.MessageText,sentAt:e.SentAt,sent:!0})))}).catch(e=>{console.error("Error refetching messages:",e)})},300)):(console.error("Message send failed:",s.message),i(e=>[...e,{from:"support",text:"Error: ".concat(s.message||"Failed to send message"),sentAt:(new Date).toISOString(),sent:!0}]))}catch(t){console.error("Error sending message:",t),i(e=>[...e,{from:"support",text:"Error: Failed to send message. Please try again.",sentAt:(new Date).toISOString(),sent:!0}])}};return(0,r.useEffect)(()=>{e&&p.current&&p.current.scrollIntoView({behavior:"smooth"})},[n,e]),(0,r.useEffect)(()=>{s.trim().length>0&&d&&h(!1)},[s,d]),(0,gi.jsxs)(gi.Fragment,{children:[!e&&(0,gi.jsx)("div",{className:"floating-message-icon",onClick:()=>t(!0),title:"Message Us",children:(0,gi.jsxs)("div",{className:"chat-icon-container",children:[(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"chat-icon-svg",children:(0,gi.jsx)("path",{d:"M4 20V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-3 3z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",fill:"currentColor"})}),(0,gi.jsx)("div",{className:"chat-icon-pulse"})]})}),e&&(0,gi.jsxs)("div",{className:"floating-chat-window",children:[(0,gi.jsxs)("div",{className:"chat-header",children:[(0,gi.jsxs)("div",{className:"chat-header-content",children:[(0,gi.jsx)("div",{className:"chat-header-icon",children:(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M4 20V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7l-3 3z",stroke:"#2c3e50",strokeWidth:"2",strokeLinejoin:"round",fill:"#F0B21B"})})}),(0,gi.jsxs)("div",{className:"chat-header-text",children:[(0,gi.jsx)("h3",{children:"Chat Support"}),(0,gi.jsx)("p",{children:"We're here to help!"})]})]}),(0,gi.jsx)("button",{className:"chat-close-btn",onClick:()=>t(!1),title:"Close",children:(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"#2c3e50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,gi.jsxs)("div",{className:"chat-messages",children:[0===n.length&&(0,gi.jsxs)("div",{className:"chat-welcome",children:[(0,gi.jsx)("div",{className:"chat-welcome-icon",children:"\ud83d\udc4b"}),(0,gi.jsxs)("div",{className:"chat-welcome-text",children:[(0,gi.jsx)("h4",{children:"Hi there!"}),(0,gi.jsx)("p",{children:"How can we help you today?"})]})]}),n.map((e,t)=>(0,gi.jsxs)("div",{className:"chat-message ".concat(e.from),children:[(0,gi.jsxs)("div",{className:"chat-message-content",children:[(0,gi.jsx)("div",{className:"chat-message-text",children:e.text}),"user"===e.from&&e.sent&&(0,gi.jsx)("div",{className:"chat-message-status",children:(0,gi.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M20 6L9 17l-5-5",stroke:"#28a745",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,gi.jsx)("div",{className:"chat-message-time",children:new Date(e.sentAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t)),(0,gi.jsx)("div",{ref:p})]}),c.length>0&&(0,gi.jsxs)("div",{className:"chat-faqs",children:[(0,gi.jsxs)("div",{className:"chat-faqs-header",children:[(0,gi.jsxs)("div",{className:"chat-faqs-title",children:[(0,gi.jsxs)("svg",{className:"chat-faqs-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,gi.jsx)("span",{children:"Quick questions"})]}),(0,gi.jsx)("button",{className:"chat-faq-toggle",onClick:()=>{h(!d)},title:d?"Hide FAQs":"Show FAQs",children:(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d?(0,gi.jsx)("path",{d:"M18 15L12 9L6 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}):(0,gi.jsx)("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),d&&(0,gi.jsx)("div",{className:"chat-faqs-list",children:c.map(e=>(0,gi.jsx)("button",{className:"chat-faq-btn",onClick:()=>(async e=>{e.length>m?i(e=>[...e,{from:"support",text:"FAQ question too long. Please keep questions under ".concat(m," characters."),sentAt:(new Date).toISOString(),sent:!0}]):await f(e)})(e.question),children:e.question},e.id))})]}),null===o&&(0,gi.jsx)("div",{style:{padding:"10px",textAlign:"center",fontSize:"12px",color:"#666"},children:"Checking authentication..."}),!1===o&&(0,gi.jsx)("div",{style:{padding:"10px",textAlign:"center",fontSize:"12px",color:"#e74c3c"},children:"Please log in to send messages"}),!0===o&&(0,gi.jsx)("div",{style:{padding:"5px 10px",textAlign:"center",fontSize:"11px",color:"#27ae60"},children:"\u2713 Logged in as customer"}),(0,gi.jsxs)("form",{className:"chat-input-area",onSubmit:async e=>{if(e.preventDefault(),""===s.trim())return;if(s.length>m)return void i(e=>[...e,{from:"support",text:"Message too long. Please keep messages under ".concat(m," characters."),sentAt:(new Date).toISOString(),sent:!0}]);if(!0!==o)return void(window.location.href="/login");const t=s;a(""),await f(t)},children:[(0,gi.jsxs)("div",{className:"chat-input-container",children:[(0,gi.jsx)("input",{type:"text",className:"chat-input",placeholder:!0===o?"Type your message...":!1===o?"Login required to send messages":"Checking authentication...",value:s,onChange:e=>{const t=e.target.value;t.length<=m&&a(t)},autoFocus:!0,disabled:!0!==o,maxLength:m}),(0,gi.jsx)("button",{type:"submit",className:"chat-send-btn",disabled:!s.trim()||!0!==o||s.length>m,children:(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z",stroke:"#2c3e50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,gi.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 10px 0 10px",fontSize:"11px",color:s.length>450?"#e74c3c":s.length>400?"#f39c12":"#95a5a6"},children:[(0,gi.jsx)("span",{children:s.length>400&&(0,gi.jsx)("span",{style:{color:"#e74c3c",fontWeight:"bold"},children:s.length>m?"Message too long!":"Approaching limit"})}),(0,gi.jsxs)("span",{style:{color:s.length>m?"#e74c3c":s.length>400?"#f39c12":"#95a5a6",fontWeight:s.length>400?"bold":"normal"},children:[s.length,"/",m]})]})]})]})]})},Ml=e=>{let{children:t,itemsPerView:n=4,showArrows:i=!0,showDots:s=!0,autoPlay:a=!1,autoPlayInterval:o=3e3,className:l="",title:c="",subtitle:u=""}=e;const[d,h]=(0,r.useState)(0),[p,m]=(0,r.useState)(n),[f,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)(null),[y,_]=(0,r.useState)(null),b=(0,r.useRef)(null),w=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth,t=l.includes("testimonials"),n=l.includes("products"),i=l.includes("categories");m(e<=480||e<=768?t?1:n?2:i?3:2:e<=1199?t?2:3:t?3:4)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[n,l]),(0,r.useEffect)(()=>{if(a&&t.length>p)return w.current=setInterval(()=>{S()},o),()=>{w.current&&clearInterval(w.current)}},[a,o,t.length,p]);const A=Math.ceil(t.length/p),S=()=>{f||(g(!0),h(e=>(e+1)%A),setTimeout(()=>g(!1),300))},E=()=>{f||(g(!0),h(e=>(e-1+A)%A),setTimeout(()=>g(!1),300))};return(0,r.useEffect)(()=>{h(0)},[p]),t&&0!==t.length?(0,gi.jsxs)("div",{className:"slider-container ".concat(l),children:[(c||u)&&(0,gi.jsxs)("div",{className:"slider-header",children:[c&&(0,gi.jsx)("h2",{className:"slider-title",children:c}),u&&(0,gi.jsx)("p",{className:"slider-subtitle",children:u})]}),(0,gi.jsxs)("div",{className:"slider-wrapper",onMouseEnter:()=>{w.current&&clearInterval(w.current)},onMouseLeave:()=>{a&&t.length>p&&(w.current=setInterval(()=>{S()},o))},onTouchStart:e=>{_(null),x(e.targetTouches[0].clientX)},onTouchMove:e=>{_(e.targetTouches[0].clientX)},onTouchEnd:()=>{if(!v||!y)return;const e=v-y,t=e<-50;e>50&&A>1&&S(),t&&A>1&&E()},children:[i&&A>1&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("button",{className:"slider-arrow slider-arrow-prev",onClick:E,disabled:f,"aria-label":"Previous slide",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,gi.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,gi.jsx)("button",{className:"slider-arrow slider-arrow-next",onClick:S,disabled:f,"aria-label":"Next slide",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,gi.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,gi.jsx)("div",{className:"slider-track",ref:b,children:(0,gi.jsx)("div",{className:"slider-content",style:{transform:"translateX(-".concat(100*d,"%)"),transition:f?"transform 0.3s ease-in-out":"none"},children:Array.from({length:A},(e,n)=>{const i=t.slice(n*p,(n+1)*p);return(0,gi.jsx)("div",{className:"slider-slide",children:i},n)})})}),s&&A>1&&(0,gi.jsx)("div",{className:"slider-dots",children:Array.from({length:A},(e,t)=>(0,gi.jsx)("button",{className:"slider-dot ".concat(t===d?"active":""),onClick:()=>(e=>{f||(g(!0),h(e),setTimeout(()=>g(!1),300))})(t),disabled:f,"aria-label":"Go to slide ".concat(t+1)},t))})]})]}):null},Pl=e=>{let{designSettings:t={}}=e;const[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{o()},[]);const o=async()=>{try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/testimonials"));if(t.ok){const e=await t.json();i(e.testimonials||[])}else i(l())}catch(RT){console.error("Error fetching testimonials:",RT),i(l())}finally{a(!1)}},l=()=>[{id:1,name:"Leslie Alexander",profession:"Architecture",rating:5,text:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis.",imageUrl:"/images/testimonials/leslie.jpg"},{id:2,name:"Jenny Wilson",profession:"Interior Designer",rating:5,text:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis.",imageUrl:"/images/testimonials/jenny.jpg"}];if(s)return(0,gi.jsx)("section",{className:"testimonials",children:(0,gi.jsx)("div",{className:"container",children:(0,gi.jsx)("div",{className:"loading",children:"Loading testimonials..."})})});if(0===n.length)return null;const c={backgroundColor:t.bgColor||"#f8f9fa"},u=t.accentColor||"#F0B21B";return(0,gi.jsx)("section",{className:"testimonials",style:c,children:(0,gi.jsxs)("div",{className:"container",children:[(0,gi.jsxs)("div",{className:"testimonials-header",children:[(0,gi.jsxs)("div",{className:"testimonials-label",children:[(0,gi.jsx)("div",{className:"label-line",style:{backgroundColor:u}}),(0,gi.jsx)("span",{children:"TESTIMONIAL"})]}),(0,gi.jsxs)("h2",{className:"testimonials-title",children:[(0,gi.jsx)("span",{children:"What Our"})," ",(0,gi.jsx)("span",{className:"accent-text",children:"Clients Say"})]})]}),n.length<6?(0,gi.jsx)("div",{className:"testimonials-grid desktop-only",children:n.map(e=>(0,gi.jsxs)("div",{className:"testimonial-card",children:[!1!==t.showQuoteIcon&&(0,gi.jsx)("div",{className:"quote-icon",style:{color:u},children:(0,gi.jsx)(xr,{})}),(0,gi.jsxs)("div",{className:"client-profile",children:[!1!==t.showImage&&(0,gi.jsxs)("div",{className:"profile-image-container",children:[(0,gi.jsx)("div",{className:"profile-bg",style:{backgroundColor:u}}),(0,gi.jsx)("img",{src:Sr(e.imageUrl)||"/images/placeholder-avatar.svg",alt:e.name,className:"profile-image",onError:e=>{e.target.src="/images/placeholder-avatar.svg"}})]}),(0,gi.jsxs)("div",{className:"client-info",children:[(0,gi.jsx)("h4",{className:"client-name",children:e.name}),!1!==t.showTitle&&(0,gi.jsx)("p",{className:"client-profession",children:e.profession}),!1!==t.showRating&&(0,gi.jsxs)("div",{className:"client-rating",children:[(0,gi.jsx)("div",{className:"stars",children:[1,2,3,4,5].map(e=>(0,gi.jsx)(br,{className:"star",style:{color:u}},e))}),(0,gi.jsx)("span",{className:"rating-value",children:e.rating})]})]})]}),(0,gi.jsx)("div",{className:"testimonial-text",children:(0,gi.jsx)("p",{children:e.text})})]},e.id))}):(0,gi.jsx)(Ml,{itemsPerView:3,showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:6e3,className:"testimonials-slider desktop-only",children:n.map(e=>(0,gi.jsxs)("div",{className:"testimonial-card",children:[!1!==t.showQuoteIcon&&(0,gi.jsx)("div",{className:"quote-icon",style:{color:u},children:(0,gi.jsx)(xr,{})}),(0,gi.jsxs)("div",{className:"client-profile",children:[!1!==t.showImage&&(0,gi.jsxs)("div",{className:"profile-image-container",children:[(0,gi.jsx)("div",{className:"profile-bg",style:{backgroundColor:u}}),(0,gi.jsx)("img",{src:Sr(e.imageUrl)||"/images/placeholder-avatar.svg",alt:e.name,className:"profile-image",onError:e=>{e.target.src="/images/placeholder-avatar.svg"}})]}),(0,gi.jsxs)("div",{className:"client-info",children:[(0,gi.jsx)("h4",{className:"client-name",children:e.name}),!1!==t.showTitle&&(0,gi.jsx)("p",{className:"client-profession",children:e.profession}),!1!==t.showRating&&(0,gi.jsxs)("div",{className:"client-rating",children:[(0,gi.jsx)("div",{className:"stars",children:[1,2,3,4,5].map(e=>(0,gi.jsx)(br,{className:"star",style:{color:u}},e))}),(0,gi.jsx)("span",{className:"rating-value",children:e.rating})]})]})]}),(0,gi.jsx)("div",{className:"testimonial-text",children:(0,gi.jsx)("p",{children:e.text})})]},e.id))}),(0,gi.jsx)(Ml,{itemsPerView:2,showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:6e3,className:"testimonials-slider mobile-only",children:n.map(e=>(0,gi.jsxs)("div",{className:"testimonial-card",children:[!1!==t.showQuoteIcon&&(0,gi.jsx)("div",{className:"quote-icon",style:{color:u},children:(0,gi.jsx)(xr,{})}),(0,gi.jsxs)("div",{className:"client-profile",children:[!1!==t.showImage&&(0,gi.jsxs)("div",{className:"profile-image-container",children:[(0,gi.jsx)("div",{className:"profile-bg",style:{backgroundColor:u}}),(0,gi.jsx)("img",{src:Sr(e.imageUrl)||"/images/placeholder-avatar.svg",alt:e.name,className:"profile-image",onError:e=>{e.target.src="/images/placeholder-avatar.svg"}})]}),(0,gi.jsxs)("div",{className:"client-info",children:[(0,gi.jsx)("h4",{className:"client-name",children:e.name}),!1!==t.showTitle&&(0,gi.jsx)("p",{className:"client-profession",children:e.profession}),!1!==t.showRating&&(0,gi.jsxs)("div",{className:"client-rating",children:[(0,gi.jsx)("div",{className:"stars",children:[1,2,3,4,5].map(e=>(0,gi.jsx)(br,{className:"star",style:{color:u}},e))}),(0,gi.jsx)("span",{className:"rating-value",children:e.rating})]})]})]}),(0,gi.jsx)("div",{className:"testimonial-text",children:(0,gi.jsx)("p",{children:e.text})})]},e.id))})]})})},Nl=()=>{const[e,t]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{window.pageYOffset>300?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);return(0,gi.jsx)("button",{className:"scroll-up-button ".concat(e?"visible":""),onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"Scroll to top",title:"Scroll to top",children:(0,gi.jsx)(hr,{size:20})})},Rl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,gi.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,gi.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,gi.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]})},Ll=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,gi.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})},jl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,gi.jsx)("polyline",{points:"3.27,6.96 12,12.01 20.73,6.96"}),(0,gi.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})},Il=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,gi.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})},kl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,gi.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]})},Bl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,gi.jsx)("circle",{cx:"12",cy:"16",r:"1"}),(0,gi.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})},Dl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,gi.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,gi.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})},Ol=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,gi.jsx)("polyline",{points:"12,6 12,12 16,14"})]})},Fl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,gi.jsx)("polyline",{points:"22,4 12,14.01 9,11.01"})]})},Ul=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),(0,gi.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,gi.jsx)("path",{d:"M16 10a4 4 0 0 1-8 0"})]})},zl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,gi.jsx)("path",{d:"M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]})},Hl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),(0,gi.jsx)("circle",{cx:"12",cy:"13",r:"4"})]})},Gl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,gi.jsx)("polyline",{points:"16,17 21,12 16,7"}),(0,gi.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},Wl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,gi.jsx)("polyline",{points:"12,5 19,12 12,19"})]})},Vl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,gi.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},Jl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})},Yl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,gi.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})},Xl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:(0,gi.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})},Zl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,gi.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,gi.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})},ql=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:i,children:(0,gi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},Kl=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("rect",{x:"1",y:"3",width:"15",height:"13"}),(0,gi.jsx)("polygon",{points:"16,8 20,8 23,11 23,16 16,16"}),(0,gi.jsx)("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),(0,gi.jsx)("circle",{cx:"18.5",cy:"18.5",r:"2.5"})]})},Ql=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,gi.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,gi.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,gi.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},$l=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:(0,gi.jsx)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})},ec=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:(0,gi.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})},tc=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,gi.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,gi.jsx)("polyline",{points:"21,15 16,10 5,21"})]})},nc=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("polygon",{points:"23,7 16,12 23,17"}),(0,gi.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]})},ic=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,gi.jsx)("polygon",{points:"22,2 15,22 11,13 2,9"})]})},rc=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M3 6h18"}),(0,gi.jsx)("path",{d:"M7 12h10"}),(0,gi.jsx)("path",{d:"M10 18h4"})]})},sc=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,gi.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,gi.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})},ac=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:(0,gi.jsx)("polygon",{points:"5,3 19,12 5,21"})})},oc=e=>{let{size:t=24,color:n="currentColor",className:i=""}=e;return(0,gi.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:[(0,gi.jsx)("path",{d:"M12 3l1.09 3.26L16 8l-2.91 1.74L12 13l-1.09-3.26L8 8l2.91-1.74L12 3z"}),(0,gi.jsx)("path",{d:"M5 3l.5 1.5L7 5l-1.5.5L5 7l-.5-1.5L3 5l1.5-.5L5 3z"}),(0,gi.jsx)("path",{d:"M19 3l.5 1.5L21 5l-1.5.5L19 7l-.5-1.5L17 5l1.5-.5L19 3z"})]})},lc=()=>{const{wishlist:e,isWishlistOpen:t,closeWishlist:n,removeFromWishlist:i,clearWishlist:r}=Ji(),{formatPrice:s}=Oi(),{addToCart:a}=Ni(),o=ne();if(!t)return null;return(0,gi.jsx)("div",{className:"wishlist-overlay",onClick:n,children:(0,gi.jsxs)("div",{className:"wishlist-popup",onClick:e=>e.stopPropagation(),children:[(0,gi.jsxs)("div",{className:"wishlist-header",children:[(0,gi.jsxs)("div",{className:"wishlist-title",children:[(0,gi.jsx)(Xl,{size:24,color:"#F0B21B"}),(0,gi.jsx)("h3",{children:"Wishlist"})]}),(0,gi.jsx)("button",{className:"close-btn",onClick:n,title:"Close wishlist",children:(0,gi.jsx)(Vl,{size:20,color:"#6b7280"})})]}),(0,gi.jsx)("div",{className:"wishlist-content",children:0===e.length?(0,gi.jsxs)("div",{className:"wishlist-empty",children:[(0,gi.jsx)("div",{className:"empty-icon",children:(0,gi.jsx)(Xl,{size:48,color:"#d1d5db"})}),(0,gi.jsx)("h4",{children:"Your wishlist is empty"}),(0,gi.jsx)("p",{children:"Start adding products you love to your wishlist!"}),(0,gi.jsxs)("button",{className:"browse-products-btn",onClick:()=>{o("/products"),n()},children:[(0,gi.jsx)(Ul,{size:16,color:"#ffffff"}),"Browse Products"]})]}):(0,gi.jsx)("div",{className:"wishlist-table-container",children:(0,gi.jsxs)("table",{className:"wishlist-table",children:[(0,gi.jsx)("thead",{children:(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("th",{children:"Product"}),(0,gi.jsx)("th",{children:"Price"}),(0,gi.jsx)("th",{children:"Date Added"}),(0,gi.jsx)("th",{children:"Stock Status"}),(0,gi.jsx)("th",{children:"Action"})]})}),(0,gi.jsx)("tbody",{children:e.map(e=>{const t=(e=>{const t=e||0;return 0===t?{status:"Out of Stock",color:"#ef4444"}:t<=5?{status:"Low Stock",color:"#f59e0b"}:{status:"In Stock",color:"#10b981"}})(e.stockQuantity||e.stock);return(0,gi.jsxs)("tr",{className:"wishlist-row",children:[(0,gi.jsxs)("td",{className:"product-cell",children:[(0,gi.jsx)("button",{className:"remove-item-btn",onClick:t=>((e,t)=>{e.stopPropagation(),i(t)})(t,e.id),title:"Remove from wishlist",children:(0,gi.jsx)(Vl,{size:16,color:"#6b7280"})}),(0,gi.jsxs)("div",{className:"product-info",children:[(0,gi.jsx)("div",{className:"product-image",children:(0,gi.jsx)("img",{src:Er(e),alt:e.name,onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZjhmOWZhIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9IjAuM2VtIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM2NjYiPkltYWdlPC90ZXh0Pgo8L3N2Zz4K"}})}),(0,gi.jsxs)("div",{className:"product-details",children:[(0,gi.jsx)("h4",{className:"product-name",onClick:()=>{return t=e.id,o("/product/".concat(t)),void n();var t},children:e.name}),(0,gi.jsxs)("p",{className:"product-color",children:["Color: ",e.color||"Default"]})]})]})]}),(0,gi.jsxs)("td",{className:"price-cell",children:[(0,gi.jsx)("span",{className:"current-price",children:s(e.hasDiscount&&e.discountInfo?e.discountInfo.discountedPrice:e.price)}),e.hasDiscount&&e.discountInfo&&(0,gi.jsx)("span",{className:"original-price",children:s(e.price)})]}),(0,gi.jsx)("td",{className:"date-cell",children:(r=e.addedAt,new Date(r).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}))}),(0,gi.jsx)("td",{className:"stock-cell",children:(0,gi.jsx)("span",{className:"stock-status",style:{color:t.color},children:t.status})}),(0,gi.jsx)("td",{className:"action-cell",children:(0,gi.jsx)("button",{className:"add-to-cart-btn",onClick:t=>((e,t)=>{e.stopPropagation(),a(t,1),o("/cart"),n()})(t,e),disabled:"Out of Stock"===t.status,children:"Add to Cart"})})]},e.id);var r})})]})})}),e.length>0&&(0,gi.jsx)("div",{className:"wishlist-footer",children:(0,gi.jsxs)("div",{className:"wishlist-actions",children:[(0,gi.jsx)("button",{className:"clear-wishlist-btn",onClick:()=>{window.confirm("Are you sure you want to clear your wishlist?")&&r()},children:"Clear Wishlist"}),(0,gi.jsx)("button",{className:"add-all-btn",onClick:()=>{e.forEach(e=>{a(e,1)}),o("/cart"),n()},children:"Add All to Cart"})]})})]})})},cc=e=>{var t,n,i,s,a,l;let{open:c,onClose:u,product:d,formatPrice:h,onAddToCart:p}=e;if((0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(null===u||void 0===u||u())};if(c){const t=document.body.style.overflow;return document.body.style.overflow="hidden",document.addEventListener("keydown",e),()=>{document.body.style.overflow=t,document.removeEventListener("keydown",e)}}},[c,u]),!c||!d)return null;const m=d.Name||d.name||"Product",f=null!==(t=null!==(n=d.Price)&&void 0!==n?n:d.price)&&void 0!==t?t:0,g=d.hasDiscount,v=d.discountInfo,x=d.Description||d.description||"",y=d.Category||d.categoryName||d.category||"",_=null!==(i=null!==(s=null!==(a=d.StockQuantity)&&void 0!==a?a:d.stock)&&void 0!==s?s:d.quantity)&&void 0!==i?i:null,b=(l=d.soldQuantity,d.Dimensions||d.dimensions||""),w=Er(d),A=g&&v?v.discountedPrice:f,S=(0,gi.jsx)("div",{className:"quickview-modal-overlay",onClick:u,children:(0,gi.jsxs)("div",{className:"quickview-modal-content",onClick:e=>e.stopPropagation(),children:[(0,gi.jsx)("button",{className:"quickview-close-btn",onClick:u,"aria-label":"Close modal",children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,gi.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,gi.jsx)("div",{className:"quickview-image-section",children:(0,gi.jsx)("div",{className:"quickview-image-container",children:(0,gi.jsx)("img",{src:w||"/images/placeholder-product.jpg",alt:m,className:"quickview-product-image",onError:e=>{e.target.src="/images/placeholder-product.jpg"}})})}),(0,gi.jsx)("div",{className:"quickview-details-section",children:(0,gi.jsxs)("div",{className:"quickview-content",children:[y&&(0,gi.jsx)("div",{className:"quickview-category",children:y}),(0,gi.jsx)("h2",{className:"quickview-title",children:m}),(0,gi.jsxs)("div",{className:"quickview-price-section",children:[(0,gi.jsx)("div",{className:"quickview-price",children:h?h(A):"\u20b1".concat(A.toLocaleString())}),g&&v&&(0,gi.jsx)("div",{className:"quickview-original-price",children:h?h(f):"\u20b1".concat(f.toLocaleString())})]}),null!==_&&(0,gi.jsx)("div",{className:"quickview-stock",children:(0,gi.jsx)("span",{className:"stock-badge ".concat(0===_?"out-of-stock":_<=10?"low-stock":"in-stock"),children:0===_?"Out of Stock":_<=10?"Only ".concat(_," left"):"In Stock"})}),x&&(0,gi.jsx)("div",{className:"quickview-description",children:(0,gi.jsx)("p",{children:x})}),b&&(0,gi.jsxs)("div",{className:"quickview-dimensions",children:[(0,gi.jsx)("span",{className:"dimensions-label",children:"Dimensions:"}),(0,gi.jsx)("span",{className:"dimensions-value",children:b})]}),(0,gi.jsxs)("div",{className:"quickview-actions",children:[(0,gi.jsxs)("button",{className:"quickview-add-to-cart-btn",onClick:()=>{null===p||void 0===p||p(d)},disabled:0===_,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,gi.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,gi.jsx)("path",{d:"m1 1 4 4 13 0 3 8-1 1H6"})]}),"Add to Cart"]}),(0,gi.jsx)("button",{className:"quickview-view-details-btn",onClick:u,children:"View Full Details"})]})]})})]})});return(0,o.createPortal)(S,document.body)},uc=e=>{let{product:t}=e;const{id:n,name:i,price:s,rating:a=0,hasDiscount:o=!1,discountInfo:l=null,categoryName:c,stockQuantity:u=0,stock:d=0,soldQuantity:h=0,has3DModel:p=!1,Has3DModel:m=!1,model3D:f=null,Model3D:g=null}=t||{id:1,name:"Product Name",price:0,rating:0},{formatPrice:v}=Oi(),x=o&&l?l.discountedPrice:s,y=o&&l?s:null,_=o&&l&&"percentage"===l.discountType?l.discountValue:null,b=u||d||0,w=0===b?{status:"sold-out",label:"Sold Out",color:"#DC3545",bgColor:"#F8D7DA"}:b<=5?{status:"low-stock",label:"Only ".concat(b," left"),color:"#856404",bgColor:"#FFF3CD"}:b<=10?{status:"limited-stock",label:"Limited Stock",color:"#856404",bgColor:"#FFF3CD"}:{status:"in-stock",label:"In Stock",color:"#155724",bgColor:"#D4EDDA"},A=p||m||f||g,S=Er(t),{addToCart:E}=Ni(),{toggleWishlist:C,isInWishlist:T}=Ji(),M=ne(),[P,N]=(0,r.useState)(!1);return(0,gi.jsxs)("div",{className:"product-card-redesigned",onClick:()=>{M(A?"/3d-products-furniture":"/product/".concat(n))},children:[(0,gi.jsxs)("div",{className:"product-card-image-container",children:[A&&(0,gi.jsx)("div",{className:"model3d-badge",children:"3D"}),o&&y&&_&&(0,gi.jsxs)("div",{className:"discount-badge",children:[_,"% off"]}),(0,gi.jsx)("img",{className:"product-image",src:S,alt:i}),(0,gi.jsxs)("div",{className:"action-icons",children:[(0,gi.jsx)("button",{className:"action-icon wishlist-btn ".concat(T(n)?"in-wishlist":""),"aria-label":T(n)?"Remove from wishlist":"Add to wishlist",title:T(n)?"Remove from wishlist":"Add to wishlist",onClick:e=>{e.preventDefault(),e.stopPropagation(),C(t)},onDoubleClick:e=>{e.preventDefault(),e.stopPropagation(),M("/wishlist")},children:(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:T(n)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,gi.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),(0,gi.jsx)("button",{className:"action-icon","aria-label":"Quick view",onClick:e=>{e.preventDefault(),e.stopPropagation(),N(!0)},children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}),(0,gi.jsx)("button",{className:"action-icon","aria-label":"Add to cart",onClick:e=>{e.preventDefault(),e.stopPropagation(),E(t,1)},children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,gi.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,gi.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})}),A&&(0,gi.jsx)("button",{className:"action-icon","aria-label":"3D Customize",onClick:e=>{e.preventDefault(),e.stopPropagation(),M("/3d-products-furniture")},style:{backgroundColor:"#FFC107",color:"#333"},children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,gi.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,gi.jsx)("path",{d:"M2 12l10 5 10-5"})]})})]})]}),(0,gi.jsxs)("div",{className:"product-card-content",children:[(0,gi.jsx)("div",{className:"product-category",style:{fontWeight:"bold"},children:c||"Product"}),(0,gi.jsx)("div",{className:"product-name",style:{fontWeight:"bold"},children:i||"Product Name"}),(0,gi.jsxs)("div",{className:"product-price-section",children:[(0,gi.jsx)("span",{className:"current-price",style:{fontWeight:"bold"},children:v(x)}),y&&(0,gi.jsx)("span",{className:"original-price",style:{fontWeight:"bold"},children:v(y)})]}),(0,gi.jsxs)("div",{className:"product-stock-indicator",children:[(0,gi.jsx)("div",{className:"stock-dot",style:{backgroundColor:w.color}}),(0,gi.jsx)("span",{className:"stock-text",style:{fontWeight:"bold"},children:w.label})]}),(0,gi.jsxs)("div",{className:"product-sold-indicator",children:[(0,gi.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,gi.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,gi.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,gi.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,gi.jsxs)("span",{className:"sold-text",style:{fontWeight:"bold"},children:[h||0," sold"]})]}),(0,gi.jsxs)("div",{className:"product-rating",children:[(0,gi.jsx)(ql,{size:16,color:"#fbbf24"}),(0,gi.jsx)("span",{className:"rating-value",style:{fontWeight:"bold"},children:a?a.toFixed(1):"0.0"})]})]}),(0,gi.jsx)(cc,{open:P,onClose:()=>N(!1),product:t,formatPrice:v,onAddToCart:e=>{E(e,1),N(!1)}})]})},dc=()=>{const[e,t]=(0,r.useState)(0),[n,i]=(0,r.useState)({mainHeading:"Premium Office Furniture Solutions",descriptionLine1:"Transform your workspace with our premium collection of office furniture",descriptionLine2:"Discover our premium collection of office furniture designed for modern professionals",buttonText:"SHOP NOW",buttonLink:"/products",textColor:"#ffffff",buttonBgColor:"#ffc107",buttonTextColor:"#333333",heroBannerImages:[]});(0,r.useEffect)(()=>{let e=!0;console.log("Hero: Fetching hero banner data...");return fetch("".concat("https://designxcellinv-production.up.railway.app","/api/hero-banner")).then(e=>(console.log("Hero: API response status:",e.status),e.json())).then(t=>{if(!e)return;console.log("Hero: API response data:",t);let n=[];t.success&&t.heroBanner?(console.log("Hero banner data loaded successfully:",t.heroBanner),n=Array.isArray(t.heroBanner.heroBannerImages)?t.heroBanner.heroBannerImages.map(e=>{const t="string"===typeof e?e:e.filename,n=Sr("hero-banners/".concat(t));return console.log("Hero: Image URL constructed:",n),n}):[],i({mainHeading:t.heroBanner.mainHeading||"Premium Office Furniture Solutions",descriptionLine1:t.heroBanner.descriptionLine1||"Transform your workspace with our premium collection of office furniture",descriptionLine2:t.heroBanner.descriptionLine2||"Discover our premium collection of office furniture designed for modern professionals",buttonText:t.heroBanner.buttonText||"SHOP NOW",buttonLink:t.heroBanner.buttonLink||"/products",textColor:t.heroBanner.textColor||"#ffffff",buttonBgColor:t.heroBanner.buttonBgColor||"#ffc107",buttonTextColor:t.heroBanner.buttonTextColor||"#333333",button2Text:t.heroBanner.button2Text,button2Link:t.heroBanner.button2Link,button2BgColor:t.heroBanner.button2BgColor,button2TextColor:t.heroBanner.button2TextColor,heroBannerImages:n})):(console.log("Hero banner data format issue:",t),0===n.length&&(console.log("No images found, testing with a sample image..."),n.push("https://via.placeholder.com/1920x600/ffc107/ffffff?text=Test+Image")))}).catch(e=>{console.error("Hero: Error fetching hero banner:",e),console.error("Hero: Error details:",{message:e.message,stack:e.stack})}),()=>{e=!1}},[]);const s=n.heroBannerImages&&n.heroBannerImages.length>0?n.heroBannerImages:[];(0,r.useEffect)(()=>{if(s.length<=1)return;const e=setInterval(()=>{t(e=>(e+1)%s.length)},5e3);return()=>clearInterval(e)},[s.length]);return(0,gi.jsxs)("section",{className:"hero",children:[(0,gi.jsx)("div",{className:"hero-bg-slider",children:s.length>0?s.map((t,n)=>(0,gi.jsx)("div",{className:"bg-slide ".concat(n===e?"active":""),style:{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},n)):(0,gi.jsx)("div",{className:"bg-slide active",style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),(0,gi.jsx)("div",{className:"hero-bg-overlay"}),(0,gi.jsx)("div",{className:"hero-container",children:(0,gi.jsxs)("div",{className:"hero-content",children:[(0,gi.jsx)("h1",{className:"hero-title",style:{color:n.textColor},children:n.mainHeading}),(n.descriptionLine1||n.descriptionLine2)&&(0,gi.jsxs)("p",{className:"hero-subtitle",style:{color:n.textColor},children:[n.descriptionLine1,n.descriptionLine2?" ".concat(n.descriptionLine2):""]}),(0,gi.jsxs)("div",{className:"hero-actions",style:{"--hero-button-bg":n.buttonBgColor||"#F0B21B","--hero-button-text":n.buttonTextColor||"#ffffff","--hero-button2-bg":n.button2BgColor||"#F0B21B","--hero-button2-text":n.button2TextColor||"#ffffff"},children:[(0,gi.jsx)(Re,{to:n.buttonLink||"/products",className:"btn",children:n.buttonText||"SHOP NOW"}),n.button2Text&&n.button2Link&&(0,gi.jsx)(Re,{to:n.button2Link,className:"btn btn-secondary",children:n.button2Text})]})]})}),s.length>1&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("button",{className:"slider-arrow slider-arrow-left",onClick:()=>{t(e=>(e-1+s.length)%s.length)},"aria-label":"Previous slide",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,gi.jsx)("button",{className:"slider-arrow slider-arrow-right",onClick:()=>{t(e=>(e+1)%s.length)},"aria-label":"Next slide",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s.length>1&&(0,gi.jsx)("div",{className:"slider-indicators",children:s.map((n,i)=>(0,gi.jsx)("button",{className:"indicator ".concat(i===e?"active":""),onClick:()=>(e=>{t(e)})(i),"aria-label":"Go to slide ".concat(i+1)},i))})]})},hc=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)("default");(0,r.useEffect)(()=>{d(),h()},[]),(0,r.useEffect)(()=>{const e=()=>{const e=document.body.className;e.includes("theme-christmas")?u("christmas"):e.includes("theme-dark")?u("dark"):u("default")};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const d=async()=>{try{const e="https://designxcellinv-production.up.railway.app",n=await fetch("".concat(e,"/api/products"));if(n.ok){const e=await n.json();if(e.success&&e.products){const n=e.products.filter(e=>e.featured).map(e=>Fe({id:e.id,name:e.name,description:e.description,price:e.price,image:e.images&&e.images.length>0?e.images[0]:null,hasDiscount:e.hasDiscount,discountInfo:e.discountInfo},e));if(n.length>0)t(n);else{const e=await tr();t(e.products||[])}}else{const e=await tr();t(e.products||[])}}else{const e=await tr();t(e.products||[])}}catch(RT){console.error("Error loading featured products:",RT);try{const e=await tr();t(e.products||[])}catch(e){console.error("Error loading mock products:",e),t([])}}finally{i(!1)}},h=async()=>{try{l(!0);const e=(await Qi.getCategoriesWithCounts()).map(e=>Fe(Fe({},e),{},{id:e.name.toLowerCase().replace(/\s+/g,"-"),icon:p(e.name)}));a(e)}catch(RT){console.error("Error loading categories:",RT),a(m())}finally{l(!1)}},p=e=>({Desk:(0,gi.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M3 10h18",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M8 21v-7",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M16 21v-7",stroke:"#F0B21B",strokeWidth:"2"})]}),Chair:(0,gi.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M5 12V7a7 7 0 0 1 14 0v5",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M22 19H2l2-7h16l2 7Z",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M6 19v2",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M18 19v2",stroke:"#F0B21B",strokeWidth:"2"})]}),Storage:(0,gi.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("polyline",{points:"14,2 14,8 20,8",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("polyline",{points:"10,9 9,9 8,9",stroke:"#F0B21B",strokeWidth:"2"})]}),Conference:(0,gi.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M3 21h18",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M5 21V7l8-4v18",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M19 21V11l-6-4",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M9 9v.01",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M9 12v.01",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M9 15v.01",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M9 18v.01",stroke:"#F0B21B",strokeWidth:"2"})]}),Accessories:(0,gi.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48",stroke:"#F0B21B",strokeWidth:"2"})})}[e]||(0,gi.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48",stroke:"#F0B21B",strokeWidth:"2"})})),m=()=>[{id:"desks",name:"Office Desks",count:12,icon:p("Desk"),categoryName:"Desk"},{id:"chairs",name:"Office Chairs",count:8,icon:p("Chair"),categoryName:"Chair"},{id:"storage",name:"Storage Solutions",count:15,icon:p("Storage"),categoryName:"Storage"},{id:"conference",name:"Conference Furniture",count:6,icon:p("Conference"),categoryName:"Conference"},{id:"accessories",name:"Office Accessories",count:20,icon:p("Accessories"),categoryName:"Accessories"}],[f,g]=(0,r.useState)([]),[v,x]=(0,r.useState)(0),[y,_]=(0,r.useState)({theme:"default",layout:"grid",perRow:"3",animation:"none",bgColor:"#ffffff",textColor:"#333333",accentColor:"#ffc107",borderRadius:"8",showRating:!0,showImage:!0,showTitle:!0,textAlign:"left"}),[b,w]=(0,r.useState)({mainHeading:"Premium Office Furniture Solutions",descriptionLine1:"Transform your workspace with our premium collection of office furniture",descriptionLine2:"Discover our premium collection of office furniture designed for modern professionals",buttonText:"SHOP NOW",buttonLink:"/products",textColor:"#ffffff",buttonBgColor:"#ffc107",buttonTextColor:"#333333",heroBannerImages:[]}),[A,S]=(0,r.useState)(0);(0,r.useEffect)(()=>{const e="https://designxcellinv-production.up.railway.app";fetch("".concat(e,"/api/testimonials")).then(e=>e.json()).then(e=>g(e.testimonials||[])).catch(()=>g([])),fetch("".concat(e,"/api/testimonials-design")).then(e=>e.json()).then(e=>{console.log("Testimonials design settings loaded:",e),_(e)}).catch(e=>{console.log("Using default testimonials design settings due to error:",e)}),fetch("".concat(e,"/api/hero-banner")).then(e=>e.json()).then(e=>{console.log("Hero banner settings loaded:",e),e.success&&e.heroBanner?w(e.heroBanner):console.log("Hero banner data format issue:",e)}).catch(e=>{console.log("Using default hero banner settings due to error:",e)})},[]),(0,r.useEffect)(()=>{if(b.heroBannerImages&&b.heroBannerImages.length>1){const e=setInterval(()=>{S(e=>(e+1)%b.heroBannerImages.length)},4e3);return()=>clearInterval(e)}},[b.heroBannerImages]);f[v];return n?(0,gi.jsx)("div",{className:"home",children:(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:"1rem"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading featured products..."})]})}):(0,gi.jsx)("div",{className:"home",children:(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("style",{children:'\n                    /* Testimonials Theme Styles */\n                    .testimonials-container {\n                        margin-top: 2rem;\n                    }\n                    \n                    /* Default Theme */\n                    .testimonial-item.testimonial-default {\n                        background: rgba(255, 255, 255, 0.9);\n                        padding: 20px;\n                        border: 1px solid #ddd;\n                        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                        text-align: center;\n                        backdrop-filter: blur(10px);\n                    }\n                    \n                    /* Modern Theme */\n                    .testimonial-item.testimonial-modern {\n                        background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 249, 250, 0.9) 100%);\n                        padding: 25px;\n                        border: none;\n                        box-shadow: 0 8px 25px rgba(0,0,0,0.1);\n                        text-align: center;\n                        transition: transform 0.3s ease;\n                        backdrop-filter: blur(10px);\n                    }\n                    \n                    .testimonial-item.testimonial-modern:hover {\n                        transform: translateY(-5px);\n                    }\n                    \n                    /* Minimal Theme */\n                    .testimonial-item.testimonial-minimal {\n                        background: transparent;\n                        padding: 20px;\n                        border-left: 3px solid;\n                        box-shadow: none;\n                        text-align: left;\n                    }\n                    \n                    /* Elegant Theme */\n                    .testimonial-item.testimonial-elegant {\n                        background: rgba(255, 255, 255, 0.9);\n                        padding: 30px;\n                        border: 1px solid #e0e0e0;\n                        box-shadow: 0 4px 20px rgba(0,0,0,0.08);\n                        text-align: left;\n                        position: relative;\n                        backdrop-filter: blur(10px);\n                    }\n                    \n                    .testimonial-item.testimonial-elegant {\n                        position: relative;\n                    }\n                    \n                    .elegant-quote-mark {\n                        z-index: 1;\n                    }\n                    \n                    /* Bold Theme */\n                    .testimonial-item.testimonial-bold {\n                        background: inherit;\n                        color: white;\n                        padding: 25px;\n                        border: none;\n                        box-shadow: 0 6px 20px rgba(0,0,0,0.2);\n                        text-align: center;\n                        transform: rotate(-1deg);\n                    }\n                    \n                    /* Animation Classes */\n                    .testimonials-container[style*="fade"] .testimonial-item {\n                        opacity: 0;\n                        animation: fadeIn 0.6s ease-out forwards;\n                    }\n                    \n                    .testimonials-container[style*="slide"] .testimonial-item {\n                        opacity: 0;\n                        transform: translateY(30px);\n                        animation: slideUp 0.6s ease-out forwards;\n                    }\n                    \n                    .testimonials-container[style*="bounce"] .testimonial-item {\n                        opacity: 0;\n                        animation: bounceIn 0.6s ease-out forwards;\n                    }\n                    \n                    .testimonials-container[style*="zoom"] .testimonial-item {\n                        opacity: 0;\n                        transform: scale(0.8);\n                        animation: zoomIn 0.6s ease-out forwards;\n                    }\n                    \n                    /* Animation Keyframes */\n                    @keyframes fadeIn {\n                        to { opacity: 1; }\n                    }\n                    \n                    @keyframes slideUp {\n                        to { \n                            opacity: 1; \n                            transform: translateY(0); \n                        }\n                    }\n                    \n                    @keyframes bounceIn {\n                        0% { opacity: 0; transform: scale(0.3); }\n                        50% { opacity: 1; transform: scale(1.05); }\n                        70% { transform: scale(0.9); }\n                        100% { opacity: 1; transform: scale(1); }\n                    }\n                    \n                    @keyframes zoomIn {\n                        to { \n                            opacity: 1; \n                            transform: scale(1); \n                        }\n                    }\n                    \n                    /* Testimonials Grid */\n                    .testimonials-grid {\n                        margin-top: 2rem;\n                    }\n                    \n                    .testimonial-item {\n                        margin-bottom: 1rem;\n                    }\n                    \n                    .testimonial-image {\n                        text-align: center;\n                        margin-bottom: 15px;\n                    }\n                    \n                    .testimonial-text {\n                        margin-bottom: 15px;\n                        font-style: italic;\n                        line-height: 1.6;\n                    }\n                    \n                    .testimonial-author {\n                        text-align: center;\n                        margin-bottom: 15px;\n                    }\n                    \n                    .testimonial-author h4 {\n                        margin: 0 0 5px 0;\n                        font-size: 18px;\n                    }\n                    \n                    .testimonial-author p {\n                        margin: 0;\n                        color: #666;\n                        font-size: 14px;\n                    }\n                    \n                    .testimonial-stars {\n                        text-align: center;\n                        font-size: 18px;\n                    }\n                    \n                    .star {\n                        margin: 0 2px;\n                    }\n                    \n                    /* Hero Carousel Styles */\n                    .hero {\n                        position: relative;\n                        overflow: hidden;\n                    }\n                    \n                    .hero-navigation {\n                        position: absolute;\n                        top: 50%;\n                        transform: translateY(-50%);\n                        width: 100%;\n                        display: flex;\n                        justify-content: space-between;\n                        padding: 0 20px;\n                        z-index: 10;\n                    }\n                    \n                    .nav-arrow {\n                        background: rgba(0, 0, 0, 0.5);\n                        color: white;\n                        border: none;\n                        border-radius: 50%;\n                        width: 50px;\n                        height: 50px;\n                        font-size: 24px;\n                        cursor: pointer;\n                        transition: all 0.3s ease;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                    }\n                    \n                    .nav-arrow:hover {\n                        background: rgba(0, 0, 0, 0.8);\n                        transform: scale(1.1);\n                    }\n                    \n                    .hero-indicators {\n                        position: absolute;\n                        bottom: 20px;\n                        left: 50%;\n                        transform: translateX(-50%);\n                        display: flex;\n                        gap: 10px;\n                        z-index: 10;\n                    }\n                    \n                    .indicator {\n                        width: 12px;\n                        height: 12px;\n                        border-radius: 50%;\n                        background: rgba(255, 255, 255, 0.5);\n                        transition: all 0.3s ease;\n                    }\n                    \n                    .indicator.active {\n                        background: rgba(255, 255, 255, 0.9);\n                        transform: scale(1.2);\n                    }\n                    \n                    .indicator:hover {\n                        background: rgba(255, 255, 255, 0.8);\n                    }\n                    \n                    /* Responsive Design */\n                    @media (max-width: 768px) {\n                        .testimonials-grid {\n                            grid-template-columns: 1fr !important;\n                        }\n                        \n                        .nav-arrow {\n                            width: 40px;\n                            height: 40px;\n                            font-size: 20px;\n                        }\n                    }\n                    \n                    @media (max-width: 1024px) {\n                        .testimonials-grid {\n                            grid-template-columns: repeat(2, 1fr) !important;\n                        }\n                    }\n                '}),(0,gi.jsx)("div",{className:"home",children:(0,gi.jsxs)("div",{className:"home-main-content",children:[(0,gi.jsx)(dc,{}),(0,gi.jsx)("section",{className:"featured-categories",children:(0,gi.jsxs)("div",{className:"container",children:["christmas"===c&&(0,gi.jsx)(Nr,{}),(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)("h2",{children:"Featured Categories"}),(0,gi.jsx)(Re,{to:"/products",className:"view-all",children:"View All Categories \u2192"})]}),o?(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",gap:"1rem"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:60,width:60}),(0,gi.jsx)("p",{children:"Loading categories..."})]}):(0,gi.jsxs)(gi.Fragment,{children:[s.length<6?(0,gi.jsx)("div",{className:"categories-grid desktop-only",children:s.map((e,t)=>(0,gi.jsxs)(Re,{to:"/products?category=".concat(encodeURIComponent(e.categoryName)),className:"category-card",children:[(0,gi.jsx)("div",{className:"category-icon",children:e.icon}),(0,gi.jsx)("h3",{children:e.name}),(0,gi.jsxs)("p",{children:[e.count," Products"]})]},t))}):(0,gi.jsx)(Ml,{itemsPerView:4,showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:4e3,className:"categories-slider desktop-only",children:s.map((e,t)=>(0,gi.jsxs)(Re,{to:"/products?category=".concat(encodeURIComponent(e.categoryName)),className:"category-card",children:[(0,gi.jsx)("div",{className:"category-icon",children:e.icon}),(0,gi.jsx)("h3",{children:e.name}),(0,gi.jsxs)("p",{children:[e.count," Products"]})]},t))}),(0,gi.jsx)(Ml,{itemsPerView:4,showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:4e3,className:"categories-slider mobile-only",children:s.map((e,t)=>(0,gi.jsxs)(Re,{to:"/products?category=".concat(encodeURIComponent(e.categoryName)),className:"category-card",children:[(0,gi.jsx)("div",{className:"category-icon",children:e.icon}),(0,gi.jsx)("h3",{children:e.name}),(0,gi.jsxs)("p",{children:[e.count," Products"]})]},t))})]})]})}),(0,gi.jsx)("section",{className:"featured-products",children:(0,gi.jsxs)("div",{className:"container",children:["christmas"===c&&(0,gi.jsx)(Nr,{}),(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)("h2",{children:"Featured Products"}),(0,gi.jsx)(Re,{to:"/products",className:"view-all",children:"View All Products \u2192"})]}),(0,gi.jsxs)(gi.Fragment,{children:[e.length<6?(0,gi.jsx)("div",{className:"products-grid desktop-only",children:e.map(e=>(0,gi.jsx)(uc,{product:e},e.id))}):(0,gi.jsx)(Ml,{itemsPerView:4,showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:5e3,className:"products-slider desktop-only",children:e.map(e=>(0,gi.jsx)(uc,{product:e},e.id))}),(0,gi.jsx)(Ml,{itemsPerView:4,showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:5e3,className:"products-slider mobile-only",children:e.map(e=>(0,gi.jsx)(uc,{product:e},e.id))})]})]})}),(0,gi.jsx)(Pl,{designSettings:y}),(0,gi.jsx)(El,{}),"christmas"===c&&(0,gi.jsx)(Rr,{})]})})]})})},pc=e=>{let{title:t,subtitle:n,breadcrumbs:i=[],backgroundImage:r=null,showBackButton:s=!1,onBackClick:a=null}=e;return(0,gi.jsxs)("div",{className:"page-header",children:[r&&(0,gi.jsx)("div",{className:"header-background",style:{backgroundImage:"url(".concat(r,")")}}),(0,gi.jsx)("div",{className:"header-content",children:(0,gi.jsxs)("div",{className:"page-header-content",children:[s&&(0,gi.jsx)("button",{className:"back-button",onClick:a,"aria-label":"Go back",children:"\u2190 Back"}),i.length>0&&(0,gi.jsx)("nav",{className:"page-breadcrumb","aria-label":"Breadcrumb",children:(0,gi.jsx)("ol",{className:"breadcrumb-list",children:i.map((e,t)=>(0,gi.jsxs)("li",{className:"breadcrumb-item",children:[e.href?(0,gi.jsx)(Re,{to:e.href,className:"breadcrumb-link",children:e.label}):(0,gi.jsx)("span",{className:"breadcrumb-current",children:e.label}),t<i.length-1&&(0,gi.jsx)("span",{className:"breadcrumb-separator",children:"/"})]},t))})}),(0,gi.jsxs)("div",{className:"header-text",children:[(0,gi.jsx)("h1",{className:"page-title",children:t}),n&&(0,gi.jsx)("p",{className:"page-subtitle",children:n})]})]})})]})},mc=()=>{const[e,t]=(0,r.useState)({StoryTitle:"Our Story",StorySubtitle:"Crafting Excellence Since 2000",StoryDescription:"What began as a small workshop has grown into a leading provider of premium office furniture solutions. Our commitment to quality, innovation and customer satisfaction has been our guiding principle.",ProjectsCount:"2000+",ClientsCount:"500+",StoryImageUrl:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=600&h=400&fit=crop",MissionTitle:"Our Mission",MissionDescription:"We strive to transform workspaces into inspiring environments where creativity flourishes and productivity soars. Through innovative design and unwavering attention to detail, we create furniture solutions that perfectly balance form and function.",Feature1:"Premium Materials",Feature2:"Ergonomic Design",Feature3:"Sustainable Practices",MissionImageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=600&h=400&fit=crop",ValuesTitle:"Our Values",Value1Title:"Innovation",Value1Description:"Pushing boundaries in design and functionality",Value2Title:"Quality",Value2Description:"Uncompromising commitment to excellence",Value3Title:"Service",Value3Description:"Dedicated to exceeding expectations",Value4Title:"Sustainability",Value4Description:"Committed to environmental responsibility",PhilosophyTitle:"Design Philosophy",PhilosophySubtitle:"Every element of our brand reflects our commitment to clean, modern design",PhilosophyDescription:"Our design language embraces simplicity and clarity. We use clean, modern typography that enhances readability and creates a professional, approachable aesthetic. Every font choice is carefully considered to reflect our values of innovation and quality.",Typo1Title:"Clean & Modern",Typo1Description:"Sans-serif fonts that provide excellent readability across all devices",Typo2Title:"Consistent Hierarchy",Typo2Description:"Well-defined text sizes and weights that guide user attention",Typo3Title:"Accessible Design",Typo3Description:"High contrast ratios and legible font sizes for all users"});(0,r.useEffect)(()=>{(async()=>{try{const e="https://designxcellinv-production.up.railway.app",n=await fetch("".concat(e,"/api/about"));if(n.ok){const e=await n.json();e.success&&e.content&&t({StoryTitle:e.content.ourStoryTitle||"Our Story",StorySubtitle:e.content.storySubtitle||"Crafting Excellence Since 2000",StoryDescription:e.content.ourStoryContent||"What began as a small workshop has grown into a leading provider of premium office furniture solutions. Our commitment to quality, innovation and customer satisfaction has been our guiding principle.",ProjectsCount:e.content.projectsCount||"2000+",ClientsCount:e.content.clientsCount||"500+",StoryImageUrl:e.content.storyImageUrl||"https://images.unsplash.com/photo-1497366216548-37526070297c?w=600&h=400&fit=crop",MissionTitle:e.content.missionTitle||"Our Mission",MissionDescription:e.content.missionContent||"We strive to transform workspaces into inspiring environments where creativity flourishes and productivity soars. Through innovative design and unwavering attention to detail, we create furniture solutions that perfectly balance form and function.",Feature1:e.content.feature1||"Premium Materials",Feature2:e.content.feature2||"Ergonomic Design",Feature3:e.content.feature3||"Sustainable Practices",MissionImageUrl:e.content.missionImageUrl||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=600&h=400&fit=crop",ValuesTitle:e.content.visionTitle||"Our Values",Value1Title:e.content.value1Title||"Innovation",Value1Description:e.content.value1Description||"Pushing boundaries in design and functionality",Value2Title:e.content.value2Title||"Quality",Value2Description:e.content.value2Description||"Uncompromising commitment to excellence",Value3Title:e.content.value3Title||"Service",Value3Description:e.content.value3Description||"Dedicated to exceeding expectations",Value4Title:e.content.value4Title||"Sustainability",Value4Description:e.content.value4Description||"Committed to environmental responsibility",PhilosophyTitle:e.content.philosophyTitle||"Design Philosophy",PhilosophySubtitle:e.content.philosophySubtitle||"Every element of our brand reflects our commitment to clean, modern design",PhilosophyDescription:e.content.philosophyDescription||"Our design language embraces simplicity and clarity. We use clean, modern typography that enhances readability and creates a professional, approachable aesthetic. Every font choice is carefully considered to reflect our values of innovation and quality.",Typo1Title:e.content.typo1Title||"Clean & Modern",Typo1Description:e.content.typo1Description||"Sans-serif fonts that provide excellent readability across all devices",Typo2Title:e.content.typo2Title||"Consistent Hierarchy",Typo2Description:e.content.typo2Description||"Well-defined text sizes and weights that guide user attention",Typo3Title:e.content.typo3Title||"Accessible Design",Typo3Description:e.content.typo3Description||"High contrast ratios and legible font sizes for all users",Layout:e.content.layout||"default"})}}catch(RT){}})()},[]);return(0,gi.jsx)("div",{className:"about-page",children:(0,gi.jsxs)("div",{className:"container",children:[(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"About Us"}],title:"About Us",subtitle:"Learn more about our story, mission, and values"}),"minimal"===e.Layout?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("section",{style:{padding:"12px 0"},children:[(0,gi.jsx)("h1",{style:{marginBottom:8},children:e.StoryTitle}),(0,gi.jsx)("h3",{style:{marginTop:0,color:"#666"},children:e.StorySubtitle}),(0,gi.jsx)("p",{children:e.StoryDescription}),(0,gi.jsxs)("div",{style:{display:"flex",gap:24,marginTop:12},children:[(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:e.ProjectsCount})," Projects"]}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:e.ClientsCount})," Clients"]})]}),e.StoryImageUrl&&(0,gi.jsx)("img",{src:e.StoryImageUrl,alt:"Story",style:{marginTop:16,maxWidth:"100%",borderRadius:8}})]}),(0,gi.jsx)("hr",{}),(0,gi.jsxs)("section",{style:{padding:"12px 0"},children:[(0,gi.jsx)("h2",{style:{marginBottom:8},children:e.MissionTitle}),(0,gi.jsx)("p",{children:e.MissionDescription}),(0,gi.jsxs)("ul",{style:{marginTop:12},children:[e.Feature1&&(0,gi.jsx)("li",{children:e.Feature1}),e.Feature2&&(0,gi.jsx)("li",{children:e.Feature2}),e.Feature3&&(0,gi.jsx)("li",{children:e.Feature3})]}),e.MissionImageUrl&&(0,gi.jsx)("img",{src:e.MissionImageUrl,alt:"Mission",style:{marginTop:16,maxWidth:"100%",borderRadius:8}})]}),(0,gi.jsx)("hr",{}),(0,gi.jsxs)("section",{style:{padding:"12px 0"},children:[(0,gi.jsx)("h2",{style:{marginBottom:8},children:e.ValuesTitle}),(0,gi.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16},children:[(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Value1Title}),(0,gi.jsx)("p",{children:e.Value1Description})]}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Value2Title}),(0,gi.jsx)("p",{children:e.Value2Description})]}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Value3Title}),(0,gi.jsx)("p",{children:e.Value3Description})]}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Value4Title}),(0,gi.jsx)("p",{children:e.Value4Description})]})]})]}),(0,gi.jsx)("hr",{}),(0,gi.jsxs)("section",{style:{padding:"12px 0"},children:[(0,gi.jsx)("h2",{style:{marginBottom:8},children:e.PhilosophyTitle}),e.PhilosophySubtitle&&(0,gi.jsx)("p",{style:{color:"#666"},children:e.PhilosophySubtitle}),(0,gi.jsx)("p",{children:e.PhilosophyDescription}),(0,gi.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:12},children:[(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Typo1Title}),(0,gi.jsx)("p",{children:e.Typo1Description})]}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Typo2Title}),(0,gi.jsx)("p",{children:e.Typo2Description})]}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:e.Typo3Title}),(0,gi.jsx)("p",{children:e.Typo3Description})]})]})]})]}):(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("section",{className:"our-story-section",children:[(0,gi.jsxs)("div",{className:"story-header",children:[(0,gi.jsx)("h1",{children:e.StoryTitle}),(0,gi.jsx)("p",{children:"For over two decades, we've been crafting exceptional office environments that inspire creativity, enhance productivity, and elevate the modern workplace experience."})]}),(0,gi.jsxs)("div",{className:"story-content",children:[(0,gi.jsxs)("div",{className:"story-left",children:[(0,gi.jsx)("h2",{children:e.StorySubtitle}),(0,gi.jsx)("p",{children:e.StoryDescription}),(0,gi.jsxs)("div",{className:"stats-grid",children:[(0,gi.jsxs)("div",{className:"stat-item",children:[(0,gi.jsx)("h3",{children:e.ProjectsCount}),(0,gi.jsx)("p",{children:"Projects Completed"})]}),(0,gi.jsxs)("div",{className:"stat-item",children:[(0,gi.jsx)("h3",{children:e.ClientsCount}),(0,gi.jsx)("p",{children:"Happy Clients"})]})]})]}),(0,gi.jsx)("div",{className:"story-right",children:(0,gi.jsx)("div",{className:"story-image",children:(0,gi.jsx)("img",{src:e.StoryImageUrl||"https://images.unsplash.com/photo-1497366216548-37526070297c?w=600&h=400&fit=crop",alt:"Modern office workspace"})})})]})]}),(0,gi.jsx)("section",{className:"our-mission-section",children:(0,gi.jsxs)("div",{className:"mission-content",children:[(0,gi.jsx)("div",{className:"mission-left",children:(0,gi.jsx)("div",{className:"mission-image",children:(0,gi.jsx)("img",{src:e.MissionImageUrl||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=600&h=400&fit=crop",alt:"Office design consultation"})})}),(0,gi.jsxs)("div",{className:"mission-right",children:[(0,gi.jsx)("h2",{children:e.MissionTitle}),(0,gi.jsx)("p",{children:e.MissionDescription}),(0,gi.jsxs)("div",{className:"mission-features",children:[(0,gi.jsxs)("div",{className:"feature-item",children:[(0,gi.jsx)("div",{className:"feature-icon",children:"\u2713"}),(0,gi.jsx)("span",{children:e.Feature1})]}),(0,gi.jsxs)("div",{className:"feature-item",children:[(0,gi.jsx)("div",{className:"feature-icon",children:"\u2713"}),(0,gi.jsx)("span",{children:e.Feature2})]}),(0,gi.jsxs)("div",{className:"feature-item",children:[(0,gi.jsx)("div",{className:"feature-icon",children:"\u2713"}),(0,gi.jsx)("span",{children:e.Feature3})]})]})]})]})}),(0,gi.jsxs)("section",{className:"our-values-section",children:[(0,gi.jsx)("div",{className:"values-header",children:(0,gi.jsx)("h2",{children:e.ValuesTitle})}),(0,gi.jsxs)("div",{className:"values-grid",children:[(0,gi.jsxs)("div",{className:"value-card",children:[(0,gi.jsx)("div",{className:"value-icon innovation",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"#F0B21B"})})}),(0,gi.jsx)("h3",{children:e.Value1Title}),(0,gi.jsx)("p",{children:e.Value1Description})]}),(0,gi.jsxs)("div",{className:"value-card",children:[(0,gi.jsx)("div",{className:"value-icon quality",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"#F0B21B"}),(0,gi.jsx)("path",{d:"M9 12L11 14L15 10",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsx)("h3",{children:e.Value2Title}),(0,gi.jsx)("p",{children:e.Value2Description})]}),(0,gi.jsxs)("div",{className:"value-card",children:[(0,gi.jsx)("div",{className:"value-icon service",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#F0B21B"}),(0,gi.jsx)("path",{d:"M8 14S9.5 16 12 16S16 14 16 14",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("circle",{cx:"9",cy:"9",r:"1",fill:"white"}),(0,gi.jsx)("circle",{cx:"15",cy:"9",r:"1",fill:"white"})]})}),(0,gi.jsx)("h3",{children:e.Value3Title}),(0,gi.jsx)("p",{children:e.Value3Description})]}),(0,gi.jsxs)("div",{className:"value-card",children:[(0,gi.jsx)("div",{className:"value-icon sustainability",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17L10.5 10.84L6.83 7.17L2 12L3.41 13.41L6.83 10L10.5 13.67L16.17 8L18.83 10.67L17 12.5L19 14.5L21 9Z",fill:"#F0B21B"})})}),(0,gi.jsx)("h3",{children:e.Value4Title}),(0,gi.jsx)("p",{children:e.Value4Description})]})]})]}),(0,gi.jsxs)("section",{className:"design-philosophy-section",children:[(0,gi.jsxs)("div",{className:"philosophy-header",children:[(0,gi.jsx)("h2",{children:e.PhilosophyTitle}),(0,gi.jsx)("p",{children:e.PhilosophySubtitle})]}),(0,gi.jsxs)("div",{className:"philosophy-content",children:[(0,gi.jsxs)("div",{className:"philosophy-left",children:[(0,gi.jsx)("h3",{children:"Typography & Visual Identity"}),(0,gi.jsx)("p",{children:e.PhilosophyDescription}),(0,gi.jsxs)("div",{className:"typography-features",children:[(0,gi.jsxs)("div",{className:"typo-feature",children:[(0,gi.jsx)("h4",{children:e.Typo1Title}),(0,gi.jsx)("p",{children:e.Typo1Description})]}),(0,gi.jsxs)("div",{className:"typo-feature",children:[(0,gi.jsx)("h4",{children:e.Typo2Title}),(0,gi.jsx)("p",{children:e.Typo2Description})]}),(0,gi.jsxs)("div",{className:"typo-feature",children:[(0,gi.jsx)("h4",{children:e.Typo3Title}),(0,gi.jsx)("p",{children:e.Typo3Description})]})]})]}),(0,gi.jsx)("div",{className:"philosophy-right",children:(0,gi.jsxs)("div",{className:"font-showcase",children:[(0,gi.jsxs)("div",{className:"font-example",children:[(0,gi.jsx)("h1",{className:"font-display",children:"Office Excellence"}),(0,gi.jsx)("p",{className:"font-label",children:"Primary Heading - Bold, Impactful"})]}),(0,gi.jsxs)("div",{className:"font-example",children:[(0,gi.jsx)("h3",{className:"font-subtitle",children:"Modern Workspace Solutions"}),(0,gi.jsx)("p",{className:"font-label",children:"Subtitle - Clean, Professional"})]}),(0,gi.jsxs)("div",{className:"font-example",children:[(0,gi.jsx)("p",{className:"font-body",children:"Our carefully selected typography creates a harmonious reading experience that reflects our commitment to quality and attention to detail."}),(0,gi.jsx)("p",{className:"font-label",children:"Body Text - Readable, Elegant"})]})]})})]})]})]})]})})},fc=()=>{var e;const[t,n]=(0,r.useState)(null),[i,s]=(0,r.useState)(9),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(0),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{c(!0);const e=await Ki.getProjects();if(e.success&&e.data){const t=e.data.map(e=>({id:e.id,src:e.mainImageUrl,category:e.category,title:e.title,description:e.description,tags:e.tags||[],thumbnailUrls:e.thumbnailUrls||[]}));o(t)}else d("Failed to load project data")}catch(e){console.error("Project fetch error:",e),d("Error loading project data")}finally{c(!1)}})()},[]);const f=a.slice(0,i);(0,r.useEffect)(()=>{var e;const t=new IntersectionObserver(e=>e.forEach(e=>e.isIntersecting&&e.target.classList.add("animate-in")),{threshold:.1}),n=null===(e=m.current)||void 0===e?void 0:e.querySelectorAll(".project-card");return null===n||void 0===n||n.forEach(e=>t.observe(e)),()=>t.disconnect()},[f]);const g=()=>{n(null),document.body.style.overflow="unset"},v=e=>{if(null===e||void 0===e||e.stopPropagation(),null!==t){const e=a[t],i=(null===e||void 0===e?void 0:e.thumbnailUrls)||[],r=[null===e||void 0===e?void 0:e.src,...i].filter(Boolean);r.length>1?p(e=>(e-1+r.length)%r.length):(n(e=>(e-1+a.length)%a.length),p(0))}},x=e=>{if(null===e||void 0===e||e.stopPropagation(),null!==t){const e=a[t],i=(null===e||void 0===e?void 0:e.thumbnailUrls)||[],r=[null===e||void 0===e?void 0:e.src,...i].filter(Boolean);r.length>1?p(e=>(e+1)%r.length):(n(e=>(e+1)%a.length),p(0))}};return(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&g(),"ArrowLeft"===e.key&&v(),"ArrowRight"===e.key&&x()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a.length]),(0,gi.jsxs)("div",{className:"projects-page",children:[(0,gi.jsxs)("div",{className:"container",children:[(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"Projects"}],title:"Our Projects",subtitle:"Showcasing our accomplished office furniture solutions and successful installations"}),l&&(0,gi.jsx)("div",{className:"loading-state",children:(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading our amazing projects..."})]})}),u&&(0,gi.jsx)("div",{className:"error-state",children:(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[(0,gi.jsx)("div",{style:{fontSize:"2rem"},children:"\u26a0\ufe0f"}),(0,gi.jsx)("p",{children:"Oops! We couldn't load the projects right now."}),(0,gi.jsx)("button",{onClick:()=>window.location.reload(),style:{background:"#F0B21B",color:"#333",border:"none",padding:"0.75rem 1.5rem",borderRadius:"20px",cursor:"pointer",fontWeight:"600"},children:"Try Again"})]})}),!l&&!u&&(0,gi.jsx)("div",{className:"projects-grid",ref:m,children:f.map((e,t)=>{var i,r;return(0,gi.jsxs)("article",{className:"project-card",onClick:()=>(n(t),p(0),void(document.body.style.overflow="hidden")),children:[(0,gi.jsxs)("div",{className:"card-image-container",children:[(0,gi.jsx)("img",{src:Sr(e.src),alt:e.title,loading:"lazy"}),(0,gi.jsx)("div",{className:"card-overlay",children:(0,gi.jsx)("div",{className:"overlay-content",children:(0,gi.jsx)("span",{className:"view-details",children:"View Project"})})})]}),(0,gi.jsxs)("div",{className:"card-content",children:[(0,gi.jsx)("h3",{className:"card-title",children:e.title}),(0,gi.jsxs)("p",{className:"card-description",children:[null===(i=e.description)||void 0===i?void 0:i.substring(0,120),"..."]}),(0,gi.jsx)("div",{className:"card-tags",children:null===(r=e.tags)||void 0===r?void 0:r.slice(0,3).map(e=>(0,gi.jsx)("span",{className:"tag",children:e},e))})]})]},e.id)})}),!l&&!u&&i<a.length&&(0,gi.jsx)("div",{className:"load-more-wrap",children:(0,gi.jsx)("button",{className:"btn",onClick:()=>s(e=>e+9),children:"Load More Projects"})})]}),null!==t&&(0,gi.jsx)("div",{className:"modal-overlay",onClick:g,children:(0,gi.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,gi.jsx)("button",{className:"modal-close",onClick:g,children:"\xd7"}),(0,gi.jsx)("button",{className:"nav prev",onClick:v,"aria-label":"Previous",children:"\u2039"}),(0,gi.jsx)("button",{className:"nav next",onClick:x,"aria-label":"Next",children:"\u203a"}),(0,gi.jsxs)("div",{className:"modal-body mock-layout",children:[(0,gi.jsx)("figure",{className:"mock-visual-large",children:(()=>{const e=a[t],n=(null===e||void 0===e?void 0:e.thumbnailUrls)||[],i=[null===e||void 0===e?void 0:e.src,...n].filter(Boolean),r=i[h]||(null===e||void 0===e?void 0:e.src);return(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("img",{src:Sr(r),alt:null===e||void 0===e?void 0:e.title,style:{transition:"opacity 0.3s ease"}}),i.length>1&&(0,gi.jsxs)("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",background:"rgba(0,0,0,0.7)",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.9rem",fontWeight:"500"},children:[h+1," / ",i.length]})]})})()}),(0,gi.jsx)("div",{className:"mock-thumb-row",children:(()=>{const e=a[t],n=(null===e||void 0===e?void 0:e.thumbnailUrls)||[],i=[null===e||void 0===e?void 0:e.src,...n].filter(Boolean);return i.slice(0,6).map((e,t)=>(0,gi.jsxs)("button",{className:"mini-thumb ".concat(t===h?"active":""),onClick:e=>{e.stopPropagation(),p(t)},"aria-label":"View image ".concat(t+1," of ").concat(i.length),title:"View image ".concat(t+1," of ").concat(i.length),children:[(0,gi.jsx)("img",{src:Sr(e),alt:"Thumbnail ".concat(t+1)}),t===h&&(0,gi.jsx)("div",{style:{position:"absolute",top:"4px",right:"4px",background:"#F0B21B",color:"#333",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:t+1})]},t))})()}),(0,gi.jsxs)("div",{className:"mock-details",children:[(0,gi.jsx)("h1",{className:"detail-heading centered",children:a[t].title}),(0,gi.jsx)("div",{className:"detail-tags centered",children:null===(e=a[t].tags)||void 0===e?void 0:e.map(e=>(0,gi.jsx)("span",{className:"tag",children:e},e))}),a[t].description&&(0,gi.jsx)("p",{className:"detail-description centered-text",children:a[t].description}),(0,gi.jsx)("div",{className:"detail-actions centered",children:(0,gi.jsx)(Re,{to:"/products",className:"btn",onClick:g,children:"View Our Products"})})]})]})]})})]})},gc=()=>(0,gi.jsx)("div",{className:"contact-page",children:(0,gi.jsx)(El,{})}),vc=e=>{const t=[],n=[];e.length<8?t.push("Password must be at least 8 characters long"):e.length>16&&t.push("Password must not exceed 16 characters"),/[A-Z]/.test(e)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||t.push("Password must contain at least one lowercase letter"),/\d/.test(e)||t.push("Password must contain at least one number"),/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(e)||t.push("Password must contain at least one special character"),/(.)\1{2,}/.test(e)&&t.push("Password cannot contain 3 or more repeated characters");["123456","password","qwerty","Pa$$word1","admin","letmein","welcome","monkey","dragon","master","football","baseball","superman","trustno1","hello123","password123","admin123","qwerty123","123456789","12345678","1234567","1234567890","abc123","password1","admin1","qwerty1"].includes(e.toLowerCase())&&t.push("This password is too common and easily guessable"),e.length>=8&&e.length<=16&&(/abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz/i.test(e)&&n.push("Avoid sequential characters (e.g., abc, 123)"),/qwerty|asdfgh|zxcvbn|123456|654321/i.test(e)&&n.push("Avoid keyboard patterns"),/\b\d{4}\b/.test(e)&&e.length<=10&&n.push("Avoid using years or PINs as part of your password"));let i=0;e.length>=8&&i++,/[A-Z]/.test(e)&&i++,/[a-z]/.test(e)&&i++,/\d/.test(e)&&i++,/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(e)&&i++,e.length>=12&&i++;let r="";return r=i<=2?"Very Weak":i<=3?"Weak":i<=4?"Fair":i<=5?"Good":"Strong",{isValid:0===t.length,errors:t,warnings:n,strength:i,strengthLabel:r}},xc=e=>{let{password:t,showRequirements:n=!0}=e;if(!t)return null;const i=vc(t),r=(e=>[{text:"8-16 characters long",met:e.length>=8&&e.length<=16,icon:e.length>=8&&e.length<=16?"\u2713":"\u2717"},{text:"At least one uppercase letter",met:/[A-Z]/.test(e),icon:/[A-Z]/.test(e)?"\u2713":"\u2717"},{text:"At least one lowercase letter",met:/[a-z]/.test(e),icon:/[a-z]/.test(e)?"\u2713":"\u2717"},{text:"At least one number",met:/\d/.test(e),icon:/\d/.test(e)?"\u2713":"\u2717"},{text:"At least one special character",met:/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(e),icon:/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(e)?"\u2713":"\u2717"},{text:"No 3+ repeated characters",met:!/(.)\1{2,}/.test(e),icon:/(.)\1{2,}/.test(e)?"\u2717":"\u2713"}])(t),s=(a=i.strength)<=2?"#e74c3c":a<=3?"#f39c12":a<=4?"#f1c40f":a<=5?"#27ae60":"#2ecc71";var a;return(0,gi.jsxs)("div",{className:"password-strength-indicator",children:[(0,gi.jsxs)("div",{className:"strength-meter-container",children:[(0,gi.jsxs)("div",{className:"strength-label",children:[(0,gi.jsx)("span",{children:"Password Strength:"}),(0,gi.jsx)("span",{className:"strength-text",style:{color:s},children:i.strengthLabel})]}),(0,gi.jsx)("div",{className:"strength-bars",children:[1,2,3,4,5,6].map(e=>(0,gi.jsx)("div",{className:"strength-bar ".concat(e<=i.strength?"filled":""),style:{backgroundColor:e<=i.strength?s:"#e0e0e0"}},e))})]}),n&&(0,gi.jsxs)("div",{className:"password-requirements",children:[(0,gi.jsx)("h4",{children:"Password Requirements:"}),(0,gi.jsx)("div",{className:"requirements-list",children:r.map((e,t)=>(0,gi.jsxs)("div",{className:"requirement-item ".concat(e.met?"met":"not-met"),children:[(0,gi.jsx)("span",{className:"requirement-icon",children:e.icon}),(0,gi.jsx)("span",{className:"requirement-text",children:e.text})]},t))})]}),i.errors.length>0&&(0,gi.jsx)("div",{className:"password-errors",children:i.errors.map((e,t)=>(0,gi.jsxs)("div",{className:"error-item",children:[(0,gi.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,gi.jsx)("span",{className:"error-text",children:e})]},t))}),i.warnings.length>0&&(0,gi.jsx)("div",{className:"password-warnings",children:i.warnings.map((e,t)=>(0,gi.jsxs)("div",{className:"warning-item",children:[(0,gi.jsx)("span",{className:"warning-icon",children:"\ud83d\udca1"}),(0,gi.jsx)("span",{className:"warning-text",children:e})]},t))}),(0,gi.jsxs)("div",{className:"password-tips",children:[(0,gi.jsx)("h5",{children:"\ud83d\udca1 Password Tips:"}),(0,gi.jsxs)("ul",{children:[(0,gi.jsx)("li",{children:"Use a mix of letters, numbers, and symbols"}),(0,gi.jsx)("li",{children:"Avoid personal information like names or birthdays"}),(0,gi.jsx)("li",{children:"Don't reuse passwords from other accounts"}),(0,gi.jsx)("li",{children:"Consider using a passphrase with random words"})]})]})]})},yc=e=>{let{onCaptchaVerified:t,isVerified:n,onReset:i}=e;const[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(0),[p,m]=(0,r.useState)(0),[f,g]=(0,r.useState)("+");(0,r.useEffect)(()=>{v()},[]);const v=()=>{const e=["+","-","\xd7"],t=e[Math.floor(Math.random()*e.length)];let n,r,s;switch(t){case"+":default:n=Math.floor(20*Math.random())+1,r=Math.floor(20*Math.random())+1,s=n+r;break;case"-":n=Math.floor(20*Math.random())+10,r=Math.floor(Math.random()*n)+1,s=n-r;break;case"\xd7":n=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1,s=n*r}h(n),m(r),g(t),a(s.toString()),l(""),u(""),i&&i()},x=()=>{""!==o.trim()?parseInt(o)===parseInt(s)?(u(""),t&&t()):(u("Incorrect answer. Please try again."),l("")):u("Please enter the answer")};return(0,gi.jsxs)("div",{className:"captcha-container",children:[(0,gi.jsxs)("div",{className:"captcha-header",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"#F0B21B",strokeWidth:"1.5"})]}),(0,gi.jsx)("span",{children:"Security Verification"})]}),(0,gi.jsxs)("div",{className:"captcha-challenge",children:[(0,gi.jsxs)("div",{className:"captcha-question",children:[(0,gi.jsx)("span",{className:"captcha-number",children:d}),(0,gi.jsx)("span",{className:"captcha-operator",children:f}),(0,gi.jsx)("span",{className:"captcha-number",children:p}),(0,gi.jsx)("span",{className:"captcha-equals",children:"="}),(0,gi.jsx)("input",{type:"text",className:"captcha-input",placeholder:"?",value:o,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");l(t),c&&u("")},onKeyPress:e=>{"Enter"===e.key&&x()},maxLength:"3",disabled:n})]}),c&&(0,gi.jsxs)("div",{className:"captcha-error",children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#e74c3c",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#e74c3c",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:c})]}),(0,gi.jsx)("div",{className:"captcha-actions",children:n?(0,gi.jsxs)("div",{className:"captcha-success",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"#27ae60",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"#27ae60",strokeWidth:"1.5"})]}),(0,gi.jsx)("span",{children:"Verification Complete"})]}):(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("button",{type:"button",className:"captcha-verify-btn",onClick:x,disabled:!o.trim(),children:"Verify"}),(0,gi.jsxs)("button",{type:"button",className:"captcha-refresh-btn",onClick:v,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M1 4v6h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M23 20v-6h-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"New Challenge"]})]})})]})]})},_c=e=>{let{isOpen:t,onClose:n,type:i="terms"}=e;const[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&c()},[t,i]);const c=async()=>{l(!0);try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/terms")),n=await t.json();n.success&&a(n.terms)}catch(RT){console.error("Error fetching terms:",RT),a({signupTermsTitle:"Terms and Conditions",signupTermsContent:"By using our service, you agree to our terms and conditions...",privacyPolicyTitle:"Privacy Policy",privacyPolicyContent:"We respect your privacy and are committed to protecting your personal information..."})}finally{l(!1)}},u=s?"terms"===i?{title:s.signupTermsTitle||"Terms and Conditions",content:s.signupTermsContent||"By using our service, you agree to our terms and conditions..."}:{title:s.privacyPolicyTitle||"Privacy Policy",content:s.privacyPolicyContent||"We respect your privacy and are committed to protecting your personal information..."}:null;return t?(0,gi.jsx)("div",{className:"terms-modal-overlay",onClick:n,children:(0,gi.jsxs)("div",{className:"terms-modal",onClick:e=>e.stopPropagation(),children:[(0,gi.jsxs)("div",{className:"terms-modal-header",children:[(0,gi.jsx)("h2",{className:"terms-modal-title",children:o?"Loading...":null===u||void 0===u?void 0:u.title}),(0,gi.jsx)("button",{className:"terms-modal-close",onClick:n,children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,gi.jsx)("div",{className:"terms-modal-content",children:o?(0,gi.jsxs)("div",{className:"terms-modal-loading",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading content..."})]}):(0,gi.jsx)("div",{className:"terms-modal-text",children:null!==u&&void 0!==u&&u.content?(0,gi.jsx)("div",{dangerouslySetInnerHTML:{__html:u.content.replace(/\n/g,"<br/>")}}):(0,gi.jsx)("p",{children:"Content not available at the moment."})})}),(0,gi.jsx)("div",{className:"terms-modal-footer",children:(0,gi.jsx)("button",{className:"terms-modal-btn terms-modal-btn-secondary",onClick:n,children:"Close"})})]})}):null},bc=e=>{let{isOpen:t,onClose:n,userData:i}=e;if(!t)return null;return(0,gi.jsx)("div",{className:"signup-success-overlay",onClick:n,children:(0,gi.jsxs)("div",{className:"signup-success-modal",onClick:e=>e.stopPropagation(),children:[(0,gi.jsxs)("div",{className:"signup-success-header",children:[(0,gi.jsx)("div",{className:"success-icon",children:(0,gi.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#10B981"}),(0,gi.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsx)("h2",{className:"signup-success-title",children:"Welcome to Design Excellence!"}),(0,gi.jsx)("p",{className:"signup-success-subtitle",children:"Your account has been created successfully"})]}),(0,gi.jsxs)("div",{className:"signup-success-content",children:[(0,gi.jsxs)("div",{className:"user-info",children:[(0,gi.jsx)("div",{className:"user-avatar",children:(0,gi.jsx)("span",{className:"avatar-text",children:null!==i&&void 0!==i&&i.fullName?i.fullName.charAt(0).toUpperCase():"U"})}),(0,gi.jsxs)("div",{className:"user-details",children:[(0,gi.jsx)("h3",{className:"user-name",children:(null===i||void 0===i?void 0:i.fullName)||"User"}),(0,gi.jsx)("p",{className:"user-email",children:(null===i||void 0===i?void 0:i.email)||"user@example.com"})]})]}),(0,gi.jsxs)("div",{className:"success-message",children:[(0,gi.jsx)("p",{children:"\ud83c\udf89 You're all set! You can now:"}),(0,gi.jsxs)("ul",{className:"features-list",children:[(0,gi.jsx)("li",{children:"\u2728 Browse our premium furniture collection"}),(0,gi.jsx)("li",{children:"\ud83d\uded2 Add items to your cart and checkout"}),(0,gi.jsx)("li",{children:"\ud83d\udcf1 Track your orders in real-time"}),(0,gi.jsx)("li",{children:"\ud83d\udcac Get support from our team"})]})]})]}),(0,gi.jsx)("div",{className:"signup-success-footer",children:(0,gi.jsx)("button",{className:"success-btn success-btn-primary",onClick:()=>{n()},children:"Start Shopping"})})]})})},wc=()=>{var e,t,n,i,s,a,o;const[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(0),[h,p]=(0,r.useState)([]),[m,f]=(0,r.useState)(!0),g=[{backgroundImage:"".concat("https://designxcellinv-production.up.railway.app","/img/login-bg.jpg"),testimonial:"Design Excellence transformed our office space into a modern, functional environment that boosts productivity and employee satisfaction.",author:"Cameron Williamson",role:"Interior Designer"},{backgroundImage:"".concat("https://designxcellinv-production.up.railway.app","/img/pexels-staircase.jpg"),testimonial:"The attention to detail and quality craftsmanship in every piece we've purchased has exceeded our expectations.",author:"Annette Black",role:"Architecture"}],[v,x]=(0,r.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:""}),[y,_]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[A,S]=(0,r.useState)(!1),[E,C]=(0,r.useState)(!1),[T,M]=(0,r.useState)(""),[P,N]=(0,r.useState)(null),[R,L]=(0,r.useState)(!1),[j,I]=(0,r.useState)(!1),[k,B]=(0,r.useState)(!1),[D,O]=(0,r.useState)(null),[F,U]=(0,r.useState)(1),[z,H]=(0,r.useState)(""),[G,W]=(0,r.useState)(!1),[V,J]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),[Z,q]=(0,r.useState)(""),[K,Q]=(0,r.useState)(!1),{loginCustomer:$,registerCustomer:te}=xi(),ie=ne(),re=ee(),[se,ae]=(0,r.useState)(null),oe=(null===(e=re.state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await fi.get("/api/terms");e&&ae(t)}catch(tR){}})(),()=>{e=!1}},[]),(0,r.useEffect)(()=>{(async()=>{try{f(!0);const e=await fi.get("/api/testimonials");if(e&&e.length>0){const t="https://designxcellinv-production.up.railway.app",n=e.map((e,n)=>({backgroundImage:"".concat(t,n%2===0?"/img/login-bg.jpg":"/img/pexels-staircase.jpg"),testimonial:e.text,author:e.name,role:e.profession,rating:e.rating,imageUrl:e.imageUrl}));p(n)}else p(g)}catch(T){console.error("Error fetching testimonials:",T),p(g)}finally{f(!1)}})()},[]),(0,r.useEffect)(()=>{if(0===h.length)return;const e=setInterval(()=>{d(e=>(e+1)%h.length)},5e3);return()=>clearInterval(e)},[h.length]);const le=e=>{const{name:t}=e.target;let{value:n}=e.target;if("firstName"!==t&&"lastName"!==t||(n=n.replace(/[^A-Za-z]/g,"")),"phone"===t&&(n=n.replace(/\D/g,"").slice(0,11)),x(Fe(Fe({},v),{},{[t]:n})),"password"===t&&!l)if(n.length>0){const e=vc(n);N(e)}else N(null)};return(0,gi.jsxs)("div",{className:"auth-page-new",children:[(0,gi.jsxs)("div",{className:"auth-container-new",children:[(0,gi.jsx)("div",{className:"auth-form-section",children:(0,gi.jsxs)("div",{className:"auth-form-wrapper",children:[(0,gi.jsx)("div",{className:"auth-logo",children:(0,gi.jsx)("img",{src:"/design-excellence-logo.png",alt:"Design Excellence",className:"logo-image"})}),(0,gi.jsxs)("div",{className:"auth-form-header",children:[(0,gi.jsx)("h1",{children:l?"Sign In":"Sign Up"}),(0,gi.jsx)("p",{className:"auth-subtitle",children:l?"Please fill your detail to access your account.":"Fill your information below or register with your social account."})]}),(0,gi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0),M("");try{if(l){const e=await $(v.email,v.password,b);if(e.success){const t=localStorage.getItem("shopping-cart-guest");let n=!1;if(t)try{const e=JSON.parse(t);n=e.items&&e.items.length>0}catch(T){console.error("Error checking guest cart:",T)}let i=oe;oe.startsWith("/admin")?i="Admin"===e.user.role||"Employee"===e.user.role?oe:"/":"/"!==oe&&"/login"!==oe||(i="Admin"===e.user.role||"Employee"===e.user.role?"/admin":n?"/cart":"/"),ie(i,{replace:!0})}else M(e.error)}else{if(!P||!P.isValid)return M("Please fix password requirements before proceeding"),void C(!1);if(v.password!==v.confirmPassword)return M("Passwords do not match"),void C(!1);if(!y)return M("You must accept the terms and conditions to continue"),void C(!1);const e=/^[A-Za-z]+$/,t=/^\d{11}$/;if(!e.test(v.firstName))return M("First name must contain letters only"),void C(!1);if(!e.test(v.lastName))return M("Last name must contain letters only"),void C(!1);if(!t.test(v.phone))return M("Phone number must be exactly 11 digits"),void C(!1);const n={fullName:(v.firstName+" "+v.lastName).trim(),email:v.email,phoneNumber:v.phone,password:v.password,confirmPassword:v.confirmPassword},i=await te(n);i.success?(O(i.user),B(!0)):M(i.error)}}catch(t){M(t.message||"An error occurred")}finally{C(!1)}},className:"auth-form-new",children:[T&&(0,gi.jsxs)("div",{className:"error-message-new",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#e74c3c",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#e74c3c",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:T})]}),!l&&(0,gi.jsxs)(gi.Fragment,{children:[1===F&&(0,gi.jsxs)("div",{className:"form-group-modern",children:[(0,gi.jsx)("label",{children:"Email Address"}),(0,gi.jsxs)("div",{className:"input-wrapper",children:[(0,gi.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0 1.1.9-2 2-2z",stroke:"#808080",strokeWidth:"1.5"}),(0,gi.jsx)("polyline",{points:"22,6 12,13 2,6",stroke:"#808080",strokeWidth:"1.5"})]}),(0,gi.jsx)("input",{type:"email",name:"email",placeholder:"Enter your email address",value:v.email,onChange:le,required:!0,disabled:G})]}),(0,gi.jsxs)("div",{className:"security-notice",style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"8px",padding:"12px",margin:"12px 0",fontSize:"0.9rem",color:"#6c757d",textAlign:"center"},children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{marginRight:"8px",verticalAlign:"middle"},children:(0,gi.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"#6c757d",strokeWidth:"2"})}),"Complete the security verification below to send OTP"]}),(0,gi.jsx)(yc,{onCaptchaVerified:()=>{Q(!0)},isVerified:K,onReset:()=>{Q(!1)}}),(0,gi.jsx)("button",{type:"button",className:"auth-submit-btn-modern",onClick:async e=>{if(e.preventDefault(),K){X(!0),q("");try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/auth/send-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v.email})}),n=await t.json();n.success?(W(!0),U(2),N(null)):"EMAIL_ALREADY_EXISTS"===n.code?q("This email is already registered. Please use a different email or try logging in instead."):q(n.message||"Failed to send OTP")}catch(t){q("Failed to send OTP")}finally{X(!1)}}else q("Please complete the security verification first")},disabled:Y||!v.email||!K,style:{marginTop:12},children:Y?"Sending OTP...":K?"Send OTP":"Complete Security Verification"}),Z&&(0,gi.jsxs)("div",{className:"error-message-modern",children:[(0,gi.jsx)("span",{children:Z}),Z.includes("already registered")&&(0,gi.jsx)("button",{type:"button",onClick:()=>c(!0),className:"error-login-link",children:"Click here to login instead"})]})]}),2===F&&(0,gi.jsxs)("div",{className:"form-group-modern",children:[(0,gi.jsx)("label",{children:"Enter OTP sent to your email"}),(0,gi.jsx)("div",{className:"input-wrapper",children:(0,gi.jsx)("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:z,onChange:e=>H(e.target.value),required:!0})}),(0,gi.jsx)("button",{type:"button",className:"auth-submit-btn-modern",onClick:async e=>{e.preventDefault(),X(!0),q("");try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/auth/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v.email,otp:z})}),n=await t.json();n.success?(J(!0),U(3),N(null)):q(n.message||"Invalid OTP")}catch(t){q("Failed to verify OTP")}finally{X(!1)}},disabled:Y||!z,style:{marginTop:12},children:Y?"Verifying...":"Verify OTP"}),Z&&(0,gi.jsx)("div",{className:"error-message-modern",children:(0,gi.jsx)("span",{children:Z})})]}),!l&&3===F&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"form-row-new",children:[(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"First Name *"}),(0,gi.jsx)("input",{type:"text",name:"firstName",placeholder:"Enter First Name",value:v.firstName,onChange:le,required:!0})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Last Name *"}),(0,gi.jsx)("input",{type:"text",name:"lastName",placeholder:"Enter Last Name",value:v.lastName,onChange:le,required:!0})]})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Email *"}),(0,gi.jsx)("input",{type:"email",name:"email",placeholder:"Enter Email Address",value:v.email,onChange:le,required:!0,disabled:!0})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Phone Number *"}),(0,gi.jsx)("input",{type:"tel",name:"phone",placeholder:"Enter Phone Number (11 digits)",value:v.phone,onChange:le,required:!0})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",children:[(0,gi.jsx)("input",{type:A?"text":"password",name:"password",placeholder:"Enter Password",value:v.password,onChange:le,required:!0}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>S(!A),children:A?(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"#666",strokeWidth:"2"})]}):(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"#666",strokeWidth:"2"})]})})]}),P&&(0,gi.jsx)(xc,{password:v.password,showRequirements:!0})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Confirm Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",children:[(0,gi.jsx)("input",{type:A?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:v.confirmPassword,onChange:le,required:!0}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>S(!A),children:A?(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"#666",strokeWidth:"2"})]}):(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"#666",strokeWidth:"2"})]})})]}),v.confirmPassword&&(0,gi.jsx)("div",{className:"password-match-indicator ".concat(v.password===v.confirmPassword?"match":"no-match"),children:v.password===v.confirmPassword?(0,gi.jsx)("span",{className:"match-text",children:"\u2713 Passwords match"}):(0,gi.jsx)("span",{className:"no-match-text",children:"\u2717 Passwords do not match"})})]}),(0,gi.jsxs)("div",{className:"terms-checkbox-new",children:[(0,gi.jsx)("input",{type:"checkbox",id:"acceptTerms",checked:y,onChange:e=>_(e.target.checked),required:!0}),(0,gi.jsxs)("label",{htmlFor:"acceptTerms",children:["Agree with ",(0,gi.jsx)("span",{className:"terms-link",onClick:()=>L(!0),children:"Terms & Condition"})," and ",(0,gi.jsx)("span",{className:"terms-link",onClick:()=>I(!0),children:"Privacy Policy"})]})]})]})]}),l&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Email *"}),(0,gi.jsx)("input",{type:"email",name:"email",placeholder:"Enter Email Address",value:v.email,onChange:le,required:!0})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",children:[(0,gi.jsx)("input",{type:A?"text":"password",name:"password",placeholder:"Enter Password",value:v.password,onChange:le,required:!0}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>S(!A),children:A?(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"#666",strokeWidth:"2"})]}):(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"#666",strokeWidth:"2"})]})})]})]})]}),l&&(0,gi.jsxs)("div",{className:"form-options-new",children:[(0,gi.jsxs)("label",{className:"remember-me",children:[(0,gi.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked)}),(0,gi.jsx)("span",{className:"checkmark"}),"Remember me"]}),(0,gi.jsx)(Re,{to:"/forgot-password",className:"forgot-password-link",children:"Forgot Password?"})]}),(0,gi.jsx)("button",{type:"submit",className:"auth-submit-btn-new",disabled:E||!l&&3!==F||!l&&!y,children:E?(0,gi.jsx)(vl,{color:"#ffffff",height:20,width:20}):l?"Sign In":"Sign Up"})]}),(0,gi.jsx)("div",{className:"auth-switch-link",children:l?(0,gi.jsxs)(gi.Fragment,{children:["Don't have an account?"," ",(0,gi.jsx)("button",{type:"button",className:"switch-link-btn",onClick:()=>{c(!1),M(""),N(null),x({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:""}),_(!1),Q(!1),U(1),W(!1),J(!1),H(""),q("")},children:"Sign Up"})]}):(0,gi.jsxs)(gi.Fragment,{children:["Already have an account?"," ",(0,gi.jsx)("button",{type:"button",className:"switch-link-btn",onClick:()=>{c(!0),M(""),N(null),x({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:""}),_(!1),Q(!1),U(1),W(!1),J(!1),H(""),q("")},children:"Sign In"})]})})]})}),(0,gi.jsx)("div",{className:"auth-visual-section",style:{backgroundImage:h.length>0?"url(".concat(null===(n=h[u])||void 0===n?void 0:n.backgroundImage,")"):"linear-gradient(135deg, #4D5157 0%, #36454f 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,gi.jsx)("div",{className:"auth-visual-wrapper",children:(0,gi.jsx)("div",{className:"visual-content",children:m?(0,gi.jsx)("div",{className:"testimonial-overlay",children:(0,gi.jsxs)("div",{className:"loading-spinner",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading testimonials..."})]})}):h.length>0?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"testimonial-overlay",children:[(0,gi.jsxs)("p",{className:"testimonial-quote",children:['"',null===(i=h[u])||void 0===i?void 0:i.testimonial,'"']}),(0,gi.jsxs)("div",{className:"testimonial-author",children:[(0,gi.jsx)("h4",{children:null===(s=h[u])||void 0===s?void 0:s.author}),(0,gi.jsx)("p",{children:null===(a=h[u])||void 0===a?void 0:a.role}),(null===(o=h[u])||void 0===o?void 0:o.rating)&&(0,gi.jsx)("div",{className:"testimonial-rating",children:[...Array(5)].map((e,t)=>(0,gi.jsx)("span",{className:"star ".concat(t<h[u].rating?"filled":""),children:"\u2605"},t))})]})]}),(0,gi.jsx)("div",{className:"carousel-indicators",children:h.map((e,t)=>(0,gi.jsx)("div",{className:"indicator ".concat(t===u?"active":""),onClick:()=>d(t)},t))})]}):(0,gi.jsxs)("div",{className:"testimonial-overlay",children:[(0,gi.jsx)("p",{className:"testimonial-quote",children:'"Welcome to Design Excellence - Your trusted partner in creating beautiful spaces."'}),(0,gi.jsxs)("div",{className:"testimonial-author",children:[(0,gi.jsx)("h4",{children:"Design Excellence Team"}),(0,gi.jsx)("p",{children:"Interior Design Specialists"})]})]})})})})]}),(0,gi.jsx)(_c,{isOpen:R,onClose:()=>L(!1),type:"terms"}),(0,gi.jsx)(_c,{isOpen:j,onClose:()=>I(!1),type:"privacy"}),(0,gi.jsx)(bc,{isOpen:k,onClose:()=>{B(!1),O(null),ie("/",{replace:!0})},userData:D})]})},Ac=()=>{var e,t,n,i,s;const[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(0),[g,v]=(0,r.useState)([]),[x,y]=(0,r.useState)(!0),_=ne(),b=[{backgroundImage:"/img/login-bg.jpg",testimonial:"Design Excellence transformed our office space into a modern, functional environment that boosts productivity and employee satisfaction.",author:"Cameron Williamson",role:"Interior Designer"},{backgroundImage:"/img/pexels-staircase.jpg",testimonial:"The attention to detail and quality craftsmanship in every piece we've purchased has exceeded our expectations.",author:"Annette Black",role:"Architecture"}];(0,r.useEffect)(()=>{(async()=>{try{y(!0);const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/testimonials"));if(t&&t.ok){const e=await t.json();if(e&&e.length>0){const t=e.map((e,t)=>({backgroundImage:t%2===0?"/img/login-bg.jpg":"/img/pexels-staircase.jpg",testimonial:e.text,author:e.name,role:e.profession,rating:e.rating,imageUrl:e.imageUrl}));v(t)}else v(b)}else v(b)}catch(u){console.error("Error fetching testimonials:",u),v(b)}finally{y(!1)}})()},[]),(0,r.useEffect)(()=>{if(0===g.length)return;const e=setInterval(()=>{f(e=>(e+1)%g.length)},5e3);return()=>clearInterval(e)},[g.length]);return(0,gi.jsx)("div",{className:"auth-page-new",children:(0,gi.jsxs)("div",{className:"auth-container-new",children:[(0,gi.jsx)("div",{className:"auth-form-section",children:(0,gi.jsxs)("div",{className:"auth-form-wrapper",children:[(0,gi.jsx)("div",{className:"auth-logo",children:(0,gi.jsx)("img",{src:"/design-excellence-logo.png",alt:"Design Excellence",className:"logo-image"})}),(0,gi.jsxs)("div",{className:"auth-form-header",children:[(0,gi.jsx)("h1",{children:"Forgot Password"}),(0,gi.jsx)("p",{className:"auth-subtitle",children:h?"Check your email for reset instructions.":"Enter your email address and we'll send you a link to reset your password."})]}),h?(0,gi.jsxs)("div",{className:"success-container",children:[(0,gi.jsxs)("div",{className:"success-message-modern",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#28a745",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"#28a745",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:"Password reset email sent successfully!"})]}),(0,gi.jsxs)("div",{className:"success-instructions",children:[(0,gi.jsxs)("p",{children:["We've sent a password reset link to ",(0,gi.jsx)("strong",{children:a})]}),(0,gi.jsx)("p",{children:"Please check your email and follow the instructions to reset your password."}),(0,gi.jsx)("p",{children:"If you don't see the email, check your spam folder."})]}),(0,gi.jsx)("button",{type:"button",className:"auth-submit-btn-new",onClick:()=>{_("/login")},children:"Back to Login"})]}):(0,gi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),d(""),p(!1);try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),n=await t.json();n.success?p(!0):d(n.message||"Failed to send reset email. Please try again.")}catch(t){d("Network error. Please check your connection and try again.")}finally{c(!1)}},className:"auth-form-new",children:[u&&(0,gi.jsxs)("div",{className:"error-message-new",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#e74c3c",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#e74c3c",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:u})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Email Address *"}),(0,gi.jsxs)("div",{className:"input-wrapper",children:[(0,gi.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0 1.1.9-2 2-2z",stroke:"#808080",strokeWidth:"1.5"}),(0,gi.jsx)("polyline",{points:"22,6 12,13 2,6",stroke:"#808080",strokeWidth:"1.5"})]}),(0,gi.jsx)("input",{type:"email",name:"email",placeholder:"Enter your email address",value:a,onChange:e=>o(e.target.value),required:!0})]})]}),(0,gi.jsx)("button",{type:"submit",className:"auth-submit-btn-new",disabled:l||!a,children:l?(0,gi.jsx)(vl,{color:"#ffffff",height:20,width:20}):"Send Reset Link"})]}),!h&&(0,gi.jsxs)("div",{className:"auth-switch-link",children:["Remember your password?"," ",(0,gi.jsx)(Re,{to:"/login",className:"switch-link-btn",children:"Sign In"})]})]})}),(0,gi.jsx)("div",{className:"auth-visual-section",style:{backgroundImage:g.length>0?"url(".concat(null===(e=g[m])||void 0===e?void 0:e.backgroundImage,")"):"linear-gradient(135deg, #4D5157 0%, #36454f 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,gi.jsx)("div",{className:"auth-visual-wrapper",children:(0,gi.jsx)("div",{className:"visual-content",children:x?(0,gi.jsx)("div",{className:"testimonial-overlay",children:(0,gi.jsxs)("div",{className:"loading-spinner",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading testimonials..."})]})}):g.length>0?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"testimonial-overlay",children:[(0,gi.jsxs)("p",{className:"testimonial-quote",children:['"',null===(t=g[m])||void 0===t?void 0:t.testimonial,'"']}),(0,gi.jsxs)("div",{className:"testimonial-author",children:[(0,gi.jsx)("h4",{children:null===(n=g[m])||void 0===n?void 0:n.author}),(0,gi.jsx)("p",{children:null===(i=g[m])||void 0===i?void 0:i.role}),(null===(s=g[m])||void 0===s?void 0:s.rating)&&(0,gi.jsx)("div",{className:"testimonial-rating",children:[...Array(5)].map((e,t)=>(0,gi.jsx)("span",{className:"star ".concat(t<g[m].rating?"filled":""),children:"\u2605"},t))})]})]}),(0,gi.jsx)("div",{className:"carousel-indicators",children:g.map((e,t)=>(0,gi.jsx)("div",{className:"indicator ".concat(t===m?"active":""),onClick:()=>f(t)},t))})]}):(0,gi.jsxs)("div",{className:"testimonial-overlay",children:[(0,gi.jsx)("p",{className:"testimonial-quote",children:'"Welcome to Design Excellence - Your trusted partner in creating beautiful spaces."'}),(0,gi.jsxs)("div",{className:"testimonial-author",children:[(0,gi.jsx)("h4",{children:"Design Excellence Team"}),(0,gi.jsx)("p",{children:"Interior Design Specialists"})]})]})})})})]})})},Sc=()=>{var e,t,n,i,s;const[a]=Ie(),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)(""),[y,_]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[A,S]=(0,r.useState)(0),[E,C]=(0,r.useState)([]),[T,M]=(0,r.useState)(!0),P=ne(),N=[{backgroundImage:"/img/login-bg.jpg",testimonial:"Design Excellence transformed our office space into a modern, functional environment that boosts productivity and employee satisfaction.",author:"Cameron Williamson",role:"Interior Designer"},{backgroundImage:"/img/pexels-staircase.jpg",testimonial:"The attention to detail and quality craftsmanship in every piece we've purchased has exceeded our expectations.",author:"Annette Black",role:"Architecture"}];(0,r.useEffect)(()=>{const e=a.get("token");e?(l(e),w(!0)):w(!1)},[a]),(0,r.useEffect)(()=>{(async()=>{try{M(!0);const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/testimonials"));if(t&&t.ok){const e=await t.json();if(e&&e.length>0){const t=e.map((e,t)=>({backgroundImage:t%2===0?"/img/login-bg.jpg":"/img/pexels-staircase.jpg",testimonial:e.text,author:e.name,role:e.profession,rating:e.rating,imageUrl:e.imageUrl}));C(t)}else C(N)}else C(N)}catch(v){console.error("Error fetching testimonials:",v),C(N)}finally{M(!1)}})()},[]),(0,r.useEffect)(()=>{if(0===E.length)return;const e=setInterval(()=>{S(e=>(e+1)%E.length)},5e3);return()=>clearInterval(e)},[E.length]);const R=()=>{P("/login")};return null===b?(0,gi.jsx)("div",{className:"auth-page-new",children:(0,gi.jsx)("div",{className:"auth-container-new",children:(0,gi.jsx)("div",{className:"auth-form-section",children:(0,gi.jsx)("div",{className:"auth-form-wrapper",children:(0,gi.jsxs)("div",{className:"loading-spinner",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Validating reset link..."})]})})})})}):!1===b?(0,gi.jsx)("div",{className:"auth-page-new",children:(0,gi.jsx)("div",{className:"auth-container-new",children:(0,gi.jsx)("div",{className:"auth-form-section",children:(0,gi.jsxs)("div",{className:"auth-form-wrapper",children:[(0,gi.jsx)("div",{className:"auth-logo",children:(0,gi.jsx)("img",{src:"/design-excellence-logo.png",alt:"Design Excellence",className:"logo-image"})}),(0,gi.jsxs)("div",{className:"auth-form-header",children:[(0,gi.jsx)("h1",{children:"Invalid Reset Link"}),(0,gi.jsx)("p",{className:"auth-subtitle",children:"This password reset link is invalid or has expired."})]}),(0,gi.jsxs)("div",{className:"error-message-new",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#e74c3c",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#e74c3c",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:"Please request a new password reset link."})]}),(0,gi.jsx)("button",{type:"button",className:"auth-submit-btn-new",onClick:R,children:"Back to Login"}),(0,gi.jsxs)("div",{className:"auth-switch-link",children:["Need a new reset link?"," ",(0,gi.jsx)(Re,{to:"/forgot-password",className:"switch-link-btn",children:"Request Reset"})]})]})})})}):(0,gi.jsx)("div",{className:"auth-page-new",children:(0,gi.jsxs)("div",{className:"auth-container-new",children:[(0,gi.jsx)("div",{className:"auth-form-section",children:(0,gi.jsxs)("div",{className:"auth-form-wrapper",children:[(0,gi.jsx)("div",{className:"auth-logo",children:(0,gi.jsx)("img",{src:"/design-excellence-logo.png",alt:"Design Excellence",className:"logo-image"})}),(0,gi.jsxs)("div",{className:"auth-form-header",children:[(0,gi.jsx)("h1",{children:"Reset Password"}),(0,gi.jsx)("p",{className:"auth-subtitle",children:y?"Your password has been reset successfully!":"Enter your new password below."})]}),y?(0,gi.jsxs)("div",{className:"success-container",children:[(0,gi.jsxs)("div",{className:"success-message-modern",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#28a745",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"#28a745",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:"Password reset successfully!"})]}),(0,gi.jsxs)("div",{className:"success-instructions",children:[(0,gi.jsx)("p",{children:"Your password has been updated successfully."}),(0,gi.jsx)("p",{children:"You will be redirected to the login page in a few seconds."})]}),(0,gi.jsx)("button",{type:"button",className:"auth-submit-btn-new",onClick:R,children:"Go to Login"})]}):(0,gi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(!0),x(""),c!==d)return x("Passwords do not match"),void g(!1);if(c.length<8)return x("Password must be at least 8 characters long"),void g(!1);try{const e="https://designxcellinv-production.up.railway.app",t=await fetch("".concat(e,"/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o,password:c,confirmPassword:d})}),n=await t.json();n.success?(_(!0),setTimeout(()=>{P("/login")},3e3)):x(n.message||"Failed to reset password. Please try again.")}catch(t){x("Network error. Please check your connection and try again.")}finally{g(!1)}},className:"auth-form-new",children:[v&&(0,gi.jsxs)("div",{className:"error-message-new",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"#e74c3c",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M15 9l-6 6M9 9l6 6",stroke:"#e74c3c",strokeWidth:"2"})]}),(0,gi.jsx)("span",{children:v})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"New Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",children:[(0,gi.jsx)("input",{type:p?"text":"password",name:"password",placeholder:"Enter new password",value:c,onChange:e=>u(e.target.value),required:!0,minLength:"8"}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>m(!p),children:p?(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"#666",strokeWidth:"2"})]}):(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"#666",strokeWidth:"2"})]})})]})]}),(0,gi.jsxs)("div",{className:"form-group-new",children:[(0,gi.jsx)("label",{children:"Confirm New Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",children:[(0,gi.jsx)("input",{type:p?"text":"password",name:"confirmPassword",placeholder:"Confirm new password",value:d,onChange:e=>h(e.target.value),required:!0,minLength:"8"}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>m(!p),children:p?(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"#666",strokeWidth:"2"})]}):(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"#666",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"#666",strokeWidth:"2"})]})})]}),d&&(0,gi.jsx)("div",{className:"password-match-indicator ".concat(c===d?"match":"no-match"),children:c===d?(0,gi.jsx)("span",{className:"match-text",children:"\u2713 Passwords match"}):(0,gi.jsx)("span",{className:"no-match-text",children:"\u2717 Passwords do not match"})})]}),(0,gi.jsx)("button",{type:"submit",className:"auth-submit-btn-new",disabled:f||!c||!d,children:f?(0,gi.jsx)(vl,{color:"#ffffff",height:20,width:20}):"Reset Password"})]}),!y&&(0,gi.jsxs)("div",{className:"auth-switch-link",children:["Remember your password?"," ",(0,gi.jsx)(Re,{to:"/login",className:"switch-link-btn",children:"Sign In"})]})]})}),(0,gi.jsx)("div",{className:"auth-visual-section",style:{backgroundImage:E.length>0?"url(".concat(null===(e=E[A])||void 0===e?void 0:e.backgroundImage,")"):"linear-gradient(135deg, #4D5157 0%, #36454f 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:(0,gi.jsx)("div",{className:"auth-visual-wrapper",children:(0,gi.jsx)("div",{className:"visual-content",children:T?(0,gi.jsx)("div",{className:"testimonial-overlay",children:(0,gi.jsxs)("div",{className:"loading-spinner",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading testimonials..."})]})}):E.length>0?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"testimonial-overlay",children:[(0,gi.jsxs)("p",{className:"testimonial-quote",children:['"',null===(t=E[A])||void 0===t?void 0:t.testimonial,'"']}),(0,gi.jsxs)("div",{className:"testimonial-author",children:[(0,gi.jsx)("h4",{children:null===(n=E[A])||void 0===n?void 0:n.author}),(0,gi.jsx)("p",{children:null===(i=E[A])||void 0===i?void 0:i.role}),(null===(s=E[A])||void 0===s?void 0:s.rating)&&(0,gi.jsx)("div",{className:"testimonial-rating",children:[...Array(5)].map((e,t)=>(0,gi.jsx)("span",{className:"star ".concat(t<E[A].rating?"filled":""),children:"\u2605"},t))})]})]}),(0,gi.jsx)("div",{className:"carousel-indicators",children:E.map((e,t)=>(0,gi.jsx)("div",{className:"indicator ".concat(t===A?"active":""),onClick:()=>S(t)},t))})]}):(0,gi.jsxs)("div",{className:"testimonial-overlay",children:[(0,gi.jsx)("p",{className:"testimonial-quote",children:'"Welcome to Design Excellence - Your trusted partner in creating beautiful spaces."'}),(0,gi.jsxs)("div",{className:"testimonial-author",children:[(0,gi.jsx)("h4",{children:"Design Excellence Team"}),(0,gi.jsx)("p",{children:"Interior Design Specialists"})]})]})})})})]})})},Ec=e=>{let{categories:t,products:n,filters:i,onFilterChange:s,onClearFilters:a}=e;const[o,l]=(0,r.useState)([25,125]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[p,m]=(0,r.useState)({min:25,max:500}),[f,g]=(0,r.useState)({inStock:0,outOfStock:0}),[v,x]=(0,r.useState)(!0),y=(e,t)=>{s({[e]:t})},_=e=>{l(e),s({priceRange:"".concat(e[0],"-").concat(e[1])})},b=e=>{const t=Math.min(parseInt(e),o[1]-1);_([t,o[1]])},w=e=>{const t=Math.max(parseInt(e),o[0]+1);_([o[0],t])};(0,r.useEffect)(()=>{if(t&&t.length>0){const e=t.map(e=>"object"===typeof e&&e.name?e.name:String(e||"").trim()).filter(e=>e.length>0);u(e)}if(n&&n.length>0){const e=[...new Set(n.map(e=>e.categoryName).filter(Boolean).map(e=>String(e).trim()).filter(e=>e.length>0))];e.length>0&&u(e)}(async()=>{try{x(!0);const[e,t,i]=await Promise.all([fi.get("/api/public/materials"),fi.get("/api/public/price-range"),fi.get("/api/public/stock-status")]);if(e.success&&e.materials&&h(e.materials.map(e=>"object"===typeof e&&e.name?e.name:String(e||"").trim()).filter(e=>e.length>0)),t.success&&t.priceRange){const{min:e,max:n}=t.priceRange;m({min:e,max:n}),l([e,n])}if(i.success&&i.stockStatus)g(i.stockStatus);else if(n&&n.length>0){const e=n.filter(e=>(e.stockQuantity||e.stock||e.quantity||0)>0).length,t=n.filter(e=>0===(e.stockQuantity||e.stock||e.quantity||0)).length;g({inStock:e,outOfStock:t})}}catch(RT){if(console.error("Error fetching additional filter data:",RT),h(["Metal","Wood","Upholstered","Glass","Plastic","Fabric","Leather","Steel","Aluminum"]),n&&n.length>0){const e=n.filter(e=>(e.stockQuantity||e.stock||e.quantity||0)>0).length,t=n.filter(e=>0===(e.stockQuantity||e.stock||e.quantity||0)).length;g({inStock:e,outOfStock:t})}}finally{x(!1)}})()},[n,t]);const A=c.length>0?c:(t||[]).map(e=>"object"===typeof e&&e.name?e.name:String(e||"").trim()).filter(e=>e.length>0),S=d;return(0,gi.jsxs)("div",{className:"filter-sidebar-new",children:[(0,gi.jsx)("h3",{className:"filter-title",children:"Filter Options"}),(0,gi.jsxs)("div",{className:"filter-section-new",children:[(0,gi.jsx)("h4",{children:"Category"}),(0,gi.jsx)("div",{className:"category-options",children:A.map(e=>{const t="object"===typeof e&&e.name?e.name:String(e||"").trim(),n=t.toLowerCase();return(0,gi.jsxs)("label",{className:"category-option",children:[(0,gi.jsx)("input",{type:"checkbox",checked:(i.categories||[]).includes(n),onChange:()=>(e=>{const t=i.categories||[],n=t.includes(e)?t.filter(t=>t!==e):[...t,e];s({categories:n})})(n)}),(0,gi.jsx)("span",{className:"category-checkbox"}),(0,gi.jsx)("span",{className:"category-name",children:t})]},t)})})]}),(0,gi.jsxs)("div",{className:"filter-section-new",children:[(0,gi.jsx)("h4",{children:"Price"}),v?(0,gi.jsx)("div",{className:"loading-text",children:"Loading price range..."}):(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"price-range-display",children:["\u20b1",o[0].toLocaleString()," - \u20b1",o[1].toLocaleString()]}),(0,gi.jsx)("div",{className:"price-slider-container",children:(0,gi.jsxs)("div",{className:"price-slider-wrapper",children:[(0,gi.jsx)("div",{className:"price-slider-track"}),(0,gi.jsx)("div",{className:"price-slider-range",style:{left:"".concat((o[0]-p.min)/(p.max-p.min)*100,"%"),width:"".concat((o[1]-o[0])/(p.max-p.min)*100,"%")}}),(0,gi.jsx)("input",{type:"range",min:p.min,max:p.max,value:o[0],onChange:e=>b(e.target.value),className:"price-slider price-slider-min"}),(0,gi.jsx)("input",{type:"range",min:p.min,max:p.max,value:o[1],onChange:e=>w(e.target.value),className:"price-slider price-slider-max"})]})}),(0,gi.jsxs)("div",{className:"price-inputs",children:[(0,gi.jsxs)("div",{className:"price-input-group",children:[(0,gi.jsx)("label",{children:"Min Price"}),(0,gi.jsx)("input",{type:"number",min:p.min,max:p.max,value:o[0],onChange:e=>b(e.target.value),placeholder:"Min"})]}),(0,gi.jsxs)("div",{className:"price-input-group",children:[(0,gi.jsx)("label",{children:"Max Price"}),(0,gi.jsx)("input",{type:"number",min:p.min,max:p.max,value:o[1],onChange:e=>w(e.target.value),placeholder:"Max"})]})]})]})]}),(0,gi.jsxs)("div",{className:"filter-section-new",children:[(0,gi.jsx)("h4",{children:"Material"}),(0,gi.jsx)("div",{className:"material-options",children:S.map(e=>{const t="object"===typeof e&&e.name?e.name:String(e||"").trim(),n=t.toLowerCase();return(0,gi.jsxs)("label",{className:"material-option",children:[(0,gi.jsx)("input",{type:"checkbox",checked:(i.materials||[]).includes(n),onChange:()=>(e=>{const t=i.materials||[],n=t.includes(e)?t.filter(t=>t!==e):[...t,e];s({materials:n})})(n)}),(0,gi.jsx)("span",{className:"material-checkbox"}),(0,gi.jsx)("span",{className:"material-name",children:t})]},t)})})]}),(0,gi.jsxs)("div",{className:"filter-section-new",children:[(0,gi.jsx)("h4",{children:"Availability"}),v?(0,gi.jsx)("div",{className:"loading-text",children:"Loading stock status..."}):(0,gi.jsxs)("div",{className:"availability-options",children:[(0,gi.jsxs)("label",{className:"availability-option",children:[(0,gi.jsx)("input",{type:"checkbox",checked:i.inStock,onChange:e=>y("inStock",e.target.checked)}),(0,gi.jsx)("span",{className:"availability-checkbox"}),(0,gi.jsxs)("span",{className:"availability-name",children:["In Stock (",f.inStock||0,")"]})]}),(0,gi.jsxs)("label",{className:"availability-option",children:[(0,gi.jsx)("input",{type:"checkbox",checked:i.outOfStock,onChange:e=>y("outOfStock",e.target.checked)}),(0,gi.jsx)("span",{className:"availability-checkbox"}),(0,gi.jsxs)("span",{className:"availability-name",children:["Out of Stock (",f.outOfStock||0,")"]})]})]})]})]})},Cc=[{id:1,productId:1,userId:1,userName:"John Doe",rating:5,comment:"Excellent quality and craftsmanship. The desk is exactly what I was looking for.",createdAt:"2024-01-15T10:30:00Z",helpful:3},{id:2,productId:1,userId:2,userName:"Sarah Smith",rating:4,comment:"Great desk, very sturdy. The only minor issue is the drawer alignment.",createdAt:"2024-01-10T14:20:00Z",helpful:1},{id:3,productId:2,userId:3,userName:"Mike Johnson",rating:5,comment:"Beautiful modern design. The glass top is perfect for my office.",createdAt:"2024-01-12T09:15:00Z",helpful:2},{id:4,productId:3,userId:4,userName:"Emily Brown",rating:5,comment:"Most comfortable office chair I've ever owned. Worth every penny!",createdAt:"2024-01-08T16:45:00Z",helpful:5},{id:5,productId:3,userId:5,userName:"David Wilson",rating:4,comment:"Great ergonomic design. The lumbar support is excellent for long work sessions.",createdAt:"2024-01-05T11:30:00Z",helpful:2},{id:6,productId:4,userId:6,userName:"Lisa Anderson",rating:5,comment:"Perfect standing desk converter. Easy to adjust and very stable.",createdAt:"2024-01-03T13:45:00Z",helpful:4},{id:7,productId:5,userId:7,userName:"Robert Chen",rating:4,comment:"Solid filing cabinet with good security features. Matches my desk perfectly.",createdAt:"2024-01-01T15:20:00Z",helpful:1},{id:8,productId:6,userId:8,userName:"Jennifer Martinez",rating:5,comment:"Beautiful bookshelf that adds elegance to my office. Adjustable shelves are a plus.",createdAt:"2023-12-28T09:10:00Z",helpful:3}],Tc=e=>new Promise(t=>setTimeout(t,e)),Mc={async getProductReviews(e){try{const t=await fi.get("/api/products/".concat(e,"/reviews"));if(t.success){return{success:!0,reviews:(t.reviews||[]).map(e=>({id:e.ReviewID,productId:e.ProductID,userId:e.CustomerID,userName:e.CustomerName,rating:e.Rating,comment:e.Comment,createdAt:e.CreatedAt,helpful:e.HelpfulCount||0}))}}}catch(RT){}await Tc(300);return{success:!0,reviews:Cc.filter(t=>t.productId===parseInt(e))}},async addProductReview(e,t){try{const n=await fi.post("/api/products/".concat(e,"/reviews"),t);if(n.success){return{success:!0,review:{id:n.review.ReviewID,productId:n.review.ProductID,userId:n.review.CustomerID,userName:n.review.CustomerName,rating:n.review.Rating,comment:n.review.Comment,createdAt:n.review.CreatedAt,helpful:n.review.HelpfulCount||0}}}}catch(RT){}await Tc(500);const n={id:Date.now(),productId:parseInt(e),userId:t.userId||1,userName:t.userName||"Anonymous",rating:t.rating,comment:t.comment,createdAt:(new Date).toISOString(),helpful:0};return Cc.push(n),{success:!0,review:n}},async canUserReviewProduct(e,t){try{const n=await fi.get("/api/products/".concat(e,"/reviews/can-review?customerId=").concat(t));if(n.success)return{success:!0,canReview:n.canReview,reason:n.reason}}catch(RT){}return await Tc(200),{success:!0,canReview:!1,reason:"Purchase verification unavailable - please try again later"}},async getProductReviewStats(e){try{const t=await fi.get("/api/products/".concat(e,"/reviews/stats"));if(t.success)return{success:!0,stats:t.stats}}catch(RT){}await Tc(200);const t=Cc.filter(t=>t.productId===parseInt(e));if(0===t.length)return{success:!0,stats:{averageRating:0,totalReviews:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}}};const n=t.reduce((e,t)=>e+t.rating,0)/t.length,i={1:0,2:0,3:0,4:0,5:0};return t.forEach(e=>{i[e.rating]++}),{success:!0,stats:{averageRating:Math.round(10*n)/10,totalReviews:t.length,ratingDistribution:i}}}},Pc=Mc.canUserReviewProduct,Nc=e=>{let{isOpen:t,onClose:n,title:i,children:s,className:a="",size:o="medium",showCloseButton:l=!0,closeOnOverlayClick:c=!0,closeOnEscape:u=!0}=e;if((0,r.useEffect)(()=>{const e=e=>{u&&"Escape"===e.key&&n()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,u,n]),!t)return null;return(0,gi.jsx)("div",{className:"modal-overlay",onClick:e=>{c&&e.target===e.currentTarget&&n()},children:(0,gi.jsxs)("div",{className:"modal-content modal-".concat(o," ").concat(a),children:[i&&(0,gi.jsxs)("div",{className:"modal-header",children:[(0,gi.jsx)("h2",{className:"modal-title",children:i}),l&&(0,gi.jsx)("button",{className:"modal-close-btn",onClick:n,"aria-label":"Close modal",children:(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,gi.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,gi.jsx)("div",{className:"modal-body",children:s})]})})},Rc=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)("default"),[u,d]=(0,r.useState)({categories:[],priceRange:"",sortBy:"name",featured:!1,inStock:!1,customizable:!1,colors:[],materials:[],outOfStock:!1}),[h,p]=(0,r.useState)([]),[m,f]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const t=new URLSearchParams(e.search).get("category");d(e=>Fe(Fe({},e),{},{categories:t?[t]:[]})),t&&f(t)},[e.search]),(0,r.useEffect)(()=>{const e=()=>{const e=document.body.className;e.includes("theme-christmas")?c("christmas"):e.includes("theme-dark")?c("dark"):c("default")};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),(0,r.useEffect)(()=>{x()},[]),(0,r.useEffect)(()=>{y()},[t,u]);const x=async()=>{try{const[e,t]=await Promise.all([$i(),nr()]),i=e.products||[],r=t.categories||[];n(i),s([{id:"",name:"All Products",count:i.length},...r.map(e=>({id:e,name:e,count:i.filter(t=>t.categoryName===e).length}))])}catch(RT){console.error("Error loading data:",RT)}finally{o(!1)}},y=()=>{let e=[...t];if(u.categories&&u.categories.length>0&&(e=e.filter(e=>u.categories.some(t=>{var n,i;return(null===(n=e.categoryId)||void 0===n?void 0:n.toString())===t||e.categoryName===t||(null===(i=e.categoryName)||void 0===i?void 0:i.toLowerCase())===t}))),u.priceRange){const[t,n]=u.priceRange.split("-").map(Number);e=e.filter(e=>{const i=e.hasDiscount&&e.discountInfo?e.discountInfo.discountedPrice:e.price;return 999999===n?i>=t:i>=t&&i<=n})}u.featured&&(e=e.filter(e=>e.featured)),u.inStock&&(e=e.filter(e=>(e.stockQuantity||e.stock||e.quantity||0)>0)),u.outOfStock&&(e=e.filter(e=>0===(e.stockQuantity||e.stock||e.quantity||0))),u.customizable&&(e=e.filter(e=>e.customizable)),u.materials&&u.materials.length>0&&(e=e.filter(e=>u.materials.some(t=>e.material&&e.material.toLowerCase().includes(t)))),e.sort((e,t)=>{const n=e.hasDiscount&&e.discountInfo?e.discountInfo.discountedPrice:e.price,i=t.hasDiscount&&t.discountInfo?t.discountInfo.discountedPrice:t.price;switch(u.sortBy){case"price-low":return n-i;case"price-high":return i-n;default:return e.name.localeCompare(t.name)}}),p(e)},_=e=>{d(Fe(Fe({},u),e))},b=()=>{d({categories:[],priceRange:"",sortBy:"name",featured:!1,inStock:!1,customizable:!1,colors:[],materials:[],outOfStock:!1})},w=()=>{const e=[];if(u.priceRange){const[t,n]=u.priceRange.split("-");e.push({type:"priceRange",label:"Price: $".concat(t,".00 - $").concat(n,".00"),value:u.priceRange})}return u.inStock&&e.push({type:"inStock",label:"In Stock",value:!0}),e};return a?(0,gi.jsx)("div",{className:"catalog-page",children:(0,gi.jsx)("div",{className:"container",children:(0,gi.jsxs)("div",{className:"loading",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading products..."})]})})}):(0,gi.jsx)("div",{className:"catalog-page",children:(0,gi.jsxs)("div",{className:"container",children:["christmas"===l&&(0,gi.jsx)(Nr,{}),(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"Products",href:"/products"},...m?[{label:m}]:[]],title:m?"".concat(m," Collection"):"Product Catalog",subtitle:m?"Explore our premium ".concat(m," collection"):"Discover our complete collection of premium office furniture"}),(0,gi.jsx)("div",{className:"catalog-header",children:m&&(0,gi.jsx)("div",{className:"category-actions",children:(0,gi.jsx)(Re,{to:"/products",className:"clear-filter-btn",children:"View All Products"})})}),(0,gi.jsxs)("div",{className:"catalog-content",children:[(0,gi.jsx)("aside",{className:"catalog-sidebar",children:(0,gi.jsx)(Ec,{categories:i,products:t,filters:u,onFilterChange:_,onClearFilters:b})}),(0,gi.jsxs)("main",{className:"catalog-main",children:[(0,gi.jsxs)("button",{className:"mobile-filter-toggle",onClick:()=>v(!0),children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,gi.jsx)("path",{d:"M3 4H21M7 8H17M10 12H14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Filter Products"]}),(0,gi.jsxs)("div",{className:"catalog-controls",children:[(0,gi.jsx)("div",{className:"results-info",children:(0,gi.jsxs)("span",{children:["Showing 1-12 of ",h.length," results"]})}),(0,gi.jsx)("div",{className:"catalog-actions",children:(0,gi.jsxs)("select",{value:u.sortBy,onChange:e=>_({sortBy:e.target.value}),className:"sort-select",children:[(0,gi.jsx)("option",{value:"name",children:"Sort by: Default Sorting"}),(0,gi.jsx)("option",{value:"price-low",children:"Price: Low to High"}),(0,gi.jsx)("option",{value:"price-high",children:"Price: High to Low"})]})})]}),w().length>0&&(0,gi.jsxs)("div",{className:"active-filters",children:[w().map((e,t)=>(0,gi.jsxs)("div",{className:"filter-tag",children:[(0,gi.jsx)("span",{children:e.label}),(0,gi.jsx)("button",{onClick:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d("materials"===e&&t?e=>Fe(Fe({},e),{},{materials:e.materials.filter(e=>e!==t)}):t=>Fe(Fe({},t),{},{[e]:"sortBy"===e?"name":!!Array.isArray(t[e])&&[]}))}(e.type,e.value),className:"remove-filter",children:"\xd7"})]},t)),(0,gi.jsx)("button",{onClick:b,className:"clear-all-filters",children:"Clear All"})]}),(0,gi.jsx)("div",{className:"products-grid",children:h.map(e=>(0,gi.jsx)(uc,{product:e},e.id))}),0===h.length&&(0,gi.jsxs)("div",{className:"no-products",children:[(0,gi.jsx)("h3",{children:"No products found"}),(0,gi.jsx)("p",{children:"Try adjusting your filters or search terms"})]})]})]}),(0,gi.jsx)(Nc,{isOpen:g,onClose:()=>v(!1),title:"Filter Products",size:"fullscreen",className:"filter-modal",children:(0,gi.jsxs)("div",{className:"filter-modal-content",children:[(0,gi.jsx)("div",{className:"filter-modal-body",children:(0,gi.jsx)(Ec,{categories:i,products:t,filters:u,onFilterChange:_,onClearFilters:b})}),(0,gi.jsxs)("div",{className:"filter-modal-footer",children:[(0,gi.jsx)("button",{className:"btn btn-secondary",onClick:()=>v(!1),children:"Cancel"}),(0,gi.jsx)("button",{className:"btn btn-primary",onClick:()=>{v(!1)},children:"Apply Filters"})]})]})}),"christmas"===l&&(0,gi.jsx)(Rr,{})]})})},Lc=e=>{var t;let{isOpen:n,onClose:i,product:r,quantity:s,onContinueShopping:a,onViewCart:o}=e;const{formatPrice:l}=Oi();if(!n||!r)return null;return(0,gi.jsx)("div",{className:"cart-success-modal-overlay",onClick:e=>{e.target===e.currentTarget&&i()},children:(0,gi.jsxs)("div",{className:"cart-success-modal",children:[(0,gi.jsx)("button",{className:"cart-success-modal-close",onClick:i,"aria-label":"Close modal",children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,gi.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,gi.jsxs)("div",{className:"cart-success-modal-content",children:[(0,gi.jsx)("div",{className:"cart-success-icon",children:(0,gi.jsx)("div",{className:"success-icon-circle",children:(0,gi.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,gi.jsx)("polyline",{points:"20,6 9,17 4,12"})})})}),(0,gi.jsxs)("div",{className:"cart-success-message",children:[(0,gi.jsx)("h2",{className:"cart-success-title",children:"Added to Cart!"}),(0,gi.jsxs)("p",{className:"cart-success-subtitle",children:[s," ",1===s?"item":"items"," added successfully"]})]}),(0,gi.jsxs)("div",{className:"cart-success-product",children:[(0,gi.jsx)("div",{className:"product-preview-image",children:(0,gi.jsx)("img",{src:Sr(null===(t=r.images)||void 0===t?void 0:t[0]),alt:r.name,onError:e=>{e.target.src="/logo192.png"}})}),(0,gi.jsxs)("div",{className:"product-preview-details",children:[(0,gi.jsx)("h3",{className:"product-preview-name",children:r.name}),(0,gi.jsxs)("div",{className:"product-preview-meta",children:[(0,gi.jsxs)("span",{className:"product-preview-quantity",children:["Qty: ",s]}),(0,gi.jsx)("span",{className:"product-preview-price",children:l(r.price*s)})]})]})]}),(0,gi.jsxs)("div",{className:"cart-success-actions",children:[(0,gi.jsx)("button",{className:"cart-success-btn cart-success-btn-secondary",onClick:()=>{i(),a&&a()},children:"Continue Shopping"}),(0,gi.jsx)(Re,{to:"/cart",className:"cart-success-btn cart-success-btn-primary",onClick:()=>{i(),o&&o()},children:"View Cart"})]})]})]})})},jc=e=>{let{isOpen:t,onClose:n,onConfirm:i,title:r,message:s,confirmText:a="Confirm",cancelText:o="Cancel",type:l="default"}=e;if(!t)return null;return(0,gi.jsx)("div",{className:"confirmation-modal-overlay",onClick:n,children:(0,gi.jsxs)("div",{className:"confirmation-modal",onClick:e=>e.stopPropagation(),children:[(0,gi.jsx)("button",{className:"confirmation-modal-close",onClick:n,children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,gi.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,gi.jsxs)("div",{className:"confirmation-modal-content",children:[(0,gi.jsx)("div",{className:"confirmation-modal-icon",children:(()=>{switch(l){case"warning":case"danger":return(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"success":return(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});default:return(0,gi.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M13 16H12V12H11M12 8H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}})()}),(0,gi.jsx)("h3",{className:"confirmation-modal-title",children:r||"Confirm Action"}),(0,gi.jsx)("p",{className:"confirmation-modal-message",children:s||"Are you sure you want to proceed?"})]}),(0,gi.jsxs)("div",{className:"confirmation-modal-actions",children:[(0,gi.jsx)("button",{onClick:n,className:"confirmation-btn confirmation-btn-cancel",children:o}),(0,gi.jsx)("button",{onClick:i,className:(()=>{switch(l){case"warning":return"confirmation-btn confirmation-btn-warning";case"danger":return"confirmation-btn confirmation-btn-danger";case"success":return"confirmation-btn confirmation-btn-success";default:return"confirmation-btn confirmation-btn-info"}})(),children:a})]})]})})},Ic=e=>{let{size:t="medium",text:n="Loading...",overlay:i=!1,fullScreen:r=!1,className:s=""}=e;const a=["loading-spinner","loading-spinner--".concat(t),i?"loading-spinner--overlay":"",r?"loading-spinner--fullscreen":"",s].filter(Boolean).join(" "),o=(()=>{switch(t){case"small":return{height:20,width:20};case"large":return{height:80,width:80};default:return{height:40,width:40}}})();return(0,gi.jsx)("div",{className:a,children:(0,gi.jsxs)("div",{className:"loading-spinner__container",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:o.height,width:o.width}),n&&(0,gi.jsx)("div",{className:"loading-spinner__text",children:n})]})})},kc=e=>{let{isLoading:t,text:n="Loading page...",children:i}=e;return t?(0,gi.jsx)(Ic,{size:"large",text:n,fullScreen:!0}):i},Bc=e=>{let{productId:t,productName:n,onSubmit:i,onCancel:s}=e;const{user:a}=xi(),[o,l]=(0,r.useState)({name:"",email:"",rating:5,title:"",comment:"",images:[]}),[c,u]=(0,r.useState)({}),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),[f,g]=(0,r.useState)({loading:!0,canReview:!0,reason:""});(0,r.useEffect)(()=>{(async()=>{if(a&&a.id)try{g(e=>Fe(Fe({},e),{},{loading:!0}));const e=await Pc(t,a.id);g({loading:!1,canReview:e.canReview,reason:e.reason}),m(e.canReview)}catch(RT){g({loading:!1,canReview:!1,reason:"Error checking purchase status"}),m(!1)}else g({loading:!1,canReview:!1,reason:"Please login to leave a review"}),m(!1)})()},[t,a]),(0,r.useEffect)(()=>{},[o.rating]);const v=e=>{const{name:t,value:n}=e.target;l(e=>Fe(Fe({},e),{},{[t]:n})),c[t]&&u(e=>Fe(Fe({},e),{},{[t]:""}))},x=e=>{l(t=>Fe(Fe({},t),{},{rating:e})),c.rating&&u(e=>Fe(Fe({},e),{},{rating:""}))};return(0,gi.jsx)("div",{className:"review-form-container",children:(0,gi.jsxs)("div",{className:"review-form",children:[(0,gi.jsxs)("div",{className:"form-header",children:[(0,gi.jsxs)("div",{className:"header-content",children:[(0,gi.jsx)(ec,{size:24,className:"header-icon"}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h3",{children:"Share Your Experience"}),(0,gi.jsxs)("p",{className:"form-subtitle",children:["Help others by sharing your honest review of ",n]})]})]}),(0,gi.jsxs)("p",{className:"form-note",children:[(0,gi.jsxs)("span",{className:"privacy-note",children:[(0,gi.jsx)(Bl,{size:14,className:"privacy-icon"}),"Your email will not be published"]}),(0,gi.jsx)("span",{className:"required-note",children:"* Required fields"})]})]}),f.loading?(0,gi.jsxs)("div",{className:"purchase-requirement-message loading",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:20,width:20}),(0,gi.jsx)("span",{children:"Checking purchase status..."})]}):p?null:(0,gi.jsxs)("div",{className:"purchase-requirement-message error",children:[(0,gi.jsx)(sc,{size:20,className:"warning-icon"}),(0,gi.jsxs)("div",{className:"message-content",children:[(0,gi.jsx)("h4",{children:"Purchase Required"}),(0,gi.jsx)("p",{children:f.reason}),(0,gi.jsx)("p",{className:"help-text",children:"You can only review products you have purchased and received. Please complete a purchase of this product first."})]})]}),(0,gi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return o.name.trim()||(e.name="Name is required"),o.email.trim()?/\S+@\S+\.\S+/.test(o.email)||(e.email="Email is invalid"):e.email="Email is required",o.title.trim()||(e.title="Review title is required"),o.comment.trim()||(e.comment="Review content is required"),(!o.rating||o.rating<1||o.rating>5)&&(e.rating="Please select a rating between 1 and 5 stars"),u(e),0===Object.keys(e).length})()){h(!0);try{const e=Number(o.rating);if(isNaN(e)||e<1||e>5)return u({submit:"Please select a valid rating between 1 and 5 stars"}),void h(!1);const n=new FormData;n.append("name",o.name),n.append("email",o.email),n.append("rating",String(e)),n.append("title",o.title),n.append("comment",o.comment),n.append("productId",t),a&&a.id&&n.append("customerId",a.id),o.images.forEach((e,t)=>{n.append("images",e.file)});const r=await i(n);r.success?(l({name:"",email:"",rating:5,title:"",comment:"",images:[]}),u({})):u({submit:r.error})}catch(RT){u({submit:"Failed to submit review"})}finally{h(!1)}}},style:{display:p?"block":"none"},children:[(0,gi.jsxs)("div",{className:"form-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)(Ll,{size:20,className:"section-icon"}),(0,gi.jsx)("h4",{children:"Your Information"})]}),(0,gi.jsxs)("div",{className:"form-row",children:[(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsxs)("label",{htmlFor:"name",children:[(0,gi.jsx)(Ll,{size:16,className:"label-icon"}),"Full Name *"]}),(0,gi.jsx)("div",{className:"input-wrapper",children:(0,gi.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:v,placeholder:"Enter your full name",className:c.name?"error":""})}),c.name&&(0,gi.jsx)("span",{className:"error-message",children:c.name})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsxs)("label",{htmlFor:"email",children:[(0,gi.jsx)(ec,{size:16,className:"label-icon"}),"Email Address *"]}),(0,gi.jsx)("div",{className:"input-wrapper",children:(0,gi.jsx)("input",{type:"email",id:"email",name:"email",value:o.email,onChange:v,placeholder:"your.email@example.com",className:c.email?"error":""})}),c.email&&(0,gi.jsx)("span",{className:"error-message",children:c.email})]})]})]}),(0,gi.jsxs)("div",{className:"form-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)(ql,{size:20,className:"section-icon"}),(0,gi.jsx)("h4",{children:"Rate This Product"})]}),(0,gi.jsxs)("div",{className:"rating-section",children:[(0,gi.jsxs)("div",{className:"rating-label-container",children:[(0,gi.jsx)("label",{children:"How would you rate this product? *"}),(0,gi.jsx)("div",{className:"rating-description",children:(0,gi.jsxs)("span",{className:"rating-text",children:[1===o.rating&&"Poor - Not satisfied",2===o.rating&&"Fair - Below expectations",3===o.rating&&"Good - Meets expectations",4===o.rating&&"Very Good - Exceeds expectations",5===o.rating&&"Excellent - Outstanding quality"]})})]}),(0,gi.jsx)("div",{className:"rating-input",children:(e=>{const t=[];for(let n=1;n<=5;n++)t.push((0,gi.jsx)("button",{type:"button",className:"star-btn ".concat(n<=e?"active":""),onClick:()=>x(n),children:(0,gi.jsx)(ql,{size:20})},n));return t})(o.rating)}),c.rating&&(0,gi.jsx)("span",{className:"error-message",children:c.rating})]})]}),(0,gi.jsxs)("div",{className:"form-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)(ec,{size:20,className:"section-icon"}),(0,gi.jsx)("h4",{children:"Your Review"})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsxs)("label",{htmlFor:"title",children:[(0,gi.jsx)(ec,{size:16,className:"label-icon"}),"Review Title *"]}),(0,gi.jsx)("div",{className:"input-wrapper",children:(0,gi.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:v,placeholder:"Summarize your experience in a few words",className:c.title?"error":""})}),c.title&&(0,gi.jsx)("span",{className:"error-message",children:c.title})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsxs)("label",{htmlFor:"comment",children:[(0,gi.jsx)(ec,{size:16,className:"label-icon"}),"Detailed Review *"]}),(0,gi.jsxs)("div",{className:"textarea-wrapper",children:[(0,gi.jsx)("textarea",{id:"comment",name:"comment",value:o.comment,onChange:v,placeholder:"Share your detailed experience with this product. What did you like? What could be improved? How does it meet your needs?",rows:"6",className:c.comment?"error":""}),(0,gi.jsxs)("div",{className:"character-count",children:[o.comment.length,"/500 characters"]})]}),c.comment&&(0,gi.jsx)("span",{className:"error-message",children:c.comment})]})]}),(0,gi.jsxs)("div",{className:"form-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)(Hl,{size:20,className:"section-icon"}),(0,gi.jsx)("h4",{children:"Add Photos or Videos"}),(0,gi.jsx)("span",{className:"optional-badge",children:"Optional"})]}),(0,gi.jsxs)("div",{className:"upload-section",children:[(0,gi.jsxs)("div",{className:"upload-info",children:[(0,gi.jsx)("p",{children:"Help others by sharing photos or videos of the product"}),(0,gi.jsxs)("div",{className:"upload-tips",children:[(0,gi.jsxs)("span",{className:"tip",children:[(0,gi.jsx)(Hl,{size:12,className:"tip-icon"}),"Show the product in use"]}),(0,gi.jsxs)("span",{className:"tip",children:[(0,gi.jsx)(ac,{size:12,className:"tip-icon"}),"Share unboxing or setup videos"]}),(0,gi.jsxs)("span",{className:"tip",children:[(0,gi.jsx)(oc,{size:12,className:"tip-icon"}),"Highlight key features"]})]})]}),(0,gi.jsxs)("div",{className:"upload-zone",children:[(0,gi.jsxs)("div",{className:"upload-content",children:[(0,gi.jsxs)("div",{className:"upload-icons",children:[(0,gi.jsx)(tc,{size:32,className:"upload-icon"}),(0,gi.jsx)(nc,{size:32,className:"upload-icon"})]}),(0,gi.jsxs)("div",{className:"upload-text",children:[(0,gi.jsx)("h5",{children:"Drag & Drop or Click to Upload"}),(0,gi.jsx)("p",{children:"Support: JPG, PNG, MP4, MOV (Max 10MB each)"})]}),(0,gi.jsxs)("button",{type:"button",className:"browse-btn",children:[(0,gi.jsx)(Hl,{size:16}),"Choose Files"]})]}),(0,gi.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=Array.from(e.target.files),n=[...t.filter(e=>e.type.startsWith("image/")),...t.filter(e=>e.type.startsWith("video/"))].map(e=>({file:e,url:URL.createObjectURL(e),type:e.type.startsWith("video/")?"video":"image"}));l(e=>Fe(Fe({},e),{},{images:[...e.images,...n]}))},className:"file-input"})]}),o.images.length>0&&(0,gi.jsxs)("div",{className:"media-preview",children:[(0,gi.jsx)("div",{className:"preview-header",children:(0,gi.jsxs)("span",{className:"preview-count",children:[o.images.length," file(s) selected"]})}),(0,gi.jsx)("div",{className:"preview-grid",children:o.images.map((e,t)=>(0,gi.jsxs)("div",{className:"preview-item",children:[(0,gi.jsx)("div",{className:"preview-content",children:"video"===e.type?(0,gi.jsxs)("div",{className:"video-preview",children:[(0,gi.jsx)(nc,{size:24,className:"video-icon"}),(0,gi.jsx)("span",{className:"video-label",children:"Video"})]}):(0,gi.jsx)("img",{src:e.url,alt:"Preview ".concat(t+1)})}),(0,gi.jsx)("button",{type:"button",className:"remove-media",onClick:()=>(e=>{l(t=>Fe(Fe({},t),{},{images:t.images.filter((t,n)=>n!==e)}))})(t),title:"Remove file",children:(0,gi.jsx)(Vl,{size:14})})]},t))})]})]})]}),c.submit&&(0,gi.jsxs)("div",{className:"error-message submit-error",children:[(0,gi.jsx)(sc,{size:16,className:"error-icon"}),c.submit]}),(0,gi.jsxs)("div",{className:"form-actions",children:[(0,gi.jsx)("button",{type:"button",className:"cancel-btn",onClick:s,children:"Cancel"}),(0,gi.jsx)("button",{type:"submit",className:"submit-btn",disabled:d,children:d?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)(vl,{color:"#ffffff",height:20,width:20}),"Publishing Review..."]}):(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)(ic,{size:16}),"Publish Review"]})})]})]})]})})},Dc=e=>{let{reviews:t,loading:n,currentPage:i,totalPages:r,onPageChange:s}=e;const a=e=>{const t=new Date(e),n=new Date,i=Math.abs(n-t),r=Math.ceil(i/864e5);return 1===r?"1 day ago":r<7?"".concat(r," days ago"):r<30?"".concat(Math.ceil(r/7)," week").concat(Math.ceil(r/7)>1?"s":""," ago"):r<365?"".concat(Math.ceil(r/30)," month").concat(Math.ceil(r/30)>1?"s":""," ago"):"".concat(Math.ceil(r/365)," year").concat(Math.ceil(r/365)>1?"s":""," ago")},o=e=>{const t=[];for(let n=0;n<5;n++)t.push((0,gi.jsx)("svg",{className:"star ".concat(n<e?"star-filled":"star-empty"),viewBox:"0 0 20 20",fill:n<e?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,gi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n));return t};return n?(0,gi.jsx)("div",{className:"review-list loading",children:(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",gap:"1rem"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:60,width:60}),(0,gi.jsx)("p",{children:"Loading reviews..."})]})}):0===t.length?(0,gi.jsx)("div",{className:"review-list empty",children:(0,gi.jsxs)("div",{className:"empty-state",children:[(0,gi.jsx)("h4",{children:"No reviews yet"}),(0,gi.jsx)("p",{children:"Be the first to review this product!"})]})}):(0,gi.jsxs)("div",{className:"review-list",children:[t.map(e=>{return(0,gi.jsxs)("div",{className:"review-item",children:[(0,gi.jsxs)("div",{className:"review-header",children:[(0,gi.jsxs)("div",{className:"reviewer-info",children:[(0,gi.jsx)("div",{className:"reviewer-avatar",children:e.profileImage?(0,gi.jsx)("img",{src:Sr(e.profileImage),alt:e.customerName}):(0,gi.jsx)("div",{className:"avatar-placeholder",children:(t=e.customerName,t&&"string"===typeof t&&t.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2)||"AN")})}),(0,gi.jsxs)("div",{className:"reviewer-details",children:[(0,gi.jsx)("div",{className:"reviewer-name",children:e.customerName||"Anonymous"}),e.isVerified&&(0,gi.jsx)("div",{className:"verified-badge",children:"(Verified)"})]})]}),(0,gi.jsx)("div",{className:"review-date",children:a(e.createdAt)})]}),(0,gi.jsxs)("div",{className:"review-content",children:[(0,gi.jsx)("h4",{className:"review-title",children:e.title}),(0,gi.jsx)("p",{className:"review-text",children:e.comment}),(0,gi.jsxs)("div",{className:"review-rating",children:[(0,gi.jsx)("div",{className:"rating-stars",children:o(e.rating)}),(0,gi.jsxs)("span",{className:"rating-value",children:[e.rating,".0"]})]}),e.images&&e.images.length>0&&(0,gi.jsx)("div",{className:"review-images",children:e.images.map((e,t)=>(0,gi.jsxs)("div",{className:"review-image",children:[(0,gi.jsx)("img",{src:Sr(e.url),alt:"Review image ".concat(t+1),onClick:()=>window.open(Sr(e.url),"_blank")}),"video"===e.type&&(0,gi.jsx)("div",{className:"play-overlay",children:(0,gi.jsx)("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})]},t))})]})]},e.id);var t}),r>1&&(0,gi.jsxs)("div",{className:"review-pagination",children:[(0,gi.jsx)("button",{className:"pagination-btn",onClick:()=>s(i-1),disabled:1===i,children:"Previous"}),(0,gi.jsxs)("div",{className:"pagination-info",children:["Page ",i," of ",r]}),(0,gi.jsx)("button",{className:"pagination-btn",onClick:()=>s(i+1),disabled:i===r,children:"Next"})]})]})},Oc=e=>{let{stats:t,productName:n}=e;const{averageRating:i,totalReviews:r,ratingDistribution:s}=t;return(0,gi.jsx)("div",{className:"review-stats",children:(0,gi.jsxs)("div",{className:"stats-container",children:[(0,gi.jsxs)("div",{className:"overall-rating",children:[(0,gi.jsx)("div",{className:"rating-number",children:i.toFixed(1)}),(0,gi.jsx)("div",{className:"rating-out-of",children:"out of 5"}),(0,gi.jsx)("div",{className:"rating-stars",children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"large";const n=[],i=Math.floor(e),r=e%1!==0;for(let s=0;s<5;s++)s<i?n.push((0,gi.jsx)("svg",{className:"star star-filled ".concat(t),viewBox:"0 0 20 20",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s)):s===i&&r?n.push((0,gi.jsxs)("svg",{className:"star star-half ".concat(t),viewBox:"0 0 20 20",fill:"currentColor",children:[(0,gi.jsx)("defs",{children:(0,gi.jsxs)("linearGradient",{id:"half-fill",children:[(0,gi.jsx)("stop",{offset:"50%",stopColor:"currentColor"}),(0,gi.jsx)("stop",{offset:"50%",stopColor:"transparent"})]})}),(0,gi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z",fill:"url(#half-fill)"})]},s)):n.push((0,gi.jsx)("svg",{className:"star star-empty ".concat(t),viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,gi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s));return n}(i)}),(0,gi.jsxs)("div",{className:"rating-count",children:["(",r," Review",1!==r?"s":"",")"]})]}),(0,gi.jsx)("div",{className:"rating-distribution",children:[5,4,3,2,1].map(e=>{const t=s[e]||0,n=(e=>0===r?0:Math.round(e/r*100))(t);return(0,gi.jsxs)("div",{className:"rating-bar",children:[(0,gi.jsxs)("div",{className:"rating-label",children:[(0,gi.jsx)("span",{className:"star-count",children:e}),(0,gi.jsx)("svg",{className:"star-icon",viewBox:"0 0 20 20",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]}),(0,gi.jsx)("div",{className:"bar-container",children:(0,gi.jsx)("div",{className:"bar-fill",style:{width:"".concat(n,"%")}})}),(0,gi.jsx)("div",{className:"rating-count",children:t})]},e)})})]})})},Fc=e=>{let{productId:t,productName:n}=e;const{user:i}=xi(),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)({averageRating:0,totalReviews:0,ratingDistribution:{5:0,4:0,3:0,2:0,1:0}}),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)("newest"),[p,m]=(0,r.useState)(1),[f,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v(),x()},[t,d,p]);const v=async()=>{try{u(!0);const e="https://designxcellinv-production.up.railway.app",n=await fetch("".concat(e,"/api/products/").concat(t,"/reviews?sort=").concat(d,"&page=").concat(p,"&limit=").concat(4)),i=await n.json();i.success&&a(i.reviews||[])}catch(RT){}finally{u(!1)}},x=async()=>{try{const e=(new Date).getTime(),n="https://designxcellinv-production.up.railway.app",i=await fetch("".concat(n,"/api/products/").concat(t,"/reviews/stats?_t=").concat(e)),r=await i.json();r.success&&l(r.stats)}catch(RT){}},y=Math.ceil(o.totalReviews/4);return(0,gi.jsxs)("div",{className:"review-section",children:[(0,gi.jsx)(Oc,{stats:o,productName:n}),(0,gi.jsxs)("div",{className:"reviews-header",children:[(0,gi.jsxs)("div",{className:"header-title",children:[(0,gi.jsx)(ec,{size:24,className:"header-icon"}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h3",{children:"Customer Reviews"}),(0,gi.jsx)("p",{className:"header-subtitle",children:o.totalReviews>0?"".concat(o.totalReviews," verified reviews from customers who purchased this product"):"Be the first to share your experience with this product"})]})]}),o.totalReviews>0&&(0,gi.jsxs)("div",{className:"review-controls",children:[(0,gi.jsx)("div",{className:"results-info",children:(0,gi.jsxs)("span",{className:"review-count",children:["Showing ",4*(p-1)+1,"-",Math.min(4*p,o.totalReviews)," of ",o.totalReviews," reviews"]})}),(0,gi.jsxs)("div",{className:"sort-controls",children:[(0,gi.jsx)(rc,{size:16,className:"sort-icon"}),(0,gi.jsx)("label",{children:"Sort by:"}),(0,gi.jsxs)("select",{value:d,onChange:e=>{return t=e.target.value,h(t),void m(1);var t},className:"sort-select",children:[(0,gi.jsx)("option",{value:"newest",children:"Newest First"}),(0,gi.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,gi.jsx)("option",{value:"highest",children:"Highest Rating"}),(0,gi.jsx)("option",{value:"lowest",children:"Lowest Rating"})]})]})]})]}),(0,gi.jsx)(Dc,{reviews:s,loading:c,currentPage:p,totalPages:y,onPageChange:m}),(0,gi.jsx)("div",{className:"add-review-section",children:i?(0,gi.jsx)("div",{className:"review-action-card",children:(0,gi.jsxs)("div",{className:"action-content",children:[(0,gi.jsxs)("div",{className:"action-header",children:[(0,gi.jsx)(ql,{size:24,className:"action-icon"}),(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h4",{children:"Share Your Experience"}),(0,gi.jsx)("p",{children:"Help other customers by sharing your honest review"})]})]}),(0,gi.jsxs)("button",{className:"add-review-btn ".concat(f?"active":""),onClick:()=>g(!f),children:[(0,gi.jsx)($l,{size:18}),f?"Cancel Review":"Write a Review"]})]})}):(0,gi.jsx)("div",{className:"login-prompt-card",children:(0,gi.jsxs)("div",{className:"prompt-content",children:[(0,gi.jsx)(ec,{size:32,className:"prompt-icon"}),(0,gi.jsxs)("div",{className:"prompt-text",children:[(0,gi.jsx)("h4",{children:"Want to share your experience?"}),(0,gi.jsx)("p",{children:"Join our community of verified customers and help others make informed decisions"}),(0,gi.jsx)("a",{href:"/login",className:"login-link",children:"Sign in to write a review"})]})]})})}),f&&(0,gi.jsx)(Bc,{productId:t,productName:n,onSubmit:async e=>{try{let n,r={};if(e instanceof FormData){const t=(null===i||void 0===i?void 0:i.id)||(null===i||void 0===i?void 0:i.customerId)||1;e.append("customerId",t),n=e}else r["Content-Type"]="application/json",n=JSON.stringify(Fe(Fe({},e),{},{customerId:(null===i||void 0===i?void 0:i.id)||(null===i||void 0===i?void 0:i.customerId)||1}));const s="https://designxcellinv-production.up.railway.app",a=await fetch("".concat(s,"/api/products/").concat(t,"/reviews"),{method:"POST",headers:r,body:n,credentials:"include"}),o=await a.json();return o.success?(await v(),await x(),g(!1),{success:!0}):{success:!1,error:o.error}}catch(RT){return{success:!1,error:"Failed to submit review"}}},onCancel:()=>g(!1)})]})},Uc=()=>{const{id:e}=ie(),t=ne(),{addToCart:n}=Ni(),{toggleWishlist:i,isInWishlist:s}=Ji(),{formatPrice:a}=Oi(),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),[p,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(0),[v,x]=(0,r.useState)(1),[y,_]=(0,r.useState)(null),[b,w]=(0,r.useState)(!0),[A,S]=(0,r.useState)("additional-info"),[E,C]=(0,r.useState)(!1),[T,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&(async()=>{try{h(!0);const t=await er(e);console.log("Product data loaded:",t.product),console.log("Product thumbnails:",t.product.thumbnails),console.log("Product images:",t.product.images),t.product.thumbnails&&0!==t.product.thumbnails.length||(console.log("No thumbnails found. To add thumbnails:"),console.log("1. Go to Admin Panel > Products"),console.log("2. Edit the product"),console.log("3. Upload thumbnail images"),console.log("4. Save the product")),l(t.product)}catch(p){console.error("Error loading product:",p),m("Failed to load product details")}finally{h(!1)}})()},[e]),(0,r.useEffect)(()=>{o&&P()},[o]);const P=async()=>{try{const t=await ir(e);u(t.variations||[])}catch(p){console.error("Error loading variations:",p)}},N=e=>{!R||R.length<=1||g("prev"===e?e=>0===e?R.length-1:e-1:e=>e===R.length-1?0:e+1)};if(d)return(0,gi.jsx)(kc,{isLoading:!0,text:"Loading product details..."});if(p||!o)return(0,gi.jsx)("div",{className:"product-detail-page",children:(0,gi.jsx)("div",{className:"pdp-container",children:(0,gi.jsxs)("div",{className:"error-message",children:[(0,gi.jsx)("h2",{children:"Oops! Product not found"}),(0,gi.jsx)("p",{children:p||"The product you requested could not be found."}),(0,gi.jsx)(Re,{to:"/products",className:"btn-primary",children:"Browse All Products"})]})})});const R=[o.image||o.images&&o.images[0]||null,...o.thumbnails||o.images&&o.images.slice(1)||[]].filter(Boolean),L=R[f]||"/logo192.png",j=Sr(L),I=o.hasDiscount&&o.discountInfo,k=I?o.discountInfo.discountedPrice:o.price,B=I?o.price:null,D=(I&&"percentage"===o.discountInfo.discountType&&o.discountInfo.discountValue,y?y.quantity:o.stockQuantity||0),O=D>0,F=[{label:"Home",href:"/"},{label:"Products",href:"/products"},{label:o.name}],U={"@context":"https://schema.org/","@type":"Product",name:null===o||void 0===o?void 0:o.name,description:null===o||void 0===o?void 0:o.description,sku:(null===o||void 0===o?void 0:o.sku)||"FRNC87654ABC",category:null===o||void 0===o?void 0:o.categoryName,brand:{"@type":"Brand",name:"DesignXcel"},offers:{"@type":"Offer",url:window.location.href,priceCurrency:"PHP",price:k,availability:O?"https://schema.org/InStock":"https://schema.org/OutOfStock",seller:{"@type":"Organization",name:"DesignXcel"}},aggregateRating:(null===o||void 0===o?void 0:o.rating)>0?{"@type":"AggregateRating",ratingValue:o.rating,reviewCount:o.reviews||0}:void 0,image:R.map(e=>e.startsWith("/")?"".concat(window.location.origin).concat(e):e)};return(0,gi.jsxs)("div",{className:"product-detail-page",children:[(0,gi.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(U)}}),(0,gi.jsxs)("div",{className:"pdp-container",children:[(0,gi.jsx)(Cl,{items:F}),(0,gi.jsxs)("div",{className:"pdp",children:[(0,gi.jsxs)("div",{className:"pdp-gallery",children:[(0,gi.jsxs)("div",{className:"pdp-gallery-main",children:[(0,gi.jsx)("img",{src:j,alt:o.name,loading:"eager",fetchpriority:"high",width:1200,height:500,sizes:"(max-width: 768px) 100vw, 600px",onError:e=>{e.target.src="/logo192.png"}}),(0,gi.jsx)("button",{className:"nav-arrow nav-arrow-left",onClick:()=>N("prev"),"aria-label":"Previous image",children:(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,gi.jsx)("polyline",{points:"15,18 9,12 15,6"})})}),(0,gi.jsx)("button",{className:"nav-arrow nav-arrow-right",onClick:()=>N("next"),"aria-label":"Next image",children:(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,gi.jsx)("polyline",{points:"9,18 15,12 9,6"})})})]}),(0,gi.jsx)("div",{className:"pdp-thumbs",children:Array.from({length:4},(e,t)=>{const n=R[t+1]||null,i=n?Sr(n):null,r=t+1===f,s=!!n;return(0,gi.jsx)("div",{className:"pdp-thumb ".concat(r?"active":""," ").concat(s?"":"placeholder"),onClick:()=>g(t+1),children:s?(0,gi.jsx)("img",{src:i,alt:"".concat(o.name," thumbnail ").concat(t+1),loading:"lazy",fetchpriority:"low",onError:e=>{e.target.src="/logo192.png"}}):(0,gi.jsxs)("div",{className:"thumbnail-placeholder",children:[(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,gi.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,gi.jsx)("polyline",{points:"21,15 16,10 5,21"})]}),(0,gi.jsxs)("span",{children:["Thumbnail ",t+1]})]})},t)})})]}),(0,gi.jsxs)("div",{className:"pdp-info",children:[(0,gi.jsx)("div",{className:"pdp-category",children:o.categoryName}),(0,gi.jsxs)("div",{className:"pdp-title-row",children:[(0,gi.jsx)("h1",{className:"pdp-title",children:o.name}),(0,gi.jsx)("span",{className:"stock-badge in-stock",children:"In Stock"})]}),o.rating>0&&(0,gi.jsxs)("div",{className:"pdp-rating",children:[(0,gi.jsx)("div",{className:"stars",children:[...Array(5)].map((e,t)=>(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:t<Math.floor(o.rating)?"#F4B400":"#E0E0E0",children:(0,gi.jsx)("path",{d:"M12 2l2.9 6.1 6.7.9-4.8 4.6 1.2 6.6L12 17.8 6 20.2l1.2-6.6L2.4 9l6.7-.9L12 2z"})},t))}),(0,gi.jsxs)("span",{className:"rating-text",children:[o.rating.toFixed(1)," (",o.reviews||245," Review)"]})]}),(0,gi.jsx)("div",{className:"pdp-pricing",children:(0,gi.jsxs)("div",{className:"price-main",children:[(0,gi.jsx)("span",{className:"price-current",children:a(k)}),B&&(0,gi.jsx)("span",{className:"price-original",children:a(B)})]})}),(0,gi.jsx)("div",{className:"pdp-description",children:(0,gi.jsx)("p",{children:o.description||"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna"})}),c.length>0&&(0,gi.jsx)("div",{className:"variation-cards-container",children:c.map(e=>(0,gi.jsxs)("div",{className:"variation-card ".concat(b||(null===y||void 0===y?void 0:y.id)!==e.id?"":"selected"),onClick:()=>(e=>{b||(null===y||void 0===y?void 0:y.id)!==e.id?(w(!1),_(e)):(w(!0),_(null))})(e),title:b||(null===y||void 0===y?void 0:y.id)!==e.id?"Click to select":"Click to unselect",children:[e.imageUrl&&(0,gi.jsx)("div",{className:"variation-image",children:(0,gi.jsx)("img",{src:Sr(e.imageUrl),alt:e.name})}),(0,gi.jsxs)("div",{className:"variation-info",children:[(0,gi.jsx)("h4",{children:e.name}),e.color&&(0,gi.jsxs)("div",{className:"variation-color",children:[(0,gi.jsx)("span",{className:"color-label",children:"Color:"}),(0,gi.jsx)("span",{className:"color-value",children:e.color})]}),(0,gi.jsxs)("div",{className:"variation-quantity",children:[(0,gi.jsx)("span",{className:"quantity-label",children:"Available:"}),(0,gi.jsx)("span",{className:"quantity-value ".concat(e.quantity>0?"in-stock":"out-of-stock"),children:e.quantity>0?e.quantity:"Out of Stock"})]})]})]},e.id))}),(0,gi.jsxs)("div",{className:"pdp-actions",children:[(0,gi.jsxs)("div",{className:"quantity-selector",children:[(0,gi.jsx)("button",{className:"qty-btn qty-minus",onClick:()=>x(Math.max(1,v-1)),disabled:v<=1,children:"-"}),(0,gi.jsx)("span",{className:"qty-value",children:v}),(0,gi.jsx)("button",{className:"qty-btn qty-plus",onClick:()=>x(Math.min(D,v+1)),disabled:v>=D,children:"+"})]}),(0,gi.jsxs)("button",{className:"btn-add-cart",onClick:async()=>{if(o&&v>0&&!T){M(!0);try{const e=Fe(Fe({},o),{},{useOriginalProduct:b,selectedVariation:y});n(e,v),C(!0)}finally{M(!1)}}},disabled:!O||T,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:window.innerWidth<768?"6px":"8px",padding:window.innerWidth<768?"12px 16px":"12px 20px",fontSize:window.innerWidth<768?"14px":"16px",minHeight:window.innerWidth<768?"44px":"48px",transition:"all 0.2s ease"},children:[T&&(0,gi.jsx)(vl,{color:"#ffffff",height:window.innerWidth<768?14:16,width:window.innerWidth<768?14:16}),T?"Adding...":"Add To Cart"]}),(0,gi.jsx)("button",{className:"btn-buy-now",onClick:()=>{t("/3d-products/".concat(e))},disabled:!O,children:"3D Products"}),(0,gi.jsx)("button",{className:"wishlist-btn",onClick:()=>{o&&i(o)},"aria-label":s(null===o||void 0===o?void 0:o.id)?"Remove from wishlist":"Add to wishlist",title:s(null===o||void 0===o?void 0:o.id)?"Remove from wishlist":"Add to wishlist",children:(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:s(null===o||void 0===o?void 0:o.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:(0,gi.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})})]}),(0,gi.jsxs)("div",{className:"pdp-details",children:[(0,gi.jsxs)("div",{children:["ID : ",o.id]}),(0,gi.jsxs)("div",{children:["Category : ",o.categoryName]})]}),(0,gi.jsxs)("div",{className:"share-section",children:[(0,gi.jsx)("span",{className:"share-label",children:"Share :"}),(0,gi.jsxs)("div",{className:"social-icons",children:[(0,gi.jsx)("button",{className:"social-btn facebook","aria-label":"Share on Facebook",children:(0,gi.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,gi.jsx)("button",{className:"social-btn twitter","aria-label":"Share on Twitter",children:(0,gi.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,gi.jsx)("button",{className:"social-btn pinterest","aria-label":"Share on Pinterest",children:(0,gi.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.748-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"})})}),(0,gi.jsx)("button",{className:"social-btn instagram","aria-label":"Share on Instagram",children:(0,gi.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})})]})]})]})]})]}),(0,gi.jsxs)("div",{className:"additional-info-section",children:[(0,gi.jsxs)("div",{className:"info-tabs",children:[(0,gi.jsx)("button",{className:"info-tab ".concat("description"===A?"active":""),onClick:()=>S("description"),children:"Description"}),(0,gi.jsx)("button",{className:"info-tab ".concat("additional-info"===A?"active":""),onClick:()=>S("additional-info"),children:"Additional Information"}),(0,gi.jsx)("button",{className:"info-tab ".concat("review"===A?"active":""),onClick:()=>S("review"),children:"Review"})]}),(0,gi.jsxs)("div",{className:"info-content",children:["description"===A&&(0,gi.jsx)("div",{className:"description-content",children:(0,gi.jsx)("div",{className:"description-text",children:(null===o||void 0===o?void 0:o.description)||(null===o||void 0===o?void 0:o.longDescription)||(0,gi.jsxs)("div",{children:[(0,gi.jsx)("p",{children:"Experience the perfect blend of comfort and style with our premium furniture collection. This exceptional piece combines modern design with superior craftsmanship to create a timeless addition to your space."}),(0,gi.jsx)("h4",{children:"Key Features:"}),(0,gi.jsxs)("ul",{children:[(0,gi.jsx)("li",{children:"Premium quality materials for lasting durability"}),(0,gi.jsx)("li",{children:"Ergonomic design for maximum comfort"}),(0,gi.jsx)("li",{children:"Modern aesthetic that complements any decor"}),(0,gi.jsx)("li",{children:"Easy assembly with detailed instructions"}),(0,gi.jsx)("li",{children:"Professional finish with attention to detail"})]}),(0,gi.jsx)("h4",{children:"Perfect For:"}),(0,gi.jsx)("p",{children:"Whether you're furnishing your home office, living room, or bedroom, this piece offers versatile functionality and timeless appeal. Its neutral design ensures it will remain stylish for years to come."}),(0,gi.jsx)("h4",{children:"Care Instructions:"}),(0,gi.jsx)("p",{children:"Clean with a soft, dry cloth. Avoid harsh chemicals and direct sunlight to maintain the finish. Regular dusting will keep your furniture looking its best."})]})})}),"additional-info"===A&&(0,gi.jsx)("div",{className:"info-table-container",children:(0,gi.jsxs)("table",{className:"info-table",children:[(0,gi.jsx)("thead",{children:(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("th",{children:"Feature"}),(0,gi.jsx)("th",{children:"Description"})]})}),(0,gi.jsxs)("tbody",{children:[(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Product Name"}),(0,gi.jsx)("td",{children:(null===o||void 0===o?void 0:o.name)||"N/A"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Category"}),(0,gi.jsx)("td",{children:(null===o||void 0===o?void 0:o.categoryName)||"N/A"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Brand"}),(0,gi.jsx)("td",{children:(null===o||void 0===o?void 0:o.brand)||"DesignXcel"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Product ID"}),(0,gi.jsx)("td",{children:(null===o||void 0===o?void 0:o.id)||"N/A"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Dimensions"}),(0,gi.jsx)("td",{children:(()=>{try{const e=null===o||void 0===o?void 0:o.specifications;return e&&(e.length||e.width||e.height||e.weight)?(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.length&&(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:"Length:"})," ",e.length," cm"]}),e.width&&(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:"Width:"})," ",e.width," cm"]}),e.height&&(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:"Height:"})," ",e.height," cm"]}),e.weight&&(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:"Weight:"})," ",e.weight," kg"]}),e.notes&&(0,gi.jsxs)("div",{children:[(0,gi.jsx)("strong",{children:"Notes:"})," ",e.notes]})]}):"N/A"}catch(tR){return"N/A"}})()})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Material"}),(0,gi.jsx)("td",{children:(null===o||void 0===o?void 0:o.material)||"N/A"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Color Options"}),(0,gi.jsx)("td",{children:null!==o&&void 0!==o&&o.colors?o.colors.join(", "):(null===o||void 0===o?void 0:o.color)||"N/A"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Stock Status"}),(0,gi.jsx)("td",{children:(null===o||void 0===o?void 0:o.stockQuantity)>0?"In Stock":"Out of Stock"})]}),(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("td",{children:"Price"}),(0,gi.jsx)("td",{children:o?a(o.price):"N/A"})]})]})]})}),"review"===A&&(0,gi.jsxs)("div",{className:"review-content",children:[(0,gi.jsx)("div",{className:"review-tab-header",children:(0,gi.jsxs)("div",{className:"tab-header-content",children:[(0,gi.jsxs)("div",{className:"header-info",children:[(0,gi.jsx)("h3",{children:"Customer Reviews & Ratings"}),(0,gi.jsxs)("p",{children:["Real feedback from verified customers who purchased ",null===o||void 0===o?void 0:o.name]})]}),(0,gi.jsxs)("div",{className:"product-review-summary",children:[(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Product"}),(0,gi.jsx)("span",{className:"summary-value",children:null===o||void 0===o?void 0:o.name})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Category"}),(0,gi.jsx)("span",{className:"summary-value",children:(null===o||void 0===o?void 0:o.categoryName)||"Furniture"})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"ID Number"}),(0,gi.jsx)("span",{className:"summary-value",children:(null===o||void 0===o?void 0:o.id)||"N/A"})]})]})]})}),(0,gi.jsx)(Fc,{productId:e,productName:(null===o||void 0===o?void 0:o.name)||"Product"})]})]})]}),(0,gi.jsx)(Lc,{isOpen:E,onClose:()=>C(!1),product:o,quantity:v,onContinueShopping:()=>C(!1),onViewCart:()=>t("/cart")})]})},zc=e=>{var t,n,i,s;let{product:a}=e;const{id:o,name:l,price:c,images:u,image:d,description:h,rating:p=0,reviews:m=0,hasDiscount:f=!1,discountInfo:g=null,categoryName:v}=a||{id:1,name:"3D Products Furniture",price:0,image:"/logo192.png",description:"Custom furniture piece.",rating:0,reviews:0},{formatPrice:x}=Oi(),y=f&&g?g.discountedPrice:c,_=f&&g?c:null,b=f&&g&&"percentage"===g.discountType?g.discountValue:null,w=a&&(null!==(t=null!==(n=null!==(i=null!==(s=a.StockQuantity)&&void 0!==s?s:a.stock)&&void 0!==i?i:a.quantity)&&void 0!==n?n:a.stockQuantity)&&void 0!==t?t:0),A=0===w?{status:"sold-out",label:"Sold Out",color:"#DC3545",bgColor:"#F8D7DA"}:w<=5?{status:"low-stock",label:"Only ".concat(w," left"),color:"#856404",bgColor:"#FFF3CD"}:w<=10?{status:"limited-stock",label:"Limited Stock",color:"#856404",bgColor:"#FFF3CD"}:{status:"in-stock",label:"In Stock",color:"#155724",bgColor:"#D4EDDA"},S=(null===a||void 0===a?void 0:a.soldQuantity)||(null===a||void 0===a?void 0:a.sold)||0,E=Er(a),{addToCart:C}=Ni(),T=ne(),[M,P]=(0,r.useState)(!1);return(0,gi.jsxs)("div",{className:"product-card-redesigned",onClick:()=>{T("/product/".concat(o))},children:[(0,gi.jsxs)("div",{className:"product-card-image-container",children:[(0,gi.jsx)("div",{className:"model3d-badge-top-right",children:"3D"}),f&&_&&(0,gi.jsx)("div",{className:"discount-badge",children:b?"".concat(b,"% off"):"Sale"}),(0,gi.jsx)("img",{className:"product-image",src:E,alt:l}),(0,gi.jsxs)("div",{className:"action-icons",children:[(0,gi.jsx)("button",{className:"action-icon","aria-label":"Add to wishlist",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,gi.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,gi.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),(0,gi.jsx)("button",{className:"action-icon","aria-label":"Quick view",onClick:e=>{e.preventDefault(),e.stopPropagation(),P(!0)},children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}),(0,gi.jsx)("button",{className:"action-icon","aria-label":"3D Products",onClick:e=>{e.preventDefault(),e.stopPropagation(),T("/3d-products/".concat(o))},title:"3D Products",children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,gi.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,gi.jsx)("path",{d:"M2 12l10 5 10-5"})]})}),(0,gi.jsx)("button",{className:"action-icon","aria-label":"Add to cart",onClick:e=>{e.preventDefault(),e.stopPropagation(),C(a,1)},children:(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,gi.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,gi.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})})]})]}),(0,gi.jsxs)("div",{className:"product-card-content",children:[(0,gi.jsx)("div",{className:"product-category",style:{fontWeight:"bold"},children:v||"3D Products Furniture"}),(0,gi.jsx)("div",{className:"product-name",style:{fontWeight:"bold"},children:l||"3D Products Furniture"}),(0,gi.jsxs)("div",{className:"product-price-section",children:[(0,gi.jsx)("span",{className:"current-price",style:{fontWeight:"bold"},children:x(y)}),_&&(0,gi.jsx)("span",{className:"original-price",style:{fontWeight:"bold"},children:x(_)})]}),(0,gi.jsxs)("div",{className:"product-stock-indicator",children:[(0,gi.jsx)("div",{className:"stock-dot",style:{backgroundColor:A.color}}),(0,gi.jsx)("span",{className:"stock-text",style:{fontWeight:"bold"},children:A.label})]}),(0,gi.jsxs)("div",{className:"product-sold-indicator",children:[(0,gi.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,gi.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,gi.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,gi.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,gi.jsxs)("span",{className:"sold-text",style:{fontWeight:"bold"},children:[S," sold"]})]}),(0,gi.jsxs)("div",{className:"product-rating",children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,gi.jsx)("span",{className:"rating-value",style:{fontWeight:"bold"},children:p?p.toFixed(1):"0.0"})]})]}),(0,gi.jsx)(cc,{open:M,onClose:()=>P(!1),product:a,formatPrice:x,onAddToCart:e=>{C(e,1),P(!1)}})]})},Hc=()=>{const e=ee(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)({categories:[],priceRange:"",search:"",sortBy:"name",featured:!1,inStock:!1,customizable:!1,colors:[],materials:[],outOfStock:!1}),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)("");(0,r.useEffect)(()=>{const t=new URLSearchParams(e.search),n=t.get("category"),i=t.get("search");c(e=>Fe(Fe({},e),{},{categories:n?[n]:[],search:i||""})),n&&p(n)},[e.search]),(0,r.useEffect)(()=>{m()},[]),(0,r.useEffect)(()=>{f()},[t,l]);const m=async()=>{try{const[e,t]=await Promise.all([$i(),nr()]),i=(e.products||[]).filter(e=>e.Has3DModel||e.model3d||e.has3dModel),r=(t.categories||[]).filter(e=>{const t="object"===typeof e&&e.name?e.name:String(e||"").trim();return i.some(e=>e.categoryName===t)});n(i),s([{id:"",name:"All 3D Products Furniture",count:i.length},...r.map(e=>{const t="object"===typeof e&&e.name?e.name:String(e||"").trim();return{id:t,name:t,count:i.filter(e=>e.categoryName===t).length}})])}catch(RT){console.error("Error loading custom furniture data:",RT)}finally{o(!1)}},f=()=>{let e=[...t];if(l.categories&&l.categories.length>0&&(e=e.filter(e=>l.categories.some(t=>{var n,i;return(null===(n=e.categoryId)||void 0===n?void 0:n.toString())===t||e.categoryName===t||(null===(i=e.categoryName)||void 0===i?void 0:i.toLowerCase())===t}))),l.search&&(e=e.filter(e=>e.name.toLowerCase().includes(l.search.toLowerCase())||e.description.toLowerCase().includes(l.search.toLowerCase()))),l.priceRange){const[t,n]=l.priceRange.split("-").map(Number);e=e.filter(e=>{const i=e.hasDiscount&&e.discountInfo?e.discountInfo.discountedPrice:e.price;return 999999===n?i>=t:i>=t&&i<=n})}l.featured&&(e=e.filter(e=>e.featured)),l.inStock&&(e=e.filter(e=>{var t,n,i,r;return(null!==(t=null!==(n=null!==(i=null!==(r=e.StockQuantity)&&void 0!==r?r:e.stock)&&void 0!==i?i:e.quantity)&&void 0!==n?n:e.stockQuantity)&&void 0!==t?t:0)>0})),l.outOfStock&&(e=e.filter(e=>{var t,n,i,r;return 0===(null!==(t=null!==(n=null!==(i=null!==(r=e.StockQuantity)&&void 0!==r?r:e.stock)&&void 0!==i?i:e.quantity)&&void 0!==n?n:e.stockQuantity)&&void 0!==t?t:0)})),l.customizable&&(e=e.filter(e=>e.customizable)),l.materials&&l.materials.length>0&&(e=e.filter(e=>l.materials.some(t=>e.material&&e.material.toLowerCase().includes(t)))),e.sort((e,t)=>{const n=e.hasDiscount&&e.discountInfo?e.discountInfo.discountedPrice:e.price,i=t.hasDiscount&&t.discountInfo?t.discountInfo.discountedPrice:t.price;switch(l.sortBy){case"price-low":return n-i;case"price-high":return i-n;default:return e.name.localeCompare(t.name)}}),d(e)},g=e=>{c(Fe(Fe({},l),e))},v=()=>{c({category:"",priceRange:"",search:"",sortBy:"name",featured:!1,inStock:!1,customizable:!1,colors:[],materials:[],outOfStock:!1})},x=()=>{const e=[];if(l.priceRange){const[t,n]=l.priceRange.split("-");e.push({type:"priceRange",label:"Price: $".concat(t,".00 - $").concat(n,".00"),value:l.priceRange})}return l.inStock&&e.push({type:"inStock",label:"In Stock",value:!0}),e};return a?(0,gi.jsx)("div",{className:"catalog-page",children:(0,gi.jsx)("div",{className:"container",children:(0,gi.jsxs)("div",{className:"loading",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading products..."})]})})}):(0,gi.jsx)("div",{className:"catalog-page",children:(0,gi.jsxs)("div",{className:"container",children:[(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"3D Products Furniture",href:"/3d-products-furniture"},...h?[{label:h}]:[]],title:h?"".concat(h," Collection"):"3D Products Furniture",subtitle:h?"Explore our premium ".concat(h," collection with 3D customization"):"Design and customize your perfect furniture with our interactive 3D configurator"}),(0,gi.jsx)("div",{className:"catalog-header",children:h&&(0,gi.jsx)("div",{className:"category-actions",children:(0,gi.jsx)(Re,{to:"/3d-products-furniture",className:"clear-filter-btn",children:"View All 3D Products Furniture"})})}),(0,gi.jsxs)("div",{className:"catalog-content",children:[(0,gi.jsx)("aside",{className:"catalog-sidebar",children:(0,gi.jsx)(Ec,{categories:i,products:t,filters:l,onFilterChange:g,onClearFilters:v})}),(0,gi.jsxs)("main",{className:"catalog-main",children:[(0,gi.jsxs)("div",{className:"catalog-controls",children:[(0,gi.jsx)("div",{className:"results-info",children:(0,gi.jsxs)("span",{children:["Showing 1-12 of ",u.length," results"]})}),(0,gi.jsx)("div",{className:"catalog-actions",children:(0,gi.jsxs)("select",{value:l.sortBy,onChange:e=>g({sortBy:e.target.value}),className:"sort-select",children:[(0,gi.jsx)("option",{value:"name",children:"Sort by: Default Sorting"}),(0,gi.jsx)("option",{value:"price-low",children:"Price: Low to High"}),(0,gi.jsx)("option",{value:"price-high",children:"Price: High to Low"})]})})]}),x().length>0&&(0,gi.jsxs)("div",{className:"active-filters",children:[x().map((e,t)=>(0,gi.jsxs)("div",{className:"filter-tag",children:[(0,gi.jsx)("span",{children:e.label}),(0,gi.jsx)("button",{onClick:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c("materials"===e&&t?e=>Fe(Fe({},e),{},{materials:e.materials.filter(e=>e!==t)}):t=>Fe(Fe({},t),{},{[e]:"sortBy"===e?"name":!!Array.isArray(t[e])&&[]}))}(e.type,e.value),className:"remove-filter",children:"\xd7"})]},t)),(0,gi.jsx)("button",{onClick:v,className:"clear-all-filters",children:"Clear All"})]}),(0,gi.jsx)("div",{className:"products-grid",children:u.map(e=>(0,gi.jsx)(zc,{product:e},e.id))}),0===u.length&&(0,gi.jsxs)("div",{className:"no-products",children:[(0,gi.jsx)("h3",{children:"No products found"}),(0,gi.jsx)("p",{children:"Try adjusting your filters or search terms"})]})]})]})]})})};function Gc(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Wc="172",Vc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Jc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Yc=0,Xc=1,Zc=2,qc=3,Kc=0,Qc=1,$c=2,eu=3,tu=0,nu=1,iu=2,ru=0,su=1,au=2,ou=3,lu=4,cu=5,uu=100,du=101,hu=102,pu=103,mu=104,fu=200,gu=201,vu=202,xu=203,yu=204,_u=205,bu=206,wu=207,Au=208,Su=209,Eu=210,Cu=211,Tu=212,Mu=213,Pu=214,Nu=0,Ru=1,Lu=2,ju=3,Iu=4,ku=5,Bu=6,Du=7,Ou=0,Fu=1,Uu=2,zu=0,Hu=1,Gu=2,Wu=3,Vu=4,Ju=5,Yu=6,Xu=7,Zu="attached",qu="detached",Ku=300,Qu=301,$u=302,ed=303,td=304,nd=306,id=1e3,rd=1001,sd=1002,ad=1003,od=1004,ld=1004,cd=1005,ud=1005,dd=1006,hd=1007,pd=1007,md=1008,fd=1008,gd=1009,vd=1010,xd=1011,yd=1012,_d=1013,bd=1014,wd=1015,Ad=1016,Sd=1017,Ed=1018,Cd=1020,Td=35902,Md=1021,Pd=1022,Nd=1023,Rd=1024,Ld=1025,jd=1026,Id=1027,kd=1028,Bd=1029,Dd=1030,Od=1031,Fd=1032,Ud=1033,zd=33776,Hd=33777,Gd=33778,Wd=33779,Vd=35840,Jd=35841,Yd=35842,Xd=35843,Zd=36196,qd=37492,Kd=37496,Qd=37808,$d=37809,eh=37810,th=37811,nh=37812,ih=37813,rh=37814,sh=37815,ah=37816,oh=37817,lh=37818,ch=37819,uh=37820,dh=37821,hh=36492,ph=36494,mh=36495,fh=36283,gh=36284,vh=36285,xh=36286,yh=2200,_h=2201,bh=2202,wh=2300,Ah=2301,Sh=2302,Eh=2400,Ch=2401,Th=2402,Mh=2500,Ph=2501,Nh=0,Rh=1,Lh=2,jh=3200,Ih=3201,kh=3202,Bh=3203,Dh=0,Oh=1,Fh="",Uh="srgb",zh="srgb-linear",Hh="linear",Gh="srgb",Wh=0,Vh=7680,Jh=7681,Yh=7682,Xh=7683,Zh=34055,qh=34056,Kh=5386,Qh=512,$h=513,ep=514,tp=515,np=516,ip=517,rp=518,sp=519,ap=512,op=513,lp=514,cp=515,up=516,dp=517,hp=518,pp=519,mp=35044,fp=35048,gp=35040,vp=35045,xp=35049,yp=35041,_p=35046,bp=35050,wp=35042,Ap="100",Sp="300 es",Ep=2e3,Cp=2001;class Tp{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const Mp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Pp=1234567;const Np=Math.PI/180,Rp=180/Math.PI;function Lp(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Mp[255&e]+Mp[e>>8&255]+Mp[e>>16&255]+Mp[e>>24&255]+"-"+Mp[255&t]+Mp[t>>8&255]+"-"+Mp[t>>16&15|64]+Mp[t>>24&255]+"-"+Mp[63&n|128]+Mp[n>>8&255]+"-"+Mp[n>>16&255]+Mp[n>>24&255]+Mp[255&i]+Mp[i>>8&255]+Mp[i>>16&255]+Mp[i>>24&255]).toLowerCase()}function jp(e,t,n){return Math.max(t,Math.min(n,e))}function Ip(e,t){return(e%t+t)%t}function kp(e,t,n){return(1-n)*e+n*t}function Bp(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Dp(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Op={DEG2RAD:Np,RAD2DEG:Rp,generateUUID:Lp,clamp:jp,euclideanModulo:Ip,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:kp,damp:function(e,t,n,i){return kp(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Ip(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Pp=e);let t=Pp+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Np},radToDeg:function(e){return e*Rp},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+i)/2),u=a((t+i)/2),d=s((t-i)/2),h=a((t-i)/2),p=s((i-t)/2),m=a((i-t)/2);switch(r){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*m,l*p,o*c);break;case"YXY":e.set(l*p,o*u,l*m,o*c);break;case"ZYZ":e.set(l*m,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Dp,denormalize:Bp};class Fp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Fp.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=jp(this.x,e.x,t.x),this.y=jp(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=jp(this.x,e,t),this.y=jp(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Up{constructor(e,t,n,i,r,s,a,o,l){Up.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,s,a,o,l)}set(e,t,n,i,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],m=i[0],f=i[3],g=i[6],v=i[1],x=i[4],y=i[7],_=i[2],b=i[5],w=i[8];return r[0]=s*m+a*v+o*_,r[3]=s*f+a*x+o*b,r[6]=s*g+a*y+o*w,r[1]=l*m+c*v+u*_,r[4]=l*f+c*x+u*b,r[7]=l*g+c*y+u*w,r[2]=d*m+h*v+p*_,r[5]=d*f+h*x+p*b,r[8]=d*g+h*y+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,d=a*o-c*r,h=l*r-s*o,p=t*u+n*d+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=u*m,e[1]=(i*l-c*n)*m,e[2]=(a*n-i*s)*m,e[3]=d*m,e[4]=(c*t-i*o)*m,e[5]=(i*r-a*t)*m,e[6]=h*m,e[7]=(n*o-l*t)*m,e[8]=(s*t-n*r)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(zp.makeScale(e,t)),this}rotate(e){return this.premultiply(zp.makeRotation(-e)),this}translate(e,t){return this.premultiply(zp.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const zp=new Up;function Hp(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Gp={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Wp(e,t){return new Gp[e](t)}function Vp(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Jp(){const e=Vp("canvas");return e.style.display="block",e}const Yp={};function Xp(e){e in Yp||(Yp[e]=!0,console.warn(e))}const Zp=(new Up).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),qp=(new Up).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Kp(){const e={enabled:!0,workingColorSpace:zh,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===Gh&&(e.r=$p(e.r),e.g=$p(e.g),e.b=$p(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Gh&&(e.r=em(e.r),e.g=em(e.g),e.b=em(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Fh?Hh:this.spaces[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return e.define({[zh]:{primaries:t,whitePoint:i,transfer:Hh,toXYZ:Zp,fromXYZ:qp,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Uh},outputColorSpaceConfig:{drawingBufferColorSpace:Uh}},[Uh]:{primaries:t,whitePoint:i,transfer:Gh,toXYZ:Zp,fromXYZ:qp,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Uh}}}),e}const Qp=Kp();function $p(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function em(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let tm;class nm{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===tm&&(tm=Vp("canvas")),tm.width=e.width,tm.height=e.height;const n=tm.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=tm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Vp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*$p(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*$p(t[e]/255)):t[e]=$p(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let im=0;class rm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:im++}),this.uuid=Lp(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(sm(i[t].image)):e.push(sm(i[t]))}else e=sm(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function sm(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?nm.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let am=0;class om extends Tp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:om.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:om.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rd,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rd,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dd,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:md,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nd,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:gd,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:om.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Fh;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:am++}),this.uuid=Lp(),this.name="",this.source=new rm(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Fp(0,0),this.repeat=new Fp(1,1),this.center=new Fp(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Up,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ku)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case id:e.x=e.x-Math.floor(e.x);break;case rd:e.x=e.x<0?0:1;break;case sd:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case id:e.y=e.y-Math.floor(e.y);break;case rd:e.y=e.y<0?0:1;break;case sd:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}om.DEFAULT_IMAGE=null,om.DEFAULT_MAPPING=Ku,om.DEFAULT_ANISOTROPY=1;class lm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;lm.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(c-d)<s&&Math.abs(u-m)<s&&Math.abs(p-f)<s){if(Math.abs(c+d)<a&&Math.abs(u+m)<a&&Math.abs(p+f)<a&&Math.abs(l+h+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,x=(c+d)/4,y=(u+m)/4,_=(p+f)/4;return e>o&&e>v?e<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=x/n,r=y/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=x/i,r=_/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=y/r,i=_/r),this.set(n,i,r,t),this}let v=Math.sqrt((f-p)*(f-p)+(u-m)*(u-m)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(u-m)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=jp(this.x,e.x,t.x),this.y=jp(this.y,e.y,t.y),this.z=jp(this.z,e.z,t.z),this.w=jp(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=jp(this.x,e,t),this.y=jp(this.y,e,t),this.z=jp(this.z,e,t),this.w=jp(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cm extends Tp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new lm(0,0,e,t),this.scissorTest=!1,this.viewport=new lm(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:dd,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const r=new om(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let a=0;a<s;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new rm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class um extends cm{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class dm extends om{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ad,this.minFilter=ad,this.wrapR=rd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class hm extends um{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new dm(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class pm extends om{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ad,this.minFilter=ad,this.wrapR=rd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mm extends um{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new pm(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class fm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const d=r[s+0],h=r[s+1],p=r[s+2],m=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(u!==m||o!==d||l!==h||c!==p){let e=1-a;const t=o*d+l*h+c*p+u*m,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*e+d*r,l=l*e+h*r,c=c*e+p*r,u=u*e+m*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],d=r[s+1],h=r[s+2],p=r[s+3];return e[t]=a*p+c*u+o*h-l*d,e[t+1]=o*p+c*d+l*u-a*h,e[t+2]=l*p+c*h+a*d-o*u,e[t+3]=c*p-a*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),d=o(n/2),h=o(i/2),p=o(r/2);switch(s){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class gm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;gm.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(xm.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(xm.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=2*(s*i-a*n),c=2*(a*t-r*i),u=2*(r*n-s*t);return this.x=t+o*l+s*u-a*c,this.y=n+o*c+a*l-r*u,this.z=i+o*u+r*c-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=jp(this.x,e.x,t.x),this.y=jp(this.y,e.y,t.y),this.z=jp(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=jp(this.x,e,t),this.y=jp(this.y,e,t),this.z=jp(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jp(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return vm.copy(this).projectOnVector(e),this.sub(vm)}reflect(e){return this.sub(vm.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vm=new gm,xm=new fm;class ym{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(bm.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(bm.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=bm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,bm):bm.fromBufferAttribute(i,t),bm.applyMatrix4(e.matrixWorld),this.expandByPoint(bm);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),wm.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),wm.copy(n.boundingBox)),wm.applyMatrix4(e.matrixWorld),this.union(wm)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,bm),bm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Pm),Nm.subVectors(this.max,Pm),Am.subVectors(e.a,Pm),Sm.subVectors(e.b,Pm),Em.subVectors(e.c,Pm),Cm.subVectors(Sm,Am),Tm.subVectors(Em,Sm),Mm.subVectors(Am,Em);let t=[0,-Cm.z,Cm.y,0,-Tm.z,Tm.y,0,-Mm.z,Mm.y,Cm.z,0,-Cm.x,Tm.z,0,-Tm.x,Mm.z,0,-Mm.x,-Cm.y,Cm.x,0,-Tm.y,Tm.x,0,-Mm.y,Mm.x,0];return!!jm(t,Am,Sm,Em,Nm)&&(t=[1,0,0,0,1,0,0,0,1],!!jm(t,Am,Sm,Em,Nm)&&(Rm.crossVectors(Cm,Tm),t=[Rm.x,Rm.y,Rm.z],jm(t,Am,Sm,Em,Nm)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bm).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(bm).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(_m[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_m[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_m[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_m[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_m[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_m[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_m[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_m[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_m)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _m=[new gm,new gm,new gm,new gm,new gm,new gm,new gm,new gm],bm=new gm,wm=new ym,Am=new gm,Sm=new gm,Em=new gm,Cm=new gm,Tm=new gm,Mm=new gm,Pm=new gm,Nm=new gm,Rm=new gm,Lm=new gm;function jm(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){Lm.fromArray(e,s);const a=r.x*Math.abs(Lm.x)+r.y*Math.abs(Lm.y)+r.z*Math.abs(Lm.z),o=t.dot(Lm),l=n.dot(Lm),c=i.dot(Lm);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const Im=new ym,km=new gm,Bm=new gm;class Dm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Im.setFromPoints(e).getCenter(n);let i=0;for(let r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;km.subVectors(e,this.center);const t=km.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(km,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Bm.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(km.copy(e.center).add(Bm)),this.expandByPoint(km.copy(e.center).sub(Bm))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Om=new gm,Fm=new gm,Um=new gm,zm=new gm,Hm=new gm,Gm=new gm,Wm=new gm;class Vm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Om)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Om.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Om.copy(this.origin).addScaledVector(this.direction,t),Om.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Fm.copy(e).add(t).multiplyScalar(.5),Um.copy(t).sub(e).normalize(),zm.copy(this.origin).sub(Fm);const r=.5*e.distanceTo(t),s=-this.direction.dot(Um),a=zm.dot(this.direction),o=-zm.dot(Um),l=zm.lengthSq(),c=Math.abs(1-s*s);let u,d,h,p;if(c>0)if(u=s*o-a,d=s*a-o,p=r*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+s*d+2*a)+d*(s*u+d+2*o)+l}else d=r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;else d=-r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;else d<=-p?(u=Math.max(0,-(-s*r+a)),d=u>0?-r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l):d<=p?(u=0,d=Math.min(Math.max(-r,-o),r),h=d*(d+2*o)+l):(u=Math.max(0,-(s*r+a)),d=u>0?r:Math.min(Math.max(-r,-o),r),h=-u*u+d*(d+2*o)+l);else d=s>0?-r:r,u=Math.max(0,-(s*d+a)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Fm).addScaledVector(Um,d),h}intersectSphere(e,t){Om.subVectors(e.center,this.origin);const n=Om.dot(this.direction),i=Om.dot(Om)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||a>i?null:((a>n||n!==n)&&(n=a),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Om)}intersectTriangle(e,t,n,i,r){Hm.subVectors(t,e),Gm.subVectors(n,e),Wm.crossVectors(Hm,Gm);let s,a=this.direction.dot(Wm);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}zm.subVectors(this.origin,e);const o=s*this.direction.dot(Gm.crossVectors(zm,Gm));if(o<0)return null;const l=s*this.direction.dot(Hm.cross(zm));if(l<0)return null;if(o+l>a)return null;const c=-s*zm.dot(Wm);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Jm{constructor(e,t,n,i,r,s,a,o,l,c,u,d,h,p,m,f){Jm.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,s,a,o,l,c,u,d,h,p,m,f)}set(e,t,n,i,r,s,a,o,l,c,u,d,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Jm).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ym.setFromMatrixColumn(e,0).length(),r=1/Ym.setFromMatrixColumn(e,1).length(),s=1/Ym.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=s*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Zm,e,qm)}lookAt(e,t,n){const i=this.elements;return $m.subVectors(e,t),0===$m.lengthSq()&&($m.z=1),$m.normalize(),Km.crossVectors(n,$m),0===Km.lengthSq()&&(1===Math.abs(n.z)?$m.x+=1e-4:$m.z+=1e-4,$m.normalize(),Km.crossVectors(n,$m)),Km.normalize(),Qm.crossVectors($m,Km),i[0]=Km.x,i[4]=Qm.x,i[8]=$m.x,i[1]=Km.y,i[5]=Qm.y,i[9]=$m.y,i[2]=Km.z,i[6]=Qm.z,i[10]=$m.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],x=n[7],y=n[11],_=n[15],b=i[0],w=i[4],A=i[8],S=i[12],E=i[1],C=i[5],T=i[9],M=i[13],P=i[2],N=i[6],R=i[10],L=i[14],j=i[3],I=i[7],k=i[11],B=i[15];return r[0]=s*b+a*E+o*P+l*j,r[4]=s*w+a*C+o*N+l*I,r[8]=s*A+a*T+o*R+l*k,r[12]=s*S+a*M+o*L+l*B,r[1]=c*b+u*E+d*P+h*j,r[5]=c*w+u*C+d*N+h*I,r[9]=c*A+u*T+d*R+h*k,r[13]=c*S+u*M+d*L+h*B,r[2]=p*b+m*E+f*P+g*j,r[6]=p*w+m*C+f*N+g*I,r[10]=p*A+m*T+f*R+g*k,r[14]=p*S+m*M+f*L+g*B,r[3]=v*b+x*E+y*P+_*j,r[7]=v*w+x*C+y*N+_*I,r[11]=v*A+x*T+y*R+_*k,r[15]=v*S+x*M+y*L+_*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*o*u-i*l*u-r*a*d+n*l*d+i*a*h-n*o*h)+e[7]*(+t*o*h-t*l*d+r*s*d-i*s*h+i*l*c-r*o*c)+e[11]*(+t*l*u-t*a*h-r*s*u+n*s*h+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*u+t*a*d+i*s*u-n*s*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=u*f*l-m*d*l+m*o*h-a*f*h-u*o*g+a*d*g,x=p*d*l-c*f*l-p*o*h+s*f*h+c*o*g-s*d*g,y=c*m*l-p*u*l+p*a*h-s*m*h-c*a*g+s*u*g,_=p*u*o-c*m*o-p*a*d+s*m*d+c*a*f-s*u*f,b=t*v+n*x+i*y+r*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=v*w,e[1]=(m*d*r-u*f*r-m*i*h+n*f*h+u*i*g-n*d*g)*w,e[2]=(a*f*r-m*o*r+m*i*l-n*f*l-a*i*g+n*o*g)*w,e[3]=(u*o*r-a*d*r-u*i*l+n*d*l+a*i*h-n*o*h)*w,e[4]=x*w,e[5]=(c*f*r-p*d*r+p*i*h-t*f*h-c*i*g+t*d*g)*w,e[6]=(p*o*r-s*f*r-p*i*l+t*f*l+s*i*g-t*o*g)*w,e[7]=(s*d*r-c*o*r+c*i*l-t*d*l-s*i*h+t*o*h)*w,e[8]=y*w,e[9]=(p*u*r-c*m*r-p*n*h+t*m*h+c*n*g-t*u*g)*w,e[10]=(s*m*r-p*a*r+p*n*l-t*m*l-s*n*g+t*a*g)*w,e[11]=(c*a*r-s*u*r-c*n*l+t*u*l+s*n*h-t*a*h)*w,e[12]=_*w,e[13]=(c*m*i-p*u*i+p*n*d-t*m*d-c*n*f+t*u*f)*w,e[14]=(p*a*i-s*m*i-p*n*o+t*m*o+s*n*f-t*a*f)*w,e[15]=(s*u*i-c*a*i+c*n*o-t*u*o-s*n*d+t*a*d)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,u=a+a,d=r*l,h=r*c,p=r*u,m=s*c,f=s*u,g=a*u,v=o*l,x=o*c,y=o*u,_=n.x,b=n.y,w=n.z;return i[0]=(1-(m+g))*_,i[1]=(h+y)*_,i[2]=(p-x)*_,i[3]=0,i[4]=(h-y)*b,i[5]=(1-(d+g))*b,i[6]=(f+v)*b,i[7]=0,i[8]=(p+x)*w,i[9]=(f-v)*w,i[10]=(1-(d+m))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Ym.set(i[0],i[1],i[2]).length();const s=Ym.set(i[4],i[5],i[6]).length(),a=Ym.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Xm.copy(this);const o=1/r,l=1/s,c=1/a;return Xm.elements[0]*=o,Xm.elements[1]*=o,Xm.elements[2]*=o,Xm.elements[4]*=l,Xm.elements[5]*=l,Xm.elements[6]*=l,Xm.elements[8]*=c,Xm.elements[9]*=c,Xm.elements[10]*=c,t.setFromRotationMatrix(Xm),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ep;const o=this.elements,l=2*r/(t-e),c=2*r/(n-i),u=(t+e)/(t-e),d=(n+i)/(n-i);let h,p;if(a===Ep)h=-(s+r)/(s-r),p=-2*s*r/(s-r);else{if(a!==Cp)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-s/(s-r),p=-s*r/(s-r)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,i,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ep;const o=this.elements,l=1/(t-e),c=1/(n-i),u=1/(s-r),d=(t+e)*l,h=(n+i)*c;let p,m;if(a===Ep)p=(s+r)*u,m=-2*u;else{if(a!==Cp)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=r*u,m=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=m,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ym=new gm,Xm=new Jm,Zm=new gm(0,0,0),qm=new gm(1,1,1),Km=new gm,Qm=new gm,$m=new gm,ef=new Jm,tf=new fm;class nf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nf.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(jp(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-jp(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(jp(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-jp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(jp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-jp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ef.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ef,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return tf.setFromEuler(this),this.setFromQuaternion(tf,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}nf.DEFAULT_ORDER="XYZ";class rf{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let sf=0;const af=new gm,of=new fm,lf=new Jm,cf=new gm,uf=new gm,df=new gm,hf=new fm,pf=new gm(1,0,0),mf=new gm(0,1,0),ff=new gm(0,0,1),gf={type:"added"},vf={type:"removed"},xf={type:"childadded",child:null},yf={type:"childremoved",child:null};class _f extends Tp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sf++}),this.uuid=Lp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_f.DEFAULT_UP.clone();const e=new gm,t=new nf,n=new fm,i=new gm(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Jm},normalMatrix:{value:new Up}}),this.matrix=new Jm,this.matrixWorld=new Jm,this.matrixAutoUpdate=_f.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=_f.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return of.setFromAxisAngle(e,t),this.quaternion.multiply(of),this}rotateOnWorldAxis(e,t){return of.setFromAxisAngle(e,t),this.quaternion.premultiply(of),this}rotateX(e){return this.rotateOnAxis(pf,e)}rotateY(e){return this.rotateOnAxis(mf,e)}rotateZ(e){return this.rotateOnAxis(ff,e)}translateOnAxis(e,t){return af.copy(e).applyQuaternion(this.quaternion),this.position.add(af.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(pf,e)}translateY(e){return this.translateOnAxis(mf,e)}translateZ(e){return this.translateOnAxis(ff,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lf.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?cf.copy(e):cf.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),uf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lf.lookAt(uf,cf,this.up):lf.lookAt(cf,uf,this.up),this.quaternion.setFromRotationMatrix(lf),i&&(lf.extractRotation(i.matrixWorld),of.setFromRotationMatrix(lf),this.quaternion.premultiply(of.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(gf),xf.child=e,this.dispatchEvent(xf),xf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vf),yf.child=e,this.dispatchEvent(yf),yf.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),lf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),lf.multiply(e.parent.matrixWorld)),e.applyMatrix4(lf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(gf),xf.child=e,this.dispatchEvent(xf),xf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uf,e,df),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uf,hf,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}_f.DEFAULT_UP=new gm(0,1,0),_f.DEFAULT_MATRIX_AUTO_UPDATE=!0,_f.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const bf=new gm,wf=new gm,Af=new gm,Sf=new gm,Ef=new gm,Cf=new gm,Tf=new gm,Mf=new gm,Pf=new gm,Nf=new gm,Rf=new lm,Lf=new lm,jf=new lm;class If{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gm;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),bf.subVectors(e,t),i.cross(bf);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){bf.subVectors(i,t),wf.subVectors(n,t),Af.subVectors(e,t);const s=bf.dot(bf),a=bf.dot(wf),o=bf.dot(Af),l=wf.dot(wf),c=wf.dot(Af),u=s*l-a*a;if(0===u)return r.set(0,0,0),null;const d=1/u,h=(l*o-a*c)*d,p=(s*c-a*o)*d;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,Sf)&&(Sf.x>=0&&Sf.y>=0&&Sf.x+Sf.y<=1)}static getInterpolation(e,t,n,i,r,s,a,o){return null===this.getBarycoord(e,t,n,i,Sf)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,Sf.x),o.addScaledVector(s,Sf.y),o.addScaledVector(a,Sf.z),o)}static getInterpolatedAttribute(e,t,n,i,r,s){return Rf.setScalar(0),Lf.setScalar(0),jf.setScalar(0),Rf.fromBufferAttribute(e,t),Lf.fromBufferAttribute(e,n),jf.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(Rf,r.x),s.addScaledVector(Lf,r.y),s.addScaledVector(jf,r.z),s}static isFrontFacing(e,t,n,i){return bf.subVectors(n,t),wf.subVectors(e,t),bf.cross(wf).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return bf.subVectors(this.c,this.b),wf.subVectors(this.a,this.b),.5*bf.cross(wf).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return If.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return If.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return If.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return If.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return If.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,a;Ef.subVectors(i,n),Cf.subVectors(r,n),Mf.subVectors(e,n);const o=Ef.dot(Mf),l=Cf.dot(Mf);if(o<=0&&l<=0)return t.copy(n);Pf.subVectors(e,i);const c=Ef.dot(Pf),u=Cf.dot(Pf);if(c>=0&&u<=c)return t.copy(i);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(Ef,s);Nf.subVectors(e,r);const h=Ef.dot(Nf),p=Cf.dot(Nf);if(p>=0&&h<=p)return t.copy(r);const m=h*l-o*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Cf,a);const f=c*p-h*u;if(f<=0&&u-c>=0&&h-p>=0)return Tf.subVectors(r,i),a=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(Tf,a);const g=1/(f+m+d);return s=m*g,a=d*g,t.copy(n).addScaledVector(Ef,s).addScaledVector(Cf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const kf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bf={h:0,s:0,l:0},Df={h:0,s:0,l:0};function Of(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Ff{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uh;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Qp.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qp.workingColorSpace;return this.r=e,this.g=t,this.b=n,Qp.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qp.workingColorSpace;if(e=Ip(e,1),t=jp(t,0,1),n=jp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Of(r,i,e+1/3),this.g=Of(r,i,e),this.b=Of(r,i,e-1/3)}return Qp.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uh;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=t[1],a=t[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uh;const n=kf[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$p(e.r),this.g=$p(e.g),this.b=$p(e.b),this}copyLinearToSRGB(e){return this.r=em(e.r),this.g=em(e.g),this.b=em(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uh;return Qp.fromWorkingColorSpace(Uf.copy(this),e),65536*Math.round(jp(255*Uf.r,0,255))+256*Math.round(jp(255*Uf.g,0,255))+Math.round(jp(255*Uf.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uh;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp.workingColorSpace;Qp.fromWorkingColorSpace(Uf.copy(this),t);const n=Uf.r,i=Uf.g,r=Uf.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp.workingColorSpace;return Qp.fromWorkingColorSpace(Uf.copy(this),t),e.r=Uf.r,e.g=Uf.g,e.b=Uf.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uh;Qp.fromWorkingColorSpace(Uf.copy(this),e);const t=Uf.r,n=Uf.g,i=Uf.b;return e!==Uh?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(Bf),this.setHSL(Bf.h+e,Bf.s+t,Bf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Bf),e.getHSL(Df);const n=kp(Bf.h,Df.h,t),i=kp(Bf.s,Df.s,t),r=kp(Bf.l,Df.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Uf=new Ff;Ff.NAMES=kf;let zf=0;class Hf extends Tp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:zf++}),this.uuid=Lp(),this.name="",this.type="Material",this.blending=su,this.side=tu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yu,this.blendDst=_u,this.blendEquation=uu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ff(0,0,0),this.blendAlpha=0,this.depthFunc=ju,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sp,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vh,this.stencilZFail=Vh,this.stencilZPass=Vh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==su&&(n.blending=this.blending),this.side!==tu&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==yu&&(n.blendSrc=this.blendSrc),this.blendDst!==_u&&(n.blendDst=this.blendDst),this.blendEquation!==uu&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ju&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==sp&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Vh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Vh&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Gf extends Hf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ff(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nf,this.combine=Ou,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Wf=Vf();function Vf(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,s[l]=e|t}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function Jf(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=jp(e,-65504,65504),Wf.floatView[0]=e;const t=Wf.uint32View[0],n=t>>23&511;return Wf.baseTable[n]+((8388607&t)>>Wf.shiftTable[n])}function Yf(e){const t=e>>10;return Wf.uint32View[0]=Wf.mantissaTable[Wf.offsetTable[t]+(1023&e)]+Wf.exponentTable[t],Wf.floatView[0]}const Xf={toHalfFloat:Jf,fromHalfFloat:Yf},Zf=new gm,qf=new Fp;class Kf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=mp,this.updateRanges=[],this.gpuType=wd,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)qf.fromBufferAttribute(this,t),qf.applyMatrix3(e),this.setXY(t,qf.x,qf.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Zf.fromBufferAttribute(this,t),Zf.applyMatrix3(e),this.setXYZ(t,Zf.x,Zf.y,Zf.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Zf.fromBufferAttribute(this,t),Zf.applyMatrix4(e),this.setXYZ(t,Zf.x,Zf.y,Zf.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Zf.fromBufferAttribute(this,t),Zf.applyNormalMatrix(e),this.setXYZ(t,Zf.x,Zf.y,Zf.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Zf.fromBufferAttribute(this,t),Zf.transformDirection(e),this.setXYZ(t,Zf.x,Zf.y,Zf.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Bp(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Dp(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Bp(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Bp(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Bp(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Bp(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array),i=Dp(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array),i=Dp(i,this.array),r=Dp(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==mp&&(e.usage=this.usage),e}}class Qf extends Kf{constructor(e,t,n){super(new Int8Array(e),t,n)}}class $f extends Kf{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class eg extends Kf{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class tg extends Kf{constructor(e,t,n){super(new Int16Array(e),t,n)}}class ng extends Kf{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ig extends Kf{constructor(e,t,n){super(new Int32Array(e),t,n)}}class rg extends Kf{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class sg extends Kf{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Yf(this.array[e*this.itemSize]);return this.normalized&&(t=Bp(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize]=Jf(t),this}getY(e){let t=Yf(this.array[e*this.itemSize+1]);return this.normalized&&(t=Bp(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize+1]=Jf(t),this}getZ(e){let t=Yf(this.array[e*this.itemSize+2]);return this.normalized&&(t=Bp(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize+2]=Jf(t),this}getW(e){let t=Yf(this.array[e*this.itemSize+3]);return this.normalized&&(t=Bp(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dp(t,this.array)),this.array[e*this.itemSize+3]=Jf(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array)),this.array[e+0]=Jf(t),this.array[e+1]=Jf(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array),i=Dp(i,this.array)),this.array[e+0]=Jf(t),this.array[e+1]=Jf(n),this.array[e+2]=Jf(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array),i=Dp(i,this.array),r=Dp(r,this.array)),this.array[e+0]=Jf(t),this.array[e+1]=Jf(n),this.array[e+2]=Jf(i),this.array[e+3]=Jf(r),this}}class ag extends Kf{constructor(e,t,n){super(new Float32Array(e),t,n)}}let og=0;const lg=new Jm,cg=new _f,ug=new gm,dg=new ym,hg=new ym,pg=new gm;class mg extends Tp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:og++}),this.uuid=Lp(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Hp(e)?rg:ng)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Up).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return lg.makeRotationFromQuaternion(e),this.applyMatrix4(lg),this}rotateX(e){return lg.makeRotationX(e),this.applyMatrix4(lg),this}rotateY(e){return lg.makeRotationY(e),this.applyMatrix4(lg),this}rotateZ(e){return lg.makeRotationZ(e),this.applyMatrix4(lg),this}translate(e,t,n){return lg.makeTranslation(e,t,n),this.applyMatrix4(lg),this}scale(e,t,n){return lg.makeScale(e,t,n),this.applyMatrix4(lg),this}lookAt(e){return cg.lookAt(e),cg.updateMatrix(),this.applyMatrix4(cg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ug).negate(),this.translate(ug.x,ug.y,ug.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new ag(t,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const n=e[i];t.setXYZ(i,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ym);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new gm(-1/0,-1/0,-1/0),new gm(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];dg.setFromBufferAttribute(e),this.morphTargetsRelative?(pg.addVectors(this.boundingBox.min,dg.min),this.boundingBox.expandByPoint(pg),pg.addVectors(this.boundingBox.max,dg.max),this.boundingBox.expandByPoint(pg)):(this.boundingBox.expandByPoint(dg.min),this.boundingBox.expandByPoint(dg.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Dm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new gm,1/0);if(e){const n=this.boundingSphere.center;if(dg.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];hg.setFromBufferAttribute(n),this.morphTargetsRelative?(pg.addVectors(dg.min,hg.min),dg.expandByPoint(pg),pg.addVectors(dg.max,hg.max),dg.expandByPoint(pg)):(dg.expandByPoint(hg.min),dg.expandByPoint(hg.max))}dg.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)pg.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(pg));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)pg.fromBufferAttribute(s,t),a&&(ug.fromBufferAttribute(e,t),pg.add(ug)),i=Math.max(i,n.distanceToSquared(pg))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Kf(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),a=[],o=[];for(let A=0;A<n.count;A++)a[A]=new gm,o[A]=new gm;const l=new gm,c=new gm,u=new gm,d=new Fp,h=new Fp,p=new Fp,m=new gm,f=new gm;function g(e,t,i){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,i),d.fromBufferAttribute(r,e),h.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),c.sub(l),u.sub(l),h.sub(d),p.sub(d);const s=1/(h.x*p.y-p.x*h.y);isFinite(s)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(u,-h.y).multiplyScalar(s),f.copy(u).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(s),a[e].add(m),a[t].add(m),a[i].add(m),o[e].add(f),o[t].add(f),o[i].add(f))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let A=0,S=v.length;A<S;++A){const t=v[A],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)g(e.getX(i+0),e.getX(i+1),e.getX(i+2))}const x=new gm,y=new gm,_=new gm,b=new gm;function w(e){_.fromBufferAttribute(i,e),b.copy(_);const t=a[e];x.copy(t),x.sub(_.multiplyScalar(_.dot(t))).normalize(),y.crossVectors(b,t);const n=y.dot(o[e])<0?-1:1;s.setXYZW(e,x.x,x.y,x.z,n)}for(let A=0,S=v.length;A<S;++A){const t=v[A],n=t.start;for(let i=n,r=n+t.count;i<r;i+=3)w(e.getX(i+0)),w(e.getX(i+1)),w(e.getX(i+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Kf(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new gm,r=new gm,s=new gm,a=new gm,o=new gm,l=new gm,c=new gm,u=new gm;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),m=e.getX(d+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),a.add(c),o.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)pg.fromBufferAttribute(e,t),pg.normalize(),e.setXYZ(t,pg.x,pg.y,pg.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new Kf(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mg,n=this.index.array,i=this.attributes;for(const a in i){const r=e(i[a],n);t.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],s=r[a];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],n);i.push(r)}t.morphAttributes[a]=i}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const e=s[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const e=s[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fg=new Jm,gg=new Vm,vg=new Dm,xg=new gm,yg=new gm,_g=new gm,bg=new gm,wg=new gm,Ag=new gm,Sg=new gm,Eg=new gm;class Cg extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gf;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){Ag.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(wg.fromBufferAttribute(o,e),s?Ag.addScaledVector(wg,i):Ag.addScaledVector(wg.sub(t),i))}t.add(Ag)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),vg.copy(n.boundingSphere),vg.applyMatrix4(r),gg.copy(e.ray).recast(e.near),!1===vg.containsPoint(gg.origin)){if(null===gg.intersectSphere(vg,xg))return;if(gg.origin.distanceToSquared(xg)>(e.far-e.near)**2)return}fg.copy(r).invert(),gg.copy(e.ray).applyMatrix4(fg),null!==n.boundingBox&&!1===gg.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,gg)}}_computeIntersections(e,t,n){let i;const r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,d=r.groups,h=r.drawRange;if(null!==a)if(Array.isArray(s))for(let p=0,m=d.length;p<m;p++){const r=d[p],o=s[r.materialIndex];for(let s=Math.max(r.start,h.start),d=Math.min(a.count,Math.min(r.start+r.count,h.start+h.count));s<d;s+=3){i=Tg(this,o,e,n,l,c,u,a.getX(s),a.getX(s+1),a.getX(s+2)),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),o=Math.min(a.count,h.start+h.count);r<o;r+=3){i=Tg(this,s,e,n,l,c,u,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(s))for(let p=0,m=d.length;p<m;p++){const r=d[p],a=s[r.materialIndex];for(let s=Math.max(r.start,h.start),d=Math.min(o.count,Math.min(r.start+r.count,h.start+h.count));s<d;s+=3){i=Tg(this,a,e,n,l,c,u,s,s+1,s+2),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),a=Math.min(o.count,h.start+h.count);r<a;r+=3){i=Tg(this,s,e,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function Tg(e,t,n,i,r,s,a,o,l,c){e.getVertexPosition(o,yg),e.getVertexPosition(l,_g),e.getVertexPosition(c,bg);const u=function(e,t,n,i,r,s,a,o){let l;if(l=t.side===nu?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side===tu,o),null===l)return null;Eg.copy(o),Eg.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Eg);return c<n.near||c>n.far?null:{distance:c,point:Eg.clone(),object:e}}(e,t,n,i,yg,_g,bg,Sg);if(u){const e=new gm;If.getBarycoord(Sg,yg,_g,bg,e),r&&(u.uv=If.getInterpolatedAttribute(r,o,l,c,e,new Fp)),s&&(u.uv1=If.getInterpolatedAttribute(s,o,l,c,e,new Fp)),a&&(u.normal=If.getInterpolatedAttribute(a,o,l,c,e,new gm),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new gm,materialIndex:0};If.getNormal(yg,_g,bg,t.normal),u.face=t,u.barycoord=e}return u}class Mg extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,i,r,s,p,m,f,g,v){const x=s/f,y=p/g,_=s/2,b=p/2,w=m/2,A=f+1,S=g+1;let E=0,C=0;const T=new gm;for(let a=0;a<S;a++){const s=a*y-b;for(let o=0;o<A;o++){const d=o*x-_;T[e]=d*i,T[t]=s*r,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=m>0?1:-1,c.push(T.x,T.y,T.z),u.push(o/f),u.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let e=0;e<f;e++){const t=d+e+A*a,n=d+e+A*(a+1),i=d+(e+1)+A*(a+1),r=d+(e+1)+A*a;o.push(t,n,r),o.push(n,i,r),C+=6}a.addGroup(h,C,v),h+=C,d+=E}p("z","y","x",-1,-1,n,t,e,s,r,0),p("z","y","x",1,-1,n,t,-e,s,r,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new ag(l,3)),this.setAttribute("normal",new ag(c,3)),this.setAttribute("uv",new ag(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pg(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Ng(e){const t={};for(let n=0;n<e.length;n++){const i=Pg(e[n]);for(const e in i)t[e]=i[e]}return t}function Rg(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Qp.workingColorSpace}const Lg={clone:Pg,merge:Ng};class jg extends Hf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pg(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ig extends _f{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jm,this.projectionMatrix=new Jm,this.projectionMatrixInverse=new Jm,this.coordinateSystem=Ep}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const kg=new gm,Bg=new Fp,Dg=new Fp;class Og extends Ig{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Rp*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Np*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Rp*Math.atan(Math.tan(.5*Np*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){kg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(kg.x,kg.y).multiplyScalar(-e/kg.z),kg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(kg.x,kg.y).multiplyScalar(-e/kg.z)}getViewSize(e,t){return this.getViewBounds(e,Bg,Dg),t.subVectors(Dg,Bg)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Np*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fg=-90;class Ug extends _f{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Og(Fg,1,e,t);i.layers=this.layers,this.add(i);const r=new Og(Fg,1,e,t);r.layers=this.layers,this.add(r);const s=new Og(Fg,1,e,t);s.layers=this.layers,this.add(s);const a=new Og(Fg,1,e,t);a.layers=this.layers,this.add(a);const o=new Og(Fg,1,e,t);o.layers=this.layers,this.add(o);const l=new Og(Fg,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,s,a,o]=t;for(const l of t)this.remove(l);if(e===Ep)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Cp)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,s),e.setRenderTarget(n,2,i),e.render(t,a),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class zg extends om{constructor(e,t,n,i,r,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Qu,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Hg extends um{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new zg(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:dd}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Mg(5,5,5),a=new jg({name:"CubemapFromEquirect",uniforms:Pg(n),vertexShader:i,fragmentShader:r,side:nu,blending:ru});a.uniforms.tEquirect.value=t;const o=new Cg(s,a),l=t.minFilter;t.minFilter===md&&(t.minFilter=dd);return new Ug(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(r)}}class Gg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Ff(e),this.density=t}clone(){return new Gg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Wg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Ff(e),this.near=t,this.far=n}clone(){return new Wg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Vg extends _f{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new nf,this.environmentIntensity=1,this.environmentRotation=new nf,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Jg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=mp,this.updateRanges=[],this.version=0,this.uuid=Lp()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Lp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yg=new gm;class Xg{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Yg.fromBufferAttribute(this,t),Yg.applyMatrix4(e),this.setXYZ(t,Yg.x,Yg.y,Yg.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Yg.fromBufferAttribute(this,t),Yg.applyNormalMatrix(e),this.setXYZ(t,Yg.x,Yg.y,Yg.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Yg.fromBufferAttribute(this,t),Yg.transformDirection(e),this.setXYZ(t,Yg.x,Yg.y,Yg.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Bp(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Dp(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Dp(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Dp(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Dp(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Dp(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Bp(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Bp(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Bp(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Bp(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array),i=Dp(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dp(t,this.array),n=Dp(n,this.array),i=Dp(i,this.array),r=Dp(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Kf(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Zg extends Hf{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ff(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qg;const Kg=new gm,Qg=new gm,$g=new gm,ev=new Fp,tv=new Fp,nv=new Jm,iv=new gm,rv=new gm,sv=new gm,av=new Fp,ov=new Fp,lv=new Fp;class cv extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zg;if(super(),this.isSprite=!0,this.type="Sprite",void 0===qg){qg=new mg;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Jg(e,5);qg.setIndex([0,1,2,0,2,3]),qg.setAttribute("position",new Xg(t,3,0,!1)),qg.setAttribute("uv",new Xg(t,2,3,!1))}this.geometry=qg,this.material=e,this.center=new Fp(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qg.setFromMatrixScale(this.matrixWorld),nv.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),$g.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Qg.multiplyScalar(-$g.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;uv(iv.set(-.5,-.5,0),$g,s,Qg,i,r),uv(rv.set(.5,-.5,0),$g,s,Qg,i,r),uv(sv.set(.5,.5,0),$g,s,Qg,i,r),av.set(0,0),ov.set(1,0),lv.set(1,1);let a=e.ray.intersectTriangle(iv,rv,sv,!1,Kg);if(null===a&&(uv(rv.set(-.5,.5,0),$g,s,Qg,i,r),ov.set(0,1),a=e.ray.intersectTriangle(iv,sv,rv,!1,Kg),null===a))return;const o=e.ray.origin.distanceTo(Kg);o<e.near||o>e.far||t.push({distance:o,point:Kg.clone(),uv:If.getInterpolation(Kg,iv,rv,sv,av,ov,lv,new Fp),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function uv(e,t,n,i,r,s){ev.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(tv.x=s*ev.x-r*ev.y,tv.y=r*ev.x+s*ev.y):tv.copy(ev),e.copy(t),e.x+=tv.x,e.y+=tv.y,e.applyMatrix4(nv)}const dv=new gm,hv=new gm;class pv extends _f{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){dv.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(dv);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dv.setFromMatrixPosition(e.matrixWorld),hv.setFromMatrixPosition(this.matrixWorld);const n=dv.distanceTo(hv)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const mv=new gm,fv=new lm,gv=new lm,vv=new gm,xv=new Jm,yv=new gm,_v=new Dm,bv=new Jm,wv=new Vm;class Av extends Cg{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Zu,this.bindMatrix=new Jm,this.bindMatrixInverse=new Jm,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ym),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,yv),this.boundingBox.expandByPoint(yv)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Dm),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,yv),this.boundingSphere.expandByPoint(yv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),_v.copy(this.boundingSphere),_v.applyMatrix4(i),!1!==e.ray.intersectsSphere(_v)&&(bv.copy(i).invert(),wv.copy(e.ray).applyMatrix4(bv),null!==this.boundingBox&&!1===wv.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,wv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lm,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Zu?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===qu?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;fv.fromBufferAttribute(i.attributes.skinIndex,e),gv.fromBufferAttribute(i.attributes.skinWeight,e),mv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=gv.getComponent(r);if(0!==e){const i=fv.getComponent(r);xv.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(vv.copy(mv).applyMatrix4(xv),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Sv extends _f{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ev extends om{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:ad,arguments.length>9&&void 0!==arguments[9]?arguments[9]:ad,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Cv=new Jm,Tv=new Jm;class Mv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Lp(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Jm)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Jm;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const i=e[r]?e[r].matrixWorld:Tv;Cv.multiplyMatrices(i,t[r]),Cv.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new Mv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ev(t,e,e,Nd,wd);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Sv),this.bones.push(r),this.boneInverses.push((new Jm).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}}class Pv extends Kf{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Nv=new Jm,Rv=new Jm,Lv=[],jv=new ym,Iv=new Jm,kv=new Cg,Bv=new Dm;class Dv extends Cg{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pv(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Iv)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ym),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Nv),jv.copy(e.boundingBox).applyMatrix4(Nv),this.boundingBox.union(jv)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Dm),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Nv),Bv.copy(e.boundingSphere).applyMatrix4(Nv),this.boundingSphere.union(Bv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,r=e*(n.length+1)+1;for(let s=0;s<n.length;s++)n[s]=i[r+s]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(kv.geometry=this.geometry,kv.material=this.material,void 0!==kv.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Bv.copy(this.boundingSphere),Bv.applyMatrix4(n),!1!==e.ray.intersectsSphere(Bv)))for(let r=0;r<i;r++){this.getMatrixAt(r,Nv),Rv.multiplyMatrices(n,Nv),kv.matrixWorld=Rv,kv.raycast(e,Lv);for(let e=0,n=Lv.length;e<n;e++){const n=Lv[e];n.instanceId=r,n.object=this,t.push(n)}Lv.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Pv(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;null===this.morphTexture&&(this.morphTexture=new Ev(new Float32Array(i*this.count),i,this.count,kd,wd));const r=this.morphTexture.source.data.data;let s=0;for(let l=0;l<n.length;l++)s+=n[l];const a=this.geometry.morphTargetsRelative?1:1-s,o=i*e;r[o]=a,r.set(n,o+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const Ov=new gm,Fv=new gm,Uv=new Up;class zv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Ov.subVectors(n,t).cross(Fv.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Ov),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Uv.getNormalMatrix(e),i=this.coplanarPoint(Ov).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Hv=new Dm,Gv=new gm;class Wv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zv,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zv,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new zv,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new zv,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new zv;this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ep;const n=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],m=i[10],f=i[11],g=i[12],v=i[13],x=i[14],y=i[15];if(n[0].setComponents(o-r,d-l,f-h,y-g).normalize(),n[1].setComponents(o+r,d+l,f+h,y+g).normalize(),n[2].setComponents(o+s,d+c,f+p,y+v).normalize(),n[3].setComponents(o-s,d-c,f-p,y-v).normalize(),n[4].setComponents(o-a,d-u,f-m,y-x).normalize(),t===Ep)n[5].setComponents(o+a,d+u,f+m,y+x).normalize();else{if(t!==Cp)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,m,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Hv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Hv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hv)}intersectsSprite(e){return Hv.center.set(0,0,0),Hv.radius=.7071067811865476,Hv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hv)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Gv.x=i.normal.x>0?e.max.x:e.min.x,Gv.y=i.normal.y>0?e.max.y:e.min.y,Gv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Gv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Vv(e,t){return e-t}function Jv(e,t){return e.z-t.z}function Yv(e,t){return t.z-e.z}class Xv{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const a=r[this.index];s.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=i}reset(){this.list.length=0,this.index=0}}const Zv=new Jm,qv=new Ff(1,1,1),Kv=new Wv,Qv=new ym,$v=new Dm,ex=new gm,tx=new gm,nx=new gm,ix=new Xv,rx=new Cg,sx=[];function ax(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const r=e.count;for(let s=0;s<r;s++)for(let r=0;r<i;r++)t.setComponent(s+n,r,e.getComponent(s,r))}else t.array.set(e.array,n*i);t.needsUpdate=!0}function ox(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)t[i]=e[i]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class lx extends Cg{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,i=arguments.length>3?arguments[3]:void 0;super(new mg,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Ev(t,e,e,Nd,wd);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Ev(t,e,e,Bd,bd);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Ev(t,e,e,Nd,wd);n.colorSpace=Qp.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in e.attributes){const r=e.getAttribute(i),{array:s,itemSize:a,normalized:o}=r,l=new s.constructor(n*a),c=new Kf(l,a,o);t.setAttribute(i,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Kf(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(e,". Instance is either out of range or has been deleted."))}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(e,". Geometry is either out of range or has been deleted."))}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ym);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,Zv),this.getBoundingBoxAt(i,Qv).applyMatrix4(Zv),e.union(Qv)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Dm);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(!1===t[n].active)continue;const i=t[n].geometryIndex;this.getMatrixAt(n,Zv),this.getBoundingSphereAt(i,$v).applyMatrix4(Zv),e.union($v)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Vv),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const i=this._matricesTexture;Zv.identity().toArray(i.image.data,16*n),i.needsUpdate=!0;const r=this._colorsTexture;return r&&(qv.toArray(r.image.data,4*n),r.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const s=e.getIndex();if(null!==s&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?s.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Vv),a=this._availableGeometryIds.shift(),r[a]=i):(a=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(a,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,a}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),s=t.getIndex(),a=this._geometryInfo[e];if(i&&s.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const o=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const e=t.getAttribute(c),i=n.getAttribute(c);ax(e,i,o);const r=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=o+t;for(let t=0;t<r;t++)i.setComponent(e,t,0)}i.needsUpdate=!0,i.addUpdateRange(o*r,l*r)}if(i){const e=a.indexStart,n=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let t=0;t<s.count;t++)r.setX(e+t,o+s.getX(t));for(let t=s.count,i=n;t<i;t++)r.setX(e+t,o);r.needsUpdate=!0,r.addUpdateRange(e,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,null!==t.boundingBox&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,null!==t.boundingSphere&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),r=this.geometry;for(let s=0,a=n.length;s<a;s++){const a=i[s],o=n[a];if(!1!==o.active){if(null!==r.index){if(o.indexStart!==t){const{indexStart:n,vertexStart:i,reservedIndexCount:s}=o,a=r.index,l=a.array,c=e-i;for(let e=n;e<n+s;e++)l[e]=l[e]+c;a.array.copyWithin(t,n,n+s),a.addUpdateRange(t,s),o.indexStart=t}t+=o.reservedIndexCount}if(o.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=o,i=r.attributes;for(const r in i){const s=i[r],{array:a,itemSize:o}=s;a.copyWithin(e*o,t*o,(t+n)*o),s.addUpdateRange(e*o,n*o)}o.vertexStart=e}e+=o.reservedVertexCount,o.start=r.index?o.indexStart:o.vertexStart,this._nextIndexStart=r.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingBox){const e=new ym,t=n.index,r=n.attributes.position;for(let n=i.start,s=i.start+i.count;n<s;n++){let i=n;t&&(i=t.getX(i)),e.expandByPoint(ex.fromBufferAttribute(r,i))}i.boundingBox=e}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(null===i.boundingSphere){const t=new Dm;this.getBoundingBoxAt(e,Qv),Qv.getCenter(t.center);const r=n.index,s=n.attributes.position;let a=0;for(let e=i.start,n=i.start+i.count;e<n;e++){let n=e;r&&(n=r.getX(n)),ex.fromBufferAttribute(s,n),a=Math.max(a,t.center.distanceToSquared(ex))}t.radius=Math.sqrt(a),i.boundingSphere=t}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Vv);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));const i=new Int32Array(e),r=new Int32Array(e);ox(this._multiDrawCounts,i),ox(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=e;const s=this._indirectTexture,a=this._matricesTexture,o=this._colorsTexture;s.dispose(),this._initIndirectTexture(),ox(s.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),ox(a.image.data,this._matricesTexture.image.data),o&&(o.dispose(),this._initColorsTexture(),ox(o.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index){if(Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."))}const i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new mg,this._initializeGeometry(i));const r=this.geometry;i.index&&ox(i.index.array,r.index.array);for(const s in i.attributes)ox(i.attributes[s].array,r.attributes[s].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,s=this.geometry;rx.material=this.material,rx.geometry.index=s.index,rx.geometry.attributes=s.attributes,null===rx.geometry.boundingBox&&(rx.geometry.boundingBox=new ym),null===rx.geometry.boundingSphere&&(rx.geometry.boundingSphere=new Dm);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;const s=n[a].geometryIndex,o=i[s];rx.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(a,rx.matrixWorld).premultiply(r),this.getBoundingBoxAt(s,rx.geometry.boundingBox),this.getBoundingSphereAt(s,rx.geometry.boundingSphere),rx.raycast(e,sx);for(let e=0,n=sx.length;e<n;e++){const n=sx[e];n.object=this,n.batchId=a,t.push(n)}sx.length=0}rx.material=null,rx.geometry.index=null,rx.geometry.attributes={},rx.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>Fe(Fe({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>Fe({},e)),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=null===s?1:s.array.BYTES_PER_ELEMENT,o=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._geometryInfo,d=this.perObjectFrustumCulled,h=this._indirectTexture,p=h.image.data;d&&(Zv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Kv.setFromProjectionMatrix(Zv,e.coordinateSystem));let m=0;if(this.sortObjects){Zv.copy(this.matrixWorld).invert(),ex.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Zv),tx.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Zv);for(let n=0,i=o.length;n<i;n++)if(o[n].visible&&o[n].active){const e=o[n].geometryIndex;this.getMatrixAt(n,Zv),this.getBoundingSphereAt(e,$v).applyMatrix4(Zv);let t=!1;if(d&&(t=!Kv.intersectsSphere($v)),!t){const t=u[e],i=nx.subVectors($v.center,ex).dot(tx);ix.push(t.start,t.count,i,n)}}const e=ix.list,t=this.customSort;null===t?e.sort(r.transparent?Yv:Jv):t.call(this,e,n);for(let n=0,i=e.length;n<i;n++){const t=e[n];l[m]=t.start*a,c[m]=t.count,p[m]=t.index,m++}ix.reset()}else for(let f=0,g=o.length;f<g;f++)if(o[f].visible&&o[f].active){const e=o[f].geometryIndex;let t=!1;if(d&&(this.getMatrixAt(f,Zv),this.getBoundingSphereAt(e,$v).applyMatrix4(Zv),t=!Kv.intersectsSphere($v)),!t){const t=u[e];l[m]=t.start*a,c[m]=t.count,p[m]=f,m++}}h.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,s){this.onBeforeRender(e,null,i,r,s)}}class cx extends Hf{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ff(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ux=new gm,dx=new gm,hx=new Jm,px=new Vm,mx=new Dm,fx=new gm,gx=new gm;class vx extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cx;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)ux.fromBufferAttribute(t,e-1),dx.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ux.distanceTo(dx);e.setAttribute("lineDistance",new ag(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),mx.copy(n.boundingSphere),mx.applyMatrix4(i),mx.radius+=r,!1===e.ray.intersectsSphere(mx))return;hx.copy(i).invert(),px.copy(e.ray).applyMatrix4(hx);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);for(let r=n,s=i-1;r<s;r+=l){const n=c.getX(r),i=c.getX(r+1),s=xx(this,e,px,o,n,i);s&&t.push(s)}if(this.isLineLoop){const r=c.getX(i-1),s=c.getX(n),a=xx(this,e,px,o,r,s);a&&t.push(a)}}else{const n=Math.max(0,s.start),i=Math.min(u.count,s.start+s.count);for(let r=n,s=i-1;r<s;r+=l){const n=xx(this,e,px,o,r,r+1);n&&t.push(n)}if(this.isLineLoop){const r=xx(this,e,px,o,i-1,n);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function xx(e,t,n,i,r,s){const a=e.geometry.attributes.position;ux.fromBufferAttribute(a,r),dx.fromBufferAttribute(a,s);if(n.distanceSqToSegment(ux,dx,fx,gx)>i)return;fx.applyMatrix4(e.matrixWorld);const o=t.ray.origin.distanceTo(fx);return o<t.near||o>t.far?void 0:{distance:o,point:gx.clone().applyMatrix4(e.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:e}}const yx=new gm,_x=new gm;class bx extends vx{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)yx.fromBufferAttribute(t,e),_x.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+yx.distanceTo(_x);e.setAttribute("lineDistance",new ag(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wx extends vx{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Ax extends Hf{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ff(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Sx=new Jm,Ex=new Vm,Cx=new Dm,Tx=new gm;class Mx extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ax;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Cx.copy(n.boundingSphere),Cx.applyMatrix4(i),Cx.radius+=r,!1===e.ray.intersectsSphere(Cx))return;Sx.copy(i).invert(),Ex.copy(e.ray).applyMatrix4(Sx);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);Tx.fromBufferAttribute(c,r),Px(Tx,r,o,i,e,t,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)Tx.fromBufferAttribute(c,n),Px(Tx,n,o,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Px(e,t,n,i,r,s,a){const o=Ex.distanceSqToPoint(e);if(o<n){const n=new gm;Ex.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class Nx extends _f{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Rx extends om{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:dd,this.magFilter=void 0!==r?r:dd,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lx extends om{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ad,this.minFilter=ad,this.generateMipmaps=!1,this.needsUpdate=!0}}class jx extends om{constructor(e,t,n,i,r,s,a,o,l,c,u,d){super(null,s,a,o,l,c,i,r,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ix extends jx{constructor(e,t,n,i,r,s){super(e,t,n,r,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=rd,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kx extends jx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Qu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bx extends om{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Dx extends om{constructor(e,t,n,i,r,s,a,o,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:jd;if(c!==jd&&c!==Id)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===jd&&(n=bd),void 0===n&&c===Id&&(n=Cd),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ad,this.minFilter=void 0!==o?o:ad,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Ox{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;s=t||e*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=t||(s.isVector2?new Fp:new gm);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new gm,i=[],r=[],s=[],a=new gm,o=new Jm;for(let h=0;h<=e;h++){const t=h/e;i[h]=this.getTangentAt(t,new gm)}r[0]=new gm,s[0]=new gm;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),s[h]=s[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(jp(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(o.makeRotationAxis(a,e))}s[h].crossVectors(i[h],r[h])}if(!0===t){let t=Math.acos(jp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Fx extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp,n=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=r?0:n),!0!==this.aClockwise||r||(i===n?i=-n:i-=n);const s=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(s),o=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,i=o-this.aY;a=n*e-i*t+this.aX,o=n*t+i*e+this.aY}return t.set(a,o)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ux extends Fx{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function zx(){let e=0,t=0,n=0,i=0;function r(r,s,a,o){e=r,t=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+o)+(i-n)/o;l*=a,c*=a,r(t,n,l,c)},calc:function(r){const s=r*r;return e+t*r+n*s+i*(s*r)}}}const Hx=new gm,Gx=new zx,Wx=new zx,Vx=new zx;class Jx extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let s,a,o=Math.floor(r),l=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===l&&o===i-1&&(o=i-2,l=1),this.closed||o>0?s=n[(o-1)%i]:(Hx.subVectors(n[0],n[1]).add(n[0]),s=Hx);const c=n[o%i],u=n[(o+1)%i];if(this.closed||o+2<i?a=n[(o+2)%i]:(Hx.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=Hx),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Gx.initNonuniformCatmullRom(s.x,c.x,u.x,a.x,t,n,i),Wx.initNonuniformCatmullRom(s.y,c.y,u.y,a.y,t,n,i),Vx.initNonuniformCatmullRom(s.z,c.z,u.z,a.z,t,n,i)}else"catmullrom"===this.curveType&&(Gx.initCatmullRom(s.x,c.x,u.x,a.x,this.tension),Wx.initCatmullRom(s.y,c.y,u.y,a.y,this.tension),Vx.initCatmullRom(s.z,c.z,u.z,a.z,this.tension));return t.set(Gx.calc(l),Wx.calc(l),Vx.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new gm).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Yx(e,t,n,i,r){const s=.5*(i-t),a=.5*(r-n),o=e*e;return(2*n-2*i+s+a)*(e*o)+(-3*n+3*i-2*s-a)*o+s*e+n}function Xx(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Zx(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class qx extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fp,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fp,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Fp;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return t.set(Zx(e,n.x,i.x,r.x,s.x),Zx(e,n.y,i.y,r.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Kx extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gm,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new gm;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return t.set(Zx(e,n.x,i.x,r.x,s.x),Zx(e,n.y,i.y,r.y,s.y),Zx(e,n.z,i.z,r.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Qx extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fp,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $x extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ey extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fp,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fp;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp,n=this.v0,i=this.v1,r=this.v2;return t.set(Xx(e,n.x,i.x,r.x),Xx(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ty extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gm;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm,n=this.v0,i=this.v1,r=this.v2;return t.set(Xx(e,n.x,i.x,r.x),Xx(e,n.y,i.y,r.y),Xx(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ny extends Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp,n=this.points,i=(n.length-1)*e,r=Math.floor(i),s=i-r,a=n[0===r?r:r-1],o=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(Yx(s,a.x,o.x,l.x,c.x),Yx(s,a.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Fp).fromArray(n))}return this}}var iy=Object.freeze({__proto__:null,ArcCurve:Ux,CatmullRomCurve3:Jx,CubicBezierCurve:qx,CubicBezierCurve3:Kx,EllipseCurve:Fx,LineCurve:Qx,LineCurve3:$x,QuadraticBezierCurve:ey,QuadraticBezierCurve3:ty,SplineCurve:ny});class ry extends Ox{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new iy[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new iy[n.type]).fromJSON(n))}return this}}class sy extends ry{constructor(e){super(),this.type="Path",this.currentPoint=new Fp,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Qx(this.currentPoint.clone(),new Fp(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new ey(this.currentPoint.clone(),new Fp(e,t),new Fp(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){const a=new qx(this.currentPoint.clone(),new Fp(e,t),new Fp(n,i),new Fp(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new ny(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,s,a,o),this}absellipse(e,t,n,i,r,s,a,o){const l=new Fx(e,t,n,i,r,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ay extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Fp(0,-.5),new Fp(.5,0),new Fp(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=jp(i,0,2*Math.PI);const r=[],s=[],a=[],o=[],l=[],c=1/t,u=new gm,d=new Fp,h=new gm,p=new gm,m=new gm;let f=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:f=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-f,h.z=0*g,m.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(m.x,m.y,m.z);break;default:f=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-f,h.z=0*g,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),o.push(h.x,h.y,h.z),m.copy(p)}for(let v=0;v<=t;v++){const r=n+v*c*i,h=Math.sin(r),p=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*p,s.push(u.x,u.y,u.z),d.x=v/t,d.y=n/(e.length-1),a.push(d.x,d.y);const i=o[3*n+0]*h,r=o[3*n+1],c=o[3*n+0]*p;l.push(i,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,s=n+e.length,a=n+e.length+1,o=n+1;r.push(i,s,o),r.push(a,o,s)}this.setIndex(r),this.setAttribute("position",new ag(s,3)),this.setAttribute("uv",new ag(a,2)),this.setAttribute("normal",new ag(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ay(e.points,e.segments,e.phiStart,e.phiLength)}}class oy extends ay{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new sy;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new oy(e.radius,e.length,e.capSegments,e.radialSegments)}}class ly extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],s=[],a=[],o=[],l=new gm,c=new Fp;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[d]/e+1)/2,c.y=(s[d+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new ag(s,3)),this.setAttribute("normal",new ag(a,3)),this.setAttribute("uv",new ag(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ly(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class cy extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],d=[],h=[];let p=0;const m=[],f=n/2;let g=0;function v(n){const r=p,s=new Fp,m=new gm;let v=0;const x=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,f*y,0),d.push(0,y,0),h.push(.5,.5),p++;const _=p;for(let e=0;e<=i;e++){const t=e/i*o+a,n=Math.cos(t),r=Math.sin(t);m.x=x*r,m.y=f*y,m.z=x*n,u.push(m.x,m.y,m.z),d.push(0,y,0),s.x=.5*n+.5,s.y=.5*r*y+.5,h.push(s.x,s.y),p++}for(let e=0;e<i;e++){const t=r+e,i=_+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new gm,v=new gm;let x=0;const y=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,x=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+a,l=Math.sin(r),m=Math.cos(r);v.x=x*l,v.y=-g*n+f,v.z=x*m,u.push(v.x,v.y,v.z),s.set(l,y,m).normalize(),d.push(s.x,s.y,s.z),h.push(t,1-g),c.push(p++)}m.push(c)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const s=m[i][n],a=m[i+1][n],o=m[i+1][n+1],l=m[i][n+1];(e>0||0!==i)&&(c.push(s,a,l),x+=3),(t>0||i!==r-1)&&(c.push(a,o,l),x+=3)}l.addGroup(g,x,0),g+=x}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new ag(u,3)),this.setAttribute("normal",new ag(d,3)),this.setAttribute("uv",new ag(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cy(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uy extends cy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(e){return new uy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dy extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],s=[];function a(e,t,n,i){const r=i+1,s=[];for(let a=0;a<=r;a++){s[a]=[];const i=e.clone().lerp(n,a/r),o=t.clone().lerp(n,a/r),l=r-a;for(let e=0;e<=l;e++)s[a][e]=0===e&&a===r?i:i.clone().lerp(o,e/l)}for(let a=0;a<r;a++)for(let e=0;e<2*(r-a)-1;e++){const t=Math.floor(e/2);e%2===0?(o(s[a][t+1]),o(s[a+1][t]),o(s[a][t])):(o(s[a][t+1]),o(s[a+1][t+1]),o(s[a+1][t]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new gm,i=new gm,r=new gm;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),a(n,i,r,e)}(i),function(e){const t=new gm;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new gm;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=u(e)/2/Math.PI+.5,i=d(e)/Math.PI+.5;s.push(n,1-i)}(function(){const e=new gm,t=new gm,n=new gm,i=new gm,a=new Fp,o=new Fp,l=new Fp;for(let d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),a.set(s[h+0],s[h+1]),o.set(s[h+2],s[h+3]),l.set(s[h+4],s[h+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);c(a,h+0,e,p),c(o,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new ag(r,3)),this.setAttribute("normal",new ag(r.slice(),3)),this.setAttribute("uv",new ag(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dy(e.vertices,e.indices,e.radius,e.details)}}class hy extends dy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hy(e.radius,e.detail)}}const py=new gm,my=new gm,fy=new gm,gy=new If;class vy extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(Np*t),s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<o;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=gy;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),gy.getNormal(fy),u[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(o.x*i),",").concat(Math.round(o.y*i),",").concat(Math.round(o.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],s=gy[c[e]],a=gy[c[t]],o="".concat(n,"_").concat(i),p="".concat(i,"_").concat(n);p in d&&d[p]?(fy.dot(d[p].normal)<=r&&(h.push(s.x,s.y,s.z),h.push(a.x,a.y,a.z)),d[p]=null):o in d||(d[o]={index0:l[e],index1:l[t],normal:fy.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];py.fromBufferAttribute(a,t),my.fromBufferAttribute(a,n),h.push(py.x,py.y,py.z),h.push(my.x,my.y,my.z)}this.setAttribute("position",new ag(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xy extends sy{constructor(e){super(e),this.uuid=Lp(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new sy).fromJSON(n))}return this}}const yy=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let s=_y(e,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,d,h,p;if(i&&(s=function(e,t,n,i){const r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,c=_y(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Ry(c));for(r.sort(Ty),s=0;s<r.length;s++)n=My(r[s],n);return n}(e,t,s,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)d=e[t],h=e[t+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-o,u-l),p=0!==p?32767/p:0}return wy(s,a,n,o,l,p,0),a};function _y(e,t,n,i,r){let s,a;if(r===function(e,t,n,i){let r=0;for(let s=t,a=n-i;s<n;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)a=zy(s,e[s],e[s+1],a);else for(s=n-i;s>=t;s-=i)a=zy(s,e[s],e[s+1],a);return a&&ky(a,a.next)&&(Hy(a),a=a.next),a}function by(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!ky(i,i.next)&&0!==Iy(i.prev,i,i.next))i=i.next;else{if(Hy(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function wy(e,t,n,i,r,s,a){if(!e)return;!a&&s&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Ny(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ,i);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?Sy(e,i,r,s):Ay(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Hy(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?wy(e=Ey(by(e),t,n),t,n,i,r,s,2):2===a&&Cy(e,t,n,i,r,s):wy(by(e),t,n,i,r,s,1);break}}function Ay(e){const t=e.prev,n=e,i=e.next;if(Iy(t,n,i)>=0)return!1;const r=t.x,s=n.x,a=i.x,o=t.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,d=o<l?o<c?o:c:l<c?l:c,h=r>s?r>a?r:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let m=i.next;for(;m!==t;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=p&&Ly(r,o,s,l,a,c,m.x,m.y)&&Iy(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Sy(e,t,n,i){const r=e.prev,s=e,a=e.next;if(Iy(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,d=s.y,h=a.y,p=o<l?o<c?o:c:l<c?l:c,m=u<d?u<h?u:h:d<h?d:h,f=o>l?o>c?o:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=Ny(p,m,t,n,i),x=Ny(f,g,t,n,i);let y=e.prevZ,_=e.nextZ;for(;y&&y.z>=v&&_&&_.z<=x;){if(y.x>=p&&y.x<=f&&y.y>=m&&y.y<=g&&y!==r&&y!==a&&Ly(o,u,l,d,c,h,y.x,y.y)&&Iy(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,_.x>=p&&_.x<=f&&_.y>=m&&_.y<=g&&_!==r&&_!==a&&Ly(o,u,l,d,c,h,_.x,_.y)&&Iy(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=f&&y.y>=m&&y.y<=g&&y!==r&&y!==a&&Ly(o,u,l,d,c,h,y.x,y.y)&&Iy(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=x;){if(_.x>=p&&_.x<=f&&_.y>=m&&_.y<=g&&_!==r&&_!==a&&Ly(o,u,l,d,c,h,_.x,_.y)&&Iy(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Ey(e,t,n){let i=e;do{const r=i.prev,s=i.next.next;!ky(r,s)&&By(r,i,i.next,s)&&Fy(r,s)&&Fy(s,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),Hy(i),Hy(i.next),i=e=s),i=i.next}while(i!==e);return by(i)}function Cy(e,t,n,i,r,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&jy(a,e)){let o=Uy(a,e);return a=by(a,a.next),o=by(o,o.next),wy(a,t,n,i,r,s,0),void wy(o,t,n,i,r,s,0)}e=e.next}a=a.next}while(a!==e)}function Ty(e,t){return e.x-t.x}function My(e,t){const n=function(e,t){let n,i=t,r=-1/0;const s=e.x,a=e.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=s&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===s))return n}i=i.next}while(i!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,d=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&Ly(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(s-i.x),Fy(i,e)&&(u<d||u===d&&(i.x>n.x||i.x===n.x&&Py(n,i)))&&(n=i,d=u)),i=i.next}while(i!==o);return n}(e,t);if(!n)return t;const i=Uy(n,e);return by(i,i.next),by(n,n.next)}function Py(e,t){return Iy(e.prev,e,t.prev)<0&&Iy(t.next,e,e.next)<0}function Ny(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ry(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ly(e,t,n,i,r,s,a,o){return(r-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(n-a)*(t-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function jy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&By(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Fy(e,t)&&Fy(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Iy(e.prev,e,t.prev)||Iy(e,t.prev,t))||ky(e,t)&&Iy(e.prev,e,e.next)>0&&Iy(t.prev,t,t.next)>0)}function Iy(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ky(e,t){return e.x===t.x&&e.y===t.y}function By(e,t,n,i){const r=Oy(Iy(e,t,n)),s=Oy(Iy(e,t,i)),a=Oy(Iy(n,i,e)),o=Oy(Iy(n,i,t));return r!==s&&a!==o||(!(0!==r||!Dy(e,n,t))||(!(0!==s||!Dy(e,i,t))||(!(0!==a||!Dy(n,e,i))||!(0!==o||!Dy(n,t,i)))))}function Dy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Oy(e){return e>0?1:e<0?-1:0}function Fy(e,t){return Iy(e.prev,e,e.next)<0?Iy(e,t,e.next)>=0&&Iy(e,e.prev,t)>=0:Iy(e,t,e.prev)<0||Iy(e,e.next,t)<0}function Uy(e,t){const n=new Gy(e.i,e.x,e.y),i=new Gy(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function zy(e,t,n,i){const r=new Gy(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Hy(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Gy(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Wy{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return Wy.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];Vy(e),Jy(n,e);let s=e.length;t.forEach(Vy);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,Jy(n,t[o]);const a=yy(n,i);for(let o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}}function Vy(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Jy(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Yy extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xy([new Fp(.5,.5),new Fp(-.5,.5),new Fp(-.5,-.5),new Fp(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let a=0,o=e.length;a<o;a++){s(e[a])}function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Xy;let g,v,x,y,_,b=!1;m&&(g=m.getSpacedPoints(o),b=!0,c=!1,v=m.computeFrenetFrames(o,!1),x=new gm,y=new gm,_=new gm),c||(p=0,u=0,d=0,h=0);const w=e.extractPoints(a);let A=w.shape;const S=w.holes;if(!Wy.isClockWise(A)){A=A.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];Wy.isClockWise(t)&&(S[e]=t.reverse())}}const E=Wy.triangulateShape(A,S),C=A;for(let t=0,n=S.length;t<n;t++){const e=S[t];A=A.concat(e)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const M=A.length,P=E.length;function N(e,t,n){let i,r,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,d=a*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),p=t.x-o/d,m=t.y+a/d,f=((n.x-c/h-p)*c-(n.y+l/h-m)*l)/(a*c-o*l);i=p+a*f-e.x,r=m+o*f-e.y;const g=i*i+r*r;if(g<=2)return new Fp(i,r);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=a,s=Math.sqrt(u)):(i=a,r=o,s=Math.sqrt(u/2))}return new Fp(i/s,r/s)}const R=[];for(let t=0,n=C.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),R[t]=N(C[t],C[i],C[r]);const L=[];let j,I=R.concat();for(let t=0,n=S.length;t<n;t++){const e=S[t];j=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),j[t]=N(e[t],e[i],e[r]);L.push(j),I=I.concat(j)}for(let t=0;t<p;t++){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=C.length;t<r;t++){const e=T(C[t],R[t],i);D(e.x,e.y,-n)}for(let t=0,r=S.length;t<r;t++){const e=S[t];j=L[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],j[t],i);D(r.x,r.y,-n)}}}const k=d+h;for(let t=0;t<M;t++){const e=c?T(A[t],I[t],k):A[t];b?(y.copy(v.normals[0]).multiplyScalar(e.x),x.copy(v.binormals[0]).multiplyScalar(e.y),_.copy(g[0]).add(y).add(x),D(_.x,_.y,_.z)):D(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<M;e++){const n=c?T(A[e],I[e],k):A[e];b?(y.copy(v.normals[t]).multiplyScalar(n.x),x.copy(v.binormals[t]).multiplyScalar(n.y),_.copy(g[t]).add(y).add(x),D(_.x,_.y,_.z)):D(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=u*Math.cos(e*Math.PI/2),i=d*Math.sin(e*Math.PI/2)+h;for(let t=0,r=C.length;t<r;t++){const e=T(C[t],R[t],i);D(e.x,e.y,l+n)}for(let t=0,r=S.length;t<r;t++){const e=S[t];j=L[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],j[t],i);b?D(r.x,r.y+g[o-1].y,g[o-1].x+n):D(r.x,r.y,l+n)}}}function B(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=M*e,s=M*(e+1);F(t+i+n,t+r+n,t+r+s,t+i+s)}}}function D(e,t,n){s.push(e),s.push(t),s.push(n)}function O(e,t,r){U(e),U(t),U(r);const s=i.length/3,a=f.generateTopUV(n,i,s-3,s-2,s-1);z(a[0]),z(a[1]),z(a[2])}function F(e,t,r,s){U(e),U(t),U(s),U(t),U(r),U(s);const a=i.length/3,o=f.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);z(o[0]),z(o[1]),z(o[3]),z(o[1]),z(o[2]),z(o[3])}function U(e){i.push(s[3*e+0]),i.push(s[3*e+1]),i.push(s[3*e+2])}function z(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=M*e;for(let n=0;n<P;n++){const e=E[n];O(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=M*e;for(let n=0;n<P;n++){const e=E[n];O(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];O(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];O(t[0]+M*o,t[1]+M*o,t[2]+M*o)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;B(C,t),t+=C.length;for(let n=0,i=S.length;n<i;n++){const e=S[n];B(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new ag(i,3)),this.setAttribute("uv",new ag(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new iy[i.type]).fromJSON(i)),new Yy(n,e.options)}}const Xy={generateTopUV:function(e,t,n,i,r){const s=t[3*n],a=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Fp(s,a),new Fp(o,l),new Fp(c,u)]},generateSideWallUV:function(e,t,n,i,r,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],m=t[3*r+2],f=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new Fp(a,1-l),new Fp(c,1-d),new Fp(h,1-m),new Fp(f,1-v)]:[new Fp(o,1-l),new Fp(u,1-d),new Fp(p,1-m),new Fp(g,1-v)]}};class Zy extends dy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zy(e.radius,e.detail)}}class qy extends dy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qy(e.radius,e.detail)}}class Ky extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,s=t/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,u=e/a,d=t/o,h=[],p=[],m=[],f=[];for(let g=0;g<c;g++){const e=g*d-s;for(let t=0;t<l;t++){const n=t*u-r;p.push(n,-e,0),m.push(0,0,1),f.push(t/a),f.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;h.push(t,n,r),h.push(n,i,r)}this.setIndex(h),this.setAttribute("position",new ag(p,3)),this.setAttribute("normal",new ag(m,3)),this.setAttribute("uv",new ag(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ky(e.width,e.height,e.widthSegments,e.heightSegments)}}class Qy extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n),i=Math.max(1,i);const a=[],o=[],l=[],c=[];let u=e;const d=(t-e)/i,h=new gm,p=new Fp;for(let m=0;m<=i;m++){for(let e=0;e<=n;e++){const i=r+e/n*s;h.x=u*Math.cos(i),h.y=u*Math.sin(i),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}u+=d}for(let m=0;m<i;m++){const e=m*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new ag(o,3)),this.setAttribute("normal",new ag(l,3)),this.setAttribute("uv",new ag(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class $y extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xy([new Fp(0,.5),new Fp(-.5,-.5),new Fp(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,o,c),a+=o,o=0;function l(e){const a=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Wy.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Wy.isClockWise(e)&&(u[t]=e.reverse())}const d=Wy.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,i=d.length;t<i;t++){const e=d[t],i=e[0]+a,r=e[1]+a,s=e[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new ag(i,3)),this.setAttribute("normal",new ag(r,3)),this.setAttribute("uv",new ag(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new $y(n,e.curveSegments)}}class e_ extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new gm,d=new gm,h=[],p=[],m=[],f=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let x=0;0===g&&0===s?x=.5/t:g===n&&o===Math.PI&&(x=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(s+v*a),u.y=e*Math.cos(s+v*a),u.z=e*Math.sin(i+o*r)*Math.sin(s+v*a),p.push(u.x,u.y,u.z),d.copy(u).normalize(),m.push(d.x,d.y,d.z),f.push(o+x,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],i=c[g][e],r=c[g+1][e],a=c[g+1][e+1];(0!==g||s>0)&&h.push(t,i,a),(g!==n-1||o<Math.PI)&&h.push(i,r,a)}this.setIndex(h),this.setAttribute("position",new ag(p,3)),this.setAttribute("normal",new ag(m,3)),this.setAttribute("uv",new ag(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class t_ extends dy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new t_(e.radius,e.detail)}}class n_ extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],o=[],l=[],c=new gm,u=new gm,d=new gm;for(let h=0;h<=n;h++)for(let s=0;s<=i;s++){const p=s/i*r,m=h/n*Math.PI*2;u.x=(e+t*Math.cos(m))*Math.cos(p),u.y=(e+t*Math.cos(m))*Math.sin(p),u.z=t*Math.sin(m),a.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(s/i),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=i;e++){const t=(i+1)*h+e-1,n=(i+1)*(h-1)+e-1,r=(i+1)*(h-1)+e,a=(i+1)*h+e;s.push(t,n,a),s.push(n,r,a)}this.setIndex(s),this.setAttribute("position",new ag(a,3)),this.setAttribute("normal",new ag(o,3)),this.setAttribute("uv",new ag(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class i_ extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new gm,d=new gm,h=new gm,p=new gm,m=new gm,f=new gm,g=new gm;for(let x=0;x<=n;++x){const a=x/n*r*Math.PI*2;v(a,r,s,e,h),v(a+.01,r,s,e,p),f.subVectors(p,h),g.addVectors(p,h),m.crossVectors(f,g),g.crossVectors(m,f),m.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,s=-t*Math.cos(r),a=t*Math.sin(r);u.x=h.x+(s*g.x+a*m.x),u.y=h.y+(s*g.y+a*m.y),u.z=h.z+(s*g.z+a*m.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(x/n),c.push(e/i)}}for(let x=1;x<=n;x++)for(let e=1;e<=i;e++){const t=(i+1)*(x-1)+(e-1),n=(i+1)*x+(e-1),r=(i+1)*x+e,s=(i+1)*(x-1)+e;a.push(t,n,s),a.push(n,r,s)}function v(e,t,n,i,r){const s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new ag(o,3)),this.setAttribute("normal",new ag(l,3)),this.setAttribute("uv",new ag(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class r_ extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ty(new gm(-1,-1,0),new gm(-1,1,0),new gm(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new gm,o=new gm,l=new Fp;let c=new gm;const u=[],d=[],h=[],p=[];function m(r){c=e.getPointAt(r/t,c);const l=s.normals[r],h=s.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+r*h.x,o.y=s*l.y+r*h.y,o.z=s*l.z+r*h.z,o.normalize(),d.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)m(e);m(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,a=(i+1)*(e-1)+t;p.push(n,r,a),p.push(r,s,a)}}()}(),this.setIndex(p),this.setAttribute("position",new ag(u,3)),this.setAttribute("normal",new ag(d,3)),this.setAttribute("uv",new ag(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new r_((new iy[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class s_ extends mg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new gm,r=new gm;if(null!==e.index){const s=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=a.getX(e+l),c=a.getX(e+(l+1)%3);i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,c),!0===a_(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const s=e.attributes.position;for(let e=0,a=s.count/3;e<a;e++)for(let o=0;o<3;o++){const a=3*e+o,l=3*e+(o+1)%3;i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,l),!0===a_(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new ag(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function a_(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var o_=Object.freeze({__proto__:null,BoxGeometry:Mg,CapsuleGeometry:oy,CircleGeometry:ly,ConeGeometry:uy,CylinderGeometry:cy,DodecahedronGeometry:hy,EdgesGeometry:vy,ExtrudeGeometry:Yy,IcosahedronGeometry:Zy,LatheGeometry:ay,OctahedronGeometry:qy,PlaneGeometry:Ky,PolyhedronGeometry:dy,RingGeometry:Qy,ShapeGeometry:$y,SphereGeometry:e_,TetrahedronGeometry:t_,TorusGeometry:n_,TorusKnotGeometry:i_,TubeGeometry:r_,WireframeGeometry:s_});class l_ extends Hf{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ff(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class c_ extends jg{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class u_ extends Hf{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ff(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ff(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new Fp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nf,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d_ extends u_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fp(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ff(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ff(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ff(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class h_ extends Hf{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ff(16777215),this.specular=new Ff(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ff(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new Fp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nf,this.combine=Ou,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class p_ extends Hf{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ff(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ff(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new Fp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class m_ extends Hf{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new Fp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class f_ extends Hf{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ff(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ff(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new Fp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nf,this.combine=Ou,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class g_ extends Hf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jh,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class v_ extends Hf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class x_ extends Hf{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ff(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dh,this.normalScale=new Fp(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class y_ extends cx{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function __(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function b_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function w_(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n}function A_(e,t,n){const i=e.length,r=new e.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r}function S_(e,t,n,i){let r=1,s=e[0];for(;void 0!==s&&void 0===s[i];)s=e[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(t.push(s.time),n.push(a)),s=e[r++]}while(void 0!==s)}const E_={convertArray:__,isTypedArray:b_,getKeyframeOrder:w_,sortedArray:A_,flattenJSON:S_,subclip:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const s=e.clone();s.name=t;const a=[];for(let l=0;l<s.tracks.length;++l){const e=s.tracks[l],t=e.getValueSize(),o=[],c=[];for(let s=0;s<e.times.length;++s){const a=e.times[s]*r;if(!(a<n||a>=i)){o.push(e.times[s]);for(let n=0;n<t;++n)c.push(e.values[s*t+n])}}0!==o.length&&(e.times=__(o,e.times.constructor),e.values=__(c,e.values.constructor),a.push(e))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,s=t/i;for(let a=0;a<r;++a){const t=n.tracks[a],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=t.times.length-1;let h;if(s<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(s>=t.times[d]){const e=d*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,i=l-o;e.evaluate(s),h=e.resultBuffer.slice(n,i)}if("quaternion"===i){(new fm).fromArray(h).normalize().conjugate().toArray(h)}const p=r.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)fm.multiplyQuaternionsFlat(r.values,t,h,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=h[n]}}}return e.blendMode=Ph,e}};class C_{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0;break n}break e}for(;n<s;){const i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class T_ extends C_{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Eh,endingEnd:Eh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case Ch:r=e,a=2*t-n;break;case Th:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Ch:s=e,o=2*n-t;break;case Th:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),m=p*p,f=m*p,g=-d*f+2*d*m-d*p,v=(1+d)*f+(-1.5-2*d)*m+(-.5+d)*p+1,x=(-1-h)*f+(1.5+h)*m+.5*p,y=h*f-h*m;for(let _=0;_!==a;++_)r[_]=g*s[c+_]+v*s[l+_]+x*s[o+_]+y*s[u+_];return r}}class M_ extends C_{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),u=1-c;for(let d=0;d!==a;++d)r[d]=s[l+d]*u+s[o+d]*c;return r}}class P_ extends C_{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class N_{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=__(t,this.TimeBufferType),this.values=__(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:__(e.times,Array),values:__(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new P_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new M_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new T_(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wh:t=this.InterpolantFactoryMethodDiscrete;break;case Ah:t=this.InterpolantFactoryMethodLinear;break;case Sh:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wh;case this.InterpolantFactoryMethodLinear:return Ah;case this.InterpolantFactoryMethodSmooth:return Sh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=n.slice(r,s),this.values=this.values.slice(r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==r;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,s),e=!1;break}s=t}if(void 0!==i&&b_(i))for(let a=0,o=i.length;a!==o;++a){const t=i[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Sh,r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}N_.prototype.TimeBufferType=Float32Array,N_.prototype.ValueBufferType=Float32Array,N_.prototype.DefaultInterpolation=Ah;class R_ extends N_{constructor(e,t,n){super(e,t,n)}}R_.prototype.ValueTypeName="bool",R_.prototype.ValueBufferType=Array,R_.prototype.DefaultInterpolation=wh,R_.prototype.InterpolantFactoryMethodLinear=void 0,R_.prototype.InterpolantFactoryMethodSmooth=void 0;class L_ extends N_{}L_.prototype.ValueTypeName="color";class j_ extends N_{}j_.prototype.ValueTypeName="number";class I_ extends C_{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)fm.slerpFlat(r,0,s,l-a,s,l,o);return r}}class k_ extends N_{InterpolantFactoryMethodLinear(e){return new I_(this.times,this.values,this.getValueSize(),e)}}k_.prototype.ValueTypeName="quaternion",k_.prototype.InterpolantFactoryMethodSmooth=void 0;class B_ extends N_{constructor(e,t,n){super(e,t,n)}}B_.prototype.ValueTypeName="string",B_.prototype.ValueBufferType=Array,B_.prototype.DefaultInterpolation=wh,B_.prototype.InterpolantFactoryMethodLinear=void 0,B_.prototype.InterpolantFactoryMethodSmooth=void 0;class D_ extends N_{}D_.prototype.ValueTypeName="vector";class O_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Mh;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Lp(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(F_(n[s]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(N_.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,s=[];for(let a=0;a<r;a++){let e=[],o=[];e.push((a+r-1)%r,a,(a+1)%r),o.push(0,1,0);const l=w_(e);e=A_(e,1,l),o=A_(o,1,l),i||0!==e[0]||(e.push(r),o.push(o[0])),s.push(new j_(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const s=[],a=[];S_(n,s,a,i),0!==s.length&&r.push(new e(t,s,a))}},i=[],r=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],s=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new j_(".morphTargetInfluence["+r+"]",t,s))}o=t.length*s}else{const r=".bones["+t[c].name+"]";n(D_,r+".position",e,"pos",i),n(k_,r+".quaternion",e,"rot",i),n(D_,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function F_(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return j_;case"vector":case"vector2":case"vector3":case"vector4":return D_;case"color":return L_;case"quaternion":return k_;case"bool":case"boolean":return R_;case"string":return B_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];S_(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const U_={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class z_{constructor(e,t,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==i.onStart&&i.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const H_=new z_;class G_{constructor(e){this.manager=void 0!==e?e:H_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}G_.DEFAULT_MATERIAL_NAME="__DEFAULT";const W_={};class V_ extends Error{constructor(e,t){super(e),this.response=t}}class J_ extends G_{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=U_.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==W_[e])return void W_[e].push({onLoad:t,onProgress:n,onError:i});W_[e]=[],W_[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=W_[e],i=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){i.read().then(i=>{let{done:r,value:l}=i;if(r)e.close();else{o+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new V_('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,a));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{U_.add(e,t);const n=W_[e];delete W_[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=W_[e];if(void 0===n)throw this.manager.itemError(e),t;delete W_[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Y_ extends G_{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new J_(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(tR){i?i(tR):console.error(tR),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=O_.parse(e[n]);t.push(i)}return t}}class X_ extends G_{constructor(e){super(e)}load(e,t,n,i){const r=this,s=[],a=new jx,o=new J_(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=r.parse(e,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=dd),a.image=s,a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else o.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=dd),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,i);return a}}class Z_ extends G_{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=U_.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const a=Vp("img");function o(){c(),U_.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class q_ extends G_{constructor(e){super(e)}load(e,t,n,i){const r=new zg;r.colorSpace=Uh;const s=new Z_(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(e[n],function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)o(l);return r}}class K_ extends G_{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new Ev,a=new J_(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(e){let n;try{n=r.parse(e)}catch(RT){if(void 0===i)return void console.error(RT);i(RT)}void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:rd,s.wrapT=void 0!==n.wrapT?n.wrapT:rd,s.magFilter=void 0!==n.magFilter?n.magFilter:dd,s.minFilter=void 0!==n.minFilter?n.minFilter:dd,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(s.colorSpace=n.colorSpace),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=md),1===n.mipmapCount&&(s.minFilter=dd),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n)},n,i),s}}class Q_ extends G_{constructor(e){super(e)}load(e,t,n,i){const r=new om,s=new Z_(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class $_ extends _f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Ff(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class eb extends $_{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_f.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ff(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const tb=new Jm,nb=new gm,ib=new gm;class rb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fp(512,512),this.map=null,this.mapPass=null,this.matrix=new Jm,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wv,this._frameExtents=new Fp(1,1),this._viewportCount=1,this._viewports=[new lm(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;nb.setFromMatrixPosition(e.matrixWorld),t.position.copy(nb),ib.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ib),t.updateMatrixWorld(),tb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(tb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sb extends rb{constructor(){super(new Og(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Rp*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ab extends $_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_f.DEFAULT_UP),this.updateMatrix(),this.target=new _f,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new sb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const ob=new Jm,lb=new gm,cb=new gm;class ub extends rb{constructor(){super(new Og(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Fp(4,2),this._viewportCount=6,this._viewports=[new lm(2,1,1,1),new lm(0,1,1,1),new lm(3,1,1,1),new lm(1,1,1,1),new lm(3,0,1,1),new lm(1,0,1,1)],this._cubeDirections=[new gm(1,0,0),new gm(-1,0,0),new gm(0,0,1),new gm(0,0,-1),new gm(0,1,0),new gm(0,-1,0)],this._cubeUps=[new gm(0,1,0),new gm(0,1,0),new gm(0,1,0),new gm(0,1,0),new gm(0,0,1),new gm(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),lb.setFromMatrixPosition(e.matrixWorld),n.position.copy(lb),cb.copy(n.position),cb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(cb),n.updateMatrixWorld(),i.makeTranslation(-lb.x,-lb.y,-lb.z),ob.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ob)}}class db extends $_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new ub}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class hb extends Ig{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class pb extends rb{constructor(){super(new hb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class mb extends $_{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_f.DEFAULT_UP),this.updateMatrix(),this.target=new _f,this.shadow=new pb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class fb extends $_{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gb extends $_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new gm)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*r),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*i*1.092548),t.addScaledVector(s[5],i*r*1.092548),t.addScaledVector(s[6],.315392*(3*r*r-1)),t.addScaledVector(s[7],n*r*1.092548),t.addScaledVector(s[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*i),t.addScaledVector(s[2],1.023328*r),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*i),t.addScaledVector(s[5],.858086*i*r),t.addScaledVector(s[6],.743125*r*r-.247708),t.addScaledVector(s[7],.858086*n*r),t.addScaledVector(s[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class xb extends $_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vb;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class yb extends G_{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,s=new J_(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(tR){i?i(tR):console.error(tR),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new Ff).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(i.dispersion=e.dispersion),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new Ff).setHex(t.value);break;case"v2":i.uniforms[r].value=(new Fp).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new gm).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new lm).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new Up).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Jm).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new Fp).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapRotation&&i.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Fp).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return yb.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:l_,SpriteMaterial:Zg,RawShaderMaterial:c_,ShaderMaterial:jg,PointsMaterial:Ax,MeshPhysicalMaterial:d_,MeshStandardMaterial:u_,MeshPhongMaterial:h_,MeshToonMaterial:p_,MeshNormalMaterial:m_,MeshLambertMaterial:f_,MeshDepthMaterial:g_,MeshDistanceMaterial:v_,MeshBasicMaterial:Gf,MeshMatcapMaterial:x_,LineDashedMaterial:y_,LineBasicMaterial:cx,Material:Hf}[e]}}class _b{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(tR){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class bb extends mg{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class wb extends G_{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new J_(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(tR){i?i(tR):console.error(tR),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],s=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],s=new Uint32Array(r).buffer;return n[t]=s,s}(e,r.buffer),a=Wp(r.type,s),o=new Jg(a,r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new bb:new mg,s=e.data.index;if(void 0!==s){const e=Wp(s.type,s.array);r.setIndex(new Kf(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new Xg(r,t.itemSize,t.offset,t.normalized)}else{const e=Wp(t.type,t.array);n=new(t.isInstancedBufferAttribute?Pv:Kf)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),r.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];let a;if(s.isInterleavedBufferAttribute){const t=i(e.data,s.data);a=new Xg(t,s.itemSize,s.offset,s.normalized)}else{const e=Wp(s.type,s.array);a=new Kf(e,s.itemSize,s.normalized)}void 0!==s.name&&(a.name=s.name),n.push(a)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new gm;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new Dm(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class Ab extends G_{constructor(e){super(e)}load(e,t,n,i){const r=this,s=""===this.path?_b.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new J_(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){let s=null;try{s=JSON.parse(n)}catch(RT){return void 0!==i&&i(RT),void console.error("THREE:ObjectLoader: Can't parse "+e+".",RT.message)}const a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(s,t)},n,i)}async loadAsync(e,t){const n=""===this.path?_b.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new J_(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),s=JSON.parse(r),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){void 0!==t&&t(l)}),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,i,a,s,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),this.bindLightTargets(o),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new xy).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,s=e.length;r<s;r++){const t=(new Mv).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new wb;for(let r=0,s=e.length;r<s;r++){let s;const a=e[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;default:a.type in o_?s=o_[a.type].fromJSON(a,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new yb;r.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=O_.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function s(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Wp(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new z_(t);r=new Z_(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=s(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ev(n.data,n.width,n.height)))}i[n.uuid]=new rm(e)}else{const e=s(n.url);i[n.uuid]=new rm(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:Wp(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new Z_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new Ev(i.data,i.width,i.height)))}n[i.uuid]=new rm(e)}else{const e=await r(i.url);n[i.uuid]=new rm(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,s=e.length;r<s;r++){const s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=t[s.image],o=a.data;let l;Array.isArray(o)?(l=new zg,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new Ev:new om,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,Sb)),void 0!==s.channel&&(l.channel=s.channel),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],Eb),l.wrapT=n(s.wrap[1],Eb)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.colorSpace&&(l.colorSpace=s.colorSpace),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,Cb)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,Cb)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(l.compareFunction=s.compareFunction),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(e,t,n,i,r){let s,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":s=new Vg,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new Ff(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new Wg(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new Gg(e.fog.color,e.fog.density)),""!==e.fog.name&&(s.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(s.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&s.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(s.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Og(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new hb(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new fb(e.color,e.intensity);break;case"DirectionalLight":s=new mb(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new db(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new gb(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new ab(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new eb(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new xb).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),s=new Av(a,o),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),s=new Cg(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;s=new Dv(a,o,t),s.instanceMatrix=new Pv(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new Pv(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":a=l(e.geometry),o=c(e.material),s=new lx(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,o),s.geometry=a,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(e=>{const t=new ym;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new Dm;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(s._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":s=new pv;break;case"Line":s=new vx(l(e.geometry),c(e.material));break;case"LineLoop":s=new wx(l(e.geometry),c(e.material));break;case"LineSegments":s=new bx(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new Mx(l(e.geometry),c(e.material));break;case"Sprite":s=new cv(c(e.material));break;case"Group":s=new Nx;break;case"Bone":s=new Sv;break;default:s=new _f}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.up&&s.up.fromArray(e.up),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(s.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)s.add(this.parseObject(a[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance,n.hysteresis)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);t.target=void 0!==i?i:new _f}})}}const Sb={UVMapping:Ku,CubeReflectionMapping:Qu,CubeRefractionMapping:$u,EquirectangularReflectionMapping:ed,EquirectangularRefractionMapping:td,CubeUVReflectionMapping:nd},Eb={RepeatWrapping:id,ClampToEdgeWrapping:rd,MirroredRepeatWrapping:sd},Cb={NearestFilter:ad,NearestMipmapNearestFilter:od,NearestMipmapLinearFilter:cd,LinearFilter:dd,LinearMipmapNearestFilter:hd,LinearMipmapLinearFilter:md};class Tb extends G_{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=U_.get(e);if(void 0!==s)return r.manager.itemStart(e),s.then?void s.then(n=>{t&&t(n),r.manager.itemEnd(e)}).catch(e=>{i&&i(e)}):(setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const o=fetch(e,a).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){return U_.add(e,n),t&&t(n),r.manager.itemEnd(e),n}).catch(function(t){i&&i(t),U_.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});U_.add(e,o),r.manager.itemStart(e)}}let Mb;class Pb{static getContext(){return void 0===Mb&&(Mb=new(window.AudioContext||window.webkitAudioContext)),Mb}static setContext(e){Mb=e}}class Nb extends G_{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new J_(this.manager);function a(t){i?i(t):console.error(t),r.manager.itemError(e)}s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(e){try{const n=e.slice(0);Pb.getContext().decodeAudioData(n,function(e){t(e)}).catch(a)}catch(tR){a(tR)}},n,i)}}const Rb=new Jm,Lb=new Jm,jb=new Jm;class Ib{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Og,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Og,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jb.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(Np*t.fov*.5)/t.zoom;let s,a;Lb.elements[12]=-n,Rb.elements[12]=n,s=-r*t.aspect+i,a=r*t.aspect+i,jb.elements[0]=2*t.near/(a-s),jb.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(jb),s=-r*t.aspect-i,a=r*t.aspect-i,jb.elements[0]=2*t.near/(a-s),jb.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(jb)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Lb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Rb)}}class kb extends Og{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class Bb{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Db(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Db();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Db(){return performance.now()}const Ob=new gm,Fb=new fm,Ub=new gm,zb=new gm;class Hb extends _f{constructor(){super(),this.type="AudioListener",this.context=Pb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Bb}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ob,Fb,Ub),zb.set(0,0,-1).applyQuaternion(Fb),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ob.x,e),t.positionY.linearRampToValueAtTime(Ob.y,e),t.positionZ.linearRampToValueAtTime(Ob.z,e),t.forwardX.linearRampToValueAtTime(zb.x,e),t.forwardY.linearRampToValueAtTime(zb.y,e),t.forwardZ.linearRampToValueAtTime(zb.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Ob.x,Ob.y,Ob.z),t.setOrientation(zb.x,zb.y,zb.z,n.x,n.y,n.z)}}class Gb extends _f{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Wb=new gm,Vb=new fm,Jb=new gm,Yb=new gm;class Xb extends Gb{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Wb,Vb,Jb),Yb.set(0,0,1).applyQuaternion(Vb);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wb.x,e),t.positionY.linearRampToValueAtTime(Wb.y,e),t.positionZ.linearRampToValueAtTime(Wb.z,e),t.orientationX.linearRampToValueAtTime(Yb.x,e),t.orientationY.linearRampToValueAtTime(Yb.y,e),t.orientationZ.linearRampToValueAtTime(Yb.z,e)}else t.setPosition(Wb.x,Wb.y,Wb.z),t.setOrientation(Yb.x,Yb.y,Yb.z)}}class Zb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class qb{constructor(e,t,n){let i,r,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==i;++e)n[r+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){fm.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const s=this._workIndex*r;fm.multiplyQuaternionsFlat(e,s,e,t,e,n),fm.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,r){const s=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*s+e[n+a]*i}}_lerpAdditive(e,t,n,i,r){for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]+e[n+s]*i}}}const Kb="\\[\\]\\.:\\/",Qb=new RegExp("["+Kb+"]","g"),$b="[^"+Kb+"]",ew="[^"+Kb.replace("\\.","")+"]",tw=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",$b)+/(WCOD+)?/.source.replace("WCOD",ew)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$b)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$b)+"$"),nw=["material","materials","bones","map"];class iw{constructor(e,t,n){this.path=t,this.parsedPath=n||iw.parseTrackName(t),this.node=iw.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new iw.Composite(e,t,n):new iw(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Qb,"")}static parseTrackName(e){const t=tw.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==nw.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=iw.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const s=e[i];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?a=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}iw.Composite=class{constructor(e,t,n){const i=n||iw.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},iw.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},iw.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},iw.prototype.GetterByBindingType=[iw.prototype._getValue_direct,iw.prototype._getValue_array,iw.prototype._getValue_arrayElement,iw.prototype._getValue_toArray],iw.prototype.SetterByBindingTypeAndVersioning=[[iw.prototype._setValue_direct,iw.prototype._setValue_direct_setNeedsUpdate,iw.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[iw.prototype._setValue_array,iw.prototype._setValue_array_setNeedsUpdate,iw.prototype._setValue_array_setMatrixWorldNeedsUpdate],[iw.prototype._setValue_arrayElement,iw.prototype._setValue_arrayElement_setNeedsUpdate,iw.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[iw.prototype._setValue_fromArray,iw.prototype._setValue_fromArray_setNeedsUpdate,iw.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rw{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Lp(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=o++,t[d]=h,e.push(u);for(let e=0,t=s;e!==t;++e)r[e].push(new iw(u,n[e],i[e]))}else if(h<l){a=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[d]=o,e[o]=u;for(let e=0,t=s;e!==t;++e){const t=r[e],s=t[o];let a=t[h];t[h]=s,void 0===a&&(a=new iw(u,n[e],i[e])),t[o]=a}}else e[h]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=t[o];if(void 0!==l&&l>=r){const s=r++,c=e[s];t[c.uuid]=l,e[l]=c,t[o]=s,e[s]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[l];t[l]=i,t[s]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const a=--r,o=e[a],c=--s,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[l]=i,t[a]=r,t.pop()}}else{const r=--s,a=e[r];r>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,s.push(e),a.push(t),r.push(u);for(let d=c,h=o.length;d!==h;++d){const n=o[d];u[d]=new iw(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class sw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,s=r.length,a=new Array(s),o={endingStart:Eh,endingEnd:Eh};for(let l=0;l!==s;++l){const e=r[l].createInterpolant(null);a[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_h,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,s=n/i;e.warp(1,r,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Ph)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const s=n===bh;if(0===e)return-1===r?i:s&&1===(1&r)?t-i:i;if(n===yh){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Ch,i.endingEnd=Ch):(i.endingStart=e?this.zeroSlopeAtStart?Ch:Eh:Th,i.endingEnd=t?this.zeroSlopeAtEnd?Ch:Eh:Th)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=n,this}}const aw=new Float32Array(1);class ow extends Tp{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,s[u]=l;else{if(l=s[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new qb(iw.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),s[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];void 0===s&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r],0===Object.keys(a).length&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new M_(new Float32Array(2),new Float32Array(2),1,aw),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let s="string"===typeof e?O_.findByName(i,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:Mh),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new sw(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?O_.findByName(n,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,s)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,s=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,t[r]=s,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class lw extends cm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTarget3D=!0,this.depth=n,this.texture=new pm(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class cw extends cm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTargetArray=!0,this.depth=n,this.texture=new dm(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class uw{constructor(e){this.value=e}clone(){return new uw(void 0===this.value.clone?this.value:this.value.clone())}}let dw=0;class hw extends Tp{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:dw++}),this.name="",this.usage=mp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class pw extends Jg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class mw{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const fw=new Jm;class gw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Vm(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new rf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return fw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(fw),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return xw(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(vw),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)xw(e[i],this,n,t);return n.sort(vw),n}}function vw(e,t){return e.distance-t.distance}function xw(e,t,n,i){let r=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(r=!1)}if(!0===r&&!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)xw(i[e],t,n,!0)}}class yw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=jp(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(jp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class _w{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class bw{constructor(e,t,n,i){bw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=i,this}}const ww=new Fp;class Aw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fp(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fp(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ww.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ww).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sw=new gm,Ew=new gm;class Cw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Sw.subVectors(e,this.start),Ew.subVectors(this.end,this.start);const n=Ew.dot(Ew);let i=Ew.dot(Sw)/n;return t&&(i=jp(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Tw=new gm;class Mw extends _f{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new mg,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){const e=s/o*Math.PI*2,t=a/o*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new ag(i,3));const r=new cx({fog:!1,toneMapped:!1});this.cone=new bx(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Tw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Tw),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Pw=new gm,Nw=new Jm,Rw=new Jm;class Lw extends bx{constructor(e){const t=jw(e),n=new mg,i=[],r=[],s=new Ff(0,0,1),a=new Ff(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new ag(i,3)),n.setAttribute("color",new ag(r,3));super(n,new cx({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Rw.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(Nw.multiplyMatrices(Rw,e.matrixWorld),Pw.setFromMatrixPosition(Nw),i.setXYZ(s,Pw.x,Pw.y,Pw.z),Nw.multiplyMatrices(Rw,e.parent.matrixWorld),Pw.setFromMatrixPosition(Nw),i.setXYZ(s+1,Pw.x,Pw.y,Pw.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function jw(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,jw(e.children[n]));return t}class Iw extends Cg{constructor(e,t,n){super(new e_(t,4,2),new Gf({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const kw=new gm,Bw=new Ff,Dw=new Ff;class Ow extends _f{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new qy(t);i.rotateY(.5*Math.PI),this.material=new Gf({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new Kf(s,3)),this.add(new Cg(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Bw.copy(this.light.color),Dw.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?Bw:Dw;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(kw.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Fw extends bx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Ff(n),i=new Ff(i);const r=t/2,s=e/t,a=e/2,o=[],l=[];for(let u=0,d=0,h=-a;u<=t;u++,h+=s){o.push(-a,0,h,a,0,h),o.push(h,0,-a,h,0,a);const e=u===r?n:i;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new mg;c.setAttribute("position",new ag(o,3)),c.setAttribute("color",new ag(l,3));super(c,new cx({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Uw extends bx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new Ff(r),s=new Ff(s);const a=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(i,0,l);const u=1&c?r:s;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?r:s,l=e-e/n*c;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l;a.push(r,0,s),o.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l,a.push(r,0,s),o.push(t.r,t.g,t.b)}}const l=new mg;l.setAttribute("position",new ag(a,3)),l.setAttribute("color",new ag(o,3));super(l,new cx({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const zw=new gm,Hw=new gm,Gw=new gm;class Ww extends _f{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new mg;i.setAttribute("position",new ag([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new cx({fog:!1,toneMapped:!1});this.lightPlane=new vx(i,r),this.add(this.lightPlane),i=new mg,i.setAttribute("position",new ag([0,0,0,0,0,1],3)),this.targetLine=new vx(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),zw.setFromMatrixPosition(this.light.matrixWorld),Hw.setFromMatrixPosition(this.light.target.matrixWorld),Gw.subVectors(Hw,zw),this.lightPlane.lookAt(Hw),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hw),this.targetLine.scale.z=Gw.length()}}const Vw=new gm,Jw=new Ig;class Yw extends bx{constructor(e){const t=new mg,n=new cx({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function a(e,t){o(e),o(t)}function o(e){i.push(0,0,0),r.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new ag(i,3)),t.setAttribute("color",new ag(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new Ff(16755200),c=new Ff(16711680),u=new Ff(43775),d=new Ff(16777215),h=new Ff(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,i,r){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Jw.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const n=this.camera.coordinateSystem===Ep?-1:0;Xw("c",t,e,Jw,0,0,n),Xw("t",t,e,Jw,0,0,1),Xw("n1",t,e,Jw,-1,-1,n),Xw("n2",t,e,Jw,1,-1,n),Xw("n3",t,e,Jw,-1,1,n),Xw("n4",t,e,Jw,1,1,n),Xw("f1",t,e,Jw,-1,-1,1),Xw("f2",t,e,Jw,1,-1,1),Xw("f3",t,e,Jw,-1,1,1),Xw("f4",t,e,Jw,1,1,1),Xw("u1",t,e,Jw,.7,1.1,n),Xw("u2",t,e,Jw,-.7,1.1,n),Xw("u3",t,e,Jw,0,2,n),Xw("cf1",t,e,Jw,-1,0,1),Xw("cf2",t,e,Jw,1,0,1),Xw("cf3",t,e,Jw,0,-1,1),Xw("cf4",t,e,Jw,0,1,1),Xw("cn1",t,e,Jw,-1,0,n),Xw("cn2",t,e,Jw,1,0,n),Xw("cn3",t,e,Jw,0,-1,n),Xw("cn4",t,e,Jw,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xw(e,t,n,i,r,s,a){Vw.set(r,s,a).unproject(i);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],Vw.x,Vw.y,Vw.z)}}const Zw=new ym;class qw extends bx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new mg;r.setIndex(new Kf(n,1)),r.setAttribute("position",new Kf(i,3)),super(r,new cx({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Zw.setFromObject(this.object),Zw.isEmpty())return;const t=Zw.min,n=Zw.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kw extends bx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new mg;i.setIndex(new Kf(n,1)),i.setAttribute("position",new ag([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new cx({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qw extends vx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new mg;i.setAttribute("position",new ag([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new cx({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new mg;r.setAttribute("position",new ag([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Cg(r,new Gf({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $w=new gm;let eA,tA;class nA extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gm(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gm(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===eA&&(eA=new mg,eA.setAttribute("position",new ag([0,0,0,0,1,0],3)),tA=new cy(0,.5,1,5,1),tA.translate(0,-.5,0)),this.position.copy(t),this.line=new vx(eA,new cx({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Cg(tA,new Gf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$w.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($w,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class iA extends bx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new mg;n.setAttribute("position",new ag(t,3)),n.setAttribute("color",new ag([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new cx({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new Ff,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rA{constructor(){this.type="ShapePath",this.color=new Ff,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=t[r],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[r],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const n=Wy.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,s,a;const o=[];if(1===i.length)return s=i[0],a=new xy,a.curves=s.curves,o.push(a),o;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,p=[],m=0;u[m]=void 0,p[m]=[];for(let f=0,g=i.length;f<g;f++)s=i[f],d=s.getPoints(),r=n(d),r=e?!r:r,r?(!l&&u[m]&&m++,u[m]={s:new xy,p:d},u[m].s.curves=s.curves,l&&m++,p[m]=[]):p[m].push({h:s,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new xy;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)c[t]=[];for(let i=0,r=u.length;i<r;i++){const r=p[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<u.length;r++)t(a.p,u[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(a)):e=!0);o&&c[i].push(a)}}n>0&&!1===e&&(p=c)}for(let f=0,g=u.length;f<g;f++){a=u[f].s,o.push(a),h=p[f];for(let e=0,t=h.length;e<t;e++)a.holes.push(h[e].h)}return o}}class sA extends Tp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function aA(e,t,n,i){const r=function(e){switch(e){case gd:case vd:return{byteLength:1,components:1};case yd:case xd:case Ad:return{byteLength:2,components:1};case Sd:case Ed:return{byteLength:2,components:4};case bd:case _d:case wd:return{byteLength:4,components:1};case Td:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(i);switch(n){case Md:case Rd:return e*t;case Ld:return e*t*2;case kd:case Bd:return e*t/r.components*r.byteLength;case Dd:case Od:return e*t*2/r.components*r.byteLength;case Pd:return e*t*3/r.components*r.byteLength;case Nd:case Ud:return e*t*4/r.components*r.byteLength;case zd:case Hd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Gd:case Wd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Jd:case Xd:return Math.max(e,16)*Math.max(t,8)/4;case Vd:case Yd:return Math.max(e,8)*Math.max(t,8)/2;case Zd:case qd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Kd:case Qd:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case $d:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case eh:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case th:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case nh:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case ih:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case rh:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case sh:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case ah:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case oh:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case lh:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case ch:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case uh:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case dh:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case hh:case ph:case mh:return Math.ceil(e/4)*Math.ceil(t/4)*16;case fh:case gh:return Math.ceil(e/4)*Math.ceil(t/4)*8;case vh:case xh:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}const oA={contain:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:aA};function lA(){let e=null,t=!1,n=null,i=null;function r(t,s){n(t,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function cA(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,s=i.byteLength,a=e.createBuffer();let o;if(e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)o=e.FLOAT;else if(i instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)o=e.SHORT;else if(i instanceof Uint32Array)o=e.UNSIGNED_INT;else if(i instanceof Int32Array)o=e.INT;else if(i instanceof Int8Array)o=e.BYTE;else if(i instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:s}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,i){const r=n.array,s=n.updateRanges;if(e.bindBuffer(i,t),0===s.length)e.bufferSubData(i,0,r);else{s.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<s.length;e++){const n=s[t],i=s[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,s[t]=i)}s.length=t+1;for(let n=0,a=s.length;n<a;n++){const t=s[n];e.bufferSubData(i,t.start*r.BYTES_PER_ELEMENT,r,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wc}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wc);const uA={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},dA={common:{diffuse:{value:new Ff(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Up},alphaMap:{value:null},alphaMapTransform:{value:new Up},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Up}},envmap:{envMap:{value:null},envMapRotation:{value:new Up},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Up}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Up}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Up},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Up},normalScale:{value:new Fp(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Up},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Up}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Up}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Up}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ff(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ff(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Up},alphaTest:{value:0},uvTransform:{value:new Up}},sprite:{diffuse:{value:new Ff(16777215)},opacity:{value:1},center:{value:new Fp(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Up},alphaMap:{value:null},alphaMapTransform:{value:new Up},alphaTest:{value:0}}},hA={basic:{uniforms:Ng([dA.common,dA.specularmap,dA.envmap,dA.aomap,dA.lightmap,dA.fog]),vertexShader:uA.meshbasic_vert,fragmentShader:uA.meshbasic_frag},lambert:{uniforms:Ng([dA.common,dA.specularmap,dA.envmap,dA.aomap,dA.lightmap,dA.emissivemap,dA.bumpmap,dA.normalmap,dA.displacementmap,dA.fog,dA.lights,{emissive:{value:new Ff(0)}}]),vertexShader:uA.meshlambert_vert,fragmentShader:uA.meshlambert_frag},phong:{uniforms:Ng([dA.common,dA.specularmap,dA.envmap,dA.aomap,dA.lightmap,dA.emissivemap,dA.bumpmap,dA.normalmap,dA.displacementmap,dA.fog,dA.lights,{emissive:{value:new Ff(0)},specular:{value:new Ff(1118481)},shininess:{value:30}}]),vertexShader:uA.meshphong_vert,fragmentShader:uA.meshphong_frag},standard:{uniforms:Ng([dA.common,dA.envmap,dA.aomap,dA.lightmap,dA.emissivemap,dA.bumpmap,dA.normalmap,dA.displacementmap,dA.roughnessmap,dA.metalnessmap,dA.fog,dA.lights,{emissive:{value:new Ff(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:uA.meshphysical_vert,fragmentShader:uA.meshphysical_frag},toon:{uniforms:Ng([dA.common,dA.aomap,dA.lightmap,dA.emissivemap,dA.bumpmap,dA.normalmap,dA.displacementmap,dA.gradientmap,dA.fog,dA.lights,{emissive:{value:new Ff(0)}}]),vertexShader:uA.meshtoon_vert,fragmentShader:uA.meshtoon_frag},matcap:{uniforms:Ng([dA.common,dA.bumpmap,dA.normalmap,dA.displacementmap,dA.fog,{matcap:{value:null}}]),vertexShader:uA.meshmatcap_vert,fragmentShader:uA.meshmatcap_frag},points:{uniforms:Ng([dA.points,dA.fog]),vertexShader:uA.points_vert,fragmentShader:uA.points_frag},dashed:{uniforms:Ng([dA.common,dA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:uA.linedashed_vert,fragmentShader:uA.linedashed_frag},depth:{uniforms:Ng([dA.common,dA.displacementmap]),vertexShader:uA.depth_vert,fragmentShader:uA.depth_frag},normal:{uniforms:Ng([dA.common,dA.bumpmap,dA.normalmap,dA.displacementmap,{opacity:{value:1}}]),vertexShader:uA.meshnormal_vert,fragmentShader:uA.meshnormal_frag},sprite:{uniforms:Ng([dA.sprite,dA.fog]),vertexShader:uA.sprite_vert,fragmentShader:uA.sprite_frag},background:{uniforms:{uvTransform:{value:new Up},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:uA.background_vert,fragmentShader:uA.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Up}},vertexShader:uA.backgroundCube_vert,fragmentShader:uA.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:uA.cube_vert,fragmentShader:uA.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:uA.equirect_vert,fragmentShader:uA.equirect_frag},distanceRGBA:{uniforms:Ng([dA.common,dA.displacementmap,{referencePosition:{value:new gm},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:uA.distanceRGBA_vert,fragmentShader:uA.distanceRGBA_frag},shadow:{uniforms:Ng([dA.lights,dA.fog,{color:{value:new Ff(0)},opacity:{value:1}}]),vertexShader:uA.shadow_vert,fragmentShader:uA.shadow_frag}};hA.physical={uniforms:Ng([hA.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Up},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Up},clearcoatNormalScale:{value:new Fp(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Up},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Up},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Up},sheen:{value:0},sheenColor:{value:new Ff(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Up},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Up},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Up},transmissionSamplerSize:{value:new Fp},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Up},attenuationDistance:{value:0},attenuationColor:{value:new Ff(0)},specularColor:{value:new Ff(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Up},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Up},anisotropyVector:{value:new Fp},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Up}}]),vertexShader:uA.meshphysical_vert,fragmentShader:uA.meshphysical_frag};const pA={r:0,b:0,g:0},mA=new nf,fA=new Jm;function gA(e,t,n,i,r,s,a){const o=new Ff(0);let l,c,u=!0===s?0:1,d=null,h=0,p=null;function m(e){let i=!0===e.isScene?e.background:null;if(i&&i.isTexture){i=(e.backgroundBlurriness>0?n:t).get(i)}return i}function f(t,n){t.getRGB(pA,Rg(e)),i.buffers.color.setClear(pA.r,pA.g,pA.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(o,u)},render:function(t){let n=!1;const r=m(t);null===r?f(o,u):r&&r.isColor&&(f(r,1),n=!0);const s=e.xr.getEnvironmentBlendMode();"additive"===s?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===s&&i.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const i=m(n);i&&(i.isCubeTexture||i.mapping===nd)?(void 0===c&&(c=new Cg(new Mg(1,1,1),new jg({name:"BackgroundCubeMaterial",uniforms:Pg(hA.backgroundCube.uniforms),vertexShader:hA.backgroundCube.vertexShader,fragmentShader:hA.backgroundCube.fragmentShader,side:nu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),mA.copy(n.backgroundRotation),mA.x*=-1,mA.y*=-1,mA.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(mA.y*=-1,mA.z*=-1),c.material.uniforms.envMap.value=i,c.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(fA.makeRotationFromEuler(mA)),c.material.toneMapped=Qp.getTransfer(i.colorSpace)!==Gh,d===i&&h===i.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=i,h=i.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new Cg(new Ky(2,2),new jg({name:"BackgroundMaterial",uniforms:Pg(hA.background.uniforms),vertexShader:hA.background.vertexShader,fragmentShader:hA.background.fragmentShader,side:tu,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Qp.getTransfer(i.colorSpace)!==Gh,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),d===i&&h===i.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=i,h=i.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose()),void 0!==l&&(l.geometry.dispose(),l.material.dispose())}}}function vA(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=c(null);let s=r,a=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],i=[],r=[];for(let s=0;s<n;s++)t[s]=0,i[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){const e=s.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function d(e){h(e,0)}function h(t,n){const i=s.newAttributes,r=s.enabledAttributes,a=s.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function p(){const t=s.newAttributes,n=s.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function m(t,n,i,r,s,a,o){!0===o?e.vertexAttribIPointer(t,n,i,s,a):e.vertexAttribPointer(t,n,i,r,s,a)}function f(){g(),a=!0,s!==r&&(s=r,o(s.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,f,g){let v=!1;const x=function(t,n,r){const s=!0===r.wireframe;let a=i[t.id];void 0===a&&(a={},i[t.id]=a);let o=a[n.id];void 0===o&&(o={},a[n.id]=o);let l=o[s];void 0===l&&(l=c(e.createVertexArray()),o[s]=l);return l}(f,l,r);s!==x&&(s=x,o(s.object)),v=function(e,t,n,i){const r=s.attributes,a=t.attributes;let o=0;const l=n.getAttributes();for(const s in l){if(l[s].location>=0){const t=r[s];let n=a[s];if(void 0===n&&("instanceMatrix"===s&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===s&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}}return s.attributesNum!==o||s.index!==i}(n,f,l,g),v&&function(e,t,n,i){const r={},a=t.attributes;let o=0;const l=n.getAttributes();for(const s in l){if(l[s].location>=0){let t=a[s];void 0===t&&("instanceMatrix"===s&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===s&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[s]=n,o++}}s.attributes=r,s.attributesNum=o,s.index=i}(n,f,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||a)&&(a=!1,function(n,i,r,s){u();const a=s.attributes,o=r.getAttributes(),l=i.defaultAttributeValues;for(const c in o){const i=o[c];if(i.location>=0){let r=a[c];if(void 0===r&&("instanceMatrix"===c&&n.instanceMatrix&&(r=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(r=n.instanceColor)),void 0!==r){const a=r.normalized,o=r.itemSize,l=t.get(r);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement,f=u===e.INT||u===e.UNSIGNED_INT||r.gpuType===_d;if(r.isInterleavedBufferAttribute){const t=r.data,l=t.stride,g=r.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)h(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)d(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)m(i.location+e,o/i.locationSize,u,a,l*p,(g+o/i.locationSize*e)*p,f)}else{if(r.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)h(i.location+e,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<i.locationSize;e++)d(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<i.locationSize;e++)m(i.location+e,o/i.locationSize,u,a,o*p,o/i.locationSize*e*p,f)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}p()}(n,r,l,f),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:f,resetDefaultState:g,dispose:function(){f();for(const e in i){const t=i[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;const t=i[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete i[e.id]},releaseStatesOfProgram:function(e){for(const t in i){const n=i[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)l(r[e].object),delete r[e];delete n[e.id]}},initAttributes:u,enableAttribute:d,disableUnusedAttributes:p}}function xA(e,t,n){let i;function r(t,r,s){0!==s&&(e.drawArraysInstanced(i,t,r,s),n.update(r,i,s))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,r,0,s);let a=0;for(let t=0;t<s;t++)a+=r[t];n.update(a,i,1)},this.renderMultiDrawInstances=function(e,s,a,o){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],s[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,s,0,o,0,a);let t=0;for(let e=0;e<a;e++)t+=s[e]*o[e];n.update(t,i,1)}}}function yA(e,t,n,i){let r;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const o=s(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,textureFormatReadable:function(t){return t===Nd||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===Ad&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==gd&&i.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==wd&&!r)},precision:a,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function _A(e){const t=this;let n=null,i=0,r=!1,s=!1;const a=new zv,o=new Up,l={value:null,needsUpdate:!1};function c(e,n,i,r){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const t=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==s;++n,l+=4)a.copy(e[n]).applyMatrix4(r,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,u){const d=a.clippingPlanes,h=a.clipIntersection,p=a.clipShadows,m=e.get(a);if(!r||null===d||0===d.length||s&&!p)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=s?0:i,t=4*e;let r=m.clippingState||null;l.value=r,r=c(d,o,t,u);for(let i=0;i!==t;++i)r[i]=n[i];m.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function bA(e){let t=new WeakMap;function n(e,t){return t===ed?e.mapping=Qu:t===td&&(e.mapping=$u),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping;if(s===ed||s===td){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new Hg(s.height);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}const wA=[.125,.215,.35,.446,.526,.582],AA=20,SA=new hb,EA=new Ff;let CA=null,TA=0,MA=0,PA=!1;const NA=(1+Math.sqrt(5))/2,RA=1/NA,LA=[new gm(-NA,RA,0),new gm(NA,RA,0),new gm(-RA,0,NA),new gm(RA,0,NA),new gm(0,NA,-RA),new gm(0,NA,RA),new gm(-1,1,-1),new gm(1,1,-1),new gm(-1,1,1),new gm(1,1,1)];class jA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;CA=this._renderer.getRenderTarget(),TA=this._renderer.getActiveCubeFace(),MA=this._renderer.getActiveMipmapLevel(),PA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=DA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=BA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(CA,TA,MA),this._renderer.xr.enabled=PA,e.scissorTest=!1,kA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Qu||e.mapping===$u?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CA=this._renderer.getRenderTarget(),TA=this._renderer.getActiveCubeFace(),MA=this._renderer.getActiveMipmapLevel(),PA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:dd,minFilter:dd,generateMipmaps:!1,type:Ad,format:Nd,colorSpace:zh,depthBuffer:!1},i=IA(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=IA(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const s=e-4+1+wA.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>e-4?o=wA[a-e+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,m=3,f=2,g=1,v=new Float32Array(m*p*h),x=new Float32Array(f*p*h),y=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,m*p*e),x.set(d,f*p*e);const r=[e,e,e,e,e,e];y.set(r,g*p*e)}const _=new mg;_.setAttribute("position",new Kf(v,m)),_.setAttribute("uv",new Kf(x,f)),_.setAttribute("faceIndex",new Kf(y,g)),t.push(_),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(AA),r=new gm(0,1,0),s=new jg({name:"SphericalGaussianBlur",defines:{n:AA,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ru,depthTest:!1,depthWrite:!1});return s}(i,e,t)}return i}_compileMaterial(e){const t=new Cg(this._lodPlanes[0],e);this._renderer.compile(t,SA)}_sceneToCubeUV(e,t,n,i){const r=new Og(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(EA),o.toneMapping=zu,o.autoClear=!1;const u=new Gf({name:"PMREM.Background",side:nu,depthWrite:!1,depthTest:!1}),d=new Cg(new Mg,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(EA),h=!0);for(let m=0;m<6;m++){const t=m%3;0===t?(r.up.set(0,s[m],0),r.lookAt(a[m],0,0)):1===t?(r.up.set(0,0,s[m]),r.lookAt(0,a[m],0)):(r.up.set(0,s[m],0),r.lookAt(0,0,a[m]));const n=this._cubeSize;kA(i,t*n,m>2?n:0,n,n),o.setRenderTarget(i),h&&o.render(d,r),o.render(e,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Qu||e.mapping===$u;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=DA()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=BA());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new Cg(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;kA(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,SA)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=LA[(i-r-1)%LA.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Cg(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*d):2*Math.PI/39,p=r/h,m=isFinite(r)?1+Math.floor(3*p):AA;m>AA&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(m," samples when the maximum is set to ").concat(AA));const f=[];let g=0;for(let y=0;y<AA;++y){const e=y/p,t=Math.exp(-e*e/2);f.push(t),0===y?g+=t:y<m&&(g+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/g;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=f,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const x=this._sizeLods[i];kA(t,3*x*(i>v-4?i-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(t),o.render(c,SA)}}function IA(e,t,n){const i=new um(e,t,n);return i.texture.mapping=nd,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function kA(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function BA(){return new jg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ru,depthTest:!1,depthWrite:!1})}function DA(){return new jg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ru,depthTest:!1,depthWrite:!1})}function OA(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===ed||s===td,o=s===Qu||s===$u;if(a||o){let s=t.get(r);const l=void 0!==s?s.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new jA(e)),s=a?n.fromEquirectangular(r,s):n.fromCubemap(r,s),s.texture.pmremVersion=r.pmremVersion,t.set(r,s),s.texture;if(void 0!==s)return s.texture;{const l=r.image;return a&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(l)?(null===n&&(n=new jA(e)),s=a?n.fromEquirectangular(r):n.fromCubemap(r),s.texture.pmremVersion=r.pmremVersion,t.set(r,s),r.addEventListener("dispose",i),s.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function FA(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&Xp("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function UA(e,t,n,i){const r={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],s=e[t+2];n.push(i,r,r,s,s,i)}}else{if(void 0===r)return;{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(Hp(n)?rg:ng)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const r in i)t.update(i[r],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function zA(e,t,n){let i,r,s;function a(t,a,o){0!==o&&(e.drawElementsInstanced(i,a,r,t*s,o),n.update(a,i,o))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,s=e.bytesPerElement},this.render=function(t,a){e.drawElements(i,a,r,t*s),n.update(a,i,1)},this.renderInstances=a,this.renderMultiDraw=function(e,s,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,s,0,r,e,0,a);let o=0;for(let t=0;t<a;t++)o+=s[t];n.update(o,i,1)},this.renderMultiDrawInstances=function(e,o,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/s,o[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(i,o,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*c[e];n.update(t,i,1)}}}function HA(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function GA(e,t,n){const i=new WeakMap,r=new lm;return{update:function(s,a,o){const l=s.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==c?c.length:0;let d=i.get(a);if(void 0===d||d.count!==u){void 0!==d&&d.texture.dispose();const h=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,m=void 0!==a.morphAttributes.color,f=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let x=0;!0===h&&(x=1),!0===p&&(x=2),!0===m&&(x=3);let y=a.attributes.position.count*x,_=1;y>t.maxTextureSize&&(_=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const b=new Float32Array(y*_*4*u),w=new dm(b,y,_,u);w.type=wd,w.needsUpdate=!0;const A=4*x;for(let E=0;E<u;E++){const C=f[E],T=g[E],M=v[E],P=y*_*4*E;for(let N=0;N<C.count;N++){const R=N*A;!0===h&&(r.fromBufferAttribute(C,N),b[P+R+0]=r.x,b[P+R+1]=r.y,b[P+R+2]=r.z,b[P+R+3]=0),!0===p&&(r.fromBufferAttribute(T,N),b[P+R+4]=r.x,b[P+R+5]=r.y,b[P+R+6]=r.z,b[P+R+7]=0),!0===m&&(r.fromBufferAttribute(M,N),b[P+R+8]=r.x,b[P+R+9]=r.y,b[P+R+10]=r.z,b[P+R+11]=4===M.itemSize?r.w:1)}}function S(){w.dispose(),i.delete(a),a.removeEventListener("dispose",S)}d={count:u,texture:w,size:new Fp(y,_)},i.set(a,d),a.addEventListener("dispose",S)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)o.getUniforms().setValue(e,"morphTexture",s.morphTexture,n);else{let L=0;for(let I=0;I<l.length;I++)L+=l[I];const j=a.morphTargetsRelative?1:1-L;o.getUniforms().setValue(e,"morphTargetBaseInfluence",j),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",d.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}}}function WA(e,t,n,i){let r=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=i.render.frame,l=a.geometry,c=t.get(a,l);if(r.get(c)!==o&&(t.update(c),r.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),r.get(a)!==o&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,o))),a.isSkinnedMesh){const e=a.skeleton;r.get(e)!==o&&(e.update(),r.set(e,o))}return c},dispose:function(){r=new WeakMap}}}const VA=new om,JA=new Dx(1,1),YA=new dm,XA=new pm,ZA=new zg,qA=[],KA=[],QA=new Float32Array(16),$A=new Float32Array(9),eS=new Float32Array(4);function tS(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=qA[r];if(void 0===s&&(s=new Float32Array(r),qA[r]=s),0!==t){i.toArray(s,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(s,r)}return s}function nS(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function iS(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function rS(e,t){let n=KA[t];void 0===n&&(n=new Int32Array(t),KA[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function sS(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function aS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nS(n,t))return;e.uniform2fv(this.addr,t),iS(n,t)}}function oS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(nS(n,t))return;e.uniform3fv(this.addr,t),iS(n,t)}}function lS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nS(n,t))return;e.uniform4fv(this.addr,t),iS(n,t)}}function cS(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(nS(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),iS(n,t)}else{if(nS(n,i))return;eS.set(i),e.uniformMatrix2fv(this.addr,!1,eS),iS(n,i)}}function uS(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(nS(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),iS(n,t)}else{if(nS(n,i))return;$A.set(i),e.uniformMatrix3fv(this.addr,!1,$A),iS(n,i)}}function dS(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(nS(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),iS(n,t)}else{if(nS(n,i))return;QA.set(i),e.uniformMatrix4fv(this.addr,!1,QA),iS(n,i)}}function hS(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function pS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nS(n,t))return;e.uniform2iv(this.addr,t),iS(n,t)}}function mS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(nS(n,t))return;e.uniform3iv(this.addr,t),iS(n,t)}}function fS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nS(n,t))return;e.uniform4iv(this.addr,t),iS(n,t)}}function gS(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function vS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nS(n,t))return;e.uniform2uiv(this.addr,t),iS(n,t)}}function xS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(nS(n,t))return;e.uniform3uiv(this.addr,t),iS(n,t)}}function yS(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nS(n,t))return;e.uniform4uiv(this.addr,t),iS(n,t)}}function _S(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let s;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(JA.compareFunction=cp,s=JA):s=VA,n.setTexture2D(t||s,r)}function bS(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||XA,r)}function wS(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||ZA,r)}function AS(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||YA,r)}function SS(e,t){e.uniform1fv(this.addr,t)}function ES(e,t){const n=tS(t,this.size,2);e.uniform2fv(this.addr,n)}function CS(e,t){const n=tS(t,this.size,3);e.uniform3fv(this.addr,n)}function TS(e,t){const n=tS(t,this.size,4);e.uniform4fv(this.addr,n)}function MS(e,t){const n=tS(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function PS(e,t){const n=tS(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function NS(e,t){const n=tS(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function RS(e,t){e.uniform1iv(this.addr,t)}function LS(e,t){e.uniform2iv(this.addr,t)}function jS(e,t){e.uniform3iv(this.addr,t)}function IS(e,t){e.uniform4iv(this.addr,t)}function kS(e,t){e.uniform1uiv(this.addr,t)}function BS(e,t){e.uniform2uiv(this.addr,t)}function DS(e,t){e.uniform3uiv(this.addr,t)}function OS(e,t){e.uniform4uiv(this.addr,t)}function FS(e,t,n){const i=this.cache,r=t.length,s=rS(n,r);nS(i,s)||(e.uniform1iv(this.addr,s),iS(i,s));for(let a=0;a!==r;++a)n.setTexture2D(t[a]||VA,s[a])}function US(e,t,n){const i=this.cache,r=t.length,s=rS(n,r);nS(i,s)||(e.uniform1iv(this.addr,s),iS(i,s));for(let a=0;a!==r;++a)n.setTexture3D(t[a]||XA,s[a])}function zS(e,t,n){const i=this.cache,r=t.length,s=rS(n,r);nS(i,s)||(e.uniform1iv(this.addr,s),iS(i,s));for(let a=0;a!==r;++a)n.setTextureCube(t[a]||ZA,s[a])}function HS(e,t,n){const i=this.cache,r=t.length,s=rS(n,r);nS(i,s)||(e.uniform1iv(this.addr,s),iS(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(t[a]||YA,s[a])}class GS{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return sS;case 35664:return aS;case 35665:return oS;case 35666:return lS;case 35674:return cS;case 35675:return uS;case 35676:return dS;case 5124:case 35670:return hS;case 35667:case 35671:return pS;case 35668:case 35672:return mS;case 35669:case 35673:return fS;case 5125:return gS;case 36294:return vS;case 36295:return xS;case 36296:return yS;case 35678:case 36198:case 36298:case 36306:case 35682:return _S;case 35679:case 36299:case 36307:return bS;case 35680:case 36300:case 36308:case 36293:return wS;case 36289:case 36303:case 36311:case 36292:return AS}}(t.type)}}class WS{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return SS;case 35664:return ES;case 35665:return CS;case 35666:return TS;case 35674:return MS;case 35675:return PS;case 35676:return NS;case 5124:case 35670:return RS;case 35667:case 35671:return LS;case 35668:case 35672:return jS;case 35669:case 35673:return IS;case 5125:return kS;case 36294:return BS;case 36295:return DS;case 36296:return OS;case 35678:case 36198:case 36298:case 36306:case 35682:return FS;case 35679:case 36299:case 36307:return US;case 35680:case 36300:case 36308:case 36293:return zS;case 36289:case 36303:case 36311:case 36292:return HS}}(t.type)}}class VS{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(e,t[s.id],n)}}}const JS=/(\w+)(\])?(\[|\.)?/g;function YS(e,t){e.seq.push(t),e.map[t.id]=t}function XS(e,t,n){const i=e.name,r=i.length;for(JS.lastIndex=0;;){const s=JS.exec(i),a=JS.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){YS(n,void 0===c?new GS(o,e,t):new WS(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new VS(o),YS(n,e)),n=e}}}class ZS{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);XS(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function qS(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let KS=0;const QS=new Up;function $S(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let a=r;a<s;a++){const e=a+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[a]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function eE(e,t){const n=function(e){Qp._getMatrix(QS,Qp.workingColorSpace,e);const t="mat3( ".concat(QS.elements.map(e=>e.toFixed(4))," )");switch(Qp.getTransfer(e)){case Hh:return[t,"LinearTransferOETF"];case Gh:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function tE(e,t){let n;switch(t){case Hu:n="Linear";break;case Gu:n="Reinhard";break;case Wu:n="Cineon";break;case Vu:n="ACESFilmic";break;case Yu:n="AgX";break;case Xu:n="Neutral";break;case Ju:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const nE=new gm;function iE(){Qp.getLuminanceCoefficients(nE);const e=nE.x.toFixed(4),t=nE.y.toFixed(4),n=nE.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function rE(e){return""!==e}function sE(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function aE(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const oE=/^[ \t]*#include +<([\w\d./]+)>/gm;function lE(e){return e.replace(oE,uE)}const cE=new Map;function uE(e,t){let n=uA[t];if(void 0===n){const e=cE.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=uA[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return lE(n)}const dE=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hE(e){return e.replace(dE,pE)}function pE(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mE(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function fE(e,t,n,i){const r=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Qc?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===$c?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===eu&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Qu:case $u:t="ENVMAP_TYPE_CUBE";break;case nd:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===$u&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Ou:t="ENVMAP_BLENDING_MULTIPLY";break;case Fu:t="ENVMAP_BLENDING_MIX";break;case Uu:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(rE).join("\n")}(n),m=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),f=r.createProgram();let g,v,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(rE).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(rE).join("\n"),v.length>0&&(v+="\n")):(g=[mE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rE).join("\n"),v=[mE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==zu?"#define TONE_MAPPING":"",n.toneMapping!==zu?uA.tonemapping_pars_fragment:"",n.toneMapping!==zu?tE("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",uA.colorspace_pars_fragment,eE("linearToOutputTexel",n.outputColorSpace),iE(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(rE).join("\n")),a=lE(a),a=sE(a,n),a=aE(a,n),o=lE(o),o=sE(o,n),o=aE(o,n),a=hE(a),o=hE(o),!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Sp?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Sp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=x+g+a,_=x+v+o,b=qS(r,r.VERTEX_SHADER,y),w=qS(r,r.FRAGMENT_SHADER,_);function A(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(f).trim(),i=r.getShaderInfoLog(b).trim(),s=r.getShaderInfoLog(w).trim();let a=!0,o=!0;if(!1===r.getProgramParameter(f,r.LINK_STATUS))if(a=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,f,b,w);else{const e=$S(r,b,"vertex"),i=$S(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(f,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+i)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==s||(o=!1);o&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:i,prefix:g},fragmentShader:{log:s,prefix:v}})}r.deleteShader(b),r.deleteShader(w),S=new ZS(r,f),E=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),s=i.name;let a=1;i.type===e.FLOAT_MAT2&&(a=2),i.type===e.FLOAT_MAT3&&(a=3),i.type===e.FLOAT_MAT4&&(a=4),n[s]={type:i.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(r,f)}let S,E;r.attachShader(f,b),r.attachShader(f,w),void 0!==n.index0AttributeName?r.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(f,0,"position"),r.linkProgram(f),this.getUniforms=function(){return void 0===S&&A(this),S},this.getAttributes=function(){return void 0===E&&A(this),E};let C=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=r.getProgramParameter(f,37297)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(f),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=KS++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=b,this.fragmentShader=w,this}let gE=0;class vE{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new xE(e),t.set(e,n)),n}}class xE{constructor(e){this.id=gE++,this.code=e,this.usedTimes=0}}function yE(e,t,n,i,r,s,a){const o=new rf,l=new vE,c=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(s,o,u,g,v){const x=g.fog,y=v.geometry,_=s.isMeshStandardMaterial?g.environment:null,b=(s.isMeshStandardMaterial?n:t).get(s.envMap||_),w=b&&b.mapping===nd?b.image.height:null,A=m[s.type];null!==s.precision&&(p=r.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const S=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,E=void 0!==S?S.length:0;let C,T,M,P,N=0;if(void 0!==y.morphAttributes.position&&(N=1),void 0!==y.morphAttributes.normal&&(N=2),void 0!==y.morphAttributes.color&&(N=3),A){const e=hA[A];C=e.vertexShader,T=e.fragmentShader}else C=s.vertexShader,T=s.fragmentShader,l.update(s),M=l.getVertexShaderID(s),P=l.getFragmentShaderID(s);const R=e.getRenderTarget(),L=e.state.buffers.depth.getReversed(),j=!0===v.isInstancedMesh,I=!0===v.isBatchedMesh,k=!!s.map,B=!!s.matcap,D=!!b,O=!!s.aoMap,F=!!s.lightMap,U=!!s.bumpMap,z=!!s.normalMap,H=!!s.displacementMap,G=!!s.emissiveMap,W=!!s.metalnessMap,V=!!s.roughnessMap,J=s.anisotropy>0,Y=s.clearcoat>0,X=s.dispersion>0,Z=s.iridescence>0,q=s.sheen>0,K=s.transmission>0,Q=J&&!!s.anisotropyMap,$=Y&&!!s.clearcoatMap,ee=Y&&!!s.clearcoatNormalMap,te=Y&&!!s.clearcoatRoughnessMap,ne=Z&&!!s.iridescenceMap,ie=Z&&!!s.iridescenceThicknessMap,re=q&&!!s.sheenColorMap,se=q&&!!s.sheenRoughnessMap,ae=!!s.specularMap,oe=!!s.specularColorMap,le=!!s.specularIntensityMap,ce=K&&!!s.transmissionMap,ue=K&&!!s.thicknessMap,de=!!s.gradientMap,he=!!s.alphaMap,pe=s.alphaTest>0,me=!!s.alphaHash,fe=!!s.extensions;let ge=zu;s.toneMapped&&(null!==R&&!0!==R.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:A,shaderType:s.type,shaderName:s.name,vertexShader:C,fragmentShader:T,defines:s.defines,customVertexShaderID:M,customFragmentShaderID:P,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,batching:I,batchingColor:I&&null!==v._colorsTexture,instancing:j,instancingColor:j&&null!==v.instanceColor,instancingMorph:j&&null!==v.morphTexture,supportsVertexTextures:h,outputColorSpace:null===R?e.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:zh,alphaToCoverage:!!s.alphaToCoverage,map:k,matcap:B,envMap:D,envMapMode:D&&b.mapping,envMapCubeUVHeight:w,aoMap:O,lightMap:F,bumpMap:U,normalMap:z,displacementMap:h&&H,emissiveMap:G,normalMapObjectSpace:z&&s.normalMapType===Oh,normalMapTangentSpace:z&&s.normalMapType===Dh,metalnessMap:W,roughnessMap:V,anisotropy:J,anisotropyMap:Q,clearcoat:Y,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:X,iridescence:Z,iridescenceMap:ne,iridescenceThicknessMap:ie,sheen:q,sheenColorMap:re,sheenRoughnessMap:se,specularMap:ae,specularColorMap:oe,specularIntensityMap:le,transmission:K,transmissionMap:ce,thicknessMap:ue,gradientMap:de,opaque:!1===s.transparent&&s.blending===su&&!1===s.alphaToCoverage,alphaMap:he,alphaTest:pe,alphaHash:me,combine:s.combine,mapUv:k&&f(s.map.channel),aoMapUv:O&&f(s.aoMap.channel),lightMapUv:F&&f(s.lightMap.channel),bumpMapUv:U&&f(s.bumpMap.channel),normalMapUv:z&&f(s.normalMap.channel),displacementMapUv:H&&f(s.displacementMap.channel),emissiveMapUv:G&&f(s.emissiveMap.channel),metalnessMapUv:W&&f(s.metalnessMap.channel),roughnessMapUv:V&&f(s.roughnessMap.channel),anisotropyMapUv:Q&&f(s.anisotropyMap.channel),clearcoatMapUv:$&&f(s.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&f(s.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&f(s.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&f(s.iridescenceThicknessMap.channel),sheenColorMapUv:re&&f(s.sheenColorMap.channel),sheenRoughnessMapUv:se&&f(s.sheenRoughnessMap.channel),specularMapUv:ae&&f(s.specularMap.channel),specularColorMapUv:oe&&f(s.specularColorMap.channel),specularIntensityMapUv:le&&f(s.specularIntensityMap.channel),transmissionMapUv:ce&&f(s.transmissionMap.channel),thicknessMapUv:ue&&f(s.thicknessMap.channel),alphaMapUv:he&&f(s.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(z||J),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!y.attributes.uv&&(k||he),fog:!!x,useFog:!0===s.fog,fogExp2:!!x&&x.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:L,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:E,morphTextureStride:N,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:k&&!0===s.map.isVideoTexture&&Qp.getTransfer(s.map.colorSpace)===Gh,decodeVideoTextureEmissive:G&&!0===s.emissiveMap.isVideoTexture&&Qp.getTransfer(s.emissiveMap.colorSpace)===Gh,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===iu,flipSided:s.side===nu,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:fe&&!0===s.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(fe&&!0===s.extensions.multiDraw||I)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0);t.instancing&&o.enable(1);t.instancingColor&&o.enable(2);t.instancingMorph&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);t.dispersion&&o.enable(20);t.batchingColor&&o.enable(21);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.reverseDepthBuffer&&o.enable(4);t.skinning&&o.enable(5);t.morphTargets&&o.enable(6);t.morphNormals&&o.enable(7);t.morphColors&&o.enable(8);t.premultipliedAlpha&&o.enable(9);t.shadowMapEnabled&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);t.decodeVideoTextureEmissive&&o.enable(20);t.alphaToCoverage&&o.enable(21);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=hA[t];n=Lg.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new fE(e,n,t,s),u.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function _E(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function bE(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function wE(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function AE(){const e=[];let t=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||bE),i.length>1&&i.sort(t||wE),r.length>1&&r.sort(t||wE)}}}function SE(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new AE,e.set(t,[r])):n>=i.length?(r=new AE,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function EE(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new gm,color:new Ff};break;case"SpotLight":n={position:new gm,direction:new gm,color:new Ff,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new gm,color:new Ff,distance:0,decay:0};break;case"HemisphereLight":n={direction:new gm,skyColor:new Ff,groundColor:new Ff};break;case"RectAreaLight":n={color:new Ff,position:new gm,halfWidth:new gm,halfHeight:new gm}}return e[t.id]=n,n}}}let CE=0;function TE(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ME(e){const t=new EE,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fp};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fp,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)i.probe.push(new gm);const r=new gm,s=new Jm,a=new Jm;return{setup:function(r){let s=0,a=0,o=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,c=0,u=0,d=0,h=0,p=0,m=0,f=0,g=0,v=0,x=0;r.sort(TE);for(let e=0,_=r.length;e<_;e++){const y=r[e],_=y.color,b=y.intensity,w=y.distance,A=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)s+=_.r*b,a+=_.g*b,o+=_.b*b;else if(y.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(y.sh.coefficients[e],b);x++}else if(y.isDirectionalLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[l]=t,i.directionalShadowMap[l]=A,i.directionalShadowMatrix[l]=y.shadow.matrix,p++}i.directional[l]=e,l++}else if(y.isSpotLight){const e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(_).multiplyScalar(b),e.distance=w,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,i.spot[u]=e;const r=y.shadow;if(y.map&&(i.spotLightMap[g]=y.map,g++,r.updateMatrices(y),y.castShadow&&v++),i.spotLightMatrix[u]=r.matrix,y.castShadow){const e=n.get(y);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[u]=e,i.spotShadowMap[u]=A,f++}u++}else if(y.isRectAreaLight){const e=t.get(y);e.color.copy(_).multiplyScalar(b),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),i.rectArea[d]=e,d++}else if(y.isPointLight){const e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){const e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[c]=t,i.pointShadowMap[c]=A,i.pointShadowMatrix[c]=y.shadow.matrix,m++}i.point[c]=e,c++}else if(y.isHemisphereLight){const e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(b),e.groundColor.copy(y.groundColor).multiplyScalar(b),i.hemi[h]=e,h++}}d>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=dA.LTC_FLOAT_1,i.rectAreaLTC2=dA.LTC_FLOAT_2):(i.rectAreaLTC1=dA.LTC_HALF_1,i.rectAreaLTC2=dA.LTC_HALF_2)),i.ambient[0]=s,i.ambient[1]=a,i.ambient[2]=o;const y=i.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===u&&y.rectAreaLength===d&&y.hemiLength===h&&y.numDirectionalShadows===p&&y.numPointShadows===m&&y.numSpotShadows===f&&y.numSpotMaps===g&&y.numLightProbes===x||(i.directional.length=l,i.spot.length=u,i.rectArea.length=d,i.point.length=c,i.hemi.length=h,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=f,i.spotShadowMap.length=f,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=f+g-v,i.spotLightMap.length=g,i.numSpotLightShadowsWithMaps=v,i.numLightProbes=x,y.directionalLength=l,y.pointLength=c,y.spotLength=u,y.rectAreaLength=d,y.hemiLength=h,y.numDirectionalShadows=p,y.numPointShadows=m,y.numSpotShadows=f,y.numSpotMaps=g,y.numLightProbes=x,i.version=CE++)},setupView:function(e,t){let n=0,o=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),r.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),a.identity(),s.copy(t.matrixWorld),s.premultiply(d),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=i.point[o];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function PE(e){const t=new ME(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function NE(e){let t=new WeakMap;return{get:function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.get(n);let s;return void 0===r?(s=new PE(e),t.set(n,[s])):i>=r.length?(s=new PE(e),r.push(s)):s=r[i],s},dispose:function(){t=new WeakMap}}}function RE(e,t,n){let i=new Wv;const r=new Fp,s=new Fp,a=new lm,o=new g_({depthPacking:Ih}),l=new v_,c={},u=n.maxTextureSize,d={[tu]:nu,[nu]:tu,[iu]:iu},h=new jg({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fp},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new mg;m.setAttribute("position",new Kf(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Cg(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qc;let v=this.type;function x(n,i){const s=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new um(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,h,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,p,f,null)}function y(t,n,i,r){let s=null;const a=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=s.clone(),i[t]=r,n.addEventListener("dispose",b)),s=r}if(s.visible=n.visible,s.wireframe=n.wireframe,s.side=r===eu?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial){e.properties.get(s).light=i}return s}function _(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===eu)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=y(n,d,a,o);n.onBeforeShadow(e,n,r,s,i,t,u),e.renderBufferDirect(s,null,i,t,n,u),n.onAfterShadow(e,n,r,s,i,t,u)}}}else if(l.visible){const t=y(n,l,a,o);n.onBeforeShadow(e,n,r,s,i,t,null),e.renderBufferDirect(s,null,i,t,n,null),n.onAfterShadow(e,n,r,s,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)_(l[e],r,s,a,o)}function b(e){e.target.removeEventListener("dispose",b);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(ru),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=v!==eu&&this.type===eu,m=v===eu&&this.type!==eu;for(let f=0,g=t.length;f<g;f++){const l=t[f],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const d=c.getFrameExtents();if(r.multiply(d),s.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/d.x),r.x=s.x*d.x,c.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/d.y),r.y=s.y*d.y,c.mapSize.y=s.y)),null===c.map||!0===p||!0===m){const e=this.type!==eu?{minFilter:ad,magFilter:ad}:{};null!==c.map&&c.map.dispose(),c.map=new um(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),h.viewport(a),c.updateMatrices(l,e),i=c.getFrustum(),_(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===eu&&x(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}const LE={[Nu]:Ru,[Lu]:Bu,[Iu]:Du,[ju]:ku,[Ru]:Nu,[Bu]:Lu,[Du]:Iu,[ku]:ju};function jE(e,t){const n=new function(){let t=!1;const n=new lm;let i=null;const r=new lm(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,s=null,a=null;return{setReversed:function(e){if(i!==e){const e=t.get("EXT_clip_control");i?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);const n=a;a=null,this.setClear(n)}i=e},getReversed:function(){return i},setTest:function(t){t?U(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(t){r===t||n||(e.depthMask(t),r=t)},setFunc:function(t){if(i&&(t=LE[t]),s!==t){switch(t){case Nu:e.depthFunc(e.NEVER);break;case Ru:e.depthFunc(e.ALWAYS);break;case Lu:e.depthFunc(e.LESS);break;case ju:e.depthFunc(e.LEQUAL);break;case Iu:e.depthFunc(e.EQUAL);break;case ku:e.depthFunc(e.GEQUAL);break;case Bu:e.depthFunc(e.GREATER);break;case Du:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}s=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(i&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,r=null,s=null,a=null,i=!1}}},r=new function(){let t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?U(e.STENCIL_TEST):z(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&s===a||(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){a===t&&o===n&&l===i||(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},s=new WeakMap,a=new WeakMap;let o={},l={},c=new WeakMap,u=[],d=null,h=!1,p=null,m=null,f=null,g=null,v=null,x=null,y=null,_=new Ff(0,0,0),b=0,w=!1,A=null,S=null,E=null,C=null,T=null;const M=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,N=0;const R=e.getParameter(e.VERSION);-1!==R.indexOf("WebGL")?(N=parseFloat(/^WebGL (\d)/.exec(R)[1]),P=N>=1):-1!==R.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),P=N>=2);let L=null,j={};const I=e.getParameter(e.SCISSOR_BOX),k=e.getParameter(e.VIEWPORT),B=(new lm).fromArray(I),D=(new lm).fromArray(k);function O(t,n,i,r){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<i;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}const F={};function U(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function z(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}F[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F[e.TEXTURE_2D_ARRAY]=O(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=O(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),U(e.DEPTH_TEST),i.setFunc(ju),V(!1),J(Xc),U(e.CULL_FACE),W(ru);const H={[uu]:e.FUNC_ADD,[du]:e.FUNC_SUBTRACT,[hu]:e.FUNC_REVERSE_SUBTRACT};H[pu]=e.MIN,H[mu]=e.MAX;const G={[fu]:e.ZERO,[gu]:e.ONE,[vu]:e.SRC_COLOR,[yu]:e.SRC_ALPHA,[Eu]:e.SRC_ALPHA_SATURATE,[Au]:e.DST_COLOR,[bu]:e.DST_ALPHA,[xu]:e.ONE_MINUS_SRC_COLOR,[_u]:e.ONE_MINUS_SRC_ALPHA,[Su]:e.ONE_MINUS_DST_COLOR,[wu]:e.ONE_MINUS_DST_ALPHA,[Cu]:e.CONSTANT_COLOR,[Tu]:e.ONE_MINUS_CONSTANT_COLOR,[Mu]:e.CONSTANT_ALPHA,[Pu]:e.ONE_MINUS_CONSTANT_ALPHA};function W(t,n,i,r,s,a,o,l,c,u){if(t!==ru){if(!1===h&&(U(e.BLEND),h=!0),t===cu)s=s||n,a=a||i,o=o||r,n===m&&s===v||(e.blendEquationSeparate(H[n],H[s]),m=n,v=s),i===f&&r===g&&a===x&&o===y||(e.blendFuncSeparate(G[i],G[r],G[a],G[o]),f=i,g=r,x=a,y=o),!1!==l.equals(_)&&c===b||(e.blendColor(l.r,l.g,l.b,c),_.copy(l),b=c),p=t,w=!1;else if(t!==p||u!==w){if(m===uu&&v===uu||(e.blendEquation(e.FUNC_ADD),m=uu,v=uu),u)switch(t){case su:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case au:e.blendFunc(e.ONE,e.ONE);break;case ou:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case lu:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case su:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case au:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case ou:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case lu:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,g=null,x=null,y=null,_.set(0,0,0),b=0,p=t,w=u}}else!0===h&&(z(e.BLEND),h=!1)}function V(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function J(t){t!==Yc?(U(e.CULL_FACE),t!==S&&(t===Xc?e.cullFace(e.BACK):t===Zc?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),S=t}function Y(t,n,i){t?(U(e.POLYGON_OFFSET_FILL),C===n&&T===i||(e.polygonOffset(n,i),C=n,T=i)):z(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:U,disable:z,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let i=u,r=!1;if(t){i=c.get(n),void 0===i&&(i=[],c.set(n,i));const s=t.textures;if(i.length!==s.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=s.length;t<n;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=s.length,r=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,r=!0);r&&e.drawBuffers(i)},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:W,setMaterial:function(t,s){t.side===iu?z(e.CULL_FACE):U(e.CULL_FACE);let a=t.side===nu;s&&(a=!a),V(a),t.blending===su&&!1===t.transparent?W(ru):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;r.setTest(o),o&&(r.setMask(t.stencilWriteMask),r.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),r.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Y(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?U(e.SAMPLE_ALPHA_TO_COVERAGE):z(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:V,setCullFace:J,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:Y,setScissorTest:function(t){t?U(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+M-1),L!==t&&(e.activeTexture(t),L=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===L?e.TEXTURE0+M-1:L);let r=j[i];void 0===r&&(r={type:void 0,texture:void 0},j[i]=r),r.type===t&&r.texture===n||(L!==i&&(e.activeTexture(i),L=i),e.bindTexture(t,n||F[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=j[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},updateUBOMapping:function(t,n){let i=a.get(n);void 0===i&&(i=new WeakMap,a.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=a.get(n).get(t);s.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(RT){console.error("THREE.WebGLState:",RT)}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},L=null,j={},l={},c=new WeakMap,u=[],d=null,h=!1,p=null,m=null,f=null,g=null,v=null,x=null,y=null,_=new Ff(0,0,0),b=0,w=!1,A=null,S=null,E=null,C=null,T=null,B.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),r.reset()}}}function IE(e,t,n,i,r,s,a){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new Fp,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(H){}function m(e,t){return p?new OffscreenCanvas(e,t):Vp("canvas")}function f(e,t,n){let i=1;const r=z(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),s=Math.floor(i*r.height);void 0===d&&(d=m(n,s));const a=t?m(n,s):d;a.width=n,a.height=s;return a.getContext("2d").drawImage(e,0,0,n,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+n+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function x(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function y(n,i,r,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;if(i===e.RED&&(r===e.FLOAT&&(o=e.R32F),r===e.HALF_FLOAT&&(o=e.R16F),r===e.UNSIGNED_BYTE&&(o=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.R8UI),r===e.UNSIGNED_SHORT&&(o=e.R16UI),r===e.UNSIGNED_INT&&(o=e.R32UI),r===e.BYTE&&(o=e.R8I),r===e.SHORT&&(o=e.R16I),r===e.INT&&(o=e.R32I)),i===e.RG&&(r===e.FLOAT&&(o=e.RG32F),r===e.HALF_FLOAT&&(o=e.RG16F),r===e.UNSIGNED_BYTE&&(o=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RG8UI),r===e.UNSIGNED_SHORT&&(o=e.RG16UI),r===e.UNSIGNED_INT&&(o=e.RG32UI),r===e.BYTE&&(o=e.RG8I),r===e.SHORT&&(o=e.RG16I),r===e.INT&&(o=e.RG32I)),i===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RGB8UI),r===e.UNSIGNED_SHORT&&(o=e.RGB16UI),r===e.UNSIGNED_INT&&(o=e.RGB32UI),r===e.BYTE&&(o=e.RGB8I),r===e.SHORT&&(o=e.RGB16I),r===e.INT&&(o=e.RGB32I)),i===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),r===e.UNSIGNED_INT&&(o=e.RGBA32UI),r===e.BYTE&&(o=e.RGBA8I),r===e.SHORT&&(o=e.RGBA16I),r===e.INT&&(o=e.RGBA32I)),i===e.RGB&&r===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),i===e.RGBA){const t=a?Hh:Qp.getTransfer(s);r===e.FLOAT&&(o=e.RGBA32F),r===e.HALF_FLOAT&&(o=e.RGBA16F),r===e.UNSIGNED_BYTE&&(o=t===Gh?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function _(t,n){let i;return t?null===n||n===bd||n===Cd?i=e.DEPTH24_STENCIL8:n===wd?i=e.DEPTH32F_STENCIL8:n===yd&&(i=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===bd||n===Cd?i=e.DEPTH_COMPONENT24:n===wd?i=e.DEPTH_COMPONENT32F:n===yd&&(i=e.DEPTH_COMPONENT16),i}function b(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==ad&&e.minFilter!==dd?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=h.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&S(e),0===Object.keys(r).length&&h.delete(n)}i.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function A(t){const n=t.target;n.removeEventListener("dispose",A),function(t){const n=i.get(t);t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let t=0;t<n.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[i][t]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=t.textures;for(let s=0,o=r.length;s<o;s++){const t=i.get(r[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),i.remove(r[s])}i.remove(t)}(n)}function S(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete h.get(r)[n.__cacheKey],a.memory.textures--}let E=0;function C(t,r){const s=i.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void L(s,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+r)}const T={[id]:e.REPEAT,[rd]:e.CLAMP_TO_EDGE,[sd]:e.MIRRORED_REPEAT},M={[ad]:e.NEAREST,[od]:e.NEAREST_MIPMAP_NEAREST,[cd]:e.NEAREST_MIPMAP_LINEAR,[dd]:e.LINEAR,[hd]:e.LINEAR_MIPMAP_NEAREST,[md]:e.LINEAR_MIPMAP_LINEAR},P={[ap]:e.NEVER,[pp]:e.ALWAYS,[op]:e.LESS,[cp]:e.LEQUAL,[lp]:e.EQUAL,[hp]:e.GEQUAL,[up]:e.GREATER,[dp]:e.NOTEQUAL};function N(n,s){if(s.type!==wd||!1!==t.has("OES_texture_float_linear")||s.magFilter!==dd&&s.magFilter!==hd&&s.magFilter!==cd&&s.magFilter!==md&&s.minFilter!==dd&&s.minFilter!==hd&&s.minFilter!==cd&&s.minFilter!==md||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,T[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,T[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,T[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[s.minFilter]),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,P[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(s.magFilter===ad)return;if(s.minFilter!==cd&&s.minFilter!==md)return;if(s.type===wd&&!1===t.has("OES_texture_float_linear"))return;if(s.anisotropy>1||i.get(s).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy}}}function R(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const r=n.source;let s=h.get(r);void 0===s&&(s={},h.set(r,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[t.__cacheKey];void 0!==r&&(s[t.__cacheKey].usedTimes--,0===r.usedTimes&&S(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return i}function L(t,a,o){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=R(t,a),u=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const d=i.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=Qp.getPrimaries(Qp.workingColorSpace),i=a.colorSpace===Fh?null:Qp.getPrimaries(a.colorSpace),h=a.colorSpace===Fh||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let p=f(a.image,!1,r.maxTextureSize);p=U(a,p);const m=s.convert(a.format,a.colorSpace),x=s.convert(a.type);let w,A=y(a.internalFormat,m,x,a.colorSpace,a.isVideoTexture);N(l,a);const S=a.mipmaps,E=!0!==a.isVideoTexture,C=void 0===d.__version||!0===c,T=u.dataReady,M=b(a,p);if(a.isDepthTexture)A=_(a.format===Id,a.type),C&&(E?n.texStorage2D(e.TEXTURE_2D,1,A,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,A,p.width,p.height,0,m,x,null));else if(a.isDataTexture)if(S.length>0){E&&C&&n.texStorage2D(e.TEXTURE_2D,M,A,S[0].width,S[0].height);for(let t=0,i=S.length;t<i;t++)w=S[t],E?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,x,w.data):n.texImage2D(e.TEXTURE_2D,t,A,w.width,w.height,0,m,x,w.data);a.generateMipmaps=!1}else E?(C&&n.texStorage2D(e.TEXTURE_2D,M,A,p.width,p.height),T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,m,x,p.data)):n.texImage2D(e.TEXTURE_2D,0,A,p.width,p.height,0,m,x,p.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){E&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,M,A,S[0].width,S[0].height,p.depth);for(let t=0,i=S.length;t<i;t++)if(w=S[t],a.format!==Nd)if(null!==m)if(E){if(T)if(a.layerUpdates.size>0){const i=aA(w.width,w.height,a.format,a.type);for(const r of a.layerUpdates){const s=w.data.subarray(r*i/w.data.BYTES_PER_ELEMENT,(r+1)*i/w.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,w.width,w.height,1,m,s)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,m,w.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,A,w.width,w.height,p.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,m,x,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,A,w.width,w.height,p.depth,0,m,x,w.data)}else{E&&C&&n.texStorage2D(e.TEXTURE_2D,M,A,S[0].width,S[0].height);for(let t=0,i=S.length;t<i;t++)w=S[t],a.format!==Nd?null!==m?E?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,A,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,x,w.data):n.texImage2D(e.TEXTURE_2D,t,A,w.width,w.height,0,m,x,w.data)}else if(a.isDataArrayTexture)if(E){if(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,M,A,p.width,p.height,p.depth),T)if(a.layerUpdates.size>0){const t=aA(p.width,p.height,a.format,a.type);for(const i of a.layerUpdates){const r=p.data.subarray(i*t/p.data.BYTES_PER_ELEMENT,(i+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,m,x,r)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,m,x,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,A,p.width,p.height,p.depth,0,m,x,p.data);else if(a.isData3DTexture)E?(C&&n.texStorage3D(e.TEXTURE_3D,M,A,p.width,p.height,p.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,m,x,p.data)):n.texImage3D(e.TEXTURE_3D,0,A,p.width,p.height,p.depth,0,m,x,p.data);else if(a.isFramebufferTexture){if(C)if(E)n.texStorage2D(e.TEXTURE_2D,M,A,p.width,p.height);else{let t=p.width,i=p.height;for(let r=0;r<M;r++)n.texImage2D(e.TEXTURE_2D,r,A,t,i,0,m,x,null),t>>=1,i>>=1}}else if(S.length>0){if(E&&C){const t=z(S[0]);n.texStorage2D(e.TEXTURE_2D,M,A,t.width,t.height)}for(let t=0,i=S.length;t<i;t++)w=S[t],E?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,m,x,w):n.texImage2D(e.TEXTURE_2D,t,A,m,x,w);a.generateMipmaps=!1}else if(E){if(C){const t=z(p);n.texStorage2D(e.TEXTURE_2D,M,A,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m,x,p)}else n.texImage2D(e.TEXTURE_2D,0,A,m,x,p);g(a)&&v(l),d.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function j(t,r,a,l,c,u){const d=s.convert(a.format,a.colorSpace),h=s.convert(a.type),p=y(a.internalFormat,d,h,a.colorSpace),m=i.get(r),f=i.get(a);if(f.__renderTarget=r,!m.__hasExternalTextures){const t=Math.max(1,r.width>>u),i=Math.max(1,r.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,i,r.depth,0,d,h,null):n.texImage2D(c,u,p,t,i,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),F(r)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,f.__webglTexture,0,O(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,f.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function I(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const r=n.depthTexture,s=r&&r.isDepthTexture?r.type:null,a=_(n.stencilBuffer,s),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=O(n);F(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,n.width,n.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const a=t[r],l=s.convert(a.format,a.colorSpace),c=s.convert(a.type),u=y(a.internalFormat,l,c,a.colorSpace),d=O(n);i&&!1===F(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):F(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function k(t){const r=i.get(t),s=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const s=i.get(r.depthTexture);s.__renderTarget=r,s.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),C(r.depthTexture,0);const a=s.__webglTexture,l=O(r);if(r.depthTexture.format===jd)F(r)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==Id)throw new Error("Unknown depthTexture format");F(r)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=e.createRenderbuffer(),I(r.__webglDepthbuffer[i],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,s=r.__webglDepthbuffer[i];e.bindRenderbuffer(e.RENDERBUFFER,s),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,s)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),I(r.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}n.bindFramebuffer(e.FRAMEBUFFER,null)}const B=[],D=[];function O(e){return Math.min(r.maxSamples,e.samples)}function F(e){const n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,t){const n=e.colorSpace,i=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==zh&&n!==Fh&&(Qp.getTransfer(n)===Gh?i===Nd&&r===gd||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function z(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=E;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=C,this.setTexture2DArray=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?L(s,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const s=i.get(t);t.version>0&&s.__version!==t.version?L(s,t,r):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,a){const o=i.get(t);t.version>0&&o.__version!==t.version?function(t,a,o){if(6!==a.image.length)return;const l=R(t,a),c=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const u=i.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=Qp.getPrimaries(Qp.workingColorSpace),i=a.colorSpace===Fh?null:Qp.getPrimaries(a.colorSpace),d=a.colorSpace===Fh||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const h=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=h||p?p?a.image[e].image:a.image[e]:f(a.image[e],!0,r.maxCubemapSize),m[e]=U(a,m[e]);const x=m[0],_=s.convert(a.format,a.colorSpace),w=s.convert(a.type),A=y(a.internalFormat,_,w,a.colorSpace),S=!0!==a.isVideoTexture,E=void 0===u.__version||!0===l,C=c.dataReady;let T,M=b(a,x);if(N(e.TEXTURE_CUBE_MAP,a),h){S&&E&&n.texStorage2D(e.TEXTURE_CUBE_MAP,M,A,x.width,x.height);for(let t=0;t<6;t++){T=m[t].mipmaps;for(let i=0;i<T.length;i++){const r=T[i];a.format!==Nd?null!==_?S?C&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,_,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,A,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):S?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,_,w,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,A,r.width,r.height,0,_,w,r.data)}}}else{if(T=a.mipmaps,S&&E){T.length>0&&M++;const t=z(m[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,M,A,t.width,t.height)}for(let t=0;t<6;t++)if(p){S?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,_,w,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,A,m[t].width,m[t].height,0,_,w,m[t].data);for(let i=0;i<T.length;i++){const r=T[i].image[t].image;S?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,_,w,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,A,r.width,r.height,0,_,w,r.data)}}else{S?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,_,w,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,A,_,w,m[t]);for(let i=0;i<T.length;i++){const r=T[i];S?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,_,w,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,A,_,w,r.image[t])}}}g(a)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(o,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,r){const s=i.get(t);void 0!==n&&j(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&k(t)},this.setupRenderTarget=function(t){const r=t.texture,o=i.get(t),l=i.get(r);t.addEventListener("dispose",A);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,d=c.length>1;if(d||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,a.memory.textures++),u){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=c.length;t<n;t++){const n=i.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===F(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const r=s.convert(i.format,i.colorSpace),a=s.convert(i.type),l=y(i.internalFormat,r,a,i.colorSpace,!0===t.isXRRenderTarget),u=O(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),I(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),N(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)j(o.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else j(o.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(r)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let r=0,s=c.length;r<s;r++){const s=c[r],a=i.get(s);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),N(e.TEXTURE_2D,s),j(o.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),g(s)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),N(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)j(o.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else j(o.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);g(r)&&v(i),n.unbindTexture()}t.depthBuffer&&k(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let r=0,s=t.length;r<s;r++){const s=t[r];if(g(s)){const t=x(e),r=i.get(s).__webglTexture;n.bindTexture(t,r),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===F(t)){const r=t.textures,s=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=r.length>1;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,e.NEAREST),!0===l&&(B.length=0,D.length=0,B.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(B.push(c),D.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,D)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,B))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const s=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=k,this.setupFrameBufferTexture=j,this.useMultisampledRTT=F}function kE(e,t){return{convert:function(n){let i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fh;const s=Qp.getTransfer(r);if(n===gd)return e.UNSIGNED_BYTE;if(n===Sd)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ed)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Td)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===vd)return e.BYTE;if(n===xd)return e.SHORT;if(n===yd)return e.UNSIGNED_SHORT;if(n===_d)return e.INT;if(n===bd)return e.UNSIGNED_INT;if(n===wd)return e.FLOAT;if(n===Ad)return e.HALF_FLOAT;if(n===Md)return e.ALPHA;if(n===Pd)return e.RGB;if(n===Nd)return e.RGBA;if(n===Rd)return e.LUMINANCE;if(n===Ld)return e.LUMINANCE_ALPHA;if(n===jd)return e.DEPTH_COMPONENT;if(n===Id)return e.DEPTH_STENCIL;if(n===kd)return e.RED;if(n===Bd)return e.RED_INTEGER;if(n===Dd)return e.RG;if(n===Od)return e.RG_INTEGER;if(n===Ud)return e.RGBA_INTEGER;if(n===zd||n===Hd||n===Gd||n===Wd)if(s===Gh){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===zd)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Hd)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Gd)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Wd)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===zd)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Hd)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Gd)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Wd)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Vd||n===Jd||n===Yd||n===Xd){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===Vd)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Jd)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Yd)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Xd)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Zd||n===qd||n===Kd){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===Zd||n===qd)return s===Gh?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===Kd)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Qd||n===$d||n===eh||n===th||n===nh||n===ih||n===rh||n===sh||n===ah||n===oh||n===lh||n===ch||n===uh||n===dh){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===Qd)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===$d)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===eh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===th)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===nh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ih)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===rh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===sh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ah)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===oh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===lh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ch)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===uh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===dh)return s===Gh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===hh||n===ph||n===mh){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===hh)return s===Gh?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ph)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===mh)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===fh||n===gh||n===vh||n===xh){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===hh)return i.COMPRESSED_RED_RGTC1_EXT;if(n===gh)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===vh)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===xh)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Cd?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}const BE={type:"move"};class DE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Nx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Nx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new gm,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new gm),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Nx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new gm,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new gm),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n),i=this._getHandJoint(l,s);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(BE)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Nx;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class OE{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const i=new om;e.properties.get(i).__webglTexture=t.texture,t.depthNear===n.depthNear&&t.depthFar===n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new jg({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Cg(new Ky(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class FE extends Tp{constructor(e,t){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,p=null;const m=new OE,f=t.getContextAttributes();let g=null,v=null;const x=[],y=[],_=new Fp;let b=null;const w=new Og;w.viewport=new lm;const A=new Og;A.viewport=new lm;const S=[w,A],E=new kb;let C=null,T=null;function M(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function P(){i.removeEventListener("select",M),i.removeEventListener("selectstart",M),i.removeEventListener("selectend",M),i.removeEventListener("squeeze",M),i.removeEventListener("squeezestart",M),i.removeEventListener("squeezeend",M),i.removeEventListener("end",P),i.removeEventListener("inputsourceschange",N);for(let e=0;e<x.length;e++){const t=y[e];null!==t&&(y[e]=null,x[e].disconnect(t))}C=null,T=null,m.reset(),e.setRenderTarget(g),h=null,d=null,u=null,i=null,v=null,k.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(_.width,_.height,!1),n.dispatchEvent({type:"sessionend"})}function N(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,x[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<x.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=x[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new DE,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new DE,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new DE,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){g=e.getRenderTarget(),i.addEventListener("select",M),i.addEventListener("selectstart",M),i.addEventListener("selectend",M),i.addEventListener("squeeze",M),i.addEventListener("squeezestart",M),i.addEventListener("squeezeend",M),i.addEventListener("end",P),i.addEventListener("inputsourceschange",N),!0!==f.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(_);if(void 0!==i.enabledFeatures&&i.enabledFeatures.includes("layers")){let n=null,s=null,a=null;f.depth&&(a=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?Id:jd,s=f.stencil?Cd:bd);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(o),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),v=new um(d.textureWidth,d.textureHeight,{format:Nd,type:gd,depthTexture:new Dx(d.textureWidth,d.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues})}else{const n={antialias:f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),v=new um(h.framebufferWidth,h.framebufferHeight,{format:Nd,type:gd,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),k.setContext(i),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};const R=new gm,L=new gm;function j(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;let t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),E.near=A.near=w.near=t,E.far=A.far=w.far=n,C===E.near&&T===E.far||(i.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,T=E.far),w.layers.mask=2|e.layers.mask,A.layers.mask=4|e.layers.mask,E.layers.mask=w.layers.mask|A.layers.mask;const r=e.parent,s=E.cameras;j(E,r);for(let i=0;i<s.length;i++)j(s[i],r);2===s.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(L),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],d=(s[8]+1)/s[0],h=a*u,p=a*d,m=i/(-u+d),f=m*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+m,n=o+m,r=h-f,s=p+(i-f),u=l*o/n*t,d=c*o/n*t;e.projectionMatrix.makePerspective(r,s,u,d,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(E,w,A):E.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Rp*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,r)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==m.texture},this.getDepthSensingMesh=function(){return m.getMesh(E)};let I=null;const k=new lA;k.setAnimationLoop(function(t,r){if(c=r.getViewerPose(l||s),p=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let s=null;if(null!==h)s=h.getViewport(r);else{const t=u.getViewSubImage(d,r);s=t.viewport,0===i&&(e.setRenderTargetTextures(v,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let a=S[i];void 0===a&&(a=new Og,a.layers.enable(i),a.viewport=new lm,S[i]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&(E.matrix.copy(a.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(a)}const r=i.enabledFeatures;if(r&&r.includes("depth-sensing")){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&m.init(e,n,i.renderState)}}for(let e=0;e<x.length;e++){const t=y[e],n=x[e];null!==t&&void 0!==n&&n.update(t,r,l||s)}I&&I(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null}),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}const UE=new nf,zE=new Jm;function HE(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===nu&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===nu&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);const r=t.get(i),s=r.envMap,a=r.envMapRotation;s&&(e.envMap.value=s,UE.copy(a),UE.x*=-1,UE.y*=-1,UE.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(UE.y*=-1,UE.z*=-1),e.envMapRotation.value.setFromMatrix4(zE.makeRotationFromEuler(UE)),e.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Rg(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,s,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===nu&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,s,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function GE(e,t,n,i){let r={},s={},a=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,s=t+"_"+n;if(void 0===i[s])return i[s]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=i[s];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return i[s]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,d){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let s=0,a=t.length;s<a;s++){const e=Array.isArray(t[s])?t[s]:[t[s]];for(let t=0,r=e.length;t<r;t++){const r=e[t],s=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=s.length;e<t;e++){const t=c(s[e]),a=n%i,o=a%t.boundary,l=a+o;n+=o,0!==l&&i-l<t.storage&&(n+=i-l),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",u));const p=d.program;i.updateUBOMapping(n,p);const m=t.render.frame;s[n.id]!==m&&(!function(t){const n=r[t.id],i=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,a=i.length;r<a;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,r,n,s)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const a=n[s],o=c(a);"number"===typeof a||"boolean"===typeof a?(i.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):a.isMatrix3?(i.__data[0]=a.elements[0],i.__data[1]=a.elements[1],i.__data[2]=a.elements[2],i.__data[3]=0,i.__data[4]=a.elements[3],i.__data[5]=a.elements[4],i.__data[6]=a.elements[5],i.__data[7]=0,i.__data[8]=a.elements[6],i.__data[9]=a.elements[7],i.__data[10]=a.elements[8],i.__data[11]=0):(a.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=m)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}class WE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Jp(),context:n=null,depth:i=!0,stencil:r=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:d=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=s;const p=new Uint32Array(4),m=new Int32Array(4);let f=null,g=null;const v=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Uh,this.toneMapping=zu,this.toneMappingExposure=1;const y=this;let _=!1,b=0,w=0,A=null,S=-1,E=null;const C=new lm,T=new lm;let M=null;const P=new Ff(0);let N=0,R=t.width,L=t.height,j=1,I=null,k=null;const B=new lm(0,0,R,L),D=new lm(0,0,R,L);let O=!1;const F=new Wv;let U=!1,z=!1;this.transmissionResolutionScale=1;const H=new Jm,G=new Jm,W=new gm,V=new lm,J={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Y=!1;function X(){return null===A?j:1}let Z,q,K,Q,$,ee,te,ne,ie,re,se,ae,oe,le,ce,ue,de,he,pe,me,fe,ge,ve,xe,ye=n;function _e(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:i,stencil:r,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Wc)),t.addEventListener("webglcontextlost",Ae,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===ye){const t="webgl2";if(ye=_e(t,e),null===ye)throw _e(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(RT){throw console.error("THREE.WebGLRenderer: "+RT.message),RT}function be(){Z=new FA(ye),Z.init(),ge=new kE(ye,Z),q=new yA(ye,Z,e,ge),K=new jE(ye,Z),q.reverseDepthBuffer&&d&&K.buffers.depth.setReversed(!0),Q=new HA(ye),$=new _E,ee=new IE(ye,Z,K,$,q,ge,Q),te=new bA(y),ne=new OA(y),ie=new cA(ye),ve=new vA(ye,ie),re=new UA(ye,ie,Q,ve),se=new WA(ye,re,ie,Q),pe=new GA(ye,q,ee),ue=new _A($),ae=new yE(y,te,ne,Z,q,ve,ue),oe=new HE(y,$),le=new SE,ce=new NE(Z),he=new gA(y,te,ne,K,se,h,o),de=new RE(y,se,q),xe=new GE(ye,Q,q,K),me=new xA(ye,Z,Q),fe=new zA(ye,Z,Q),Q.programs=ae.programs,y.capabilities=q,y.extensions=Z,y.properties=$,y.renderLists=le,y.shadowMap=de,y.state=K,y.info=Q}be();const we=new FE(y,ye);function Ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const e=Q.autoReset,t=de.enabled,n=de.autoUpdate,i=de.needsUpdate,r=de.type;be(),Q.autoReset=e,de.enabled=t,de.autoUpdate=n,de.needsUpdate=i,de.type=r}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=$.get(e).programs;void 0!==t&&(t.forEach(function(e){ae.releaseProgram(e)}),e.isShaderMaterial&&ae.releaseShaderCache(e))})(e),$.remove(e)}(t)}function Te(e,t,n){!0===e.transparent&&e.side===iu&&!1===e.forceSinglePass?(e.side=nu,e.needsUpdate=!0,De(e,t,n),e.side=tu,e.needsUpdate=!0,De(e,t,n),e.side=iu):De(e,t,n)}this.xr=we,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=Z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(e){void 0!==e&&(j=e,this.setSize(R,L,!1))},this.getSize=function(e){return e.set(R,L)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(R=e,L=n,t.width=Math.floor(e*j),t.height=Math.floor(n*j),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(R*j,L*j).floor()},this.setDrawingBufferSize=function(e,n,i){R=e,L=n,j=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(C)},this.getViewport=function(e){return e.copy(B)},this.setViewport=function(e,t,n,i){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,i),K.viewport(C.copy(B).multiplyScalar(j).round())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,i){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,i),K.scissor(T.copy(D).multiplyScalar(j).round())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){K.setScissorTest(O=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==A){const t=A.texture.format;e=t===Ud||t===Od||t===Bd}if(e){const e=A.texture.type,t=e===gd||e===bd||e===yd||e===Cd||e===Sd||e===Ed,n=he.getClearColor(),i=he.getClearAlpha(),r=n.r,s=n.g,a=n.b;t?(p[0]=r,p[1]=s,p[2]=a,p[3]=i,ye.clearBufferuiv(ye.COLOR,0,p)):(m[0]=r,m[1]=s,m[2]=a,m[3]=i,ye.clearBufferiv(ye.COLOR,0,m))}else n|=ye.COLOR_BUFFER_BIT}e&&(n|=ye.DEPTH_BUFFER_BIT),t&&(n|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ae,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),he.dispose(),le.dispose(),ce.dispose(),$.dispose(),te.dispose(),ne.dispose(),se.dispose(),ve.dispose(),xe.dispose(),ae.dispose(),we.dispose(),we.removeEventListener("sessionstart",Pe),we.removeEventListener("sessionend",Ne),Re.stop()},this.renderBufferDirect=function(e,t,n,i,r,s){null===t&&(t=J);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=J);ee.resetTextureUnits();const s=t.fog,a=i.isMeshStandardMaterial?t.environment:null,o=null===A?y.outputColorSpace:!0===A.isXRRenderTarget?A.texture.colorSpace:zh,l=(i.isMeshStandardMaterial?ne:te).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=zu;i.toneMapped&&(null!==A&&!0!==A.isXRRenderTarget||(m=y.toneMapping));const f=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==f?f.length:0,x=$.get(i),_=g.state.lights;if(!0===U&&(!0===z||e!==E)){const t=e===E&&i.id===S;ue.setState(i,e,t)}let b=!1;i.version===x.__version?x.needsLights&&x.lightsStateVersion!==_.state.version||x.outputColorSpace!==o||r.isBatchedMesh&&!1===x.batching?b=!0:r.isBatchedMesh||!0!==x.batching?r.isBatchedMesh&&!0===x.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===x.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===x.instancing?b=!0:r.isInstancedMesh||!0!==x.instancing?r.isSkinnedMesh&&!1===x.skinning?b=!0:r.isSkinnedMesh||!0!==x.skinning?r.isInstancedMesh&&!0===x.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===x.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===x.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===x.instancingMorph&&null!==r.morphTexture||x.envMap!==l||!0===i.fog&&x.fog!==s?b=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===ue.numPlanes&&x.numIntersection===ue.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==u||x.morphTargets!==d||x.morphNormals!==h||x.morphColors!==p||x.toneMapping!==m||x.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,x.__version=i.version);let w=x.currentProgram;!0===b&&(w=De(i,t,r));let C=!1,T=!1,M=!1;const P=w.getUniforms(),N=x.uniforms;K.useProgram(w.program)&&(C=!0,T=!0,M=!0);i.id!==S&&(S=i.id,T=!0);if(C||E!==e){K.buffers.depth.getReversed()?(H.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(H),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(H),P.setValue(ye,"projectionMatrix",H)):P.setValue(ye,"projectionMatrix",e.projectionMatrix),P.setValue(ye,"viewMatrix",e.matrixWorldInverse);const t=P.map.cameraPosition;void 0!==t&&t.setValue(ye,W.setFromMatrixPosition(e.matrixWorld)),q.logarithmicDepthBuffer&&P.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&P.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),E!==e&&(E=e,T=!0,M=!0)}if(r.isSkinnedMesh){P.setOptional(ye,r,"bindMatrix"),P.setOptional(ye,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(ye,"boneTexture",e.boneTexture,ee))}r.isBatchedMesh&&(P.setOptional(ye,r,"batchingTexture"),P.setValue(ye,"batchingTexture",r._matricesTexture,ee),P.setOptional(ye,r,"batchingIdTexture"),P.setValue(ye,"batchingIdTexture",r._indirectTexture,ee),P.setOptional(ye,r,"batchingColorTexture"),null!==r._colorsTexture&&P.setValue(ye,"batchingColorTexture",r._colorsTexture,ee));const R=n.morphAttributes;void 0===R.position&&void 0===R.normal&&void 0===R.color||pe.update(r,n,w);(T||x.receiveShadow!==r.receiveShadow)&&(x.receiveShadow=r.receiveShadow,P.setValue(ye,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(N.envMap.value=l,N.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(N.envMapIntensity.value=t.environmentIntensity);T&&(P.setValue(ye,"toneMappingExposure",y.toneMappingExposure),x.needsLights&&(k=M,(I=N).ambientLightColor.needsUpdate=k,I.lightProbe.needsUpdate=k,I.directionalLights.needsUpdate=k,I.directionalLightShadows.needsUpdate=k,I.pointLights.needsUpdate=k,I.pointLightShadows.needsUpdate=k,I.spotLights.needsUpdate=k,I.spotLightShadows.needsUpdate=k,I.rectAreaLights.needsUpdate=k,I.hemisphereLights.needsUpdate=k),s&&!0===i.fog&&oe.refreshFogUniforms(N,s),oe.refreshMaterialUniforms(N,i,j,L,g.state.transmissionRenderTarget[e.id]),ZS.upload(ye,Oe(x),N,ee));var I,k;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(ZS.upload(ye,Oe(x),N,ee),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&P.setValue(ye,"center",r.center);if(P.setValue(ye,"modelViewMatrix",r.modelViewMatrix),P.setValue(ye,"normalMatrix",r.normalMatrix),P.setValue(ye,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];xe.update(n,w),xe.bind(n,w)}}return w}(e,t,n,i,r);K.setMaterial(i,a);let l=n.index,c=1;if(!0===i.wireframe){if(l=re.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==s&&(h=Math.max(h,s.start*c),p=Math.min(p,(s.start+s.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const m=p-h;if(m<0||m===1/0)return;let f;ve.setup(r,i,o,n,l);let v=me;if(null!==l&&(f=ie.get(l),v=fe,v.setIndex(f)),r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*X()),v.setMode(ye.LINES)):v.setMode(ye.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),K.setLineWidth(e*X()),r.isLineSegments?v.setMode(ye.LINES):r.isLineLoop?v.setMode(ye.LINE_LOOP):v.setMode(ye.LINE_STRIP)}else r.isPoints?v.setMode(ye.POINTS):r.isSprite&&v.setMode(ye.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)v.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(Z.get("WEBGL_multi_draw"))v.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,n=r._multiDrawCount,s=l?ie.get(l).bytesPerElement:1,a=$.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)a.setValue(ye,"_gl_DrawID",i),v.render(e[i]/s,t[i])}else if(r.isInstancedMesh)v.renderInstances(h,m,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,m,t)}else v.render(h,m)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),g=ce.get(n),g.init(t),x.push(g),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))}),g.setupLights();const i=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const s=t[r];Te(s,n,e),i.add(s)}else Te(t,n,e),i.add(t)}),x.pop(),g=null,i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){$.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==Z.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Me=null;function Pe(){Re.stop()}function Ne(){Re.start()}const Re=new lA;function Le(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){i&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=se.update(e),r=e.material;r.visible&&f.push(e,t,r,n,V.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=se.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),V.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),V.copy(t.boundingSphere.center)),V.applyMatrix4(e.matrixWorld).applyMatrix4(G)),Array.isArray(r)){const i=t.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&f.push(e,t,o,n,V.z,a)}}else r.visible&&f.push(e,t,r,n,V.z,null)}const r=e.children;for(let s=0,a=r.length;s<a;s++)Le(r[s],t,n,i)}function je(e,t,n,i){const r=e.opaque,s=e.transmissive,a=e.transparent;g.setupLightsView(n),!0===U&&ue.setGlobalState(y.clippingPlanes,n),i&&K.viewport(C.copy(i)),r.length>0&&ke(r,t,n),s.length>0&&ke(s,t,n),a.length>0&&ke(a,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Ie(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[i.id]&&(g.state.transmissionRenderTarget[i.id]=new um(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")||Z.has("EXT_color_buffer_float")?Ad:gd,minFilter:md,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qp.workingColorSpace}));const s=g.state.transmissionRenderTarget[i.id],a=i.viewport||C;s.setSize(a.z*y.transmissionResolutionScale,a.w*y.transmissionResolutionScale);const o=y.getRenderTarget();y.setRenderTarget(s),y.getClearColor(P),N=y.getClearAlpha(),N<1&&y.setClearColor(16777215,.5),y.clear(),Y&&he.render(n);const l=y.toneMapping;y.toneMapping=zu;const c=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),g.setupLightsView(i),!0===U&&ue.setGlobalState(y.clippingPlanes,i),ke(e,n,i),ee.updateMultisampleRenderTarget(s),ee.updateRenderTargetMipmap(s),!1===Z.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,s=t.length;r<s;r++){const s=t[r],a=s.object,o=s.geometry,l=s.material,c=s.group;if(l.side===iu&&a.layers.test(i.layers)){const t=l.side;l.side=nu,l.needsUpdate=!0,Be(a,n,i,o,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(ee.updateMultisampleRenderTarget(s),ee.updateRenderTargetMipmap(s))}y.setRenderTarget(o),y.setClearColor(P,N),void 0!==c&&(i.viewport=c),y.toneMapping=l}function ke(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Be(a,t,n,o,l,c)}}function Be(e,t,n,i,r,s){e.onBeforeRender(y,t,n,i,r,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(y,t,n,i,e,s),!0===r.transparent&&r.side===iu&&!1===r.forceSinglePass?(r.side=nu,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,s),r.side=tu,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,s),r.side=iu):y.renderBufferDirect(n,t,i,r,e,s),e.onAfterRender(y,t,n,i,r,s)}function De(e,t,n){!0!==t.isScene&&(t=J);const i=$.get(e),r=g.state.lights,s=g.state.shadowsArray,a=r.state.version,o=ae.getParameters(e,r.state,s,t,n),l=ae.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ne:te).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ce),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return Fe(e,o),u}else o.uniforms=ae.getUniforms(e),e.onBeforeCompile(o,y),u=ae.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const d=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ue.uniform),Fe(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(d.ambientLightColor.value=r.state.ambient,d.lightProbe.value=r.state.probe,d.directionalLights.value=r.state.directional,d.directionalLightShadows.value=r.state.directionalShadow,d.spotLights.value=r.state.spot,d.spotLightShadows.value=r.state.spotShadow,d.rectAreaLights.value=r.state.rectArea,d.ltc_1.value=r.state.rectAreaLTC1,d.ltc_2.value=r.state.rectAreaLTC2,d.pointLights.value=r.state.point,d.pointLightShadows.value=r.state.pointShadow,d.hemisphereLights.value=r.state.hemi,d.directionalShadowMap.value=r.state.directionalShadowMap,d.directionalShadowMatrix.value=r.state.directionalShadowMatrix,d.spotShadowMap.value=r.state.spotShadowMap,d.spotLightMatrix.value=r.state.spotLightMatrix,d.spotLightMap.value=r.state.spotLightMap,d.pointShadowMap.value=r.state.pointShadowMap,d.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function Oe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=ZS.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=$.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop(function(e){Me&&Me(e)}),"undefined"!==typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){Me=e,we.setAnimationLoop(e),null===e?Re.stop():Re.start()},we.addEventListener("sessionstart",Pe),we.addEventListener("sessionend",Ne),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(t),t=we.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,A),g=ce.get(e,x.length),g.init(t),x.push(g),G.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(G),z=this.localClippingEnabled,U=ue.init(this.clippingPlanes,z),f=le.get(e,v.length),f.init(),v.push(f),!0===we.enabled&&!0===we.isPresenting){const e=y.xr.getDepthSensingMesh();null!==e&&Le(e,t,-1/0,y.sortObjects)}Le(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(I,k),Y=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),Y&&he.addToRenderList(f,e),this.info.render.frame++,!0===U&&ue.beginShadows();const n=g.state.shadowsArray;de.render(n,e,t),!0===U&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=f.opaque,r=f.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,s=n.length;t<s;t++){Ie(i,r,e,n[t])}Y&&he.render(e);for(let t=0,i=n.length;t<i;t++){const i=n[t];je(f,e,i,i.viewport)}}else r.length>0&&Ie(i,r,e,t),Y&&he.render(e),je(f,e,t);null!==A&&0===w&&(ee.updateMultisampleRenderTarget(A),ee.updateRenderTargetMipmap(A)),!0===e.isScene&&e.onAfterRender(y,e,t),ve.resetDefaultState(),S=-1,E=null,x.pop(),x.length>0?(g=x[x.length-1],!0===U&&ue.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,v.pop(),f=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(e,t,n){$.get(e.texture).__webglTexture=t,$.get(e.depthTexture).__webglTexture=n;const i=$.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=$.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const Ue=ye.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;A=e,b=t,w=n;let i=!0,r=null,s=!1,a=!1;if(e){const o=$.get(e);if(void 0!==o.__useDefaultFramebuffer)K.bindFramebuffer(ye.FRAMEBUFFER,null),i=!1;else if(void 0===o.__webglFramebuffer)ee.setupRenderTarget(e);else if(o.__hasExternalTextures)ee.rebindTextures(e,$.get(e.texture).__webglTexture,$.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&$.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=$.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],s=!0):r=e.samples>0&&!1===ee.useMultisampledRTT(e)?$.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,C.copy(e.viewport),T.copy(e.scissor),M=e.scissorTest}else C.copy(B).multiplyScalar(j).floor(),T.copy(D).multiplyScalar(j).floor(),M=O;0!==n&&(r=Ue);if(K.bindFramebuffer(ye.FRAMEBUFFER,r)&&i&&K.drawBuffers(e,r),K.viewport(C),K.scissor(T),K.setScissorTest(M),s){const i=$.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(a){const i=$.get(e.texture),r=t;ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,i.__webglTexture,n,r)}else if(null!==e&&0!==n){const t=$.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,t.__webglTexture,n)}S=-1},this.readRenderTargetPixels=function(e,t,n,i,r,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=$.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){K.bindFramebuffer(ye.FRAMEBUFFER,o);try{const a=e.texture,o=a.format,l=a.type;if(!q.textureFormatReadable(o))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!q.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ye.readPixels(t,n,i,r,ge.convert(o),ge.convert(l),s)}finally{const e=null!==A?$.get(A).__webglFramebuffer:null;K.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,r,s,a){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=$.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){const a=e.texture,l=a.format,c=a.type;if(!q.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!q.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r){K.bindFramebuffer(ye.FRAMEBUFFER,o);const e=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,e),ye.bufferData(ye.PIXEL_PACK_BUFFER,s.byteLength,ye.STREAM_READ),ye.readPixels(t,n,i,r,ge.convert(l),ge.convert(c),0);const a=null!==A?$.get(A).__webglFramebuffer:null;K.bindFramebuffer(ye.FRAMEBUFFER,a);const u=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await function(e,t,n){return new Promise(function(i,r){setTimeout(function s(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}},n)})}(ye,u,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,e),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,s),ye.deleteBuffer(e),ye.deleteSync(u),s}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(Xp("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i),a=null!==t?t.x:0,o=null!==t?t.y:0;ee.setTexture2D(e,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,a,o,r,s),K.unbindTexture()};const ze=ye.createFramebuffer(),He=ye.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,i,r,s,a,o,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!0!==e.isTexture&&(Xp("WebGLRenderer: copyTextureToTexture function signature has changed."),h=arguments[0]||null,e=arguments[1],t=arguments[2],m=arguments[3]||0,d=null),null===m&&(0!==p?(Xp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),m=p,p=0):m=0);const f=e.isCompressedTexture?e.mipmaps[m]:e.image;if(null!==d)n=d.max.x-d.min.x,i=d.max.y-d.min.y,r=d.isBox3?d.max.z-d.min.z:1,s=d.min.x,a=d.min.y,o=d.isBox3?d.min.z:0;else{const t=Math.pow(2,-p);n=Math.floor(f.width*t),i=Math.floor(f.height*t),r=e.isDataArrayTexture?f.depth:e.isData3DTexture?Math.floor(f.depth*t):1,s=0,a=0,o=0}null!==h?(l=h.x,c=h.y,u=h.z):(l=0,c=0,u=0);const g=ge.convert(t.format),v=ge.convert(t.type);let x;t.isData3DTexture?(ee.setTexture3D(t,0),x=ye.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ee.setTexture2DArray(t,0),x=ye.TEXTURE_2D_ARRAY):(ee.setTexture2D(t,0),x=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,t.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,t.unpackAlignment);const y=ye.getParameter(ye.UNPACK_ROW_LENGTH),_=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),b=ye.getParameter(ye.UNPACK_SKIP_PIXELS),w=ye.getParameter(ye.UNPACK_SKIP_ROWS),A=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,f.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,f.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,s),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,a),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,o);const S=e.isDataArrayTexture||e.isData3DTexture,E=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const d=$.get(e),h=$.get(t),f=$.get(d.__renderTarget),g=$.get(h.__renderTarget);K.bindFramebuffer(ye.READ_FRAMEBUFFER,f.__webglFramebuffer),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<r;v++)S&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,$.get(e).__webglTexture,p,o+v),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,$.get(t).__webglTexture,m,u+v)),ye.blitFramebuffer(s,a,n,i,l,c,n,i,ye.DEPTH_BUFFER_BIT,ye.NEAREST);K.bindFramebuffer(ye.READ_FRAMEBUFFER,null),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(0!==p||e.isRenderTargetTexture||$.has(e)){const d=$.get(e),h=$.get(t);K.bindFramebuffer(ye.READ_FRAMEBUFFER,ze),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,He);for(let e=0;e<r;e++)S?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,d.__webglTexture,p,o+e):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,d.__webglTexture,p),E?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,h.__webglTexture,m,u+e):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,h.__webglTexture,m),0!==p?ye.blitFramebuffer(s,a,n,i,l,c,n,i,ye.COLOR_BUFFER_BIT,ye.NEAREST):E?ye.copyTexSubImage3D(x,m,l,c,u+e,s,a,n,i):ye.copyTexSubImage2D(x,m,l,c,s,a,n,i);K.bindFramebuffer(ye.READ_FRAMEBUFFER,null),K.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else E?e.isDataTexture||e.isData3DTexture?ye.texSubImage3D(x,m,l,c,u,n,i,r,g,v,f.data):t.isCompressedArrayTexture?ye.compressedTexSubImage3D(x,m,l,c,u,n,i,r,g,f.data):ye.texSubImage3D(x,m,l,c,u,n,i,r,g,v,f):e.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,m,l,c,n,i,g,v,f.data):e.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,m,l,c,f.width,f.height,g,f.data):ye.texSubImage2D(ye.TEXTURE_2D,m,l,c,n,i,g,v,f);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,y),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,_),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,b),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,w),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,A),0===m&&t.generateMipmaps&&ye.generateMipmap(x),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return!0!==e.isTexture&&(Xp("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,i=arguments[1]||null,e=arguments[2],t=arguments[3],r=arguments[4]||0),Xp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,i,r)},this.initRenderTarget=function(e){void 0===$.get(e).__webglFramebuffer&&ee.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){b=0,w=0,A=null,K.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ep}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Qp._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qp._getUnpackColorSpace()}}var VE=n(878);function JE(e){let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(r!==t){const e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s={setState:i,getState:r,subscribe:(e,i,s)=>i||s?function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=i(t);function o(){const n=i(t);if(!s(a,n)){const t=a;e(a=n,t)}}return n.add(o),()=>n.delete(o)}(e,i,s):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,s),s}const YE="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;const XE=[];function ZE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function qE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const a of XE)if(ZE(t,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:t,equal:i.equal,remove:()=>{const e=XE.indexOf(r);-1!==e&&XE.splice(e,1)},promise:(s=e,"object"===typeof s&&"function"===typeof s.then?e:e(...t)).then(e=>{r.response=e,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(e=>r.error=e)};var s;if(XE.push(r),!n)throw r.promise}var KE=n(235),QE=n.n(KE),$E=n(340);const eC=["args","attach"],tC=["args","children"],nC=["args","children"],iC=["children","key","ref"],rC=["children","key","ref"],sC=["params"];const aC={};var oC,lC;const cC=e=>"colorSpace"in e||"outputColorSpace"in e,uC=()=>{var e;return null!=(e=aC.ColorManagement)?e:null},dC=e=>e&&e.isOrthographicCamera,hC="undefined"!==typeof window&&(null!=(oC=window.document)&&oC.createElement||"ReactNative"===(null==(lC=window.navigator)?void 0:lC.product))?r.useLayoutEffect:r.useEffect;function pC(e){const t=r.useRef(e);return hC(()=>{t.current=e},[e]),t}function mC(e){let{set:t}=e;return hC(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class fC extends r.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fC.getDerivedStateFromError=()=>({error:!0});const gC="__default",vC=new Map,xC=e=>e&&!!e.memoized&&!!e.changes;function yC(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const _C=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function bC(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const wC={obj:e=>e===Object(e)&&!wC.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(wC.str(e)||wC.num(e)||wC.boo(e))return e===t;const s=wC.obj(e);if(s&&"reference"===i)return e===t;const a=wC.arr(e);if(a&&"reference"===n)return e===t;if((a||s)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(s&&"shallow"===n&&"shallow"===i){for(o in r?t:e)if(!wC.equ(e[o],t[o],{strict:r,objects:"reference"}))return!1}else for(o in r?t:e)if(e[o]!==t[o])return!1;if(wC.und(o)){if(a&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function AC(e){const t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}function SC(e,t){return e.__r3f=Fe({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function EC(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),r=i.pop();return n=i.reduce((e,t)=>e[t],e),{target:n,key:r}}return{target:n,key:t}}const CC=/-\d+$/;function TC(e,t,n){if(wC.str(n)){if(CC.test(n)){const t=n.replace(CC,""),{target:i,key:r}=EC(e,t);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=EC(e,n);t.__r3f.previousAttach=i[r],i[r]=t}else t.__r3f.previousAttach=n(e,t)}function MC(e,t,n){var i,r;if(wC.str(n)){const{target:i,key:r}=EC(e,n),s=t.__r3f.previousAttach;void 0===s?delete i[r]:i[r]=s}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function PC(e,t){let{children:n,key:i,ref:r}=t,s=Gc(t,iC),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{children:o,key:l,ref:c}=a,u=Gc(a,rC),d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const h=e.__r3f,p=Object.entries(s),m=[];if(d){const e=Object.keys(u);for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t])||p.unshift([e[t],gC+"remove"])}p.forEach(t=>{let[n,i]=t;var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===n)return;if(wC.equ(i,u[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return m.push([n,i,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),m.push([n,i,!1,a]);for(const e in s){const t=s[e];e.startsWith("".concat(n,"-"))&&m.push([e,t,!1,e.split("-")])}});const f=Fe({},s);return null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:m}}const NC="undefined"!==typeof process&&!1;function RC(e,t){var n;const i=e.__r3f,r=null==i?void 0:i.root,s=null==r||null==r.getState?void 0:r.getState(),{memoized:a,changes:o}=xC(t)?t:PC(e,t),l=null==i?void 0:i.eventCount;e.__r3f&&(e.__r3f.memoizedProps=a);for(let d=0;d<o.length;d++){let[t,n,r,a]=o[d];if(cC(e)){const e=3001,i="srgb",r="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?i:r):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?i:r)}let l=e,h=l[t];if(a.length&&(h=a.reduce((e,t)=>e[t],e),!h||!h.set)){const[n,...i]=a.reverse();l=i.reverse().reduce((e,t)=>e[t],e),t=n}if(n===gC+"remove")if(l.constructor){let e=vC.get(l.constructor);e||(e=new l.constructor,vC.set(l.constructor,e)),n=e[t]}else n=0;if(r&&i)n?i.handlers[t]=n:delete i.handlers[t],i.eventCount=Object.keys(i.handlers).length;else if(h&&h.set&&(h.copy||h instanceof rf)){if(Array.isArray(n))h.fromArray?h.fromArray(n):h.set(...n);else if(h.copy&&n&&n.constructor&&(NC?h.constructor.name===n.constructor.name:h.constructor===n.constructor))h.copy(n);else if(void 0!==n){var c;const e=null==(c=h)?void 0:c.isColor;!e&&h.setScalar?h.setScalar(n):h instanceof rf&&n instanceof rf?h.mask=n.mask:h.set(n),!uC()&&s&&!s.linear&&e&&h.convertSRGBToLinear()}}else{var u;if(l[t]=n,null!=(u=l[t])&&u.isTexture&&l[t].format===Nd&&l[t].type===gd&&s){const e=l[t];cC(e)&&cC(s.gl)?e.colorSpace=s.gl.outputColorSpace:e.encoding=s.gl.outputEncoding}}LC(e)}if(i&&i.parent&&e.raycast&&l!==i.eventCount){const t=bC(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),i.eventCount&&t.interaction.push(e)}return!(1===o.length&&"onUpdate"===o[0][0])&&o.length&&null!=(n=e.__r3f)&&n.parent&&jC(e),e}function LC(e){var t,n;const i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function jC(e){null==e.onUpdate||e.onUpdate(e)}function IC(e,t){e.manual||(dC(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function kC(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function BC(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function DC(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const i=e.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(kC(e)),null!=i&&i.eventCount){const n=Fe(Fe({},e),{},{intersections:t});null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))})}}return function(s){const{onPointerMissed:a,internal:o}=e.getState();o.lastEvent.current=s;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(t,n){const i=e.getState(),r=new Set,s=[],a=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<a.length;e++){const t=_C(a[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let o=a.flatMap(function(e){const n=_C(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i}).sort((e,t)=>{const n=_C(e.object),i=_C(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=kC(e);return!r.has(t)&&(r.add(t),!0)});i.events.filter&&(o=i.events.filter(o,i));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&s.push(Fe(Fe({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(kC(e.intersection))||s.push(e.intersection);return s}(s,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(s):0;"onPointerDown"===r&&(o.initialClick=[s.offsetX,s.offsetY],o.initialHits=u.map(e=>e.eventObject)),c&&!u.length&&d<=2&&(i(s,o.interaction),a&&a(s)),l&&n(u),function(t,i,r,s){const a=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=_C(o.object)||a,{raycaster:c,pointer:u,camera:d,internal:h}=l,p=new gm(u.x,u.y,0).unproject(d),m=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},f=e=>{const t={intersection:o,target:i.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(o.eventObject,t):h.capturedMap.set(e,new Map([[o.eventObject,t]])),i.target.setPointerCapture(e)},g=e=>{const t=h.capturedMap.get(e);t&&BC(h.capturedMap,o.eventObject,t,e)};let v={};for(let e in i){let t=i[e];"function"!==typeof t&&(v[e]=t)}let x=Fe(Fe(Fe({},o),v),{},{pointer:u,intersections:t,stopped:e.stopped,delta:r,unprojectedPoint:p,ray:c.ray,camera:d,stopPropagation(){const r="pointerId"in i&&h.capturedMap.get(i.pointerId);(!r||r.has(o.eventObject))&&(x.stopped=e.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:m,setPointerCapture:f,releasePointerCapture:g},currentTarget:{hasPointerCapture:m,setPointerCapture:f,releasePointerCapture:g},nativeEvent:i});if(s(x),!0===e.stopped)break}}}(u,s,d,function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=kC(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[r];n?c&&!o.initialHits.includes(t)||(i(s,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):c&&o.initialHits.includes(t)&&i(s,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}const OC=e=>!(null==e||!e.render),FC=r.createContext(null),UC=(e,t)=>{const n=function(e){const t="function"===typeof e?JE(e):e,n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,i]=(0,r.useReducer)(e=>e+1,0),s=t.getState(),a=(0,r.useRef)(s),o=(0,r.useRef)(e),l=(0,r.useRef)(n),c=(0,r.useRef)(!1),u=(0,r.useRef)();let d;void 0===u.current&&(u.current=e(s));let h=!1;(a.current!==s||o.current!==e||l.current!==n||c.current)&&(d=e(s),h=!n(u.current,d)),YE(()=>{h&&(u.current=d),a.current=s,o.current=e,l.current=n,c.current=!1});const p=(0,r.useRef)(s);YE(()=>{const e=()=>{try{const e=t.getState(),n=o.current(e);l.current(u.current,n)||(a.current=e,u.current=n,i())}catch(RT){c.current=!0,i()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n},[]);const m=h?d:u.current;return(0,r.useDebugValue)(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}((n,i)=>{const s=new gm,a=new gm,o=new gm;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size;const{width:r,height:l,top:c,left:u}=n,d=r/l;t.isVector3?o.copy(t):o.set(...t);const h=e.getWorldPosition(s).distanceTo(o);if(dC(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:h,aspect:d}}}let c;const u=e=>n(t=>({performance:Fe(Fe({},t.performance),{},{current:e})})),d=new Fp,h={set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:(e,n)=>t(e,n,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Bb,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout(()=>u(i().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n(t=>Fe(Fe({},t),{},{events:Fe(Fe({},t.events),e)})),setSize:(e,t,r,s,o)=>{const c=i().camera,u={width:e,height:t,top:s||0,left:o||0,updateStyle:r};n(e=>({size:u,viewport:Fe(Fe({},e.viewport),l(c,a,u))}))},setDpr:e=>n(t=>{const n=yC(e);return{viewport:Fe(Fe({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return h}),i=n.getState();let s=i.size,a=i.viewport.dpr,o=i.camera;return n.subscribe(()=>{const{camera:e,size:t,viewport:i,gl:r,set:l}=n.getState();if(t.width!==s.width||t.height!==s.height||i.dpr!==a){var c;s=t,a=i.dpr,IC(e,t),r.setPixelRatio(i.dpr);const n=null!=(c=t.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,n)}e!==o&&(o=e,l(t=>({viewport:Fe(Fe({},t.viewport),t.viewport.getCurrentViewport(e))})))}),n.subscribe(t=>e(t)),n};let zC,HC=new Set,GC=new Set,WC=new Set;function VC(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function JC(e,t){switch(e){case"before":return VC(HC,t);case"after":return VC(GC,t);case"tail":return VC(WC,t)}}let YC,XC;function ZC(e,t,n){let i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),YC=t.internal.subscribers,zC=0;zC<YC.length;zC++)XC=YC[zC],XC.ref.current(XC.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function qC(){const e=r.useContext(FC);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function KC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return qC()(e,t)}function QC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=qC(),i=n.getState().internal.subscribe,r=pC(e);return hC(()=>i(r,t,n),[t,i,n]),null}const $C=new WeakMap;function eT(e,t){return function(n){let i=$C.get(n);i||(i=new n,$C.set(n,i)),e&&e(i);for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return Promise.all(s.map(e=>new Promise((n,r)=>i.load(e,e=>{e.scene&&Object.assign(e,AC(e.scene)),n(e)},t,t=>r(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))))))}}function tT(e,t,n,i){const r=Array.isArray(t)?t:[t],s=((e,t,n)=>qE(e,t,!1,n))(eT(n,i),[e,...r],{equal:wC.equ});return Array.isArray(t)?s:s[0]}tT.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{qE(e,t,!0,n)})(eT(n),[e,...i])},tT.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)XE.splice(0,XE.length);else{const t=XE.find(t=>ZE(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const nT=new Map,{invalidate:iT,advance:rT}=function(e){let t,n,i,r=!1,s=!1;function a(o){n=requestAnimationFrame(a),r=!0,t=0,JC("before",o),s=!0;for(const n of e.values()){var l;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(l=i.gl.xr)&&l.isPresenting||(t+=ZC(o,i))}if(s=!1,JC("after",o),0===t)return JC("tail",o),r=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var o;if(!n)return e.forEach(e=>t(e.store.getState(),i));null!=(o=n.gl.xr)&&o.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=i>1?Math.min(60,n.internal.frames+i):s?2:1,r||(r=!0,requestAnimationFrame(a)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&JC("before",t),i)ZC(t,i,r);else for(const s of e.values())ZC(t,s.store.getState());n&&JC("after",t)}}}(nT),{reconciler:sT,applyProps:aT}=function(e,t){function n(e,t,n){let i,{args:r=[],attach:s}=t,a=Gc(t,eC),o="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===a.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=SC(a.object,{type:e,root:n,attach:s,primitive:!0})}else{const t=aC[o];if(!t)throw new Error("R3F: ".concat(o," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");i=SC(new t(...r),{type:e,root:n,attach:s,memoizedProps:{args:r}})}return void 0===i.__r3f.attach&&(i.isBufferGeometry?i.__r3f.attach="geometry":i.isMaterial&&(i.__r3f.attach="material")),"inject"!==o&&RC(i,a),i}function i(e,t){let n=!1;var i,r;t&&(null!=(i=t.__r3f)&&i.attach?TC(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||SC(t,{}),t.__r3f.parent=e,jC(t),LC(t))}function r(e,t,n){let i=!1;if(t){var r,s;if(null!=(r=t.__r3f)&&r.attach)TC(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const r=e.children.filter(e=>e!==t),s=r.indexOf(n);e.children=[...r.slice(0,s),t,...r.slice(s)],i=!0}i||null==(s=e.__r3f)||s.objects.push(t),t.__r3f||SC(t,{}),t.__r3f.parent=e,jC(t),LC(t)}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach(e=>a(t,e,n))}function a(e,t,n){if(t){var i,r,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(r=t.__r3f)&&r.attach)MC(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)}),n.capturedMap.forEach((e,i)=>{BC(n.capturedMap,t,e,i)})}(bC(t),t)}const c=null==(a=t.__r3f)?void 0:a.primitive,u=!c&&(void 0===n?null!==t.dispose:n);var l;if(!c)s(null==(l=t.__r3f)?void 0:l.objects,t,u),s(t.children,t,u);if(delete t.__r3f,u&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(tR){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,$E.unstable_scheduleCallback)($E.unstable_IdlePriority,e):e()}LC(e)}}const o=()=>{};return{reconciler:QE()({createInstance:n,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const i=e.getState().scene;i.__r3f&&r(i,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,i){var r;if((null!=(r=null==e?void 0:e.__r3f)?r:{}).primitive&&i.object&&i.object!==e)return[!0];{const{args:t=[],children:r}=i,s=Gc(i,tC),{args:a=[],children:o}=n,l=Gc(n,nC);if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==a[t]))return[!0];const c=PC(e,s,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,t,r,s,o,l){let[c,u]=t;c?function(e,t,r,s){var o;const l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;const c=n(t,r,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&i(c,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>i(c,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),i(l,c),c.raycast&&c.__r3f.eventCount&&bC(c).getState().internal.interaction.push(c);[s,s.alternate].forEach(e=>{null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))})}(e,r,o,l):RC(e,u)},commitMount(e,t,n,i){var r;const s=null!=(r=e.__r3f)?r:{};e.raycast&&s.handlers&&s.eventCount&&bC(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>SC(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:i}=null!=(t=e.__r3f)?t:{};n&&i&&MC(i,e,n),e.isObject3D&&(e.visible=!1),LC(e)},unhideInstance(e,t){var n;const{attach:i,parent:r}=null!=(n=e.__r3f)?n:{};i&&r&&TC(r,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),LC(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():VE.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&wC.fun(performance.now)?performance.now:wC.fun(Date.now)?Date.now:()=>0,scheduleTimeout:wC.fun(setTimeout)?setTimeout:void 0,cancelTimeout:wC.fun(clearTimeout)?clearTimeout:void 0}),applyProps:RC}}(0,function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return VE.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return VE.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return VE.ContinuousEventPriority;default:return VE.DefaultEventPriority}}),oT={objects:"shallow",strict:!1},lT=(e,t)=>{const n="function"===typeof e?e(t):e;return OC(n)?n:new WE(Fe({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function cT(e){const t=nT.get(e),n=null==t?void 0:t.fiber,i=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const r="function"===typeof reportError?reportError:console.error,s=i||UC(iT,rT),a=n||sT.createContainer(s,VE.ConcurrentRoot,null,!1,null,"",r,null);let o;t||nT.set(e,{fiber:a,store:s});let l,c=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:i,scene:r,events:a,onCreated:u,shadows:d=!1,linear:h=!1,flat:p=!1,legacy:m=!1,orthographic:f=!1,frameloop:g="always",dpr:v=[1,2],performance:x,raycaster:y,camera:_,onPointerMissed:b}=t,w=s.getState(),A=w.gl;w.gl||w.set({gl:A=lT(n,e)});let S=w.raycaster;S||w.set({raycaster:S=new gw});const E=y||{},{params:C}=E,T=Gc(E,sC);if(wC.equ(T,S,oT)||aT(S,Fe({},T)),wC.equ(C,S.params,oT)||aT(S,{params:Fe(Fe({},S.params),C)}),!w.camera||w.camera===l&&!wC.equ(l,_,oT)){l=_;const e=_ instanceof Ig,t=e?_:f?new hb(0,0,0,0,.1,1e3):new Og(75,0,.1,1e3);e||(t.position.z=5,_&&(aT(t,_),("aspect"in _||"left"in _||"right"in _||"bottom"in _||"top"in _)&&(t.manual=!0,t.updateProjectionMatrix())),w.camera||null!=_&&_.rotation||t.lookAt(0,0,0)),w.set({camera:t}),S.camera=t}if(!w.scene){let e;null!=r&&r.isScene?e=r:(e=new Vg,r&&aT(e,r)),w.set({scene:SC(e)})}if(!w.xr){var M;const e=(e,t)=>{const n=s.getState();"never"!==n.frameloop&&rT(e,!0,n,t)},t=()=>{const t=s.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||iT(t)},n={connect(){const e=s.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=s.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(M=A.xr)?void 0:M.addEventListener)&&n.connect(),w.set({xr:n})}if(A.shadowMap){const e=A.shadowMap.enabled,t=A.shadowMap.type;if(A.shadowMap.enabled=!!d,wC.boo(d))A.shadowMap.type=$c;else if(wC.str(d)){var P;const e={basic:Kc,percentage:Qc,soft:$c,variance:eu};A.shadowMap.type=null!=(P=e[d])?P:$c}else wC.obj(d)&&Object.assign(A.shadowMap,d);e===A.shadowMap.enabled&&t===A.shadowMap.type||(A.shadowMap.needsUpdate=!0)}const N=uC();if(N&&("enabled"in N?N.enabled=!m:"legacyMode"in N&&(N.legacyMode=m)),!c){aT(A,{outputEncoding:h?3e3:3001,toneMapping:p?zu:Vu})}w.legacy!==m&&w.set(()=>({legacy:m})),w.linear!==h&&w.set(()=>({linear:h})),w.flat!==p&&w.set(()=>({flat:p})),!n||wC.fun(n)||OC(n)||wC.equ(n,A,oT)||aT(A,n),a&&!w.events.handlers&&w.set({events:a(s)});const R=function(e,t){const n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:i,top:r,left:s,updateStyle:a=n}=t;return{width:e,height:i,top:r,left:s,updateStyle:a}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:i,top:r,left:s}=e.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,i);return wC.equ(R,w.size,oT)||w.setSize(R.width,R.height,R.updateStyle,R.top,R.left),v&&w.viewport.dpr!==yC(v)&&w.setDpr(v),w.frameloop!==g&&w.setFrameloop(g),w.onPointerMissed||w.set({onPointerMissed:b}),x&&!wC.equ(x,w.performance,oT)&&w.set(e=>({performance:Fe(Fe({},e.performance),x)})),o=u,c=!0,this},render(t){return c||this.configure(),sT.updateContainer((0,gi.jsx)(uT,{store:s,children:t,onCreated:o,rootElement:e}),a,null,()=>{}),s},unmount(){dT(e)}}}function uT(e){let{store:t,children:n,onCreated:i,rootElement:r}=e;return hC(()=>{const e=t.getState();e.set(e=>({internal:Fe(Fe({},e.internal),{},{active:!0})})),i&&i(e),t.getState().events.connected||null==e.events.connect||e.events.connect(r)},[]),(0,gi.jsx)(FC.Provider,{value:t,children:n})}function dT(e,t){const n=nT.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),sT.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var n,i,s,a;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(s=r.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(a=r.gl)&&a.xr&&r.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(r),nT.delete(e),t&&t(e)}catch(tR){}},500)})}}sT.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version});r.unstable_act;const hT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function pT(e){const{handlePointer:t}=DC(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(hT).reduce((e,n)=>Fe(Fe({},e),{},{[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=e.getState();null==r.disconnect||r.disconnect(),i(e=>({events:Fe(Fe({},e.events),{},{connected:t})})),Object.entries(null!=(n=r.handlers)?n:[]).forEach(e=>{let[n,i]=e;const[r,s]=hT[n];t.addEventListener(r,i,{passive:s})})},disconnect:()=>{const{set:t,events:n}=e.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach(e=>{let[t,i]=e;if(n&&n.connected instanceof HTMLElement){const[e]=hT[t];n.connected.removeEventListener(e,i)}}),t(e=>({events:Fe(Fe({},e.events),{},{connected:void 0})})))}}}function mT(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function fT(){let{debounce:e,scroll:t,polyfill:n,offsetSize:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const s=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,d=(0,r.useRef)(!1);(0,r.useEffect)(()=>(d.current=!0,()=>{d.current=!1}));const[h,p,m]=(0,r.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:s,right:a,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:s,right:a,x:c,y:u};l.current.element instanceof HTMLElement&&i&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!xT(l.current.lastBounds,h)&&o(l.current.lastBounds=h)};return[e,u?mT(e,u):e,c?mT(e,c):e]},[o,i,c,u]);function f(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",m,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new s(m),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",m,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,t){(0,r.useEffect)(()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,t])}(m,!!t),function(e){(0,r.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(p),(0,r.useEffect)(()=>{f(),g()},[t,m,p]),(0,r.useEffect)(()=>f,[]),[e=>{!e||e===l.current.element||(f(),l.current.element=e,l.current.scrollContainers=gT(e),g())},a,h]}function gT(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...gT(e.parentElement)]}const vT=["x","y","top","bottom","left","right","width","height"],xT=(e,t)=>vT.every(n=>e[n]===t[n]);var yT,_T,bT=Object.defineProperty,wT=Object.defineProperties,AT=Object.getOwnPropertyDescriptors,ST=Object.getOwnPropertySymbols,ET=Object.prototype.hasOwnProperty,CT=Object.prototype.propertyIsEnumerable,TT=(e,t,n)=>t in e?bT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MT=(e,t)=>{for(var n in t||(t={}))ET.call(t,n)&&TT(e,n,t[n]);if(ST)for(var n of ST(t))CT.call(t,n)&&TT(e,n,t[n]);return e};"undefined"===typeof window||!(null==(yT=window.document)?void 0:yT.createElement)&&"ReactNative"!==(null==(_T=window.navigator)?void 0:_T.product)?r.useEffect:r.useLayoutEffect;function PT(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=PT(i,t,n);if(e)return e;i=t?null:i.sibling}}function NT(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(Js){return e}}const RT=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return RT.apply(this,arguments);console.error=RT};const LT=NT(r.createContext(null));class jT extends r.Component{render(){return r.createElement(LT.Provider,{value:this._reactInternals},this.props.children)}}function IT(){const e=r.useContext(LT);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=r.useId(),n=r.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=PT(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t]);return n}function kT(){const e=function(){const e=IT(),[t]=r.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&"object"===typeof n.type){const e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==LT&&!t.has(e)&&t.set(e,r.useContext(NT(e)))}n=n.return}return t}();return r.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>i=>r.createElement(t,null,r.createElement(n.Provider,((e,t)=>wT(e,AT(t)))(MT({},i),{value:e.get(n)}))),e=>r.createElement(jT,MT({},e))),[e])}const BT=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"],DT=r.forwardRef(function(e,n){let{children:i,fallback:s,resize:a,style:o,gl:l,events:c=pT,eventSource:u,eventPrefix:d,shadows:h,linear:p,flat:m,legacy:f,orthographic:g,frameloop:v,dpr:x,performance:y,raycaster:_,camera:b,scene:w,onPointerMissed:A,onCreated:S}=e,E=Gc(e,BT);r.useMemo(()=>{return e=t,void Object.assign(aC,e);var e},[]);const C=kT(),[T,M]=fT(Fe({scroll:!0,debounce:{scroll:50,resize:0}},a)),P=r.useRef(null),N=r.useRef(null);r.useImperativeHandle(n,()=>P.current);const R=pC(A),[L,j]=r.useState(!1),[I,k]=r.useState(!1);if(L)throw L;if(I)throw I;const B=r.useRef(null);hC(()=>{const e=P.current;M.width>0&&M.height>0&&e&&(B.current||(B.current=cT(e)),B.current.configure({gl:l,events:c,shadows:h,linear:p,flat:m,legacy:f,orthographic:g,frameloop:v,dpr:x,performance:y,raycaster:_,camera:b,scene:w,size:M,onPointerMissed:function(){return null==R.current?void 0:R.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(u?(t=u)&&t.hasOwnProperty("current")?u.current:u:N.current),d&&e.setEvents({compute:(e,t)=>{const n=e[d+"X"],i=e[d+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),B.current.render((0,gi.jsx)(C,{children:(0,gi.jsx)(fC,{set:k,children:(0,gi.jsx)(r.Suspense,{fallback:(0,gi.jsx)(mC,{set:j}),children:null!=i?i:null})})})))}),r.useEffect(()=>{const e=P.current;if(e)return()=>dT(e)},[]);const D=u?"none":"auto";return(0,gi.jsx)("div",Fe(Fe({ref:N,style:Fe({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:D},o)},E),{},{children:(0,gi.jsx)("div",{ref:T,style:{width:"100%",height:"100%"},children:(0,gi.jsx)("canvas",{ref:P,style:{display:"block"},children:s})})}))}),OT=r.forwardRef(function(e,t){return(0,gi.jsx)(jT,{children:(0,gi.jsx)(DT,Fe(Fe({},e),{},{ref:t}))})});function FT(){return FT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FT.apply(null,arguments)}var UT=Object.defineProperty,zT=(e,t,n)=>(((e,t,n)=>{t in e?UT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class HT{constructor(){zT(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}var GT=Object.defineProperty,WT=(e,t,n)=>(((e,t,n)=>{t in e?GT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const VT=new Vm,JT=new zv,YT=Math.cos(Math.PI/180*70),XT=(e,t)=>(e%t+t)%t;class ZT extends HT{constructor(e,t){super(),WT(this,"object"),WT(this,"domElement"),WT(this,"enabled",!0),WT(this,"target",new gm),WT(this,"minDistance",0),WT(this,"maxDistance",1/0),WT(this,"minZoom",0),WT(this,"maxZoom",1/0),WT(this,"minPolarAngle",0),WT(this,"maxPolarAngle",Math.PI),WT(this,"minAzimuthAngle",-1/0),WT(this,"maxAzimuthAngle",1/0),WT(this,"enableDamping",!1),WT(this,"dampingFactor",.05),WT(this,"enableZoom",!0),WT(this,"zoomSpeed",1),WT(this,"enableRotate",!0),WT(this,"rotateSpeed",1),WT(this,"enablePan",!0),WT(this,"panSpeed",1),WT(this,"screenSpacePanning",!0),WT(this,"keyPanSpeed",7),WT(this,"zoomToCursor",!1),WT(this,"autoRotate",!1),WT(this,"autoRotateSpeed",2),WT(this,"reverseOrbit",!1),WT(this,"reverseHorizontalOrbit",!1),WT(this,"reverseVerticalOrbit",!1),WT(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),WT(this,"mouseButtons",{LEFT:Vc.ROTATE,MIDDLE:Vc.DOLLY,RIGHT:Vc.PAN}),WT(this,"touches",{ONE:Jc.ROTATE,TWO:Jc.DOLLY_PAN}),WT(this,"target0"),WT(this,"position0"),WT(this,"zoom0"),WT(this,"_domElementKeyEvents",null),WT(this,"getPolarAngle"),WT(this,"getAzimuthalAngle"),WT(this,"setPolarAngle"),WT(this,"setAzimuthalAngle"),WT(this,"getDistance"),WT(this,"getZoomScale"),WT(this,"listenToKeyEvents"),WT(this,"stopListenToKeyEvents"),WT(this,"saveState"),WT(this,"reset"),WT(this,"update"),WT(this,"connect"),WT(this,"dispose"),WT(this,"dollyIn"),WT(this,"dollyOut"),WT(this,"getScale"),WT(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=XT(e,2*Math.PI),i=c.phi;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.phi=t-i,n.update()},this.setAzimuthalAngle=e=>{let t=XT(e,2*Math.PI),i=c.theta;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),u.theta=t-i,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",q),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",q),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),o=a.NONE},this.update=(()=>{const t=new gm,r=new gm(0,1,0),s=(new fm).setFromUnitVectors(e.up,r),p=s.clone().invert(),m=new gm,f=new fm,g=2*Math.PI;return function(){const v=n.object.position;s.setFromUnitVectors(e.up,r),p.copy(s).invert(),t.copy(v).sub(n.target),t.applyQuaternion(s),c.setFromVector3(t),n.autoRotate&&o===a.NONE&&M(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let x=n.minAzimuthAngle,y=n.maxAzimuthAngle;isFinite(x)&&isFinite(y)&&(x<-Math.PI?x+=g:x>Math.PI&&(x-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),c.theta=x<=y?Math.max(x,Math.min(y,c.theta)):c.theta>(x+y)/2?Math.max(x,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&S||n.object.isOrthographicCamera?c.radius=D(c.radius):c.radius=D(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0));let _=!1;if(n.zoomToCursor&&S){let i=null;if(n.object instanceof Og&&n.object.isPerspectiveCamera){const e=t.length();i=D(e*d);const r=e-i;n.object.position.addScaledVector(w,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new gm(A.x,A.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),_=!0;const r=new gm(A.x,A.y,0);r.unproject(n.object),n.object.position.sub(r).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(VT.origin.copy(n.object.position),VT.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(VT.direction))<YT?e.lookAt(n.target):(JT.setFromNormalAndCoplanarPoint(n.object.up,n.target),VT.intersectPlane(JT,n.target))))}else n.object instanceof hb&&n.object.isOrthographicCamera&&(_=1!==d,_&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,S=!1,!!(_||m.distanceToSquared(n.object.position)>l||8*(1-f.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),m.copy(n.object.position),f.copy(n.object.quaternion),_=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",K),n.domElement.addEventListener("pointerdown",J),n.domElement.addEventListener("pointercancel",X),n.domElement.addEventListener("wheel",Z)},this.dispose=()=>{var e,t,i,r,s,a;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",K),null==(t=n.domElement)||t.removeEventListener("pointerdown",J),null==(i=n.domElement)||i.removeEventListener("pointercancel",X),null==(r=n.domElement)||r.removeEventListener("wheel",Z),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointermove",Y),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",X),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",q)};const n=this,i={type:"change"},r={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=a.NONE;const l=1e-6,c=new yw,u=new yw;let d=1;const h=new gm,p=new Fp,m=new Fp,f=new Fp,g=new Fp,v=new Fp,x=new Fp,y=new Fp,_=new Fp,b=new Fp,w=new gm,A=new Fp;let S=!1;const E=[],C={};function T(){return Math.pow(.95,n.zoomSpeed)}function M(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function P(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const N=(()=>{const e=new gm;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),R=(()=>{const e=new gm;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),L=(()=>{const e=new gm;return function(t,i){const r=n.domElement;if(r&&n.object instanceof Og&&n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),N(2*t*a/r.clientHeight,n.object.matrix),R(2*i*a/r.clientHeight,n.object.matrix)}else r&&n.object instanceof hb&&n.object.isOrthographicCamera?(N(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),R(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function j(e){n.object instanceof Og&&n.object.isPerspectiveCamera||n.object instanceof hb&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){j(d/e)}function k(e){j(d*e)}function B(e){if(!n.zoomToCursor||!n.domElement)return;S=!0;const t=n.domElement.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,s=t.width,a=t.height;A.x=i/s*2-1,A.y=-r/a*2+1,w.set(A.x,A.y,1).unproject(n.object).sub(n.object.position).normalize()}function D(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function O(e){p.set(e.clientX,e.clientY)}function F(e){g.set(e.clientX,e.clientY)}function U(){if(1==E.length)p.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);p.set(e,t)}}function z(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);g.set(e,t)}}function H(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);y.set(0,n)}function G(e){if(1==E.length)m.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);m.set(n,i)}f.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(M(2*Math.PI*f.x/t.clientHeight),P(2*Math.PI*f.y/t.clientHeight)),p.copy(m)}function W(e){if(1==E.length)v.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}x.subVectors(v,g).multiplyScalar(n.panSpeed),L(x.x,x.y),g.copy(v)}function V(e){const t=$(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);_.set(0,s),b.set(0,Math.pow(_.y/y.y,n.zoomSpeed)),I(b.y),y.copy(_)}function J(e){var t,i;!1!==n.enabled&&(0===E.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",Y),null==(i=n.domElement)||i.ownerDocument.addEventListener("pointerup",X)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(Q(e),E.length){case 1:switch(n.touches.ONE){case Jc.ROTATE:if(!1===n.enableRotate)return;U(),o=a.TOUCH_ROTATE;break;case Jc.PAN:if(!1===n.enablePan)return;z(),o=a.TOUCH_PAN;break;default:o=a.NONE}break;case 2:switch(n.touches.TWO){case Jc.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(),n.enablePan&&z(),o=a.TOUCH_DOLLY_PAN;break;case Jc.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(),n.enableRotate&&U(),o=a.TOUCH_DOLLY_ROTATE;break;default:o=a.NONE}break;default:o=a.NONE}o!==a.NONE&&n.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Vc.DOLLY:if(!1===n.enableZoom)return;!function(e){B(e),y.set(e.clientX,e.clientY)}(e),o=a.DOLLY;break;case Vc.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),o=a.PAN}else{if(!1===n.enableRotate)return;O(e),o=a.ROTATE}break;case Vc.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),o=a.ROTATE}else{if(!1===n.enablePan)return;F(e),o=a.PAN}break;default:o=a.NONE}o!==a.NONE&&n.dispatchEvent(r)}(e))}function Y(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Q(e),o){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;G(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;W(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&V(e),n.enablePan&&W(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&V(e),n.enableRotate&&G(e)}(e),n.update();break;default:o=a.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),f.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(M(2*Math.PI*f.x/t.clientHeight),P(2*Math.PI*f.y/t.clientHeight)),p.copy(m),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),b.subVectors(_,y),b.y>0?I(T()):b.y<0&&k(T()),y.copy(_),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),x.subVectors(v,g).multiplyScalar(n.panSpeed),L(x.x,x.y),g.copy(v),n.update()}(e)}}(e))}function X(e){var t,i,r;!function(e){delete C[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}(e),0===E.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",Y),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",X)),n.dispatchEvent(s),o=a.NONE}function Z(e){!1===n.enabled||!1===n.enableZoom||o!==a.NONE&&o!==a.ROTATE||(e.preventDefault(),n.dispatchEvent(r),function(e){B(e),e.deltaY<0?k(T()):e.deltaY>0&&I(T()),n.update()}(e),n.dispatchEvent(s))}function q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:L(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:L(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:L(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:L(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function K(e){!1!==n.enabled&&e.preventDefault()}function Q(e){let t=C[e.pointerId];void 0===t&&(t=new Fp,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return C[t.pointerId]}this.dollyIn=function(){k(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()),n.update()},this.dollyOut=function(){I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()),n.update()},this.getScale=()=>d,this.setScale=e=>{j(e),n.update()},this.getZoomScale=()=>T(),void 0!==t&&this.connect(t),this.update()}}const qT=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],KT=r.forwardRef((e,t)=>{let{makeDefault:n,camera:i,regress:s,domElement:a,enableDamping:o=!0,keyEvents:l=!1,onChange:c,onStart:u,onEnd:d}=e,h=Gc(e,qT);const p=KC(e=>e.invalidate),m=KC(e=>e.camera),f=KC(e=>e.gl),g=KC(e=>e.events),v=KC(e=>e.setEvents),x=KC(e=>e.set),y=KC(e=>e.get),_=KC(e=>e.performance),b=i||m,w=a||g.connected||f.domElement,A=r.useMemo(()=>new ZT(b),[b]);return QC(()=>{A.enabled&&A.update()},-1),r.useEffect(()=>(l&&A.connect(!0===l?w:l),A.connect(w),()=>{A.dispose()}),[l,w,s,A,p]),r.useEffect(()=>{const e=e=>{p(),s&&_.regress(),c&&c(e)},t=e=>{u&&u(e)},n=e=>{d&&d(e)};return A.addEventListener("change",e),A.addEventListener("start",t),A.addEventListener("end",n),()=>{A.removeEventListener("start",t),A.removeEventListener("end",n),A.removeEventListener("change",e)}},[c,u,d,A,p,v]),r.useEffect(()=>{if(n){const e=y().controls;return x({controls:A}),()=>x({controls:e})}},[n,A]),r.createElement("primitive",FT({ref:t,object:A,enableDamping:o},h))}),QT=new WeakMap;class $T extends G_{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new J_(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const o in t.attributeTypes){const e=t.attributeTypes[o];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=e.name)}const n=JSON.stringify(t);if(QT.has(e)){const t=QT.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(r,s).then(n=>(i=n,new Promise((n,s)=>{i._callbacks[r]={resolve:n,reject:s},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),QT.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new mg;e.index&&t.setIndex(new Kf(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,s=i.array,a=i.itemSize;t.setAttribute(r,new Kf(s,a))}return t}_loadLibrary(e,t){const n=new J_(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,i)=>{n.load(e,t,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=eM.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function eM(){let e,t;function n(e,t,n,i,r,s){const a=s.num_components(),o=n.num_points()*a,l=o*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,s,c,l,u);const d=new r(e.HEAPF32.buffer,u,o).slice();return e._free(u),{name:i,array:d,itemSize:a}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const i=r.buffer,s=r.taskConfig;t.then(e=>{const t=e.draco,a=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(i),i.byteLength);try{const e=function(e,t,i,r){const s=r.attributeIDs,a=r.attributeTypes;let o,l;const c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,l=t.DecodeBufferToMesh(i,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,l=t.DecodeBufferToPointCloud(i,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const d in s){const i=self[a[d]];let l,c;if(r.useUniqueIDs)c=s[d],l=t.GetAttributeByUniqueId(o,c);else{if(c=t.GetAttributeId(o,e[s[d]]),-1===c)continue;l=t.GetAttribute(o,c)}u.attributes.push(n(e,t,o,d,i,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const i=n.num_faces(),r=3*i,s=4*r,a=e._malloc(s);t.GetTrianglesUInt32Array(n,s,a);const o=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:o,itemSize:1}}(e,t,o));return e.destroy(o),u}(t,a,o,s),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(RT){console.error(RT),self.postMessage({type:"error",id:r.id,error:RT.message})}finally{t.destroy(o),t.destroy(a)}})}}}let tM;const nM=()=>{if(tM)return tM;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let n,i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const r=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const i=e.charCodeAt(t);n[t]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let i=0;for(let r=0;r<e.length;++r)n[i++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,i)}(i),{}).then(e=>{n=e.instance,n.exports.__wasm_call_ctors()});function s(e,t,i,r,s,a){const o=n.exports.sbrk,l=i+3&-4,c=o(l*r),u=o(s.length),d=new Uint8Array(n.exports.memory.buffer);d.set(s,u);const h=e(c,i,r,u,s.length);if(0===h&&a&&a(c,l,r),t.set(d.subarray(c,c+i*r)),o(c-o(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return tM={ready:r,supported:!0,decodeVertexBuffer(e,t,i,r,o){s(n.exports.meshopt_decodeVertexBuffer,e,t,i,r,n.exports[a[o]])},decodeIndexBuffer(e,t,i,r){s(n.exports.meshopt_decodeIndexBuffer,e,t,i,r)},decodeIndexSequence(e,t,i,r){s(n.exports.meshopt_decodeIndexSequence,e,t,i,r)},decodeGltfBuffer(e,t,i,r,l,c){s(n.exports[o[l]],e,t,i,r,n.exports[a[c]])}},tM};function iM(e,t){if(t===Nh)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Lh||t===Rh){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(n)if(t===Lh)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2===0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const rM=(()=>parseInt(Wc.replace(/\D+/g,"")))();function sM(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(tR){return t}}const aM="srgb",oM="srgb-linear";class lM extends G_{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new mM(e)}),this.register(function(e){return new fM(e)}),this.register(function(e){return new SM(e)}),this.register(function(e){return new EM(e)}),this.register(function(e){return new CM(e)}),this.register(function(e){return new vM(e)}),this.register(function(e){return new xM(e)}),this.register(function(e){return new yM(e)}),this.register(function(e){return new _M(e)}),this.register(function(e){return new pM(e)}),this.register(function(e){return new bM(e)}),this.register(function(e){return new gM(e)}),this.register(function(e){return new AM(e)}),this.register(function(e){return new wM(e)}),this.register(function(e){return new dM(e)}),this.register(function(e){return new TM(e)}),this.register(function(e){return new MM(e)})}load(e,t,n,i){const r=this;let s;if(""!==this.resourcePath)s=this.resourcePath;else if(""!==this.path){const t=_b.extractUrlBase(e);s=_b.resolveURL(t,this.path)}else s=_b.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},o=new J_(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{r.parse(n,s,function(n){t(n),r.manager.itemEnd(e)},a)}catch(tR){a(tR)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const s={},a={};if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(sM(new Uint8Array(e.slice(0,4)))===PM){try{s[uM.KHR_BINARY_GLTF]=new LM(e)}catch(RT){return void(i&&i(RT))}r=JSON.parse(s[uM.KHR_BINARY_GLTF].content)}else r=JSON.parse(sM(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const o=new rP(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});o.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const e=this.pluginCallbacks[l](o);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[e.name]=e,s[e.name]=!0}if(r.extensionsUsed)for(let l=0;l<r.extensionsUsed.length;++l){const e=r.extensionsUsed[l],t=r.extensionsRequired||[];switch(e){case uM.KHR_MATERIALS_UNLIT:s[e]=new hM;break;case uM.KHR_DRACO_MESH_COMPRESSION:s[e]=new jM(r,this.dracoLoader);break;case uM.KHR_TEXTURE_TRANSFORM:s[e]=new IM;break;case uM.KHR_MESH_QUANTIZATION:s[e]=new kM;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}o.setExtensions(s),o.setPlugins(a),o.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function cM(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const uM={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class dM{constructor(e){this.parser=e,this.name=uM.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const o=new Ff(16777215);void 0!==s.color&&o.setRGB(s.color[0],s.color[1],s.color[2],oM);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new mb(o),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new db(o),a.distance=l;break;case"spot":a=new ab(o),a.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),a.decay=2,QM(a,s),void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return n._getNodeRef(t.cache,r,e)})}}class hM{constructor(){this.name=uM.KHR_MATERIALS_UNLIT}getMaterialType(){return Gf}extendParams(e,t,n){const i=[];e.color=new Ff(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],oM),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,aM))}return Promise.all(i)}}class pM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class mM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Fp(e,e)}return Promise.all(r)}}class fM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class gM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(r)}}class vM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ff(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];if(void 0!==s.sheenColorFactor){const e=s.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],oM)}return void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,aM)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class xM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(r)}}class yM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=(new Ff).setRGB(a[0],a[1],a[2],oM),Promise.all(r)}}class _M{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class bM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=(new Ff).setRGB(a[0],a[1],a[2],oM),void 0!==s.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,aM)),Promise.all(r)}}class wM{constructor(e){this.parser=e,this.name=uM.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return t.bumpScale=void 0!==s.bumpFactor?s.bumpFactor:1,void 0!==s.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(r)}}class AM{constructor(e){this.parser=e,this.name=uM.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?d_:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(r)}}class SM{constructor(e){this.parser=e,this.name=uM.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,s)}}class EM{constructor(e){this.parser=e,this.name=uM.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const s=r.extensions[t],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class CM{constructor(e){this.parser=e,this.name=uM.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const s=r.extensions[t],a=i.images[s.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then(function(r){if(r)return n.loadTextureImage(e,s.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class TM{constructor(e){this.name=uM.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(t){const n=e.byteOffset||0,i=e.byteLength||0,s=e.count,a=e.byteStride,o=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(s,a,o,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(s*a);return r.decodeGltfBuffer(new Uint8Array(t),s,a,o,e.mode,e.filter),t})})}return null}}class MM{constructor(e){this.name=uM.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const o of i.primitives)if(o.mode!==FM.TRIANGLES&&o.mode!==FM.TRIANGLE_STRIP&&o.mode!==FM.TRIANGLE_FAN&&void 0!==o.mode)return null;const r=n.extensions[this.name].attributes,s=[],a={};for(const o in r)s.push(this.parser.getDependency("accessor",r[o]).then(e=>(a[o]=e,a[o])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const s of n){const e=new Jm,t=new gm,n=new fm,o=new gm(1,1,1),l=new Dv(s.geometry,s.material,i);for(let r=0;r<i;r++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,r),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,r),a.SCALE&&o.fromBufferAttribute(a.SCALE,r),l.setMatrixAt(r,e.compose(t,n,o));for(const i in a)if("_COLOR_0"===i){const e=a[i];l.instanceColor=new Pv(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&s.geometry.setAttribute(i,a[i]);_f.prototype.copy.call(l,s),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const PM="glTF",NM=1313821514,RM=5130562;class LM{constructor(e){this.name=uM.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:sM(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==PM)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(e,12);let r=0;for(;r<n;){const t=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===NM){const n=new Uint8Array(e,12+r,t);this.content=sM(n)}else if(n===RM){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class jM{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=uM.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},o={},l={};for(const c in s){const e=WM[c]||c.toLowerCase();a[e]=s[c]}for(const c in e.attributes){const t=WM[c]||c.toLowerCase();if(void 0!==s[c]){const i=n.accessors[e.attributes[c]],r=UM[i.componentType];l[t]=r.name,o[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,n){i.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],i=o[t];void 0!==i&&(n.normalized=i)}t(e)},a,l,oM,n)})})}}class IM{constructor(){this.name=uM.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class kM{constructor(){this.name=uM.KHR_MESH_QUANTIZATION}}class BM extends C_{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let s=0;s!==i;s++)t[s]=n[r+s];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=i-t,u=(n-t)/c,d=u*u,h=d*u,p=e*l,m=p-l,f=-2*h+3*d,g=h-d,v=1-f,x=g-d+u;for(let y=0;y!==a;y++){const e=s[m+y+a],t=s[m+y+o]*c,n=s[p+y+a],i=s[p+y]*c;r[y]=v*e+x*t+f*n+g*i}return r}}const DM=new fm;class OM extends BM{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return DM.fromArray(r).normalize().toArray(r),r}}const FM={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},UM={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zM={9728:ad,9729:dd,9984:od,9985:hd,9986:cd,9987:md},HM={33071:rd,33648:sd,10497:id},GM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},WM=Fe(Fe({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},rM>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),VM={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},JM={CUBICSPLINE:void 0,LINEAR:Ah,STEP:wh},YM="OPAQUE",XM="MASK",ZM="BLEND";function qM(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new u_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:tu})),e.DefaultMaterial}function KM(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function QM(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function $M(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function eP(e){let t;const n=e.extensions&&e.extensions[uM.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+tP(n.attributes):e.indices+":"+tP(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+tP(e.targets[i]);return t}function tP(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function nP(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const iP=new Jm;class rP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new cM,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||i&&r<98?this.textureLoader=new Q_(this.options.manager):this.textureLoader=new Tb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new J_(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const s={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return KM(r,s,i),QM(s,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(s)})).then(function(){for(const e of s.scenes)e.updateMatrixWorld();e(s)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,s]of e.children.entries())r(s,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[uM.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(e,r){n.load(_b.resolveURL(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=GM[i.type],t=UM[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new Kf(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(e){const r=e[0],s=GM[i.type],a=UM[i.componentType],o=a.BYTES_PER_ELEMENT,l=o*s,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let h,p;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(h=new a(r,e*u,i.count*u/o),l=new Jg(h,u/o),t.cache.add(n,l)),p=new Xg(l,s,c%u/o,d)}else h=null===r?new a(i.count*s):new a(r,c,i.count*s),p=new Kf(h,s,d);if(void 0!==i.sparse){const t=GM.SCALAR,n=UM[i.sparse.indices.componentType],o=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(e[1],o,i.sparse.count*t),u=new a(e[2],l,i.sparse.count*s);null!==r&&(p=new Kf(p.array.slice(),p.itemSize,p.normalized));for(let e=0,i=c.length;e<i;e++){const t=c[e];if(p.setX(t,u[e*s]),s>=2&&p.setY(t,u[e*s+1]),s>=3&&p.setZ(t,u[e*s+2]),s>=4&&p.setW(t,u[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let s=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(s=e)}return this.loadTextureImage(e,i,s)}loadTextureImage(e,t,n){const i=this,r=this.json,s=r.textures[e],a=r.images[t],o=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=s.name||a.name||"",""===t.name&&"string"===typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(r.samplers||{})[s.sampler]||{};return t.magFilter=zM[n.magFilter]||dd,t.minFilter=zM[n.minFilter]||md,t.wrapS=HM[n.wrapS]||id,t.wrapT=HM[n.wrapT]||id,i.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const s=i.images[e],a=self.URL||self.webkitURL;let o=s.uri||"",l=!1;if(void 0!==s.bufferView)o=n.getDependency("bufferView",s.bufferView).then(function(e){l=!0;const t=new Blob([e],{type:s.mimeType});return o=a.createObjectURL(t),o});else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then(function(e){return new Promise(function(n,i){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new om(e);t.needsUpdate=!0,n(t)}),t.load(_b.resolveURL(e,r.path),s,void 0,i)})}).then(function(e){var t;return!0===l&&a.revokeObjectURL(o),QM(e,s),e.userData.mimeType=s.mimeType||((t=s.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),r.extensions[uM.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[uM.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(s);s=r.extensions[uM.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),r.associations.set(s,t)}}return void 0!==i&&("number"===typeof i&&(i=3001===i?aM:oM),"colorSpace"in s?s.colorSpace=i:s.encoding=i===aM?3001:3e3),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Ax,Hf.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new cx,Hf.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||s){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),s&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return u_}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let s;const a={},o=[];if((r.extensions||{})[uM.KHR_MATERIALS_UNLIT]){const e=i[uM.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),o.push(e.extendParams(a,r,t))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new Ff(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],oM),a.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(a,"map",n.baseColorTexture,aM)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),o.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=iu);const l=r.alphaMode||YM;if(l===ZM?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===XM&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==Gf&&(o.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Fp(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&s!==Gf&&(o.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==Gf){const e=r.emissiveFactor;a.emissive=(new Ff).setRGB(e[0],e[1],e[2],oM)}return void 0!==r.emissiveTexture&&s!==Gf&&o.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,aM)),Promise.all(o).then(function(){const n=new s(a);return r.name&&(n.name=r.name),QM(n,r),t.associations.set(n,{materials:e}),r.extensions&&KM(i,n,r),n})}createUniqueName(e){const t=iw.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[uM.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return sP(n,e,t)})}const s=[];for(let a=0,o=e.length;a<o;a++){const n=e[a],o=eP(n),l=i[o];if(l)s.push(l.promise);else{let e;e=n.extensions&&n.extensions[uM.KHR_DRACO_MESH_COMPRESSION]?r(n):sP(new mg,n,t),i[o]={primitive:n,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],s=r.primitives,a=[];for(let o=0,l=s.length;o<l;o++){const e=void 0===s[o].material?qM(this.cache):this.getDependency("material",s[o].material);a.push(e)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(n){const a=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let u=0,d=o.length;u<d;u++){const n=o[u],c=s[u];let d;const h=a[u];if(c.mode===FM.TRIANGLES||c.mode===FM.TRIANGLE_STRIP||c.mode===FM.TRIANGLE_FAN||void 0===c.mode)d=!0===r.isSkinnedMesh?new Av(n,h):new Cg(n,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),c.mode===FM.TRIANGLE_STRIP?d.geometry=iM(d.geometry,Rh):c.mode===FM.TRIANGLE_FAN&&(d.geometry=iM(d.geometry,Lh));else if(c.mode===FM.LINES)d=new bx(n,h);else if(c.mode===FM.LINE_STRIP)d=new vx(n,h);else if(c.mode===FM.LINE_LOOP)d=new wx(n,h);else{if(c.mode!==FM.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);d=new Mx(n,h)}Object.keys(d.geometry.morphAttributes).length>0&&$M(d,r),d.name=t.createUniqueName(r.name||"mesh_"+e),QM(d,r),c.extensions&&KM(i,d,c),t.assignFinalMaterial(d),l.push(d)}for(let i=0,r=l.length;i<r;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return r.extensions&&KM(i,l[0],r),l[0];const c=new Nx;r.extensions&&KM(i,c,r),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Og(Op.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new hb(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),QM(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),i=e,r=[],s=[];for(let a=0,o=i.length;a<o;a++){const e=i[a];if(e){r.push(e);const t=new Jm;null!==n&&t.fromArray(n.array,16*a),s.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new Mv(r,s)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,s=[],a=[],o=[],l=[],c=[];for(let u=0,d=i.channels.length;u<d;u++){const e=i.channels[u],t=i.samplers[e.sampler],n=e.target,r=n.node,d=void 0!==i.parameters?i.parameters[t.input]:t.input,h=void 0!==i.parameters?i.parameters[t.output]:t.output;void 0!==n.node&&(s.push(this.getDependency("node",r)),a.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",h)),l.push(t),c.push(n))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=[];for(let r=0,c=t.length;r<c;r++){const e=t[r],c=i[r],u=s[r],d=a[r],h=o[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,c,u,d,h);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new O_(r,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],s=n.children||[];for(let o=0,l=s.length;o<l;o++)r.push(t.getDependency("node",s[o]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),a]).then(function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,iP)});for(let r=0,s=n.length;r<s;r++)t.add(n[r]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],s=r.name?i.createUniqueName(r.name):"",a=[],o=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return o&&a.push(o),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then(function(e){return i._getNodeRef(i.cameraCache,r.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if(a=!0===r.isBone?new Sv:t.length>1?new Nx:1===t.length?t[0]:new _f,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=s),QM(a,r),r.extensions&&KM(n,a,r),void 0!==r.matrix){const e=new Jm;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Nx;n.name&&(r.name=i.createUniqueName(n.name)),QM(r,n),n.extensions&&KM(t,r,n);const s=n.nodes||[],a=[];for(let o=0,l=s.length;o<l;o++)a.push(i.getDependency("node",s[o]));return Promise.all(a).then(function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Hf||n instanceof om)&&t.set(n,r);return e.traverse(e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)}),t})(r),r})}_createAnimationTracks(e,t,n,i,r){const s=[],a=e.name?e.name:e.uuid,o=[];let l;switch(VM[r.path]===VM.weights?e.traverse(function(e){e.morphTargetInfluences&&o.push(e.name?e.name:e.uuid)}):o.push(a),VM[r.path]){case VM.weights:l=j_;break;case VM.rotation:l=k_;break;case VM.position:case VM.scale:l=D_;break;default:if(1===n.itemSize)l=j_;else l=D_}const c=void 0!==i.interpolation?JM[i.interpolation]:Ah,u=this._getArrayFromAccessor(n);for(let d=0,h=o.length;d<h;d++){const e=new l(o[d]+"."+VM[r.path],t.array,u,c);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(e),s.push(e)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=nP(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof k_?OM:BM)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function sP(e,t,n){const i=t.attributes,r=[];function s(t,i){return n.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}for(const a in i){const t=WM[a]||a.toLowerCase();t in e.attributes||r.push(s(i[a],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(i)}return QM(e,t),function(e,t,n){const i=t.attributes,r=new ym;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new gm(t[0],t[1],t[2]),new gm(s[0],s[1],s[2])),e.normalized){const t=nP(UM[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new gm,t=new gm;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],s=i.min,a=i.max;if(void 0!==s&&void 0!==a){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),i.normalized){const e=nP(UM[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new Dm;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,s=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(e);const a=[],o=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(i){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(r){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;o.push(t)}if(s){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(t){const n=t[0],a=t[1],o=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=a),s&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}let aP=null,oP="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function lP(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return i=>{n&&n(i),e&&(aP||(aP=new $T),aP.setDecoderPath("string"===typeof e?e:oP),i.setDRACOLoader(aP)),t&&i.setMeshoptDecoder(nM())}}const cP=(e,t,n,i)=>tT(lM,e,lP(t,n,i));cP.preload=(e,t,n,i)=>tT.preload(lM,e,lP(t,n,i)),cP.clear=e=>tT.clear(lM,e),cP.setDecoderPath=e=>{oP=e};const uP=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],dP=new gm,hP=new gm,pP=new gm,mP=new Fp;function fP(e,t,n){const i=dP.setFromMatrixPosition(e.matrixWorld);i.project(t);const r=n.width/2,s=n.height/2;return[i.x*r+r,-i.y*s+s]}const gP=e=>Math.abs(e)<1e-10?0:e;function vP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="matrix3d(";for(let r=0;16!==r;r++)i+=gP(t[r]*e.elements[r])+(15!==r?",":")");return n+i}const xP=(yP=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>vP(e,yP));var yP;const _P=(e,t)=>vP(e,(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1])(t),"translate(-50%,-50%)");const bP=r.forwardRef((e,t)=>{let{children:n,eps:i=.001,style:s,className:o,prepend:l,center:c,fullscreen:u,portal:d,distanceFactor:h,sprite:p=!1,transform:m=!1,occlude:f,onOcclude:g,castShadow:v,receiveShadow:x,material:y,geometry:_,zIndexRange:b=[16777271,0],calculatePosition:w=fP,as:A="div",wrapperClass:S,pointerEvents:E="auto"}=e,C=Gc(e,uP);const{gl:T,camera:M,scene:P,size:N,raycaster:R,events:L,viewport:j}=KC(),[I]=r.useState(()=>document.createElement(A)),k=r.useRef(),B=r.useRef(null),D=r.useRef(0),O=r.useRef([0,0]),F=r.useRef(null),U=r.useRef(null),z=(null==d?void 0:d.current)||L.connected||T.domElement.parentNode,H=r.useRef(null),G=r.useRef(!1),W=r.useMemo(()=>f&&"blending"!==f||Array.isArray(f)&&f.length&&function(e){return e&&"object"===typeof e&&"current"in e}(f[0]),[f]);r.useLayoutEffect(()=>{const e=T.domElement;f&&"blending"===f?(e.style.zIndex="".concat(Math.floor(b[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[f]),r.useLayoutEffect(()=>{if(B.current){const e=k.current=a.createRoot(I);if(P.updateMatrixWorld(),m)I.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=w(B.current,M,N);I.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return z&&(l?z.prepend(I):z.appendChild(I)),()=>{z&&z.removeChild(I),e.unmount()}}},[z,m]),r.useLayoutEffect(()=>{S&&(I.className=S)},[S]);const V=r.useMemo(()=>m?{position:"absolute",top:0,left:0,width:N.width,height:N.height,transformStyle:"preserve-3d",pointerEvents:"none"}:Fe(Fe({position:"absolute",transform:c?"translate3d(-50%,-50%,0)":"none"},u&&{top:-N.height/2,left:-N.width/2,width:N.width,height:N.height}),s),[s,c,u,N,m]),J=r.useMemo(()=>({position:"absolute",pointerEvents:E}),[E]);r.useLayoutEffect(()=>{var e,i;(G.current=!1,m)?null==(e=k.current)||e.render(r.createElement("div",{ref:F,style:V},r.createElement("div",{ref:U,style:J},r.createElement("div",{ref:t,className:o,style:s,children:n})))):null==(i=k.current)||i.render(r.createElement("div",{ref:t,style:V,className:o,children:n}))});const Y=r.useRef(!0);QC(e=>{if(B.current){M.updateMatrixWorld(),B.current.updateWorldMatrix(!0,!1);const e=m?O.current:w(B.current,M,N);if(m||Math.abs(D.current-M.zoom)>i||Math.abs(O.current[0]-e[0])>i||Math.abs(O.current[1]-e[1])>i){const t=function(e,t){const n=dP.setFromMatrixPosition(e.matrixWorld),i=hP.setFromMatrixPosition(t.matrixWorld),r=n.sub(i),s=t.getWorldDirection(pP);return r.angleTo(s)>Math.PI/2}(B.current,M);let n=!1;W&&(Array.isArray(f)?n=f.map(e=>e.current):"blending"!==f&&(n=[P]));const i=Y.current;if(n){const e=function(e,t,n,i){const r=dP.setFromMatrixPosition(e.matrixWorld),s=r.clone();s.project(t),mP.set(s.x,s.y),n.setFromCamera(mP,t);const a=n.intersectObjects(i,!0);if(a.length){const e=a[0].distance;return r.distanceTo(n.ray.origin)<e}return!0}(B.current,M,R,n);Y.current=e&&!t}else Y.current=!t;i!==Y.current&&(g?g(!Y.current):I.style.display=Y.current?"block":"none");const r=Math.floor(b[0]/2),s=f?W?[b[0],r]:[r-1,0]:b;if(I.style.zIndex="".concat(function(e,t,n){if(t instanceof Og||t instanceof hb){const i=dP.setFromMatrixPosition(e.matrixWorld),r=hP.setFromMatrixPosition(t.matrixWorld),s=i.distanceTo(r),a=(n[1]-n[0])/(t.far-t.near),o=n[1]-a*t.far;return Math.round(a*s+o)}}(B.current,M,s)),m){const[e,t]=[N.width/2,N.height/2],n=M.projectionMatrix.elements[5]*t,{isOrthographicCamera:i,top:r,left:s,bottom:a,right:o}=M,l=xP(M.matrixWorldInverse),c=i?"scale(".concat(n,")translate(").concat(gP(-(o+s)/2),"px,").concat(gP((r+a)/2),"px)"):"translateZ(".concat(n,"px)");let u=B.current.matrixWorld;p&&(u=M.matrixWorldInverse.clone().transpose().copyPosition(u).scale(B.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),I.style.width=N.width+"px",I.style.height=N.height+"px",I.style.perspective=i?"":"".concat(n,"px"),F.current&&U.current&&(F.current.style.transform="".concat(c).concat(l,"translate(").concat(e,"px,").concat(t,"px)"),U.current.style.transform=_P(u,1/((h||10)/400)))}else{const t=void 0===h?1:function(e,t){if(t instanceof hb)return t.zoom;if(t instanceof Og){const n=dP.setFromMatrixPosition(e.matrixWorld),i=hP.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,s=n.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}return 1}(B.current,M)*h;I.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(t,")")}O.current=e,D.current=M.zoom}}if(!W&&H.current&&!G.current)if(m){if(F.current){const e=F.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=M;if(t||_)C.scale&&(Array.isArray(C.scale)?C.scale instanceof gm?H.current.scale.copy(C.scale.clone().divideScalar(1)):H.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):H.current.scale.setScalar(1/C.scale));else{const t=(h||10)/400,n=e.clientWidth*t,i=e.clientHeight*t;H.current.scale.set(n,i,1)}G.current=!0}}}else{const t=I.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/j.factor,n=t.clientWidth*e,i=t.clientHeight*e;H.current.scale.set(n,i,1),G.current=!0}H.current.lookAt(e.camera.position)}});const X=r.useMemo(()=>({vertexShader:m?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "}),[m]);return r.createElement("group",FT({},C,{ref:B}),f&&!W&&r.createElement("mesh",{castShadow:v,receiveShadow:x,ref:H},_||r.createElement("planeGeometry",null),y||r.createElement("shaderMaterial",{side:iu,vertexShader:X.vertexShader,fragmentShader:X.fragmentShader})))}),wP=["samples","depth"];function AP(e,t,n){const i=KC(e=>e.size),s=KC(e=>e.viewport),a="number"===typeof e?e:i.width*s.dpr,o="number"===typeof t?t:i.height*s.dpr,l=("number"===typeof e?n:e)||{},{samples:c=0,depth:u}=l,d=Gc(l,wP),h=r.useMemo(()=>{const e=new um(a,o,Fe({minFilter:dd,magFilter:dd,type:Ad},d));return u&&(e.depthTexture=new Dx(a,o,wd)),e.samples=c,e},[]);return r.useLayoutEffect(()=>{h.setSize(a,o),c&&(h.samples=c)},[c,h,a,o]),r.useEffect(()=>()=>h.dispose(),[]),h}const SP=["envMap","resolution","frames","makeDefault","children"],EP=r.forwardRef((e,t)=>{let{envMap:n,resolution:i=256,frames:s=1/0,makeDefault:a,children:o}=e,l=Gc(e,SP);const c=KC(e=>{let{set:t}=e;return t}),u=KC(e=>{let{camera:t}=e;return t}),d=KC(e=>{let{size:t}=e;return t}),h=r.useRef(null);r.useImperativeHandle(t,()=>h.current,[]);const p=r.useRef(null),m=AP(i);r.useLayoutEffect(()=>{l.manual||(h.current.aspect=d.width/d.height)},[d,l]),r.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let f=0,g=null;const v=(e=>"function"===typeof e)(o);return QC(e=>{v&&(s===1/0||f<s)&&(p.current.visible=!1,e.gl.setRenderTarget(m),g=e.scene.background,n&&(e.scene.background=n),e.gl.render(e.scene,h.current),e.scene.background=g,e.gl.setRenderTarget(null),p.current.visible=!0,f++)}),r.useLayoutEffect(()=>{if(a){const e=u;return c(()=>({camera:h.current})),()=>c(()=>({camera:e}))}},[h,a,c]),r.createElement(r.Fragment,null,r.createElement("perspectiveCamera",FT({ref:h},l),!v&&o),r.createElement("group",{ref:p},v&&o(m.texture)))}),CP=e=>{if(!e)return{hasProduct:!1,error:"No product provided"};const t={hasProduct:!0,productId:e.id,productName:e.name,modelFields:{model3d:e.model3d,Model3D:e.Model3D,model3D:e.model3D,model_3d:e.model_3d},has3dModel:e.has3dModel,has3DModel:e.has3DModel,constructedUrl:Cr(e),backendUrl:"https://designxcellinv-production.up.railway.app"};return console.log("3D Model Debug Info:",t),t},TP=async e=>{const t=CP(e),n=Cr(e);if(!n)return Fe(Fe({},t),{},{testResult:{success:!1,error:"No 3D model URL found"}});const i=await(async e=>{if(!e)return{success:!1,error:"No model URL provided",url:e};try{console.log("Testing 3D model URL:",e);const t=await fetch(e,{method:"HEAD",mode:"cors"}),n={success:t.ok,status:t.status,url:e,contentType:t.headers.get("content-type"),contentLength:t.headers.get("content-length"),accessible:t.ok};return console.log("3D Model URL test result:",n),n}catch(RT){const n={success:!1,error:RT.message,url:e,accessible:!1};return console.error("3D Model URL test failed:",n),n}})(n);return Fe(Fe({},t),{},{testResult:i})},MP=["isMobile"],PP=r.forwardRef((e,t)=>{let{isMobile:n}=e,i=Gc(e,MP);const s=(0,r.useRef)();return(0,r.useEffect)(()=>{if(s.current){var e;const t=s.current,n=t.handleTouchMoveDolly,i=t.handleTouchMoveDollyPan;null===(e=t.domElement)||void 0===e||e.onTouchMove;if(t.handleTouchMoveDolly=function(e){try{if(e&&e.touches&&e.touches.length>0&&e.touches[0])return n.call(this,e)}catch(RT){console.warn("Touch move dolly error:",RT)}},t.handleTouchMoveDollyPan=function(e){try{if(e&&e.touches&&e.touches.length>0&&e.touches[0])return i.call(this,e)}catch(RT){console.warn("Touch move dolly pan error:",RT)}},t.domElement){const e=e=>{try{if(e.touches&&e.touches.length>0)for(let t=0;t<e.touches.length;t++)if(!e.touches[t]||"undefined"===typeof e.touches[t].clientX)return}catch(RT){console.warn("Touch move validation error:",RT),e.preventDefault()}};return t.domElement.addEventListener("touchmove",e,{passive:!1}),()=>{t&&(t.handleTouchMoveDolly=n,t.handleTouchMoveDollyPan=i,t.domElement&&t.domElement.removeEventListener("touchmove",e))}}}},[n]),(0,r.useEffect)(()=>{t&&("function"===typeof t?t(s.current):t.current=s.current)},[t]),(0,gi.jsx)(KT,Fe({ref:s,enablePan:!n,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI,minPolarAngle:0,maxDistance:n?12:15,minDistance:n?1.5:1,enableDamping:!0,dampingFactor:.05,touches:{ONE:n?0:1,TWO:2}},i))}),NP=()=>(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("ambientLight",{intensity:1.5,color:"#ffffff"}),(0,gi.jsx)("directionalLight",{position:[5,5,5],intensity:2,color:"#ffffff",castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),(0,gi.jsx)("directionalLight",{position:[-5,5,-5],intensity:1.5,color:"#ffffff"}),(0,gi.jsx)("directionalLight",{position:[0,-5,0],intensity:1,color:"#ffffff"}),(0,gi.jsx)("pointLight",{position:[0,8,0],intensity:1,color:"#ffffff"}),(0,gi.jsx)("pointLight",{position:[3,3,3],intensity:.8,color:"#ffffff"}),(0,gi.jsx)("pointLight",{position:[-3,3,-3],intensity:.8,color:"#ffffff"})]}),RP=()=>{const e=(0,r.useRef)();return QC(t=>{e.current&&(e.current.rotation.x=.5*t.clock.elapsedTime,e.current.rotation.y=.3*t.clock.elapsedTime)}),(0,gi.jsxs)("mesh",{ref:e,children:[(0,gi.jsx)("boxGeometry",{args:[1,1,1]}),(0,gi.jsx)("meshStandardMaterial",{color:"#FCBD45",wireframe:!0})]})},LP=e=>{let{modelPath:t,onLoadingChange:n,onErrorChange:i}=e;const s=cP(t);return(0,r.useEffect)(()=>{s&&s.scene&&(s.scene.traverse(e=>{e.isMesh&&e.material&&e.material.map&&(e.material.color.setHex(16777215),e.material.roughness=.5,e.material.metalness=0,e.material.emissive.setHex(0),e.material.transparent=!1,e.material.opacity=1,e.material.side=2,e.material.map.needsUpdate=!0,e.material.map.flipY=!1,e.material.map.generateMipmaps=!0,e.material.map.minFilter=1006,e.material.map.magFilter=1003,e.material.map.wrapS=1e3,e.material.map.wrapT=1e3,e.material.needsUpdate=!0)}),n&&n(!1),i&&i(null))},[s,t,n,i]),(0,r.useEffect)(()=>{n&&n(!s)},[s,n]),s?(0,gi.jsx)("primitive",{object:s.scene}):null},jP=e=>{let{children:t,isRotating:n}=e;const i=(0,r.useRef)();return QC((e,t)=>{n&&i.current&&(i.current.rotation.y+=.5*t)}),(0,gi.jsx)("group",{ref:i,children:t})},IP=e=>{let{modelPath:t,customizations:n,isRotating360:i}=e;const[s,a]=(0,r.useState)(!1),o=(0,r.useRef)();(0,r.useEffect)(()=>{const e=()=>{a(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);if((0,r.useEffect)(()=>{},[]),(0,r.useEffect)(()=>{if(o.current&&null!==n&&void 0!==n&&n.dimensions){const{width:e,depth:t,height1:i}=n.dimensions,r=e/60,s=i/87,a=t/51;o.current.scale.set(r,s,a)}},[null===n||void 0===n?void 0:n.dimensions]),!t){const{width:e,depth:i,height1:r}=(null===n||void 0===n?void 0:n.dimensions)||{width:60,depth:51,height1:87},s=e/60,a=r/87,o=i/51;return(0,gi.jsxs)("group",{children:[(0,gi.jsxs)("mesh",{position:[0,0,0],scale:[s,a,o],children:[(0,gi.jsx)("boxGeometry",{args:[2,2.5,1]}),(0,gi.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,gi.jsxs)("mesh",{position:[0,1.2*a,.51*o],scale:[s,a,o],children:[(0,gi.jsx)("boxGeometry",{args:[1.8,.1,.02]}),(0,gi.jsx)("meshStandardMaterial",{color:"#D2691E"})]}),(0,gi.jsxs)("mesh",{position:[0,-1.2*a,.51*o],scale:[s,a,o],children:[(0,gi.jsx)("boxGeometry",{args:[1.8,.1,.02]}),(0,gi.jsx)("meshStandardMaterial",{color:"#D2691E"})]}),(0,gi.jsx)(bP,{center:!0,position:[0,3*a,0],children:(0,gi.jsxs)("div",{className:"model-placeholder",children:[(0,gi.jsxs)("svg",{className:"placeholder-icon",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,gi.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,gi.jsx)("polyline",{points:"21,15 16,10 5,21"})]}),(0,gi.jsx)("h3",{children:u?"Loading Error":"Preview Mode"}),(0,gi.jsx)("p",{className:"placeholder-subtitle",children:u?"Failed to load 3D model: ".concat(u):"3D model not available - showing placeholder"}),t&&(0,gi.jsxs)("p",{className:"placeholder-note",children:["Model path: ",t]})]})})]})}return l&&t?(0,gi.jsxs)("group",{children:[(0,gi.jsx)(RP,{}),(0,gi.jsx)(bP,{center:!0,position:[0,2,0],children:(0,gi.jsxs)("div",{className:"model-placeholder",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:40,width:40}),(0,gi.jsx)("h3",{children:"Loading 3D Preview..."}),(0,gi.jsx)("p",{className:"placeholder-subtitle",children:"Please wait while we load the 3D model"}),(0,gi.jsxs)("p",{className:"placeholder-note",children:["Loading: ",t]})]})})]}):u?(0,gi.jsx)(bP,{center:!0,children:(0,gi.jsxs)("div",{className:"model-placeholder",children:[(0,gi.jsxs)("svg",{className:"placeholder-icon",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,gi.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,gi.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,gi.jsx)("h3",{children:"Loading Error"}),(0,gi.jsxs)("p",{className:"placeholder-subtitle",children:["Failed to load 3D model: ",u]}),(0,gi.jsx)("p",{className:"placeholder-note",children:"Please try refreshing the page"})]})}):(0,gi.jsx)(gi.Fragment,{children:t&&(0,gi.jsx)(jP,{isRotating:i,children:(0,gi.jsx)("group",{ref:o,position:[0,0,0],scale:s?[1.1,1.1,1.1]:[1.2,1.2,1.2],children:(0,gi.jsx)(LP,{modelPath:t,onLoadingChange:c,onErrorChange:d})})})})},kP=()=>{const{id:e}=ie(),t=ne(),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(1),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!0),[v,x]=(0,r.useState)(!1),{addToCart:y}=Ni();(0,r.useEffect)(()=>{console.log("3D Products - Cart context loaded:",{addToCart:typeof y})},[y]),(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<=768;m(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{formatPrice:_}=Oi();(0,r.useEffect)(()=>{const e=e=>{if(e.error&&e.error.message&&e.error.message.includes("reading 'x'"))return console.warn("Touch event error caught and handled:",e.error),e.preventDefault(),!1};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]),(0,r.useEffect)(()=>{const e=e=>{var t,n;if(e.sourceFile&&(e.sourceFile.includes("its-fine")||e.sourceFile.includes("react-three-fiber")||e.sourceFile.includes("three"))||"blob"===e.blockedURI||(null===(t=e.blockedURI)||void 0===t?void 0:t.startsWith("blob:"))||"data"===e.blockedURI||(null===(n=e.blockedURI)||void 0===n?void 0:n.startsWith("data:"))){var i,r;const t="blob"===e.blockedURI||null!==(i=e.blockedURI)&&void 0!==i&&i.startsWith("blob:")?"blob URL (used by Three.js for textures/assets)":"data"===e.blockedURI||null!==(r=e.blockedURI)&&void 0!==r&&r.startsWith("data:")?"data URL (used for embedded assets)":"3D library";return void console.info("\u2139\ufe0f Non-critical CSP violation from ".concat(t,":"),{sourceFile:e.sourceFile,violatedDirective:e.violatedDirective,blockedURI:e.blockedURI})}console.warn("\ud83d\udea8 Critical CSP Violation detected:",{blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,originalPolicy:e.originalPolicy,sourceFile:e.sourceFile,lineNumber:e.lineNumber,columnNumber:e.columnNumber,effectiveDirective:e.effectiveDirective,statusCode:e.statusCode}),e.blockedURI&&(e.blockedURI.includes(".glb")||e.blockedURI.includes(".gltf"))&&l("3D model loading blocked by security policy. Please contact support.")};return document.addEventListener("securitypolicyviolation",e),()=>{document.removeEventListener("securitypolicyviolation",e)}},[]);const[b,w]=(0,r.useState)({dimensions:{width:60,depth:51,height1:87},colors:{body:"Light Wood",front:"Light Wood",plinth:"Light Wood",back:"White",handle:"Silver",handlePosition:"Right",doorOpening:"Left",lastCabinet:"No",fittings:"Standard"}});(0,r.useEffect)(()=>{e&&(async()=>{try{var t,n;const r=await er(e);console.log("3D Products - Product data loaded:",r.product),console.log("3D Products - Model data:",{model3d:null===(t=r.product)||void 0===t?void 0:t.model3d,has3dModel:null===(n=r.product)||void 0===n?void 0:n.has3dModel,modelPath:Cr(r.product)}),i(r.product)}catch(o){console.error("Error loading product:",o),l("Failed to load product details")}finally{a(!1)}})()},[e]);const[A,S]=(0,r.useState)(0),[E,C]=(0,r.useState)(!1),[T,M]=(0,r.useState)("front"),[P,N]=(0,r.useState)(!1),R=(0,r.useRef)(),L=(0,r.useRef)(),j=((0,r.useRef)(),Cr(n));(0,r.useEffect)(()=>{if(n){TP(n).then(e=>{console.log("3D Model Comprehensive Test Result:",e),e&&e.error&&console.warn("3D Model not accessible:",e.error)});const e=CP(n);console.log("3D Model Basic Debug:",e)}},[n]),(0,r.useEffect)(()=>{let e=0;"Premium"===b.colors.fittings&&(e+=25),"Luxury"===b.colors.fittings&&(e+=50),S(e)},[b]);const I=(e,t)=>{C(!0),((e,t,n)=>{w(i=>Fe(Fe({},i),{},{[e]:Fe(Fe({},i[e]),{},{[t]:n})}))})("dimensions",e,parseInt(t)),setTimeout(()=>{C(!1)},100)},k={left:{position:[-3,1.5,0],target:[0,0,0]},right:{position:[3,1.5,0],target:[0,0,0]},front:{position:p?[0,1.5,4]:[0,1.5,3],target:[0,0,0]},back:{position:p?[0,1.5,-4]:[0,1.5,-3],target:[0,0,0]},top:{position:p?[0,4,0]:[0,5,0],target:[0,0,0]},topLeft:{position:p?[-2.5,3,2.5]:[-2,4,2],target:[0,0,0]},topRight:{position:p?[2.5,3,2.5]:[2,4,2],target:[0,0,0]}},B=e=>{console.log("Changing camera angle to:",e),M(e),x(!0),setTimeout(()=>{if(R.current){const t=k[e];if(t){console.log("Applying camera config:",t);const e=R.current;e.object.position.set(...t.position),e.target.set(...t.target),e.update(),L.current&&(L.current.position.set(...t.position),L.current.lookAt(...t.target)),console.log("Camera position set to:",t.position),setTimeout(()=>{x(!1)},300)}else console.warn("No config found for camera angle:",e),x(!1)}else console.warn("Controls ref not available"),x(!1)},100)},D=(null===n||void 0===n?void 0:n.price)||0,O=(null===n||void 0===n?void 0:n.hasDiscount)&&(null===n||void 0===n?void 0:n.discountInfo),F=O?n.discountInfo.discountedPrice:D,U=O?D:null;O&&"percentage"===n.discountInfo.discountType&&n.discountInfo.discountValue;return s?(0,gi.jsx)("div",{className:"three-d-customization",children:(0,gi.jsx)("div",{className:"loading-container",children:(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",gap:"1rem"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:60,width:60}),(0,gi.jsx)("p",{children:"Loading 3D Products..."})]})})}):o||!n?(0,gi.jsx)("div",{className:"three-d-customization",children:(0,gi.jsxs)("div",{className:"error-container",children:[(0,gi.jsx)("h2",{children:"Product Not Found"}),(0,gi.jsx)("p",{children:o||"The product you are looking for does not exist or is no longer available."}),(0,gi.jsx)(Re,{to:"/products",className:"btn btn-primary",children:"Browse All Products"})]})}):(0,gi.jsxs)("div",{className:"three-d-customization",children:[(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"3D Products Furniture",href:"/3d-products-furniture"},{label:"Products",href:"/products"},{label:"3D Products"}],title:"3D Products",subtitle:"Design and customize your perfect furniture with our interactive 3D configurator"}),(0,gi.jsxs)("div",{className:"customization-layout",children:[(0,gi.jsxs)("div",{className:"viewer-container",children:[(0,gi.jsxs)("div",{className:"viewer-controls-top",children:[(0,gi.jsxs)("button",{className:"btn-360 ".concat(P?"active":""),onClick:()=>{N(!P)},title:P?"Stop 360\xb0 Rotation":"Start 360\xb0 Rotation",children:[(0,gi.jsxs)("svg",{className:"icon-360",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}),(0,gi.jsx)("path",{d:"M12 3v9l4-4"})]}),(0,gi.jsx)("span",{children:"360\xb0"})]}),E&&(0,gi.jsxs)("div",{className:"resizing-indicator",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:20,width:20}),(0,gi.jsx)("span",{children:"Resizing..."})]})]}),(0,gi.jsxs)("div",{className:"camera-angle-panel ".concat(f?"":"hidden"),children:[(0,gi.jsxs)("div",{className:"camera-angle-header",children:[(0,gi.jsx)("h3",{children:"Camera Angle"}),!p&&(0,gi.jsx)("button",{className:"camera-panel-toggle",onClick:()=>g(!f),title:f?"Hide Camera Panel":"Show Camera Panel",children:(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,gi.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),(0,gi.jsxs)("div",{className:"camera-angle-options",children:[(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("left"===T?"active":""," ").concat(v&&"left"===T?"transitioning":""),onClick:()=>B("left"),title:"Left View",disabled:v,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("path",{d:"M3 3h6l6 18 3-9h6"}),(0,gi.jsx)("path",{d:"M14 3h7v7"})]}),(0,gi.jsx)("span",{children:"LEFT"})]}),(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("right"===T?"active":""," ").concat(v&&"right"===T?"transitioning":""),onClick:()=>B("right"),title:"Right View",disabled:v,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("path",{d:"M3 3h6l6 18 3-9h6"}),(0,gi.jsx)("path",{d:"M14 3h7v7"})]}),(0,gi.jsx)("span",{children:"RIGHT"})]}),(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("front"===T?"active":""," ").concat(v&&"front"===T?"transitioning":""),onClick:()=>B("front"),title:"Front View",disabled:v,children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),(0,gi.jsx)("span",{children:"FRONT"})]}),(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("back"===T?"active":""," ").concat(v&&"back"===T?"transitioning":""),onClick:()=>B("back"),title:"Back View",disabled:v,children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,gi.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),(0,gi.jsx)("span",{children:"BACK"})]}),(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("top"===T?"active":""," ").concat(v&&"top"===T?"transitioning":""),onClick:()=>B("top"),title:"Top View",disabled:v,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("path",{d:"M3 3h6l6 18 3-9h6"}),(0,gi.jsx)("path",{d:"M14 3h7v7"})]}),(0,gi.jsx)("span",{children:"TOP"})]}),(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("topLeft"===T?"active":""," ").concat(v&&"topLeft"===T?"transitioning":""),onClick:()=>B("topLeft"),title:"Top Left View",disabled:v,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("path",{d:"M3 3h6l6 18 3-9h6"}),(0,gi.jsx)("path",{d:"M14 3h7v7"})]}),(0,gi.jsx)("span",{children:"TOP LEFT"})]}),(0,gi.jsxs)("button",{className:"camera-angle-btn ".concat("topRight"===T?"active":""," ").concat(v&&"topRight"===T?"transitioning":""),onClick:()=>B("topRight"),title:"Top Right View",disabled:v,children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("path",{d:"M3 3h6l6 18 3-9h6"}),(0,gi.jsx)("path",{d:"M14 3h7v7"})]}),(0,gi.jsx)("span",{children:"TOP RIGHT"})]})]})]}),!p&&!f&&(0,gi.jsxs)("button",{className:"show-camera-panel-btn",onClick:()=>g(!0),title:"Show Camera Panel",children:[(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,gi.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,gi.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,gi.jsx)("path",{d:"M2 12l10 5 10-5"})]}),(0,gi.jsx)("span",{children:"Camera"})]}),(0,gi.jsx)("div",{className:"canvas-container",children:(0,gi.jsxs)(OT,{camera:{position:p?[0,1.5,4]:[0,1.5,3],fov:p?65:60},shadows:!0,gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},onCreated:e=>{let{gl:t}=e;t.domElement.addEventListener("webglcontextlost",e=>{console.warn("WebGL context lost, attempting to restore..."),e.preventDefault()}),t.domElement.addEventListener("webglcontextrestored",()=>{console.log("WebGL context restored")})},children:[(0,gi.jsx)(NP,{}),(0,gi.jsx)(r.Suspense,{fallback:(0,gi.jsx)(bP,{center:!0,children:(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"1rem"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:40,width:40}),(0,gi.jsx)("p",{children:"Loading 3D Model..."})]})}),children:(0,gi.jsx)(IP,{modelPath:j,customizations:b,isRotating360:P})}),(0,gi.jsx)(PP,{isMobile:p,ref:R}),(0,gi.jsx)(EP,{ref:L,makeDefault:!0,position:p?[0,1.5,4]:[0,1.5,3]})]})})]}),(0,gi.jsxs)("div",{className:"customization-panel",children:[(0,gi.jsxs)("div",{className:"customization-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsxs)("svg",{className:"section-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("path",{d:"M3 3h6l6 18 3-9h6"}),(0,gi.jsx)("path",{d:"M14 3h7v7"})]}),(0,gi.jsx)("span",{className:"section-title",children:"Adjust dimensions"})]}),(0,gi.jsxs)("div",{className:"dimension-controls",children:[(0,gi.jsxs)("div",{className:"dimension-control",children:[(0,gi.jsx)("label",{children:"WIDTH"}),(0,gi.jsxs)("div",{className:"slider-container",children:[(0,gi.jsx)("input",{type:"range",min:"50",max:"80",step:"1",value:b.dimensions.width,onChange:e=>I("width",e.target.value),className:"dimension-slider"}),(0,gi.jsxs)("span",{className:"dimension-value",children:[b.dimensions.width," cm (",Math.round(.393701*b.dimensions.width*100)/100,'")']})]})]}),(0,gi.jsxs)("div",{className:"dimension-control",children:[(0,gi.jsx)("label",{children:"DEPTH"}),(0,gi.jsxs)("div",{className:"slider-container",children:[(0,gi.jsx)("input",{type:"range",min:"40",max:"70",step:"1",value:b.dimensions.depth,onChange:e=>I("depth",e.target.value),className:"dimension-slider"}),(0,gi.jsxs)("span",{className:"dimension-value",children:[b.dimensions.depth," cm (",Math.round(.393701*b.dimensions.depth*100)/100,'")']})]})]}),(0,gi.jsxs)("div",{className:"dimension-control",children:[(0,gi.jsx)("label",{children:"HEIGHT "}),(0,gi.jsxs)("div",{className:"slider-container",children:[(0,gi.jsx)("input",{type:"range",min:"70",max:"100",step:"1",value:b.dimensions.height1,onChange:e=>I("height1",e.target.value),className:"dimension-slider"}),(0,gi.jsxs)("span",{className:"dimension-value",children:[b.dimensions.height1," cm (",Math.round(.393701*b.dimensions.height1*100)/100,'")']})]})]})]})]}),(0,gi.jsxs)("div",{className:"customization-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsxs)("svg",{className:"section-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,gi.jsx)("path",{d:"M12 16v-4"}),(0,gi.jsx)("path",{d:"M12 8h.01"})]}),(0,gi.jsx)("span",{className:"section-title",children:"Model Information"})]}),(0,gi.jsx)("div",{className:"info-section",children:(0,gi.jsx)("div",{className:"info-content",children:(0,gi.jsx)("p",{children:"This 3D model displays with its original uploaded colors and materials. Use the dimension controls above to adjust the size of the model."})})}),(0,gi.jsxs)("div",{className:"add-to-cart-section",children:[(0,gi.jsxs)("div",{className:"quantity-price-row",children:[(0,gi.jsxs)("div",{className:"quantity-input",children:[(0,gi.jsx)("label",{children:"Qty:"}),(0,gi.jsx)("input",{type:"number",value:c,min:"1",max:(null===n||void 0===n?void 0:n.stockQuantity)||999,className:"quantity-field",onChange:e=>u(Math.max(1,parseInt(e.target.value)||1))})]}),(0,gi.jsxs)("div",{className:"price-display",children:[U&&(0,gi.jsx)("span",{className:"original-price",children:_(U)}),(0,gi.jsx)("span",{className:"current-price",children:_(F)})]})]}),(0,gi.jsx)("button",{className:"add-to-cart-btn",onClick:e=>{console.log("Add to Cart button clicked",{product:null===n||void 0===n?void 0:n.name,quantity:c,customizations:b}),(()=>{if(n&&c>0){console.log("Adding to cart:",{product:n.name,quantity:c,customizations:b});const e=Fe(Fe({},n),{},{customizations:{width:b.width,height:b.height,depth:b.depth}});try{y(e,c,{width:b.width,height:b.height,depth:b.depth}),console.log("Successfully added to cart"),h(!0)}catch(o){console.error("Error adding to cart:",o),alert("Failed to add item to cart. Please try again.")}}else console.warn("Cannot add to cart: missing product or invalid quantity"),alert("Please select a valid quantity to add to cart.")})()},disabled:!n||c<=0||(null===n||void 0===n?void 0:n.stockQuantity)&&c>n.stockQuantity,children:"ADD TO CART"})]})]})]})]}),(0,gi.jsx)(Lc,{isOpen:d,onClose:()=>h(!1),product:n,quantity:c,onViewCart:()=>t("/cart"),onContinueShopping:()=>t("/products")})]})},BP=e=>{let{item:t,onUpdateQuantity:n,onRemove:i,checked:s=!0,onCheck:a=()=>{}}=e;const{id:o,product:l,quantity:c,price:u,variationId:d,variationName:h,useOriginalProduct:p,selectedVariation:m}=t,{name:f,price:g,images:v,hasDiscount:x,discountInfo:y}=l||{},{useOriginalProduct:_,selectedVariation:b}=l||{},{formatPrice:w}=Oi(),[A,S]=(0,r.useState)(!1),E=u||g,C=Sr((null===m||void 0===m?void 0:m.imageUrl)||(null===v||void 0===v?void 0:v[0]));return(0,gi.jsxs)("div",{className:"cart-item",children:[(0,gi.jsxs)("div",{className:"cart-item-product",children:[(0,gi.jsx)("div",{className:"cart-item-image",children:!A&&C&&"undefined"!==C&&"null"!==C?(0,gi.jsx)("img",{src:C,alt:f||"Product image",onError:()=>{S(!0)},loading:"lazy"}):(0,gi.jsx)("div",{className:"image-placeholder",children:"\ud83d\udce6"})}),(0,gi.jsxs)("div",{className:"cart-item-details",children:[(0,gi.jsx)("h3",{className:"cart-item-name",children:f}),(0,gi.jsx)("div",{className:"cart-item-variant",children:p||!m?(0,gi.jsx)("span",{className:"variant-pill",children:"Standard"}):(0,gi.jsxs)("span",{className:"variant-pill",children:["Color: ",m.color||m.name]})})]})]}),(0,gi.jsx)("div",{className:"cart-item-price",children:x&&y?(0,gi.jsxs)("div",{className:"discounted-price-display",children:[(0,gi.jsx)("span",{className:"discounted-price",children:w(y.discountedPrice)}),(0,gi.jsx)("span",{className:"original-price-crossed",children:w(g)}),(0,gi.jsx)("span",{className:"discount-badge",children:"percentage"===y.discountType?"-".concat(y.discountValue,"%"):"-".concat(w(y.discountAmount))})]}):(0,gi.jsx)("span",{className:"regular-price",children:w(E)})}),(0,gi.jsxs)("div",{className:"cart-item-quantity",children:[(0,gi.jsx)("button",{className:"remove-btn",onClick:()=>i(o),title:"Remove item",children:"\xd7"}),(0,gi.jsxs)("div",{className:"quantity-controls",children:[(0,gi.jsx)("button",{className:"quantity-btn",onClick:()=>n(o,c-1),disabled:c<=1,children:"\u2212"}),(0,gi.jsx)("span",{className:"quantity-display",children:c}),(0,gi.jsx)("button",{className:"quantity-btn",onClick:()=>n(o,c+1),children:"+"})]})]})]})},DP=()=>{const e=ne(),{items:t,updateQuantity:n,removeFromCart:i,clearCart:s,getTotal:a,getSubtotal:o,getItemCount:l}=Ni(),{formatPrice:c}=Oi(),[u,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),[g,v]=(0,r.useState)("default"),[x,y]=(0,r.useState)(()=>Object.fromEntries(t.map(e=>[e.id,!0])));(0,r.useEffect)(()=>{y(e=>{const n=Fe({},e);return t.forEach(e=>{e.id in n||(n[e.id]=!0)}),n})},[t]),(0,r.useEffect)(()=>{const e=()=>{const e=document.body.className;e.includes("theme-christmas")?v("christmas"):e.includes("theme-dark")?v("dark"):v("default")};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);const _=(e,t)=>{y(n=>Fe(Fe({},n),{},{[e]:t}))},b=(e,t)=>{t<=0?(f(e),p(!0)):n(e,t)},w=t.filter(e=>x[e.id]),A=w.reduce((e,t)=>e+t.price*t.quantity,0),S=w.reduce((e,t)=>e+t.quantity,0);return 0===t.length?(0,gi.jsx)("div",{className:"cart-page",children:(0,gi.jsx)("div",{className:"container",children:(0,gi.jsx)("div",{className:"cart-empty-page",children:(0,gi.jsxs)("div",{className:"empty-cart-content",children:[(0,gi.jsx)("div",{className:"empty-cart-icon",children:(0,gi.jsx)(Zl,{size:64,color:"#9ca3af"})}),(0,gi.jsx)("h1",{children:"Your Cart is Empty"}),(0,gi.jsx)("p",{children:"Looks like you haven't added any items to your cart yet."}),(0,gi.jsxs)("div",{className:"empty-cart-actions",children:[(0,gi.jsx)(Re,{to:"/products",className:"btn btn-primary btn-large",children:"Continue Shopping"}),(0,gi.jsx)(Re,{to:"/",className:"btn btn-secondary",children:"Back to Home"})]})]})})})}):(0,gi.jsxs)("div",{className:"cart-page",children:[(0,gi.jsxs)("div",{className:"container",children:["christmas"===g&&(0,gi.jsx)(Nr,{}),(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"Shopping Cart"}],title:"Shopping Cart",subtitle:"".concat(t.length," ").concat(1===t.length?"item":"items"," in your cart")}),(0,gi.jsxs)("div",{className:"cart-layout",children:[(0,gi.jsxs)("div",{className:"cart-main",children:[(0,gi.jsxs)("div",{className:"cart-items-header",children:[(0,gi.jsx)("h2",{children:"Items in Your Cart"}),(0,gi.jsx)("button",{className:"clear-cart-btn",onClick:()=>d(!0),children:"Clear All"})]}),(0,gi.jsxs)("div",{className:"cart-table-header",children:[(0,gi.jsx)("div",{className:"header-product",children:"Product"}),(0,gi.jsx)("div",{className:"header-price",children:"Price"}),(0,gi.jsx)("div",{className:"header-quantity",children:"Quantity"}),(0,gi.jsx)("div",{className:"header-subtotal",children:"Subtotal"})]}),(0,gi.jsx)("div",{className:"cart-items-list",children:t.map(e=>{var t;return(0,gi.jsx)("div",{className:"cart-item-wrapper",children:(0,gi.jsx)(BP,{item:e,checked:null===(t=x[e.id])||void 0===t||t,onCheck:_,onUpdateQuantity:b,onRemove:e=>{f(e),p(!0)}})},e.id)})}),(0,gi.jsx)("div",{className:"cart-actions-bottom",children:(0,gi.jsx)(Re,{to:"/products",className:"btn btn-secondary",children:"Continue Shopping"})})]}),(0,gi.jsx)("div",{className:"cart-sidebar-summary",children:(0,gi.jsxs)("div",{className:"cart-summary-card",children:[(0,gi.jsx)("div",{className:"summary-details",children:(0,gi.jsxs)("div",{className:"summary-row total",children:[(0,gi.jsxs)("span",{children:["Total (",S," ",1===S?"item":"items","):"]}),(0,gi.jsx)("span",{children:c(A)})]})}),(0,gi.jsxs)("div",{className:"checkout-actions",children:[(0,gi.jsx)("button",{className:"btn btn-primary btn-full btn-large",onClick:()=>{const n=t.filter(e=>x[e.id]);e("/checkout",{state:{items:n}})},disabled:0===t.filter(e=>x[e.id]).length,children:"Proceed to Checkout"}),(0,gi.jsx)("div",{className:"payment-methods",children:(0,gi.jsx)("p",{children:"We accept all major credit cards"})})]})]})})]})]}),(0,gi.jsx)(jc,{isOpen:u,onClose:()=>d(!1),onConfirm:()=>{s(),d(!1)},title:"Clear Shopping Cart",message:"Are you sure you want to remove all items from your cart? This action cannot be undone.",confirmText:"Clear Cart",cancelText:"Keep Items",type:"warning"}),(0,gi.jsx)(jc,{isOpen:h,onClose:()=>p(!1),onConfirm:()=>{m&&(i(m),f(null)),p(!1)},title:"Remove Item",message:"Are you sure you want to remove this item from your cart?",confirmText:"Remove",cancelText:"Cancel",type:"warning"}),"christmas"===g&&(0,gi.jsx)(Rr,{})]})},OP=()=>{const{wishlist:e,removeFromWishlist:t,clearWishlist:n}=Ji(),{formatPrice:i}=Oi(),{addToCart:s}=Ni(),a=ne(),[o,l]=(0,r.useState)(!1),c=e=>{a("/product/".concat(e))};return(0,gi.jsxs)("div",{className:"wishlist-page",children:[(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"My Wishlist"}],title:"My Wishlist",subtitle:"".concat(e.length," items")}),(0,gi.jsx)("div",{className:"wishlist-container",children:(0,gi.jsx)("div",{className:"wishlist-content",children:0===e.length?(0,gi.jsx)("div",{className:"wishlist-empty",children:(0,gi.jsxs)("div",{className:"empty-wishlist-content",children:[(0,gi.jsx)("div",{className:"empty-wishlist-icon",children:(0,gi.jsx)(Xl,{size:64,color:"#d1d5db"})}),(0,gi.jsx)("h2",{children:"Your wishlist is empty"}),(0,gi.jsx)("p",{children:"Start adding products you love to your wishlist!"}),(0,gi.jsx)("div",{className:"empty-wishlist-actions",children:(0,gi.jsxs)("button",{className:"browse-products-btn",onClick:()=>a("/products"),children:[(0,gi.jsx)(Ul,{size:16,color:"#ffffff"}),"Browse Products"]})})]})}):(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"wishlist-actions-bar",children:[(0,gi.jsxs)("button",{className:"add-all-to-cart-btn",onClick:()=>{e.forEach(e=>{s(e,1)}),a("/cart")},children:[(0,gi.jsx)(Ul,{size:16,color:"#ffffff"}),"Add All to Cart"]}),(0,gi.jsxs)("button",{className:"clear-wishlist-btn",onClick:()=>{l(!0)},children:[(0,gi.jsx)(zl,{size:16,color:"#6b7280"}),"Clear All"]})]}),(0,gi.jsx)("div",{className:"wishlist-grid",children:e.map(e=>{return(0,gi.jsxs)("div",{className:"wishlist-item",onClick:()=>c(e.id),children:[(0,gi.jsxs)("div",{className:"wishlist-item-image",children:[(0,gi.jsx)("img",{src:Er(e),alt:e.name,onError:e=>{e.target.src="/logo192.png"}}),(0,gi.jsxs)("div",{className:"wishlist-item-actions",children:[(0,gi.jsx)("button",{className:"view-btn",onClick:t=>{t.stopPropagation(),c(e.id)},title:"View Product",children:(0,gi.jsx)(Jl,{size:16,color:"#ffffff"})}),(0,gi.jsx)("button",{className:"remove-btn",onClick:n=>((e,n)=>{e.stopPropagation(),t(n)})(n,e.id),title:"Remove from wishlist",children:(0,gi.jsx)(zl,{size:16,color:"#ffffff"})})]})]}),(0,gi.jsxs)("div",{className:"wishlist-item-info",children:[(0,gi.jsx)("h3",{className:"wishlist-item-name",children:e.name}),(0,gi.jsx)("p",{className:"wishlist-item-category",children:e.categoryName}),(0,gi.jsxs)("div",{className:"wishlist-item-rating",children:[(0,gi.jsx)("div",{className:"rating-stars",children:[...Array(5)].map((t,n)=>(0,gi.jsx)(ql,{size:14,color:n<(e.averageRating||0)?"#F0B21B":"#d1d5db"},n))}),(0,gi.jsx)("span",{className:"rating-value",children:e.averageRating?e.averageRating.toFixed(1):"0.0"})]}),(0,gi.jsx)("div",{className:"wishlist-item-price",children:e.hasDiscount&&e.discountInfo?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("span",{className:"original-price",children:["\u20b1",e.price.toLocaleString()]}),(0,gi.jsxs)("span",{className:"discount-price",children:["\u20b1",e.discountInfo.discountedPrice.toLocaleString()]})]}):(0,gi.jsxs)("span",{className:"price",children:["\u20b1",e.price.toLocaleString()]})}),(0,gi.jsx)("div",{className:"wishlist-item-meta",children:(0,gi.jsxs)("span",{className:"added-date",children:["Added ",(n=e.addedAt,new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))]})}),(0,gi.jsxs)("button",{className:"add-to-cart-btn",onClick:t=>((e,t)=>{e.stopPropagation(),s(t,1),a("/cart")})(t,e),children:[(0,gi.jsx)(Ul,{size:16,color:"#ffffff"}),"Add to Cart"]})]})]},e.id);var n})})]})})}),(0,gi.jsx)(jc,{isOpen:o,onClose:()=>l(!1),onConfirm:()=>{n(),l(!1)},title:"Clear Wishlist",message:"Are you sure you want to remove all items from your wishlist? This action cannot be undone.",confirmText:"Clear Wishlist",cancelText:"Keep Items",type:"warning"})]})},FP=[{path:"/",element:(0,gi.jsx)(hc,{})},{path:"/about",element:(0,gi.jsx)(mc,{})},{path:"/projects",element:(0,gi.jsx)(fc,{})},{path:"/contact",element:(0,gi.jsx)(gc,{})},{path:"/login",element:(0,gi.jsx)(wc,{})},{path:"/forgot-password",element:(0,gi.jsx)(Ac,{})},{path:"/reset-password",element:(0,gi.jsx)(Sc,{})},{path:"/products",element:(0,gi.jsx)(Rc,{})},{path:"/product/:id",element:(0,gi.jsx)(Uc,{})},{path:"/products/:id",element:(0,gi.jsx)(Uc,{})},{path:"/3d-products-furniture",element:(0,gi.jsx)(Hc,{})},{path:"/3d-products/:id",element:(0,gi.jsx)(kP,{})},{path:"/cart",element:(0,gi.jsx)(DP,{})},{path:"/wishlist",element:(0,gi.jsx)(OP,{})}],UP=e=>{let{children:t}=e;const{isAuthenticated:n,loading:i}=xi();return i?(0,gi.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,gi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?t:(0,gi.jsx)(xe,{to:"/login",replace:!0})},zP={async login(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await fi.post("/api/auth/customer/login",{email:e,password:t,rememberMe:n});return i.success&&i.tokens&&fi.setTokens(i.tokens),i},async register(e){const t=await fi.post("/api/auth/customer/register",e);return t.success&&t.tokens&&fi.setTokens(t.tokens),t},getProfile:async()=>await fi.get("/api/customer/profile"),updateProfile:async e=>await fi.put("/api/customer/profile",e),async logout(){try{return await fi.post("/logout"),{success:!0}}catch(RT){return console.error("Backend logout failed:",RT),{success:!0}}},async validateSession(){try{return await fi.get("/api/auth/status")}catch(RT){return console.error("Session validation failed:",RT),{success:!1,message:RT.message}}}};const HP=new class{constructor(){this.refreshInterval=null,this.validationInterval=9e5,this.isRefreshing=!1}startSessionRefresh(e){this.refreshInterval&&this.stopSessionRefresh(),this.refreshInterval=setInterval(async()=>{if(!this.isRefreshing)try{this.isRefreshing=!0;const t=localStorage.getItem("lastValidation"),n=Date.now();(!t||n-parseInt(t)>this.validationInterval)&&(console.log("\ud83d\udd04 Performing automatic session validation"),await e())}catch(RT){console.error("Session refresh failed:",RT)}finally{this.isRefreshing=!1}},this.validationInterval),console.log("\u2705 Session refresh started")}stopSessionRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("\ud83d\uded1 Session refresh stopped"))}needsValidation(){const e=localStorage.getItem("lastValidation");if(!e)return!0;return Date.now()-parseInt(e)>this.validationInterval}updateValidationTimestamp(){localStorage.setItem("lastValidation",Date.now().toString())}clearSession(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),localStorage.removeItem("userData"),localStorage.removeItem("authToken"),localStorage.removeItem("lastValidation"),localStorage.removeItem("rememberMe"),localStorage.removeItem("loginTime"),localStorage.removeItem("persistentAccount"),this.stopSessionRefresh()}getSessionInfo(){const e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken"),n=localStorage.getItem("user"),i=localStorage.getItem("userData"),r=localStorage.getItem("lastValidation");return{hasAccessToken:!!e,hasRefreshToken:!!t,hasToken:!!e,hasUser:!!n||!!i,lastValidation:r?new Date(parseInt(r)):null,needsValidation:this.needsValidation()}}},GP=HP;const WP=new class{constructor(){this.isValidating=!1,this.validationPromise=null}async validateCheckoutSession(){if(this.isValidating&&this.validationPromise)return this.validationPromise;this.isValidating=!0,this.validationPromise=this._performValidation();try{return await this.validationPromise}finally{this.isValidating=!1,this.validationPromise=null}}async _performValidation(){try{console.log("\ud83d\uded2 Validating session for checkout...");const t=localStorage.getItem("accessToken"),n=localStorage.getItem("authToken"),i=localStorage.getItem("userData"),r=localStorage.getItem("user"),s=i||r,a=t||n;if(a)try{const e=a.split(".");if(3===e.length){const t=JSON.parse(atob(e[1])),n=Math.floor(Date.now()/1e3);if(t.exp<n)return GP.clearSession(),{valid:!1,error:"JWT token expired",shouldRedirect:!0}}}catch(RT){}if(!a||!s)return{valid:!1,error:"No authentication data found",shouldRedirect:!0};if(!GP.needsValidation())return{valid:!0,user:JSON.parse(s)};if(s)try{const e=JSON.parse(s);if(e&&e.id&&e.email)return{valid:!0,user:e}}catch(e){}const o=await zP.validateSession();return o.success&&o.user?(GP.updateValidationTimestamp(),{valid:!0,user:o.user}):{valid:!1,error:o.error||o.message||"Session validation failed",shouldRedirect:!0}}catch(RT){return RT.message&&RT.message.includes("Network")?{valid:!0,warning:"Network error during validation, proceeding with cached session",user:JSON.parse(localStorage.getItem("user")||"{}")}:{valid:!1,error:RT.message||"Session validation failed",shouldRedirect:RT.message&&RT.message.includes("401")}}}async ensureValidSession(){const e=await this.validateCheckoutSession();if(!e.valid&&e.shouldRedirect){GP.clearSession();const e=encodeURIComponent(window.location.pathname+window.location.search);return window.location.href="/login?returnUrl=".concat(e),!1}return e.valid}handleCheckoutError(e,t){if(e.response&&401===e.response.status){const e="Your session has expired. Please log in again to continue with checkout.";window.showNotification?window.showNotification(e,"error"):alert(e),GP.clearSession();const t=encodeURIComponent(window.location.pathname+window.location.search);return window.location.href="/login?returnUrl=".concat(t),!0}return!1}getSessionDebugInfo(){return Fe(Fe({},GP.getSessionInfo()),{},{isValidating:this.isValidating,hasValidationPromise:!!this.validationPromise})}},VP=WP,JP=()=>(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M3 7V17C3 18.1046 3.89543 19 5 19H19C20.1046 19 21 18.1046 21 17V10H17L15 7H3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M3 7L5 5H13L15 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("circle",{cx:"7.5",cy:"15.5",r:"1.5",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"16.5",cy:"15.5",r:"1.5",stroke:"currentColor",strokeWidth:"2"})]}),YP=()=>(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M16 3H1V16H16V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M16 8H20L23 11V16H16V8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("circle",{cx:"5.5",cy:"18.5",r:"2.5",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"18.5",cy:"18.5",r:"2.5",stroke:"currentColor",strokeWidth:"2"})]}),XP=()=>(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"8",cy:"21",r:"1",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"19",cy:"21",r:"1",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M2.05 2.05H4L6.2 12.2C6.37 13.37 7.39 14.2 8.6 14.2H19.4C20.61 14.2 21.63 13.37 21.8 12.2L23 6H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),ZP=()=>{var e,t,n;const i=ne(),s=ee(),{items:a,getSubtotal:o,getTotal:l,clearCart:c}=Ni(),{user:u,loading:d}=xi(),[h,p]=(0,r.useState)("default"),[m,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(""),[x,y]=(0,r.useState)(!1),[_,b]=(0,r.useState)(!1),[w,A]=(0,r.useState)(null),[S,E]=(0,r.useState)([]),[C,T]=(0,r.useState)(!0),[M,P]=(0,r.useState)(null),[N,R]=(0,r.useState)([]),[L,j]=(0,r.useState)("pickup"),[I,k]=(0,r.useState)(0),[B,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!d){T(!0);try{if(!await VP.ensureValidSession())return;const e=await fi.get("/api/customer/addresses");if(e.success&&Array.isArray(e.addresses)&&e.addresses.length>0){E(e.addresses);const t=e.addresses.find(e=>e.IsDefault)||e.addresses[0];A(t)}else E([]),A(null)}catch(e){console.error("Failed to fetch addresses:",e);VP.handleCheckoutError(e,"/api/customer/addresses")||(E([]),A(null))}finally{T(!1)}}})()},[d]),(0,r.useEffect)(()=>{const e=()=>{const e=document.body.className;e.includes("theme-christmas")?p("christmas"):e.includes("theme-dark")?p("dark"):p("default")};e();const t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await fi.get("/api/terms");e&&t&&t.success&&P(t)}catch(tR){console.warn("Unable to load public terms, using defaults")}})(),()=>{e=!1}},[]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await fi.get("/api/public/delivery-rates");e&&t&&t.success&&R(Array.isArray(t.deliveryRates)?t.deliveryRates:[])}catch(t){console.warn("Failed to load delivery rates")}})(),()=>{e=!1}},[]);(0,r.useEffect)(()=>{const e=(()=>{if("pickup"===L)return 0;const e=N.find(e=>String(e.RateID)===String(L));return e?Number(e.Price||0):0})();k(e)},[L,N]);const O=()=>l()+I,F=w||u&&u.address||{},U=u||{},z=U.fullName||[F.FirstName,F.LastName].filter(Boolean).join(" ")||"",H=[F.HouseNumber,F.Street,F.Barangay,F.City,F.Province,F.Region,F.PostalCode,F.Country||"Philippines"].filter(Boolean),G=(H.length>0&&H.join(",\n"),F.City,F.Province,F.Region,F.Barangay,F.PostalCode,F.Country,U.email||F.Email||""),W=U.phoneNumber||F.PhoneNumber||"",V=s.state&&Array.isArray(s.state.items)&&s.state.items.length>0?s.state.items:a;(0,r.useEffect)(()=>{V&&0!==V.length||i("/cart")},[V,i]);const J=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e);return d?(0,gi.jsx)("div",{className:"checkout-page",children:(0,gi.jsxs)("div",{className:"empty-cart",children:[(0,gi.jsx)("div",{className:"loading-spinner",style:{margin:"0 auto 1rem"}}),(0,gi.jsx)("h2",{children:"Loading checkout..."}),(0,gi.jsx)("p",{className:"text-gray-500",children:"Please wait while we verify your authentication."})]})}):V&&0!==V.length?(0,gi.jsxs)("div",{className:"checkout-page",children:["christmas"===h&&(0,gi.jsx)(Nr,{}),B&&(0,gi.jsx)("div",{className:"modal-overlay",children:(0,gi.jsxs)("div",{className:"modal-content",children:[(0,gi.jsx)("h2",{children:"Select Shipping Address"}),(0,gi.jsx)("div",{className:"shipping-options",children:S.map(e=>(0,gi.jsxs)("div",{className:"shipping-option ".concat((null===w||void 0===w?void 0:w.AddressID)===e.AddressID?"selected":""),onClick:()=>(e=>{A(e),D(!1)})(e),children:[(0,gi.jsxs)("div",{className:"shipping-option-header",children:[(0,gi.jsx)("div",{className:"shipping-radio",children:(null===w||void 0===w?void 0:w.AddressID)===e.AddressID&&(0,gi.jsx)("div",{})}),(0,gi.jsxs)("div",{className:"shipping-name",children:[[e.FirstName,e.LastName].filter(Boolean).join(" "),e.IsDefault&&(0,gi.jsx)("span",{className:"badge badge-default ml-2",children:"Default"})]})]}),(0,gi.jsxs)("div",{className:"shipping-description",children:[[e.HouseNumber,e.Street,e.Barangay,e.City,e.Province,e.Region,e.PostalCode,e.Country||"Philippines"].filter(Boolean).join(", "),e.PhoneNumber&&" \u2022 ".concat(e.PhoneNumber)]})]},e.AddressID))}),(0,gi.jsx)("div",{className:"modal-actions",children:(0,gi.jsx)("button",{onClick:()=>D(!1),className:"btn btn-secondary",children:"Cancel"})})]})}),x&&(0,gi.jsx)("div",{className:"modal-overlay",children:(0,gi.jsxs)("div",{className:"modal-content",children:[(0,gi.jsx)("h2",{children:(null===M||void 0===M||null===(e=M.checkoutTerms)||void 0===e?void 0:e.title)||"Terms and Conditions"}),(0,gi.jsx)("div",{style:{maxHeight:200,overflowY:"auto",whiteSpace:"pre-line"},children:(null===M||void 0===M||null===(t=M.checkoutTerms)||void 0===t?void 0:t.content)||(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("p",{children:"By proceeding with this payment, you agree to our Terms and Conditions. Please read them carefully before confirming your order."}),(0,gi.jsxs)("ul",{children:[(0,gi.jsx)("li",{children:"All sales are final unless otherwise stated."}),(0,gi.jsx)("li",{children:"Shipping and delivery times are estimates and may vary."}),(0,gi.jsx)("li",{children:"You are responsible for providing accurate shipping information."}),(0,gi.jsx)("li",{children:"For full details, please visit our Terms and Conditions page."})]})]})}),(0,gi.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[(0,gi.jsx)("input",{type:"checkbox",id:"termsCheckbox",checked:_,onChange:e=>b(e.target.checked),style:{marginRight:8}}),(0,gi.jsx)("label",{htmlFor:"termsCheckbox",children:(null===M||void 0===M||null===(n=M.checkoutTerms)||void 0===n?void 0:n.checkboxText)||"I have read and agree to the Terms and Conditions"})]}),(0,gi.jsxs)("div",{className:"modal-actions",children:[(0,gi.jsx)("button",{onClick:()=>{y(!1),b(!1)},className:"btn btn-secondary",children:"Cancel"}),(0,gi.jsx)("button",{onClick:()=>{y(!1),i("/payment",{state:{items:V,shippingMethod:L,shippingCost:I,subtotal:l(),total:O(),deliveryType:"pickup"===L?"pickup":"rate_".concat(L),shippingAddressId:(null===w||void 0===w?void 0:w.AddressID)||null}})},className:"btn btn-primary",disabled:!_,children:"Confirm"})]})]})}),(0,gi.jsxs)("div",{className:"checkout-container",children:[(0,gi.jsxs)("div",{className:"checkout-main",children:[(0,gi.jsxs)("div",{className:"checkout-header",children:[(0,gi.jsx)("h1",{children:"Checkout"}),(0,gi.jsx)("p",{children:"Complete your order with secure checkout"})]}),g&&(0,gi.jsxs)("div",{className:"error-alert",children:[(0,gi.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,gi.jsx)("span",{className:"error-text",children:g})]}),(0,gi.jsxs)("div",{className:"checkout-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)("div",{className:"section-number",children:"1"}),(0,gi.jsx)(JP,{}),(0,gi.jsx)("span",{children:"Shipping Address"})]}),C?(0,gi.jsxs)("div",{className:"text-center",style:{padding:"2rem"},children:[(0,gi.jsx)("div",{className:"loading-spinner",style:{margin:"0 auto 1rem"}}),(0,gi.jsx)("p",{className:"text-gray-500",children:"Loading address..."})]}):w?(0,gi.jsxs)("div",{className:"address-display",children:[(0,gi.jsxs)("div",{className:"address-info",children:[(0,gi.jsxs)("div",{className:"address-row",children:[(0,gi.jsx)("span",{className:"address-label",children:"Name:"}),(0,gi.jsx)("span",{className:"address-value",children:z})]}),(0,gi.jsxs)("div",{className:"address-row",children:[(0,gi.jsx)("span",{className:"address-label",children:"Email:"}),(0,gi.jsx)("span",{className:"address-value",children:G})]}),(0,gi.jsxs)("div",{className:"address-row",children:[(0,gi.jsx)("span",{className:"address-label",children:"Phone:"}),(0,gi.jsx)("span",{className:"address-value",children:W})]}),(0,gi.jsxs)("div",{className:"address-row",children:[(0,gi.jsx)("span",{className:"address-label",children:"Address:"}),(0,gi.jsx)("span",{className:"address-value",children:H.join(", ")})]})]}),(0,gi.jsx)("div",{className:"address-actions",children:S.length>0&&(0,gi.jsx)("button",{className:"btn btn-secondary",onClick:()=>D(!0),children:"Change Address"})})]}):(0,gi.jsxs)("div",{className:"text-center",style:{padding:"2rem"},children:[(0,gi.jsx)("p",{className:"text-gray-500 mb-2",children:"No shipping address found"}),(0,gi.jsx)("p",{className:"text-gray-500 mb-4",children:"Please add an address to continue with your order"})]})]}),(0,gi.jsxs)("div",{className:"checkout-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)("div",{className:"section-number",children:"2"}),(0,gi.jsx)(YP,{}),(0,gi.jsx)("span",{children:"Shipping Methods"})]}),(0,gi.jsxs)("div",{className:"shipping-options",children:[(0,gi.jsxs)("div",{className:"shipping-option ".concat("pickup"===L?"selected":""),onClick:()=>j("pickup"),children:[(0,gi.jsxs)("div",{className:"shipping-option-header",children:[(0,gi.jsx)("div",{className:"shipping-radio",children:"pickup"===L&&(0,gi.jsx)("div",{})}),(0,gi.jsx)("div",{className:"shipping-name",children:"Pick up"})]}),(0,gi.jsx)("div",{className:"shipping-description",children:"Pick up your order at our store. This option is free of delivery charge."})]}),N.map(e=>(0,gi.jsxs)("div",{className:"shipping-option ".concat(String(L)===String(e.RateID)?"selected":""),onClick:()=>j(String(e.RateID)),children:[(0,gi.jsxs)("div",{className:"shipping-option-header",children:[(0,gi.jsx)("div",{className:"shipping-radio",children:String(L)===String(e.RateID)&&(0,gi.jsx)("div",{})}),(0,gi.jsx)("div",{className:"shipping-name",children:e.ServiceType})]}),(0,gi.jsx)("div",{className:"shipping-description",children:"Delivery charge: ".concat(J(Number(e.Price||0)))})]},e.RateID))]})]})]}),(0,gi.jsxs)("div",{className:"order-summary",children:[(0,gi.jsxs)("div",{className:"order-summary-header",children:[(0,gi.jsx)("div",{className:"summary-icon",children:(0,gi.jsx)(XP,{})}),(0,gi.jsx)("h3",{children:"Order Summary"})]}),(0,gi.jsx)("div",{className:"cart-items",children:V.map(e=>{var t,n,i,r;const s=Sr((null===(t=e.selectedVariation)||void 0===t?void 0:t.imageUrl)||(null===(n=e.product)||void 0===n||null===(i=n.images)||void 0===i?void 0:i[0])||(null===(r=e.product)||void 0===r?void 0:r.image));return(0,gi.jsxs)("div",{className:"cart-item",children:[(0,gi.jsx)("img",{src:s,alt:e.product?e.product.name:"Product",className:"cart-item-image",onError:e=>{e.target.src="/logo192.png",e.target.onerror=null}}),(0,gi.jsxs)("div",{className:"cart-item-info",children:[(0,gi.jsx)("div",{className:"cart-item-name",children:e.product?e.product.name:""}),!e.product||!e.product.useOriginalProduct&&e.product.selectedVariation?e.product&&e.product.selectedVariation?(0,gi.jsxs)("div",{className:"cart-item-variant",children:["Variant: ",e.product.selectedVariation.name,e.product.selectedVariation.color?" \u2022 ".concat(e.product.selectedVariation.color):""]}):null:(0,gi.jsx)("div",{className:"cart-item-variant",children:"Standard"}),(0,gi.jsxs)("div",{className:"cart-item-quantity",children:["Qty: ",e.quantity]}),e.product&&e.product.hasDiscount&&e.product.discountInfo&&(0,gi.jsx)("div",{className:"discount-badge-small",children:"percentage"===e.product.discountInfo.discountType?"-".concat(e.product.discountInfo.discountValue,"%"):"-".concat(J(e.product.discountInfo.discountAmount))})]}),(0,gi.jsx)("div",{className:"cart-item-price-section",children:(0,gi.jsx)("div",{className:"cart-item-price",children:J(e.price*e.quantity)})})]},e.id)})}),(0,gi.jsxs)("div",{className:"order-totals",children:[(0,gi.jsxs)("div",{className:"total-row",children:[(0,gi.jsx)("span",{children:"Subtotal:"}),(0,gi.jsx)("span",{children:J(l())})]}),(0,gi.jsxs)("div",{className:"total-row",children:[(0,gi.jsx)("span",{children:"Shipping:"}),(0,gi.jsx)("span",{children:J(I)})]}),(0,gi.jsxs)("div",{className:"total-row final",children:[(0,gi.jsx)("span",{children:"Total:"}),(0,gi.jsx)("span",{className:"total-amount",children:J(O())})]})]}),(0,gi.jsx)("button",{className:"btn btn-primary place-order-btn",onClick:()=>y(!0),children:"Pay Now"})]})]}),"christmas"===h&&(0,gi.jsx)(Rr,{})]}):(0,gi.jsx)("div",{className:"checkout-page",children:(0,gi.jsxs)("div",{className:"empty-cart",children:[(0,gi.jsx)("h2",{children:"Your cart is empty"}),(0,gi.jsx)("p",{className:"text-gray-500 mb-4",children:"Add some items to your cart to proceed with checkout."}),(0,gi.jsx)("button",{onClick:()=>i("/products"),className:"btn btn-primary",children:"Continue Shopping"})]})})};var qP,KP="basil",QP="https://js.stripe.com",$P="".concat(QP,"/").concat(KP,"/stripe.js"),eN=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,tN=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,nN="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",iN=function(e){return eN.test(e)||tN.test(e)},rN=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat($P).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},sN=null,aN=null,oN=null,lN=function(e){return null!==sN?sN:(sN=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(nN),window.Stripe)t(window.Stripe);else try{var i=function(){for(var e=document.querySelectorAll('script[src^="'.concat(QP,'"]')),t=0;t<e.length;t++){var n=e[t];if(iN(n.src))return n}return null}();if(i&&e)console.warn(nN);else if(i){if(i&&null!==oN&&null!==aN){var r;i.removeEventListener("load",oN),i.removeEventListener("error",aN),null===(r=i.parentNode)||void 0===r||r.removeChild(i),i=rN(e)}}else i=rN(e);oN=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),aN=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),i.addEventListener("load",oN),i.addEventListener("error",aN)}catch(RT){return void n(RT)}else t(null)}),sN.catch(function(e){return sN=null,Promise.reject(e)}))},cN=!1,uN=function(){return qP||(qP=lN(null).catch(function(e){return qP=null,Promise.reject(e)}),qP)};Promise.resolve().then(function(){return uN()}).catch(function(e){cN||console.warn(e)});var dN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];cN=!0;var i=Date.now();return uN().then(function(e){return function(e,t,n){if(null===e)return null;var i=t[0].match(/^pk_test/),r=function(e){return 3===e?"v3":e}(e.version),s=KP;i&&r!==s&&console.warn("Stripe.js@".concat(r," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(a,n),a}(e,t,i)})};const hN=(()=>{const e="pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw";try{return dN(e)}catch(RT){return console.error("\u274c Failed to initialize Stripe:",RT),Promise.resolve(null)}})(),pN={isStripeAvailable:async()=>null!==await hN,async createCheckoutSession(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"E-Wallet",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{console.log("Creating Stripe checkout session with items:",e);const r=await hN;if(!r)throw new Error("Payment system is not configured. Please contact support or try a different payment method.");if(!e||!Array.isArray(e)||0===e.length)throw new Error("No items provided for checkout");for(const t of e){if(!t.name||!t.quantity||!t.price)throw new Error("Invalid item structure. Each item must have name, quantity, and price.");if(t.quantity<=0||t.price<=0)throw new Error("Item quantity and price must be greater than 0.")}const s=await fi.post("/api/create-checkout-session",{items:e,email:t,paymentMethod:n,deliveryType:i.deliveryType||"pickup",pickupDate:i.pickupDate||null,shippingCost:"number"===typeof i.shippingCost?i.shippingCost:0,shippingAddressId:i.shippingAddressId||null});if(!s.sessionId)throw new Error("Failed to create checkout session: "+(s.error||"Unknown error"));if(!s.sessionId)throw new Error(s.error||"Failed to create checkout session");{console.log("Stripe checkout session created successfully! SessionID:",s.sessionId);const{error:e}=await r.redirectToCheckout({sessionId:s.sessionId});if(e)throw console.error("Stripe redirect error:",e),new Error(e.message)}}catch(RT){throw console.error("Stripe checkout error:",RT),RT}},async getCheckoutSession(e){try{return await fi.get("/api/checkout-session/".concat(e))}catch(RT){throw console.error("Error retrieving checkout session:",RT),RT}}},mN=pN;const fN=new class{constructor(){console.log("\ud83d\udcb5 COD Service initialized")}async createCodOrder(e){try{console.log("Creating COD order:",e);const t=await fi.post("/api/orders/cash-on-delivery",e);if(t.success)return console.log("COD order created successfully:",t.orderId),{success:!0,orderId:t.orderId,message:t.message||"Order placed successfully! You will pay when your order arrives."};throw new Error(t.message||"Failed to create COD order")}catch(RT){throw console.error("COD order creation error:",RT),RT}}validateOrderData(e){const t=[];return e.items&&Array.isArray(e.items)&&0!==e.items.length||t.push("No items provided for order"),e.email&&e.email.includes("@")||t.push("Valid email address is required"),e.total<=0&&t.push("Invalid order total"),{isValid:0===t.length,errors:t}}getPaymentMethodInfo(){return{name:"Cash on Delivery",description:"Pay when your order arrives",icon:"\ud83d\udcb5",processingTime:"Order will be processed immediately",deliveryNote:"Payment will be collected upon delivery"}}},gN=()=>(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"8",cy:"21",r:"1",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"19",cy:"21",r:"1",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),vN=()=>{var e,t,n,i,s;const a=ne(),o=ee(),{user:l}=xi(),[c,u]=(0,r.useState)("stripe"),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)("");(0,r.useEffect)(()=>{"true"===new URLSearchParams(o.search).get("cancelled")&&m("Payment was cancelled. You can try again or choose a different payment method.");(async()=>{await mN.isStripeAvailable()||m("Payment system is currently unavailable. Please contact support for alternative payment methods.")})();(async()=>{if(null!==l&&void 0!==l&&l.email){if(["augmentdoe@gmail.com","andreijumaw@gmail.com"].includes(l.email))try{const e=await fi.get("/api/auth/validate-session");e.success&&e.persistentLogin&&console.log("\ud83d\udd12 Session validated for persistent account")}catch(p){console.error("Session validation failed:",p)}}})()},[o.search,l]);const f=o.state&&Array.isArray(o.state.items)&&o.state.items.length>0?o.state.items:JSON.parse(localStorage.getItem("cart")||"[]"),g=(null===(e=o.state)||void 0===e||e.shippingMethod,(null===(t=o.state)||void 0===t?void 0:t.shippingCost)||0),v=(null===(n=o.state)||void 0===n?void 0:n.subtotal)||0,x=(null===(i=o.state)||void 0===i?void 0:i.total)||0,y=(null===(s=o.state)||void 0===s?void 0:s.deliveryType)||"pickup",_=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e);return(0,gi.jsx)("div",{className:"payment-page",children:(0,gi.jsxs)("div",{className:"payment-container",children:[p&&(0,gi.jsx)("div",{className:"payment-error-message",children:p}),(0,gi.jsxs)("div",{className:"payment-methods-section",children:[(0,gi.jsx)("h2",{className:"section-title",children:"Select Payment Method"}),(0,gi.jsxs)("div",{className:"payment-methods-list",children:[(0,gi.jsxs)("div",{className:"payment-method-option ".concat("stripe"===c?"selected":""),onClick:()=>u("stripe"),children:[(0,gi.jsx)("div",{className:"payment-method-radio",children:(0,gi.jsx)("div",{className:"radio-button ".concat("stripe"===c?"checked":""),children:"stripe"===c&&(0,gi.jsx)("div",{className:"radio-dot"})})}),(0,gi.jsx)("div",{className:"payment-method-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("rect",{x:"2",y:"8",width:"20",height:"8",rx:"2",fill:"#F0B21B"}),(0,gi.jsx)("rect",{x:"2",y:"14",width:"20",height:"2",fill:"#1A1F71"}),(0,gi.jsx)("text",{x:"12",y:"13",textAnchor:"middle",fill:"white",fontSize:"6",fontWeight:"bold",children:"STRIPE"})]})}),(0,gi.jsx)("span",{className:"payment-method-name",children:"Stripe"}),(0,gi.jsx)("span",{className:"payment-method-details",children:"Secure payment processing"})]}),(0,gi.jsxs)("div",{className:"payment-method-option ".concat("cod"===c?"selected":""),"data-method":"cod",onClick:()=>u("cod"),children:[(0,gi.jsx)("div",{className:"payment-method-radio",children:(0,gi.jsx)("div",{className:"radio-button ".concat("cod"===c?"checked":""),children:"cod"===c&&(0,gi.jsx)("div",{className:"radio-dot"})})}),(0,gi.jsx)("div",{className:"payment-method-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,gi.jsx)("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",fill:"#10B981"}),(0,gi.jsx)("path",{d:"M7 8h10M7 12h10M7 16h6",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),(0,gi.jsx)("circle",{cx:"18",cy:"6",r:"3",fill:"#EF4444"}),(0,gi.jsx)("text",{x:"18",y:"8",textAnchor:"middle",fill:"white",fontSize:"4",fontWeight:"bold",children:"\u20b1"})]})}),(0,gi.jsx)("span",{className:"payment-method-name",children:"Cash on Delivery"}),(0,gi.jsx)("span",{className:"payment-method-details",children:"Pay when your order arrives"})]})]})]}),(0,gi.jsxs)("div",{className:"order-summary-section",children:[(0,gi.jsxs)("div",{className:"order-summary-header",children:[(0,gi.jsx)("div",{className:"summary-icon",children:(0,gi.jsx)(gN,{})}),(0,gi.jsx)("h2",{className:"section-title",children:"Order Summary"})]}),(0,gi.jsxs)("div",{className:"order-summary-content",children:[(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Items"}),(0,gi.jsx)("span",{className:"summary-value",children:f.length})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Sub Total"}),(0,gi.jsx)("span",{className:"summary-value",children:_(v)})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Shipping"}),(0,gi.jsx)("span",{className:"summary-value",children:_(g)})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Taxes"}),(0,gi.jsx)("span",{className:"summary-value",children:"\u20b10.00"})]}),(0,gi.jsxs)("div",{className:"summary-item discount",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Coupon Discount"}),(0,gi.jsx)("span",{className:"summary-value",children:"-\u20b1100.00"})]}),(0,gi.jsxs)("div",{className:"summary-item total",children:[(0,gi.jsx)("span",{className:"summary-label",children:"Total"}),(0,gi.jsx)("span",{className:"summary-value",children:_(x)})]})]}),(0,gi.jsx)("button",{className:"confirm-payment-btn",onClick:"cod"===c?async()=>{h(!0),m("");try{var e;const t=(null===l||void 0===l?void 0:l.email)||JSON.parse(localStorage.getItem("user")||"{}").email;if(!t)return m("Please log in to proceed with Cash on Delivery order."),void a("/login");if(!f||0===f.length)return void m("No items found in your cart. Please add items before proceeding to payment.");const n={items:f.map(e=>{var t,n,i,r,s,a,o,l;return{name:(null===(t=e.product)||void 0===t?void 0:t.name)||e.name||"Product",quantity:e.quantity,price:e.price,id:(null===(n=e.product)||void 0===n?void 0:n.id)||(null===(i=e.product)||void 0===i?void 0:i.ProductID)||e.id,variationId:(null===(r=e.product)||void 0===r||null===(s=r.selectedVariation)||void 0===s?void 0:s.id)||null,variationName:(null===(a=e.product)||void 0===a||null===(o=a.selectedVariation)||void 0===o?void 0:o.name)||null,useOriginalProduct:(null===(l=e.product)||void 0===l?void 0:l.useOriginalProduct)||!1}}),email:t,subtotal:v,shippingCost:g,total:x,deliveryType:y,shippingAddressId:(null===(e=o.state)||void 0===e?void 0:e.shippingAddressId)||null};console.log("Creating COD order:",n);const i=await fN.createCodOrder(n);i.success?(localStorage.removeItem("shopping-cart-".concat((null===l||void 0===l?void 0:l.id)||"guest")),a("/order-success",{state:{order:{id:i.orderId,items:f,total:x,subtotal:v,shippingCost:g,deliveryType:y},message:i.message,paymentStatus:"pending",paymentMethod:"Cash on Delivery"}})):m(i.message||"Failed to create COD order")}catch(p){console.error("COD payment error:",p),m(p.message||"Failed to create Cash on Delivery order. Please try again.")}finally{h(!1)}}:async()=>{h(!0),m("");try{var e;if(!await VP.ensureValidSession())return void h(!1);const t=(null===l||void 0===l?void 0:l.email)||JSON.parse(localStorage.getItem("user")||"{}").email;if(!t)return m("Please log in to proceed with payment."),void a("/login");if(!f||0===f.length)return void m("No items found in your cart. Please add items before proceeding to payment.");const n=f.map(e=>{var t,n,i,r,s,a,o,l,c,u,d,h;const p=(null===(t=e.product)||void 0===t||null===(n=t.selectedVariation)||void 0===n?void 0:n.id)||null,m=(null===(i=e.product)||void 0===i||null===(r=i.selectedVariation)||void 0===r?void 0:r.name)||null,f=(null===(s=e.product)||void 0===s?void 0:s.useOriginalProduct)||!1;return console.log("PaymentPage: Processing cart item:",{itemName:(null===(a=e.product)||void 0===a?void 0:a.name)||e.name,productId:(null===(o=e.product)||void 0===o?void 0:o.id)||(null===(l=e.product)||void 0===l?void 0:l.ProductID)||e.id,variationId:p,variationName:m,useOriginalProduct:f,selectedVariation:null===(c=e.product)||void 0===c?void 0:c.selectedVariation,hasVariation:!!p}),{name:(null===(u=e.product)||void 0===u?void 0:u.name)||e.name||"Product",quantity:e.quantity,price:e.price,id:(null===(d=e.product)||void 0===d?void 0:d.id)||(null===(h=e.product)||void 0===h?void 0:h.ProductID)||e.id,variationId:p,variationName:m,useOriginalProduct:f}});console.log("Creating Stripe checkout session:",{items:n,email:t,deliveryType:y,shippingCost:g}),n.forEach((e,t)=>{console.log("PaymentPage: Item ".concat(t+1," variation data:"),{name:e.name,id:e.id,variationId:e.variationId,variationName:e.variationName,useOriginalProduct:e.useOriginalProduct,hasVariation:!!e.variationId})}),localStorage.removeItem("shopping-cart-".concat((null===l||void 0===l?void 0:l.id)||"guest")),await mN.createCheckoutSession(n,t,"E-Wallet",{deliveryType:y,pickupDate:null,shippingCost:g,shippingAddressId:(null===(e=o.state)||void 0===e?void 0:e.shippingAddressId)||null})}catch(p){console.error("E-Wallet payment error:",p);if(!VP.handleCheckoutError(p,"stripe-checkout")){let t="Payment setup failed: ";p.message.includes("checkout session")?t+="Unable to create payment session. Please try again.":p.message.includes("not configured")||p.message.includes("not properly configured")?t+="Payment system is not configured. Please contact support for alternative payment methods.":p.message.includes("Stripe")?t+="Payment service temporarily unavailable. Please try again later.":p.message.includes("network")||p.message.includes("fetch")?t+="Network error. Please check your connection and try again.":t+=p.message,m(t)}}finally{h(!1)}},disabled:d||0===f.length,children:d?"Processing...":"cod"===c?"Place COD Order":"Confirm Payment"})]})]})})};new class{constructor(){pi.isFeatureEnabled("paymentProcessing")||console.warn("\u26a0\ufe0f Payment processing is disabled"),this.config=pi.getPaymentConfig(),pi.debugMode&&console.log("\ud83d\udcb3 Payment Service initialized")}async createOrder(e){try{if(!pi.isFeatureEnabled("paymentProcessing"))throw new Error("Payment processing is disabled");return await fi.post(pi.getEndpoint("orders"),e)}catch(RT){throw console.error("Create order error:",RT),RT}}async getUserAddresses(){try{return(await this.api.get("/users/addresses")).data}catch(RT){var e,t;throw console.error("Get user addresses error:",RT),new Error((null===(e=RT.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to get user addresses")}}async createUserAddress(e){try{return(await this.api.post("/users/addresses",e)).data}catch(RT){var t,n;throw console.error("Create user address error:",RT),new Error((null===(t=RT.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to create address")}}formatAmount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PHP";return new Intl.NumberFormat("en-PH",{style:"currency",currency:t}).format(e)}getPaymentMethodDisplayName(e){return{card:"Credit/Debit Card",gcash:"GCash",grabpay:"GrabPay",paymaya:"PayMaya",bank_transfer:"Bank Transfer",cod:"Cash on Delivery",stripe:"Stripe"}[e]||e}getPaymentMethodIcon(e){return{card:"\ud83d\udcb3",gcash:"\ud83d\udcf1",grabpay:"\ud83d\ude97",paymaya:"\ud83d\udcb0",bank_transfer:"\ud83c\udfe6",cod:"\ud83d\udcb5",stripe:"\ud83d\udcb3"}[e]||"\ud83d\udcb3"}validateCardNumber(e){const t=e.replace(/\s/g,"");if(!/^\d{13,19}$/.test(t))return!1;let n=0,i=!1;for(let r=t.length-1;r>=0;r--){let e=parseInt(t[r]);i&&(e*=2,e>9&&(e-=9)),n+=e,i=!i}return n%10===0}formatCardNumber(e){return e.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim()}getCardBrand(e){const t=e.replace(/\s/g,"");return/^4/.test(t)?"visa":/^5[1-5]/.test(t)?"mastercard":/^3[47]/.test(t)?"amex":/^6(?:011|5)/.test(t)?"discover":"unknown"}};const xN=()=>(0,gi.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"8",cy:"21",r:"1",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"19",cy:"21",r:"1",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),yN=()=>{const{orderId:e}=ie(),t=ee(),[n]=Ie(),{user:i,isAuthenticated:s}=xi(),{order:a,message:o,paymentStatus:l,paymentMethod:c}=t.state||{},[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),g=async e=>{try{var t,n,i,r;console.log("\ud83d\udd04 Triggering webhook simulation for development...");try{const t=await fi.get("/api/order/stripe-session/".concat(e.id));if(t.success&&t.order){console.log("\u2705 Order already exists, skipping webhook simulation");const e=t.order;return void d(t=>Fe(Fe({},t),{},{orderId:e.OrderID,status:e.Status,paymentStatus:e.PaymentStatus,deliveryType:e.DeliveryType,deliveryCost:e.DeliveryCost,customerInfo:{name:e.FullName,email:e.Email},address:{houseNumber:e.HouseNumber,street:e.Street,barangay:e.Barangay,city:e.City,province:e.Province,postalCode:e.PostalCode,country:e.Country,phoneNumber:e.PhoneNumber}}))}}catch(s){console.log("Order not found, proceeding with webhook simulation...")}let a=[];if(e.metadata&&e.metadata.cart)try{a=JSON.parse(e.metadata.cart)}catch(tR){console.error("Failed to parse cart from metadata:",tR)}const o=await fi.post("/api/test-webhook",{sessionId:e.id,email:e.customer_email,items:a,total:e.amount_total,paymentMethod:(null===(t=e.metadata)||void 0===t?void 0:t.paymentMethod)||"E-Wallet",deliveryType:(null===(n=e.metadata)||void 0===n?void 0:n.deliveryType)||"pickup",shippingCost:(null===(i=e.metadata)||void 0===i?void 0:i.shippingCost)||"",shippingAddressId:(null===(r=e.metadata)||void 0===r?void 0:r.shippingAddressId)||""});o.success?(console.log("\u2705 Webhook simulation successful, order created"),setTimeout(async()=>{try{const t=await fi.get("/api/order/stripe-session/".concat(e.id));if(t.success&&t.order){const e=t.order;console.log("\u2705 Found newly created order:",e),d(t=>Fe(Fe({},t),{},{orderId:e.OrderID,status:e.Status,paymentStatus:e.PaymentStatus,deliveryType:e.DeliveryType,deliveryCost:e.DeliveryCost,customerInfo:{name:e.FullName,email:e.Email},address:{houseNumber:e.HouseNumber,street:e.Street,barangay:e.Barangay,city:e.City,province:e.Province,postalCode:e.PostalCode,country:e.Country,phoneNumber:e.PhoneNumber}}))}}catch(s){console.error("Failed to fetch newly created order:",s)}},1e3)):console.error("\u274c Webhook simulation failed:",o.message)}catch(m){console.error("\u274c Error triggering webhook simulation:",m)}};return(0,r.useEffect)(()=>{const t=n.get("session_id");t?(p(!0),mN.getCheckoutSession(t).then(e=>{if(e.success){const n=e.session;console.log("Retrieved Stripe session details:",n),d({status:n.payment_status||"completed",method:"stripe",amount:n.amount_total/100,currency:n.currency||"PHP",customerEmail:n.customer_email,completedAt:(new Date).toISOString()}),(async()=>{if(!s){const e=["augmentdoe@gmail.com","andreijumaw@gmail.com"],t=JSON.parse(localStorage.getItem("user")||"{}");if(t.email&&e.includes(t.email)){console.log("\ud83d\udd12 Attempting to restore session for persistent account:",t.email);try{const e=await fi.post("/api/auth/restore-session",{email:t.email});e.success&&(console.log("\u2705 Session restored successfully"),window.dispatchEvent(new CustomEvent("sessionRestored",{detail:{user:e.user}})))}catch(m){console.error("\u274c Failed to restore session:",m)}}}})(),fi.get("/api/order/stripe-session/".concat(t)).then(e=>{if(e.success&&e.order){const t=e.order;console.log("Found order in database by session ID:",t),d(e=>Fe(Fe({},e),{},{orderId:t.OrderID,status:t.Status,paymentStatus:t.PaymentStatus,deliveryType:t.DeliveryType,deliveryCost:t.DeliveryCost,customerInfo:{name:t.FullName,email:t.Email},address:{houseNumber:t.HouseNumber,street:t.Street,barangay:t.Barangay,city:t.City,province:t.Province,postalCode:t.PostalCode,country:t.Country,phoneNumber:t.PhoneNumber}}))}else console.log("Order not found in database, triggering webhook simulation..."),g(n)}).catch(e=>{console.log("Could not fetch order by session ID, trying webhook simulation:",e),g(n)})}}).catch(e=>{console.error("Error fetching Stripe session:",e),f("Failed to load payment details. Please contact support if your payment was successful.")}).finally(()=>{p(!1)})):a?(console.log("Order completed successfully:",{orderId:a.id||e,amount:a.total_amount,paymentStatus:l,paymentMethod:c}),l&&c&&d({status:l,method:c,completedAt:(new Date).toISOString()})):d({status:"completed",method:c||"card",completedAt:(new Date).toISOString()})},[a,e,l,c,n]),h?(0,gi.jsx)("div",{className:"order-success-page",children:(0,gi.jsx)("div",{className:"success-container",children:(0,gi.jsxs)("div",{className:"loading-state",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:40,width:40}),(0,gi.jsx)("p",{children:"Loading payment details..."})]})})}):m?(0,gi.jsx)("div",{className:"order-success-page",children:(0,gi.jsx)("div",{className:"success-container",children:(0,gi.jsxs)("div",{className:"error-state",children:[(0,gi.jsx)("h2",{children:"Payment Confirmed"}),(0,gi.jsx)("p",{children:"Your payment was successful, but we encountered an issue loading the details."}),(0,gi.jsx)("p",{className:"error-message",children:m})]})})}):(0,gi.jsx)("div",{className:"order-success-page",children:(0,gi.jsxs)("div",{className:"success-container",children:[(0,gi.jsxs)("div",{className:"success-header",children:[(0,gi.jsx)("div",{className:"success-icon",children:(0,gi.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"32",cy:"32",r:"30",fill:"#10b981",stroke:"#059669",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M20 32L28 40L44 24",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsx)("h1",{className:"success-title",children:"Order Confirmed!"}),(0,gi.jsx)("p",{className:"success-subtitle",children:o||"Thank you for your order. We will process your order shortly."})]}),(0,gi.jsxs)("div",{className:"order-summary-section",children:[(0,gi.jsxs)("div",{className:"order-summary-header",children:[(0,gi.jsx)("div",{className:"summary-icon",children:(0,gi.jsx)(xN,{})}),(0,gi.jsx)("h2",{children:"Order Summary"})]}),(0,gi.jsx)("div",{className:"order-summary-content",children:u&&(0,gi.jsxs)("div",{className:"order-details-grid",children:[u.orderId&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Order ID:"}),(0,gi.jsxs)("span",{className:"order-detail-value",children:["#",u.orderId]})]}),(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Order Status:"}),(0,gi.jsx)("span",{className:"order-detail-value status-success",children:u.status})]}),(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Payment Method:"}),(0,gi.jsx)("span",{className:"order-detail-value",children:"stripe"===u.method?"E-Wallet (Stripe)":"Cash on Delivery"===u.method?"Cash on Delivery":u.method})]}),u.paymentStatus&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Payment Status:"}),(0,gi.jsx)("span",{className:"order-detail-value status-success",children:u.paymentStatus})]}),u.deliveryType&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Delivery Type:"}),(0,gi.jsx)("span",{className:"order-detail-value",children:"pickup"===u.deliveryType?"Pick up":u.deliveryType})]}),u.deliveryCost&&u.deliveryCost>0&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Shipping Cost:"}),(0,gi.jsx)("span",{className:"order-detail-value shipping-cost",children:new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(u.deliveryCost)})]}),u.amount&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Total Amount:"}),(0,gi.jsx)("span",{className:"order-detail-value total-amount",children:new Intl.NumberFormat("en-PH",{style:"currency",currency:u.currency||"PHP"}).format(u.amount)})]}),u.customerEmail&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Email:"}),(0,gi.jsx)("span",{className:"order-detail-value",children:u.customerEmail})]}),(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Order Date:"}),(0,gi.jsx)("span",{className:"order-detail-value",children:new Date(u.completedAt).toLocaleString()})]}),u.address&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Shipping Address:"}),(0,gi.jsx)("span",{className:"order-detail-value",children:[u.address.houseNumber,u.address.street,u.address.barangay,u.address.city,u.address.province,u.address.postalCode,u.address.country||"Philippines"].filter(Boolean).join(", ")})]}),u.address.phoneNumber&&(0,gi.jsxs)("div",{className:"order-detail-item",children:[(0,gi.jsx)("span",{className:"order-detail-label",children:"Contact:"}),(0,gi.jsx)("span",{className:"order-detail-value",children:u.address.phoneNumber})]})]})]})})]}),(0,gi.jsxs)("div",{className:"next-steps-section",children:[(0,gi.jsx)("div",{className:"next-steps-header",children:(0,gi.jsx)("h2",{children:"What's Next?"})}),(0,gi.jsx)("div",{className:"next-steps-content",children:(0,gi.jsxs)("div",{className:"steps-grid",children:[(0,gi.jsxs)("div",{className:"step-item",children:[(0,gi.jsx)("div",{className:"step-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("polyline",{points:"22,6 12,13 2,6",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsxs)("div",{className:"step-content",children:[(0,gi.jsx)("h4",{children:"Order Confirmation"}),(0,gi.jsx)("p",{children:"You'll receive an email confirmation with your order details shortly."})]})]}),(0,gi.jsxs)("div",{className:"step-item",children:[(0,gi.jsx)("div",{className:"step-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M21 16V8C20.9996 7.64927 20.9071 7.30481 20.7315 7.00116C20.556 6.69751 20.3037 6.44536 20 6.27L13 2.27C12.696 2.09446 12.3511 2.00205 12 2.00205C11.6489 2.00205 11.304 2.09446 11 2.27L4 6.27C3.69626 6.44536 3.44398 6.69751 3.26846 7.00116C3.09294 7.30481 3.00036 7.64927 3 8V16C3.00036 16.3507 3.09294 16.6952 3.26846 16.9988C3.44398 17.3025 3.69626 17.5546 4 17.73L11 21.73C11.304 21.9055 11.6489 21.9979 12 21.9979C12.3511 21.9979 12.696 21.9055 13 21.73L20 17.73C20.3037 17.5546 20.556 17.3025 20.7315 16.9988C20.9071 16.6952 20.9996 16.3507 21 16Z",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("polyline",{points:"3.27,6.96 12,12.01 20.73,6.96",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,gi.jsxs)("div",{className:"step-content",children:[(0,gi.jsx)("h4",{children:"Processing"}),(0,gi.jsx)("p",{children:"We'll start processing your order and prepare it for shipment."})]})]}),(0,gi.jsxs)("div",{className:"step-item",children:[(0,gi.jsx)("div",{className:"step-icon",children:(0,gi.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("rect",{x:"1",y:"3",width:"15",height:"13",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M16 8H20L23 11V16H16V8Z",stroke:"#F0B21B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("circle",{cx:"5.5",cy:"18.5",r:"2.5",stroke:"#F0B21B",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"18.5",cy:"18.5",r:"2.5",stroke:"#F0B21B",strokeWidth:"2"})]})}),(0,gi.jsxs)("div",{className:"step-content",children:[(0,gi.jsx)("h4",{children:"Shipping"}),(0,gi.jsx)("p",{children:"You'll receive tracking information once your order ships."})]})]})]})})]}),(0,gi.jsxs)("div",{className:"success-actions-section",children:[(0,gi.jsxs)("div",{className:"success-actions",children:[(0,gi.jsx)(Re,{to:"/products",className:"btn btn-primary",children:"Continue Shopping"}),(0,gi.jsx)(Re,{to:"/orders",className:"btn btn-secondary",children:"View Orders"})]}),(0,gi.jsx)("div",{className:"support-info",children:(0,gi.jsxs)("p",{children:["Need help with your order?",(0,gi.jsx)(Re,{to:"/contact",className:"support-link",children:" Contact our support team"})]})})]})]})})},_N=()=>{var e,t,n;const{user:i}=xi(),{formatPrice:s}=Oi(),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)("all"),[m,f]=(0,r.useState)(""),[g,v]=(0,r.useState)("date"),[x,y]=(0,r.useState)("desc"),[_,b]=(0,r.useState)({}),[w,A]=(0,r.useState)({}),[S,E]=(0,r.useState)({open:!1,orderId:null}),[C,T]=(0,r.useState)({open:!1,order:null}),[M,P]=(0,r.useState)({open:!1,message:""});(0,r.useEffect)(()=>{i&&(async()=>{c(!0),d("");try{const e=await fi.get("/api/customer/orders-with-items");e.success&&Array.isArray(e.orders)?o(e.orders):o([])}catch(e){d("Failed to load orders. Please try again."),console.error("Error fetching orders:",e)}finally{c(!1)}})()},[i]);const N=e=>{switch(e){case"Pending":case"Processing":return"status-badge status-pending";case"Shipping":case"Delivering":return"status-badge status-shipping";case"Completed":case"Delivered":return"status-badge status-completed";case"Cancelled":return"status-badge status-cancelled";default:return"status-badge"}},R=e=>{switch(e){case"Pending":case"Processing":return(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M12 6v6l4 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});case"Shipping":case"Delivering":return(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("rect",{x:"1",y:"3",width:"15",height:"13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("path",{d:"M16 8H20L23 11V16H16V8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("circle",{cx:"5.5",cy:"18.5",r:"2.5",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("circle",{cx:"18.5",cy:"18.5",r:"2.5",stroke:"currentColor",strokeWidth:"2"})]});case"Completed":case"Delivered":return(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"Cancelled":return(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"M15 9L9 15M9 9L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});default:return(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M21 16V8C20.9996 7.64927 20.9071 7.30481 20.7315 7.00116C20.556 6.69751 20.3037 6.44536 20 6.27L13 2.27C12.696 2.09446 12.3511 2.00205 12 2.00205C11.6489 2.00205 11.304 2.09446 11 2.27L4 6.27C3.69626 6.44536 3.44398 6.69751 3.26846 7.00116C3.09294 7.30481 3.00036 7.64927 3 8V16C3.00036 16.3507 3.09294 16.6952 3.26846 16.9988C3.44398 17.3025 3.69626 17.5546 4 17.73L11 21.73C11.304 21.9055 11.6489 21.9979 12 21.9979C12.3511 21.9979 12.696 21.9055 13 21.73L20 17.73C20.3037 17.5546 20.556 17.3025 20.7315 16.9988C20.9071 16.6952 20.9996 16.3507 21 16Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("polyline",{points:"3.27,6.96 12,12.01 20.73,6.96",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}},L=(()=>{let e=a;return"pending"===h?e=e.filter(e=>"Pending"===e.Status||"Processing"===e.Status):"shipped"===h?e=e.filter(e=>"Shipping"===e.Status||"Delivering"===e.Status):"completed"===h?e=e.filter(e=>"Completed"===e.Status||"Delivered"===e.Status):"cancelled"===h&&(e=e.filter(e=>"Cancelled"===e.Status)),m&&(e=e.filter(e=>{var t;return e.OrderID.toString().includes(m)||(null===(t=e.items)||void 0===t?void 0:t.some(e=>e.name.toLowerCase().includes(m.toLowerCase())))})),e.sort((e,t)=>{let n,i;switch(g){case"date":default:n=new Date(e.OrderDate),i=new Date(t.OrderDate);break;case"amount":n=parseFloat(e.TotalAmount),i=parseFloat(t.TotalAmount);break;case"status":n=e.Status,i=t.Status}return"asc"===x?n>i?1:-1:n<i?1:-1}),e})();return l?(0,gi.jsx)("div",{className:"orders-page",children:(0,gi.jsxs)("div",{className:"loading-state",children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:80,width:80}),(0,gi.jsx)("p",{children:"Loading your orders..."})]})}):u?(0,gi.jsx)("div",{className:"orders-page",children:(0,gi.jsxs)("div",{className:"error-state",children:[(0,gi.jsx)("h2",{children:"Error Loading Orders"}),(0,gi.jsx)("p",{children:u}),(0,gi.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Try Again"})]})}):(0,gi.jsxs)("div",{className:"orders-page",children:[(0,gi.jsx)(pc,{breadcrumbs:[{label:"Home",href:"/"},{label:"Account",href:"/account"},{label:"My Orders"}],title:"My Orders",subtitle:"".concat(a.length," orders")}),(0,gi.jsxs)("div",{className:"orders-container",children:[(0,gi.jsxs)("div",{className:"orders-controls",children:[(0,gi.jsxs)("div",{className:"search-box",children:[(0,gi.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",strokeWidth:"2"}),(0,gi.jsx)("path",{d:"m21 21-4.35-4.35",stroke:"currentColor",strokeWidth:"2"})]}),(0,gi.jsx)("input",{type:"text",placeholder:"Search orders...",value:m,onChange:e=>f(e.target.value)})]}),(0,gi.jsxs)("div",{className:"filter-tabs",children:[(0,gi.jsxs)("button",{className:"tab ".concat("all"===h?"active":""),onClick:()=>p("all"),children:["All (",a.length,")"]}),(0,gi.jsxs)("button",{className:"tab ".concat("pending"===h?"active":""),onClick:()=>p("pending"),children:["Pending (",a.filter(e=>"Pending"===e.Status||"Processing"===e.Status).length,")"]}),(0,gi.jsxs)("button",{className:"tab ".concat("shipped"===h?"active":""),onClick:()=>p("shipped"),children:["Shipped (",a.filter(e=>"Shipping"===e.Status||"Delivering"===e.Status).length,")"]}),(0,gi.jsxs)("button",{className:"tab ".concat("completed"===h?"active":""),onClick:()=>p("completed"),children:["Completed (",a.filter(e=>"Completed"===e.Status||"Delivered"===e.Status).length,")"]})]})]}),(0,gi.jsx)("div",{className:"orders-list",children:0===L.length?(0,gi.jsxs)("div",{className:"empty-state",children:[(0,gi.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,gi.jsx)("path",{d:"M21 16V8C20.9996 7.64927 20.9071 7.30481 20.7315 7.00116C20.556 6.69751 20.3037 6.44536 20 6.27L13 2.27C12.696 2.09446 12.3511 2.00205 12 2.00205C11.6489 2.00205 11.304 2.09446 11 2.27L4 6.27C3.69626 6.44536 3.44398 6.69751 3.26846 7.00116C3.09294 7.30481 3.00036 7.64927 3 8V16C3.00036 16.3507 3.09294 16.6952 3.26846 16.9988C3.44398 17.3025 3.69626 17.5546 4 17.73L11 21.73C11.304 21.9055 11.6489 21.9979 12 21.9979C12.3511 21.9979 12.696 21.9055 13 21.73L20 17.73C20.3037 17.5546 20.556 17.3025 20.7315 16.9988C20.9071 16.6952 20.9996 16.3507 21 16Z",stroke:"#6b7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,gi.jsx)("polyline",{points:"3.27,6.96 12,12.01 20.73,6.96",stroke:"#6b7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,gi.jsx)("h3",{children:"No orders found"}),(0,gi.jsx)("p",{children:m?"No orders match your search criteria.":"You haven't placed any orders yet."}),!m&&(0,gi.jsx)(Re,{to:"/products",className:"btn btn-primary",children:"Start Shopping"})]}):L.map(e=>{var t,n;return(0,gi.jsxs)("div",{className:"order-card",children:[(0,gi.jsxs)("div",{className:"order-header",children:[(0,gi.jsxs)("div",{className:"order-info",children:[(0,gi.jsxs)("h3",{children:["Order #",e.OrderID]}),(0,gi.jsx)("p",{className:"order-date",children:new Date(e.OrderDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),(0,gi.jsxs)("div",{className:"".concat(N(e.Status)),children:[R(e.Status),(0,gi.jsx)("span",{children:e.Status})]})]}),(0,gi.jsxs)("div",{className:"order-items",children:[null===(t=e.items)||void 0===t?void 0:t.slice(0,3).map((e,t)=>{var n;return(0,gi.jsxs)("div",{className:"order-item",children:[(0,gi.jsx)("div",{className:"item-image",children:(0,gi.jsx)("img",{src:Sr(e.image),alt:e.name,onError:e=>{e.target.src="/logo192.png"}})}),(0,gi.jsxs)("div",{className:"item-details",children:[(0,gi.jsx)("h4",{children:e.name}),(0,gi.jsxs)("p",{children:["Qty: ",e.quantity]}),(0,gi.jsxs)("p",{className:"item-price",children:["\u20b1",null===(n=e.price)||void 0===n?void 0:n.toLocaleString()]})]})]},t)}),(null===(n=e.items)||void 0===n?void 0:n.length)>3&&(0,gi.jsxs)("div",{className:"more-items",children:["+",e.items.length-3," more items"]})]}),(0,gi.jsxs)("div",{className:"order-footer",children:[(0,gi.jsx)("div",{className:"order-total",children:(0,gi.jsxs)("span",{children:["Total: \u20b1",parseFloat(e.TotalAmount).toLocaleString()]})}),(0,gi.jsxs)("div",{className:"order-actions",children:[(0,gi.jsx)("button",{className:"btn btn-outline",onClick:()=>T({open:!0,order:e}),children:"View Details"}),"Pending"===e.Status&&(0,gi.jsx)("button",{className:"btn btn-danger",onClick:()=>E({open:!0,orderId:e.OrderID}),disabled:_[e.OrderID],children:_[e.OrderID]?"Cancelling...":"Cancel"}),("Shipping"===e.Status||"Delivering"===e.Status)&&(0,gi.jsx)("button",{className:"btn btn-success",onClick:()=>(async e=>{A(t=>Fe(Fe({},t),{},{[e]:!0}));try{(await fi.put("/api/customer/orders/".concat(e,"/receive"))).success?(o(t=>t.map(t=>t.OrderID===e?Fe(Fe({},t),{},{Status:"Delivered"}):t)),P({open:!0,message:"Order marked as received"})):P({open:!0,message:"Failed to mark order as received"})}catch(t){console.error("Error receiving order:",t),P({open:!0,message:"Failed to mark order as received"})}finally{A(t=>Fe(Fe({},t),{},{[e]:!1}))}})(e.OrderID),disabled:w[e.OrderID],children:w[e.OrderID]?"Processing...":"Mark as Received"})]})]})]},e.OrderID)})})]}),(0,gi.jsx)(jc,{isOpen:S.open,onClose:()=>E({open:!1,orderId:null}),onConfirm:()=>(async e=>{b(t=>Fe(Fe({},t),{},{[e]:!0})),E({open:!1,orderId:null});try{(await fi.put("/api/customer/orders/".concat(e,"/cancel"))).success?(o(t=>t.map(t=>t.OrderID===e?Fe(Fe({},t),{},{Status:"Cancelled"}):t)),P({open:!0,message:"Order cancelled successfully"})):P({open:!0,message:"Failed to cancel order"})}catch(t){console.error("Error cancelling order:",t),P({open:!0,message:"Failed to cancel order"})}finally{b(t=>Fe(Fe({},t),{},{[e]:!1}))}})(S.orderId),title:"Cancel Order",message:"Are you sure you want to cancel this order? This action cannot be undone.",confirmText:"Yes, Cancel Order",cancelText:"Keep Order"}),(0,gi.jsx)(jc,{isOpen:C.open,onClose:()=>T({open:!1,order:null}),onConfirm:()=>T({open:!1,order:null}),title:"Order #".concat(null===(e=C.order)||void 0===e?void 0:e.OrderID," Details"),message:C.order?(0,gi.jsxs)("div",{className:"order-details-modal",children:[(0,gi.jsxs)("div",{className:"order-summary-section",children:[(0,gi.jsxs)("h4",{children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17ZM17 21V9H13V5H7V19H17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Order Summary"]}),(0,gi.jsxs)("div",{className:"summary-grid",children:[(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"label",children:"Order Date:"}),(0,gi.jsx)("span",{className:"value",children:new Date(C.order.OrderDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"label",children:"Status:"}),(0,gi.jsxs)("span",{className:"value status ".concat(N(C.order.Status).split(" ")[1]),children:[R(C.order.Status),C.order.Status]})]}),(0,gi.jsxs)("div",{className:"summary-item",children:[(0,gi.jsx)("span",{className:"label",children:"Total Amount:"}),(0,gi.jsxs)("span",{className:"value total",children:["\u20b1",parseFloat(C.order.TotalAmount).toLocaleString()]})]})]})]}),(0,gi.jsxs)("div",{className:"order-items-section",children:[(0,gi.jsxs)("h4",{children:[(0,gi.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,gi.jsx)("path",{d:"M20 7L4 7M10 11H6M14 15H6M4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Order Items (",null===(t=C.order.items)||void 0===t?void 0:t.length," items)"]}),(0,gi.jsx)("div",{className:"items-list",children:null===(n=C.order.items)||void 0===n?void 0:n.map((e,t)=>{var n;return(0,gi.jsxs)("div",{className:"item-row",children:[(0,gi.jsx)("div",{className:"item-image",children:(0,gi.jsx)("img",{src:Sr(e.image),alt:e.name,onError:e=>{e.target.src="/logo192.png"}})}),(0,gi.jsxs)("div",{className:"item-info",children:[(0,gi.jsx)("h5",{children:e.name}),(0,gi.jsxs)("div",{className:"item-meta",children:[(0,gi.jsxs)("span",{className:"quantity",children:["Qty: ",e.quantity]}),(0,gi.jsxs)("span",{className:"price",children:["\u20b1",null===(n=e.price)||void 0===n?void 0:n.toLocaleString()]})]}),(0,gi.jsxs)("div",{className:"item-total",children:["\u20b1",(e.price*e.quantity).toLocaleString()]})]})]},t)})})]})]}):"",confirmText:"Close",cancelText:"",showCancel:!1}),(0,gi.jsx)(jc,{isOpen:M.open,onClose:()=>P({open:!1,message:""}),onConfirm:()=>P({open:!1,message:""}),title:"Success",message:M.message,confirmText:"OK",cancelText:"",showCancel:!1})]})},bN=e=>{const t={width:"16px",height:"16px",marginRight:"8px"};return"Cancelled"===e?(0,gi.jsx)(Vl,{size:16,color:"#ef4444",style:t}):"Pending"===e?(0,gi.jsx)(Ol,{size:16,color:"#f59e0b",style:t}):"Processing"===e?(0,gi.jsx)(jl,{size:16,color:"#3b82f6",style:t}):"Shipping"===e||"Delivering"===e?(0,gi.jsx)(Kl,{size:16,color:"#8b5cf6",style:t}):"Completed"===e||"Delivered"===e?(0,gi.jsx)(Fl,{size:16,color:"#10b981",style:t}):"Receive"===e||"Received"===e?(0,gi.jsx)(jl,{size:16,color:"#f59e0b",style:t}):(0,gi.jsx)(jl,{size:16,color:"#6b7280",style:t})},wN=e=>"Cancelled"===e?"#ef4444":"Pending"===e?"#f59e0b":"Processing"===e?"#3b82f6":"Shipping"===e||"Delivering"===e?"#8b5cf6":"Completed"===e||"Delivered"===e?"#10b981":"Receive"===e||"Received"===e?"#f59e0b":"#6b7280",AN=[{key:"Pending",label:"Pending"},{key:"Processing",label:"Processing"},{key:"Shipping",label:"Shipping"},{key:"Delivering",label:"Delivering"},{key:"To Receive",label:"To Receive"}],SN=e=>{let{open:t,onClose:n,onConfirm:i,countdown:r}=e;return t?(0,gi.jsx)("div",{className:"modal-overlay",children:(0,gi.jsxs)("div",{className:"modal-content confirm-modal",children:[(0,gi.jsx)("div",{className:"modal-header",children:(0,gi.jsx)("h3",{children:"Cancel Order?"})}),(0,gi.jsx)("div",{className:"modal-body",children:(0,gi.jsxs)("p",{className:"confirm-message",children:["Are you sure you want to cancel this order? ",(0,gi.jsx)("br",{}),"This action cannot be undone."]})}),(0,gi.jsxs)("div",{className:"modal-footer",children:[(0,gi.jsx)("button",{className:"btn btn-secondary",onClick:n,children:"No, go back"}),(0,gi.jsx)("button",{className:"btn btn-primary",onClick:i,disabled:r>0,children:r>0?"OK (".concat(r,")"):"OK"})]})]})}):null},EN=e=>{let{open:t,onClose:n,order:i}=e;if(!t||!i)return null;const{user:s,address:a,items:o,Status:l,OrderID:c,OrderDate:u,PaymentMethod:d,TotalAmount:h,DeliveryType:p,DeliveryCost:m,DeliveryTypeName:f}=i,g=AN.findIndex(e=>e.key.toLowerCase()===l.toLowerCase());return(0,gi.jsx)("div",{className:"modal-overlay",children:(0,gi.jsxs)("div",{className:"modal-content",children:[(0,gi.jsxs)("div",{className:"modal-header",children:[(0,gi.jsxs)("div",{className:"modal-header-content",children:[(0,gi.jsx)("div",{className:"modal-icon",children:(0,gi.jsx)(jl,{size:24,color:"#ffffff"})}),(0,gi.jsxs)("div",{children:[(0,gi.jsxs)("h3",{children:["Order #",c]}),(0,gi.jsx)("p",{className:"modal-subtitle",children:"Order Details"})]})]}),(0,gi.jsx)("button",{className:"btn btn-secondary modal-close-btn",onClick:n,children:"Close"})]}),(0,gi.jsxs)("div",{className:"modal-body",children:[(0,gi.jsxs)("div",{className:"detail-section",children:[(0,gi.jsxs)("div",{className:"detail-section-header",children:[(0,gi.jsx)(Ql,{size:16,color:"#6b7280"}),(0,gi.jsx)("span",{className:"detail-section-title",children:"Order Date"})]}),(0,gi.jsx)("div",{className:"detail-section-content",children:new Date(u).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,gi.jsxs)("div",{className:"detail-section",children:[(0,gi.jsxs)("div",{className:"detail-section-header",children:[(0,gi.jsx)(Ll,{size:16,color:"#6b7280"}),(0,gi.jsx)("span",{className:"detail-section-title",children:"Customer Information"})]}),(0,gi.jsxs)("div",{className:"detail-section-content customer-info",children:[(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Name:"}),(0,gi.jsx)("span",{className:"detail-value",children:(null===s||void 0===s?void 0:s.fullName)||"-"})]}),(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Email:"}),(0,gi.jsx)("span",{className:"detail-value",children:(null===s||void 0===s?void 0:s.email)||"-"})]}),(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Phone:"}),(0,gi.jsx)("span",{className:"detail-value",children:(null===s||void 0===s?void 0:s.phoneNumber)||"-"})]})]})]}),(0,gi.jsxs)("div",{className:"detail-section",children:[(0,gi.jsxs)("div",{className:"detail-section-header",children:[(0,gi.jsx)(Il,{size:16,color:"#6b7280"}),(0,gi.jsx)("span",{className:"detail-section-title",children:"Shipping Address"})]}),(0,gi.jsx)("div",{className:"detail-section-content",children:a?(0,gi.jsxs)("div",{className:"address-details",children:[a.Label&&(0,gi.jsx)("div",{className:"address-label",children:a.Label}),(0,gi.jsx)("div",{className:"address-text",children:[a.HouseNumber,a.Street,a.Barangay,a.City,a.Province,a.Region,a.PostalCode,a.Country].filter(Boolean).join(", ")})]}):(0,gi.jsx)("div",{className:"no-address",children:"No shipping address provided"})})]}),(0,gi.jsxs)("div",{className:"detail-section",children:[(0,gi.jsxs)("div",{className:"detail-section-header",children:[(0,gi.jsx)(Ul,{size:16,color:"#6b7280"}),(0,gi.jsxs)("span",{className:"detail-section-title",children:["Products (",(null===o||void 0===o?void 0:o.length)||0,")"]})]}),(0,gi.jsx)("div",{className:"order-items-list",children:o&&o.length>0?o.map((e,t)=>(0,gi.jsxs)("div",{className:"order-item-detail",children:[e.image?(0,gi.jsx)("img",{src:Sr(e.image),alt:e.name,className:"item-image"}):(0,gi.jsx)("div",{className:"item-image-placeholder",children:(0,gi.jsx)(jl,{size:24,color:"#9ca3af"})}),(0,gi.jsxs)("div",{className:"item-info",children:[(0,gi.jsx)("div",{className:"item-name",children:e.name}),(0,gi.jsx)("div",{className:"item-details",children:(0,gi.jsxs)("div",{className:"item-quantity",children:["Quantity: ",e.quantity]})})]}),(0,gi.jsxs)("div",{className:"item-price",children:["\u20b1",Number(e.price).toLocaleString(void 0,{minimumFractionDigits:2})]})]},t)):(0,gi.jsxs)("div",{className:"no-items",children:[(0,gi.jsx)(jl,{size:32,color:"#9ca3af"}),(0,gi.jsx)("div",{children:"No products found"})]})})]}),(0,gi.jsxs)("div",{className:"detail-section",children:[(0,gi.jsxs)("div",{className:"detail-section-header",children:[(0,gi.jsx)(kl,{size:16,color:"#6b7280"}),(0,gi.jsx)("span",{className:"detail-section-title",children:"Payment & Delivery Details"})]}),(0,gi.jsxs)("div",{className:"payment-delivery-grid",children:[(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Payment Method"}),(0,gi.jsx)("span",{className:"detail-value",children:d||"Not specified"})]}),(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Delivery Method"}),(0,gi.jsx)("span",{className:"detail-value",children:f||"Pick up"})]})]}),(0,gi.jsxs)("div",{className:"order-totals",children:[(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Delivery Cost"}),(0,gi.jsxs)("span",{className:"detail-value",children:["\u20b1",Number(m||0).toLocaleString(void 0,{minimumFractionDigits:2})]})]}),(0,gi.jsxs)("div",{className:"detail-item",children:[(0,gi.jsx)("span",{className:"detail-label",children:"Order Total"}),(0,gi.jsxs)("span",{className:"detail-value total-amount",children:["\u20b1",Number(h).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]}),(0,gi.jsxs)("div",{className:"detail-section",children:[(0,gi.jsxs)("div",{className:"detail-section-header",children:[(0,gi.jsx)(Wl,{size:16,color:"#6b7280"}),(0,gi.jsx)("span",{className:"detail-section-title",children:"Order Status Flow"})]}),(0,gi.jsx)("div",{className:"status-flow",children:AN.map((e,t)=>(0,gi.jsxs)(r.Fragment,{children:[(0,gi.jsxs)("div",{className:"status-step",children:[(0,gi.jsx)("div",{className:"status-icon ".concat(t<=g?"completed":""," ").concat(t===g?"current":""),children:t<g?(0,gi.jsx)(Fl,{size:16,color:"#ffffff"}):t===g?(0,gi.jsx)(Ol,{size:16,color:"#ffffff"}):(0,gi.jsx)("div",{className:"status-dot"})}),(0,gi.jsx)("div",{className:"status-label ".concat(t===g?"current":""),children:e.label})]}),t<AN.length-1&&(0,gi.jsx)("div",{className:"status-connector ".concat(t<g?"completed":"")})]},e.key))})]})]})]})})},CN=[{key:"all",label:"All Orders"},{key:"completed",label:"Completed"},{key:"cancelled",label:"Cancelled"}],TN=e=>{let{open:t,onClose:n,message:i}=e;return t?(0,gi.jsx)("div",{className:"modal-overlay",children:(0,gi.jsxs)("div",{className:"modal-content success-modal",children:[(0,gi.jsx)("div",{className:"modal-header",children:(0,gi.jsx)("h3",{children:"Order Received!"})}),(0,gi.jsx)("div",{className:"modal-body",children:(0,gi.jsx)("p",{className:"success-message",children:i||"You have successfully received your order."})}),(0,gi.jsx)("div",{className:"modal-footer",children:(0,gi.jsx)("button",{className:"btn btn-primary",onClick:n,children:"OK"})})]})}):null},MN=()=>{const e=ne(),[t,n]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)({}),[u,d]=(0,r.useState)({open:!1,orderId:null}),[h,p]=(0,r.useState)(5),[m,f]=(0,r.useState)("all"),[g,v]=(0,r.useState)({open:!1,order:null}),[x,y]=(0,r.useState)({}),[_,b]=(0,r.useState)({open:!1,message:""});(0,r.useEffect)(()=>{(async()=>{s(!0),o("");try{const e=await fi.get("/api/customer/orders-with-items");e.success&&Array.isArray(e.orders)?n(e.orders):n([])}catch(e){o("Failed to load orders.")}finally{s(!1)}})()},[]),(0,r.useEffect)(()=>{let e;return u.open&&h>0&&(e=setTimeout(()=>p(h-1),1e3)),()=>clearTimeout(e)},[u.open,h]);const w=()=>{d({open:!1,orderId:null}),p(5)};let A=t;return"completed"===m?A=t.filter(e=>"Completed"===e.Status||"Delivered"===e.Status):"cancelled"===m?A=t.filter(e=>"Cancelled"===e.Status):"all"===m&&(A=t.filter(e=>"Cancelled"!==e.Status)),i?(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",minHeight:"400px",textAlign:"center"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:window.innerWidth<768?32:40,width:window.innerWidth<768?32:40}),(0,gi.jsx)("div",{style:{fontSize:window.innerWidth<768?"14px":"16px",color:"#6b7280",marginTop:"16px",fontWeight:"500",maxWidth:"280px",lineHeight:"1.5"},children:"Loading your orders..."})]}):a?(0,gi.jsxs)("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#fef2f2",borderRadius:"12px",border:"1px solid #fecaca",color:"#dc2626"},children:[(0,gi.jsx)(Vl,{size:32,color:"#dc2626",style:{marginBottom:"12px"}}),(0,gi.jsx)("div",{style:{fontSize:"16px",fontWeight:"600"},children:"Error Loading Orders"}),(0,gi.jsx)("div",{style:{fontSize:"14px",marginTop:"4px"},children:a})]}):t.length?(0,gi.jsxs)("div",{children:[(0,gi.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,gi.jsxs)("h3",{className:"section-title",style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,gi.jsx)(jl,{size:24,color:"#F0B21B"}),"Order History"]}),(0,gi.jsx)("p",{style:{color:"#6b7280",fontSize:"14px",margin:0},children:"Track and manage all your orders"})]}),(0,gi.jsx)("div",{className:"order-history-tabs",style:{display:"flex",gap:8,marginBottom:32,backgroundColor:"#f9fafb",padding:"4px",borderRadius:"12px",border:"1px solid #e5e7eb"},children:CN.map(e=>(0,gi.jsxs)("button",{className:"btn btn-secondary".concat(m===e.key?" active-tab":""),style:{flex:1,padding:"12px 16px",borderRadius:"8px",border:"none",background:m===e.key?"#F0B21B":"transparent",color:m===e.key?"#fff":"#6b7280",fontWeight:m===e.key?600:500,fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onClick:()=>f(e.key),children:["all"===e.key&&(0,gi.jsx)(jl,{size:16,color:m===e.key?"#fff":"#6b7280"}),"completed"===e.key&&(0,gi.jsx)(Fl,{size:16,color:m===e.key?"#fff":"#6b7280"}),"cancelled"===e.key&&(0,gi.jsx)(Vl,{size:16,color:m===e.key?"#fff":"#6b7280"}),e.label]},e.key))}),(0,gi.jsx)("div",{className:"orders-list",style:{display:"flex",flexDirection:"column",gap:"24px"},children:0===A.length?(0,gi.jsxs)("div",{style:{padding:"60px 40px",textAlign:"center",backgroundColor:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[(0,gi.jsx)(jl,{size:48,color:"#9ca3af",style:{marginBottom:"16px"}}),(0,gi.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"No Orders Found"}),(0,gi.jsx)("div",{style:{fontSize:"14px",color:"#6b7280"},children:"No orders match the current filter"})]}):A.map(t=>{var i;return(0,gi.jsxs)("div",{className:"order-card",style:{backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e5e7eb",borderLeft:"6px solid ".concat(wN(t.Status)),padding:"24px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",e.currentTarget.style.transform="translateY(0)"},children:[(0,gi.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[(0,gi.jsx)("div",{children:(0,gi.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[(0,gi.jsx)("div",{style:{width:"40px",height:"40px",backgroundColor:"#F0B21B",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,gi.jsx)(jl,{size:20,color:"#ffffff"})}),(0,gi.jsxs)("div",{children:[(0,gi.jsxs)("div",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:["Order #",t.OrderID]}),(0,gi.jsxs)("div",{style:{fontSize:"14px",color:"#6b7280",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(Ql,{size:14,color:"#6b7280"}),new Date(t.OrderDate).toLocaleDateString("en-US",{timeZone:"Asia/Manila",year:"numeric",month:"short",day:"numeric"})]})]})]})}),(0,gi.jsx)("div",{children:(0,gi.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",padding:"8px 16px",borderRadius:"20px",backgroundColor:wN(t.Status)+"15",color:wN(t.Status),fontWeight:"600",fontSize:"14px",border:"1px solid ".concat(wN(t.Status),"40")},children:[bN(t.Status),t.Status]})})]}),(0,gi.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,gi.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(Ul,{size:16,color:"#6b7280"}),"Items (",(null===(i=t.items)||void 0===i?void 0:i.length)||0,")"]}),(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[t.items&&t.items.length>0?t.items.slice(0,3).map((e,t)=>(0,gi.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.image?(0,gi.jsx)("img",{src:Sr(e.image),alt:e.name,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"6px",background:"#e5e7eb"}}):(0,gi.jsx)("div",{style:{width:"40px",height:"40px",backgroundColor:"#e5e7eb",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,gi.jsx)(jl,{size:16,color:"#9ca3af"})}),(0,gi.jsxs)("div",{style:{flex:1},children:[(0,gi.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"2px"},children:e.name}),(0,gi.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Quantity: ",e.quantity]})]}),(0,gi.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:["\u20b1",Number(e.price).toLocaleString(void 0,{minimumFractionDigits:2})]})]},t)):(0,gi.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#9ca3af",fontSize:"14px"},children:"No products found"}),t.items&&t.items.length>3&&(0,gi.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",textAlign:"center",padding:"8px",fontStyle:"italic"},children:["+",t.items.length-3," more items"]})]})]}),(0,gi.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #e5e7eb"},children:[(0,gi.jsxs)("div",{style:{fontSize:"16px",fontWeight:"700",color:"#1f2937",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(kl,{size:16,color:"#6b7280"}),"Total: \u20b1",Number(t.TotalAmount).toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,gi.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,gi.jsxs)("button",{className:"btn btn-secondary",onClick:()=>v({open:!0,order:t}),style:{padding:"10px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#ffffff",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease"},children:[(0,gi.jsx)(Jl,{size:16,color:"#374151"}),"View Details"]}),"Cancelled"!==t.Status&&"Completed"!==t.Status&&"Delivered"!==t.Status&&"Shipping"!==t.Status&&"Delivering"!==t.Status&&(0,gi.jsxs)("button",{className:"btn btn-primary",disabled:l[t.OrderID],onClick:()=>{return e=t.OrderID,d({open:!0,orderId:e}),void p(5);var e},style:{padding:"10px 16px",borderRadius:"8px",border:"none",background:"#ef4444",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,gi.jsx)(Vl,{size:16,color:"#ffffff",style:{marginRight:"6px"}}),l[t.OrderID]?"Cancelling...":"Cancel"]}),("Shipping"===t.Status||"Delivering"===t.Status)&&(0,gi.jsxs)("span",{style:{padding:"10px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#f0f9ff",color:"#0369a1",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(Kl,{size:16,color:"#0369a1"}),"Cannot Cancel - Order is Shipping"]}),("Receive"===t.Status||"Received"===t.Status)&&(0,gi.jsxs)("button",{className:"btn btn-success",disabled:x[t.OrderID],onClick:()=>(async e=>{y(t=>Fe(Fe({},t),{},{[e]:!0}));try{const t=await fi.put("/api/customer/orders/".concat(e,"/receive"));t.success?(n(t=>t.map(t=>t.OrderID===e?Fe(Fe({},t),{},{Status:"Completed"}):t)),b({open:!0,message:"Order has been marked as completed. Thank you for confirming receipt!"})):alert(t.message||"Failed to mark order as received.")}catch(t){alert("Failed to mark order as received.")}finally{y(t=>Fe(Fe({},t),{},{[e]:!1}))}})(t.OrderID),style:{padding:"10px 16px",borderRadius:"8px",border:"none",background:"#10b981",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,gi.jsx)(Fl,{size:16,color:"#ffffff",style:{marginRight:"6px"}}),x[t.OrderID]?"Processing...":"Receive Order"]}),("Completed"===t.Status||"Delivered"===t.Status)&&t.items&&t.items.length>0&&(0,gi.jsxs)("button",{className:"btn btn-primary",onClick:()=>e("/product/".concat(t.items[0].ProductID)),style:{padding:"10px 16px",borderRadius:"8px",border:"none",background:"#F0B21B",color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(ql,{size:16,color:"#ffffff"}),"Review Product"]}),"Cancelled"===t.Status&&(0,gi.jsxs)("span",{style:{padding:"10px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",background:"#f9fafb",color:"#9ca3af",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(Vl,{size:16,color:"#9ca3af"}),"Cancelled"]}),("Completed"===t.Status||"Delivered"===t.Status)&&(0,gi.jsxs)("span",{style:{padding:"10px 16px",borderRadius:"8px",border:"1px solid #10b981",background:"#10b98115",color:"#10b981",fontSize:"14px",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},children:[(0,gi.jsx)(Fl,{size:16,color:"#10b981"}),"Completed"]})]})]})]},t.OrderID)})}),(0,gi.jsx)(SN,{open:u.open,onClose:w,onConfirm:async()=>{const e=u.orderId;c(t=>Fe(Fe({},t),{},{[e]:!0})),w();try{const t=await fi.put("/api/customer/orders/".concat(e,"/cancel"));t.success?n(t=>t.map(t=>t.OrderID===e?Fe(Fe({},t),{},{Status:"Cancelled"}):t)):alert(t.message||"Failed to cancel order.")}catch(t){alert("Failed to cancel order.")}finally{c(t=>Fe(Fe({},t),{},{[e]:!1}))}},countdown:h}),(0,gi.jsx)(EN,{open:g.open,onClose:()=>v({open:!1,order:null}),order:g.order}),(0,gi.jsx)(TN,{open:_.open,onClose:()=>b({open:!1,message:""}),message:_.message})]}):(0,gi.jsxs)("div",{style:{padding:"60px 40px",textAlign:"center",backgroundColor:"#f9fafb",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[(0,gi.jsx)(jl,{size:48,color:"#9ca3af",style:{marginBottom:"16px"}}),(0,gi.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"No Orders Yet"}),(0,gi.jsx)("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"24px"},children:"Start shopping to see your orders here"}),(0,gi.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.href="/products",style:{padding:"12px 24px",backgroundColor:"#F0B21B",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Browse Products"})]})},PN=()=>{const[e,t]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",gender:""}),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),{user:v,setUser:x}=xi();ne();(0,r.useEffect)(()=>{console.log("editingProfile state changed to:",n)},[n]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{a(!0),l("");try{let i;try{i=await fi.get("/api/customer/profile")}catch(n){if(!n.message||!n.message.toLowerCase().includes("404"))throw n;i=null}if(i&&i.success&&i.customer){const n=i.customer,r=(n.FullName||"").split(" ");e&&(t({firstName:r[0]||"",lastName:r.slice(1).join(" ")||"",email:n.Email||"",phone:n.PhoneNumber||"",gender:n.Gender||""}),h(n.ProfileImage||null),x&&v&&x(Fe(Fe({},v),{},{profilePicture:n.ProfileImage||null})),u(!0))}else{let i;try{i=await fi.get("/api/user/profile")}catch(n){return l("Failed to load profile."),void u(!1)}if(i&&i.success&&i.user){const n=i.user,r=(n.fullName||"").split(" ");e&&(t({firstName:r[0]||"",lastName:r.slice(1).join(" ")||"",email:n.email||"",phone:n.phoneNumber||"",gender:n.gender||""}),u(!1))}else e&&(l("Failed to load profile."),u(!1))}}catch(n){e&&l("Failed to load profile.")}finally{e&&a(!1)}})(),()=>{e=!1}},[]);const y=n=>{t(Fe(Fe({},e),{},{[n.target.name]:n.target.value}))};return s?(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",minHeight:"400px",textAlign:"center"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:window.innerWidth<768?32:40,width:window.innerWidth<768?32:40}),(0,gi.jsx)("div",{style:{fontSize:window.innerWidth<768?"14px":"16px",color:"#6b7280",marginTop:"16px",fontWeight:"500",maxWidth:"280px",lineHeight:"1.5"},children:"Loading your profile..."})]}):(0,gi.jsxs)("div",{className:"profile-management",children:[(0,gi.jsx)("div",{className:"section-header",children:(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h2",{className:"section-title",children:"Personal Information"}),(0,gi.jsx)("p",{className:"section-subtitle",children:"Manage your personal details and preferences"})]})}),o&&(0,gi.jsx)("div",{className:"message ".concat(o.includes("success")?"success":"error"),children:o}),(0,gi.jsxs)("div",{className:"profile-picture-container",children:[(0,gi.jsxs)("div",{className:"profile-picture",children:[p||null!==v&&void 0!==v&&v.profilePicture||d?(0,gi.jsx)("img",{src:Sr(p||(null===v||void 0===v?void 0:v.profilePicture)||d),alt:"Profile"}):(0,gi.jsx)("div",{className:"profile-picture-placeholder",children:e.firstName?e.firstName.charAt(0).toUpperCase():"U"}),(0,gi.jsxs)("div",{className:"profile-picture-actions",children:[(0,gi.jsx)("input",{type:"file",id:"profile-image-upload",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.type.startsWith("image/"))if(t.size>5242880)l("Image size must be less than 5MB.");else{g(!0),l("");try{const e=new FileReader;e.onload=e=>{m(e.target.result)},e.readAsDataURL(t);const n=new FormData;n.append("profileImage",t);const i=await fi.post("/api/customer/upload-profile-image",n,{headers:{}});i.success?(h(i.imageUrl),l("Profile image updated successfully!"),x&&v&&x(Fe(Fe({},v),{},{profilePicture:i.imageUrl}))):l(i.message||"Failed to upload image.")}catch(RT){console.error("Image upload error:",RT),l("Failed to upload image. Please try again.")}finally{g(!1)}}else l("Please select a valid image file.")},style:{display:"none"},disabled:f}),(0,gi.jsx)("label",{htmlFor:"profile-image-upload",className:"edit-picture-btn",title:"Upload new image",children:(0,gi.jsx)(Hl,{size:16,color:"#ffffff"})}),((null===v||void 0===v?void 0:v.profilePicture)||d)&&(0,gi.jsx)("button",{className:"remove-picture-btn",type:"button",onClick:async()=>{try{g(!0);const e=await fi.delete("/api/customer/remove-profile-image");e.success?(h(null),m(null),l("Profile image removed successfully!"),x&&v&&x(Fe(Fe({},v),{},{profilePicture:null}))):l(e.message||"Failed to remove image.")}catch(RT){console.error("Remove image error:",RT),l("Failed to remove image. Please try again.")}finally{g(!1)}},disabled:f,title:"Remove image",children:(0,gi.jsx)(zl,{size:16,color:"#ffffff"})})]})]}),(0,gi.jsx)("div",{className:"profile-picture-info",children:(0,gi.jsx)("p",{className:"image-upload-hint",children:"Click the edit button to upload a new profile picture. Maximum file size: 5MB. Supported formats: JPG, PNG, GIF."})})]}),(0,gi.jsxs)("form",{className:"account-form",onSubmit:async t=>{if(t.preventDefault(),e.firstName&&e.lastName&&e.email)if(e.gender){a(!0),l("");try{const t="".concat(e.firstName," ").concat(e.lastName).trim();if(c){const n=await fi.put("/api/customer/profile",{fullName:t,email:e.email,phoneNumber:e.phone,gender:e.gender});n.success?(l("Profile updated successfully."),x&&v&&x(Fe(Fe({},v),{},{firstName:e.firstName,lastName:e.lastName,email:e.email}))):l(n.message||"Failed to update profile.")}else{const n=await fi.put("/api/user/profile",{fullName:t,email:e.email,phoneNumber:e.phone,gender:e.gender});n.success?(l("Profile updated successfully."),x&&v&&x(Fe(Fe({},v),{},{firstName:e.firstName,lastName:e.lastName,email:e.email}))):l(n.message||"Failed to update profile.")}i(!1)}catch(n){l("Failed to update profile: ".concat(n.message))}finally{a(!1)}}else l("Please select a gender.");else l("Please fill in all required fields.")},children:[(0,gi.jsxs)("div",{className:"form-row",children:[(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"First Name *"}),(0,gi.jsx)("input",{className:"form-input",name:"firstName",type:"text",value:e.firstName||"",onChange:y,disabled:s||!n,placeholder:"Ex. John",required:!0})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,gi.jsx)("input",{className:"form-input",name:"lastName",type:"text",value:e.lastName||"",onChange:y,disabled:s||!n,placeholder:"Ex. Doe",required:!0})]})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"Email *"}),(0,gi.jsx)("input",{className:"form-input",name:"email",type:"email",value:e.email||"",onChange:y,disabled:s||!n,placeholder:"example@gmail.com",required:!0})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"Phone *"}),(0,gi.jsx)("input",{className:"form-input",name:"phone",type:"tel",value:e.phone||"",onChange:y,disabled:s||!n,placeholder:"+0123-456-789",required:c})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"Gender *"}),(0,gi.jsxs)("select",{className:"form-input",name:"gender",value:e.gender||"",onChange:y,disabled:s||!n,required:!0,children:[(0,gi.jsx)("option",{value:"",children:"Select Gender"}),(0,gi.jsx)("option",{value:"Male",children:"Male"}),(0,gi.jsx)("option",{value:"Female",children:"Female"}),(0,gi.jsx)("option",{value:"Other",children:"Other"}),(0,gi.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(0,gi.jsx)("div",{className:"form-actions",children:n?(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)("button",{type:"submit",className:"btn-primary",disabled:s,children:s?"Updating...":"Update Changes"}),(0,gi.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>i(!1),disabled:s,children:"Cancel"})]}):(0,gi.jsx)("button",{type:"button",className:"btn-primary",onClick:e=>{e.preventDefault(),console.log("Edit Profile clicked - current state:",{editingProfile:n,loading:s}),i(!0),console.log("Set editingProfile to true")},children:"Edit Profile"})})]})]})},NN=()=>{const[e,t]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[n,i]=(0,r.useState)({current:!1,new:!1,confirm:!1}),[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)({score:0,feedback:""}),p=n=>{const{name:i,value:r}=n.target;if(t(Fe(Fe({},e),{},{[i]:r})),o&&(l(""),u("")),"newPassword"===i){const e=m(r);h(e)}},m=e=>{let t=0;const n=[];e.length>=8?t+=1:n.push("At least 8 characters"),/[a-z]/.test(e)?t+=1:n.push("Lowercase letter"),/[A-Z]/.test(e)?t+=1:n.push("Uppercase letter"),/[0-9]/.test(e)?t+=1:n.push("Number"),/[^A-Za-z0-9]/.test(e)?t+=1:n.push("Special character");return{score:t,label:["Very Weak","Weak","Fair","Good","Strong"][Math.min(t,4)],color:["#ef4444","#f97316","#eab308","#22c55e","#16a34a"][Math.min(t,4)],feedback:n.length>0?"Missing: ".concat(n.join(", ")):"Strong password!"}},f=e=>{i(Fe(Fe({},n),{},{[e]:!n[e]}))};return(0,gi.jsxs)("div",{className:"security-settings",children:[(0,gi.jsx)("div",{className:"section-header",children:(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h2",{className:"section-title",children:"Password Manager"}),(0,gi.jsx)("p",{className:"section-subtitle",children:"Change your password to keep your account secure"})]})}),o&&(0,gi.jsxs)("div",{className:"message ".concat("success"===c?"success":"error"),style:{padding:"12px 16px",borderRadius:"8px",marginBottom:"20px",border:"1px solid ".concat("success"===c?"#22c55e":"#ef4444"),backgroundColor:"success"===c?"#f0fdf4":"#fef2f2",color:"success"===c?"#166534":"#dc2626",display:"flex",alignItems:"center",gap:"8px"},children:["success"===c?(0,gi.jsx)(Fl,{size:20,color:"#22c55e"}):(0,gi.jsx)(Bl,{size:20,color:"#ef4444"}),o]}),(0,gi.jsxs)("form",{className:"password-form",onSubmit:async n=>{if(n.preventDefault(),a(!0),l(""),u(""),!e.currentPassword)return l("Please enter your current password."),u("error"),void a(!1);if(!e.newPassword)return l("Please enter a new password."),u("error"),void a(!1);if(e.newPassword!==e.confirmPassword)return l("New passwords do not match."),u("error"),void a(!1);if(e.newPassword.length<8)return l("New password must be at least 8 characters long."),u("error"),void a(!1);if(e.currentPassword===e.newPassword)return l("New password must be different from current password."),u("error"),void a(!1);try{console.log("Attempting to change password...");const n=await fi.put("/api/customer/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword});console.log("Password change response:",n),n.success?(l("Password updated successfully!"),u("success"),t({currentPassword:"",newPassword:"",confirmPassword:""}),h({score:0,feedback:""})):(l(n.message||"Failed to update password."),u("error"))}catch(s){var i,r;console.error("Password change error:",s),l((null===(i=s.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)||"Failed to update password. Please check your current password."),u("error")}finally{a(!1)}},children:[(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"Current Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",style:{position:"relative"},children:[(0,gi.jsx)("input",{type:n.current?"text":"password",name:"currentPassword",value:e.currentPassword,onChange:p,className:"form-input",placeholder:"Enter your current password",required:!0,style:{width:"100%",padding:"12px 48px 12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"16px",transition:"border-color 0.2s ease"}}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>f("current"),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#6b7280"},children:n.current?(0,gi.jsx)(Yl,{size:20}):(0,gi.jsx)(Jl,{size:20})})]})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"New Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",style:{position:"relative"},children:[(0,gi.jsx)("input",{type:n.new?"text":"password",name:"newPassword",value:e.newPassword,onChange:p,className:"form-input",placeholder:"Enter your new password",required:!0,style:{width:"100%",padding:"12px 48px 12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"16px",transition:"border-color 0.2s ease"}}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>f("new"),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#6b7280"},children:n.new?(0,gi.jsx)(Yl,{size:20}):(0,gi.jsx)(Jl,{size:20})})]}),e.newPassword&&(0,gi.jsxs)("div",{style:{marginTop:"8px"},children:[(0,gi.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[(0,gi.jsx)("span",{style:{fontSize:"12px",color:"#6b7280"},children:"Password Strength:"}),(0,gi.jsx)("span",{style:{fontSize:"12px",fontWeight:"600",color:d.color||"#6b7280"},children:d.label||"Very Weak"})]}),(0,gi.jsx)("div",{style:{width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",overflow:"hidden"},children:(0,gi.jsx)("div",{style:{width:"".concat(d.score/5*100,"%"),height:"100%",backgroundColor:d.color||"#ef4444",transition:"all 0.3s ease"}})}),d.feedback&&(0,gi.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px"},children:d.feedback})]})]}),(0,gi.jsxs)("div",{className:"form-group",children:[(0,gi.jsx)("label",{className:"form-label",children:"Confirm New Password *"}),(0,gi.jsxs)("div",{className:"password-input-wrapper",style:{position:"relative"},children:[(0,gi.jsx)("input",{type:n.confirm?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:p,className:"form-input",placeholder:"Confirm your new password",required:!0,style:{width:"100%",padding:"12px 48px 12px 16px",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"16px",transition:"border-color 0.2s ease"}}),(0,gi.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>f("confirm"),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#6b7280"},children:n.confirm?(0,gi.jsx)(Yl,{size:20}):(0,gi.jsx)(Jl,{size:20})})]}),e.confirmPassword&&(0,gi.jsx)("div",{style:{marginTop:"8px"},children:e.newPassword===e.confirmPassword?(0,gi.jsxs)("div",{style:{fontSize:"12px",color:"#22c55e",display:"flex",alignItems:"center",gap:"4px"},children:[(0,gi.jsx)(Fl,{size:16,color:"#22c55e"}),"Passwords match"]}):(0,gi.jsx)("div",{style:{fontSize:"12px",color:"#ef4444"},children:"Passwords do not match"})})]}),(0,gi.jsx)("div",{className:"form-actions",style:{marginTop:"24px"},children:(0,gi.jsxs)("button",{type:"submit",className:"btn-primary",disabled:s,style:{width:"100%",padding:window.innerWidth<768?"14px 20px":"12px 24px",backgroundColor:"#F0B21B",color:"white",border:"none",borderRadius:"8px",fontSize:window.innerWidth<768?"15px":"16px",fontWeight:"600",cursor:s?"not-allowed":"pointer",opacity:s?.7:1,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:window.innerWidth<768?"6px":"8px",minHeight:window.innerWidth<768?"48px":"44px"},children:[s&&(0,gi.jsx)(vl,{color:"#ffffff",height:window.innerWidth<768?14:16,width:window.innerWidth<768?14:16}),s?"Updating password...":"Update Password"]})})]})]})},RN={label:"",houseNumber:"",street:"",barangay:"",city:"",province:"",region:"",postalCode:"",country:"Philippines",isDefault:!1},LN=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(RN),v=((0,r.useMemo)(()=>{var t;return(null===(t=e.find(e=>e.IsDefault))||void 0===t?void 0:t.AddressID)||null},[e]),async()=>{i(!0),a("");try{const e=await fi.get("/api/customer/addresses");e.success&&Array.isArray(e.addresses)?t(e.addresses):t([])}catch(tR){a("Failed to load addresses.")}finally{i(!1)}});(0,r.useEffect)(()=>{v()},[]);const x=()=>{m(null),g(RN)},y=(e,t)=>{g(n=>Fe(Fe({},n),{},{[e]:t}))};return(0,gi.jsxs)("div",{children:[(0,gi.jsx)("h2",{style:{marginBottom:12},children:"Manage Addresses"}),s&&(0,gi.jsx)("div",{className:"error-alert",style:{marginBottom:12},children:s}),n?(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",minHeight:"300px",textAlign:"center"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:window.innerWidth<768?32:40,width:window.innerWidth<768?32:40}),(0,gi.jsx)("div",{style:{fontSize:window.innerWidth<768?"14px":"16px",color:"#6b7280",marginTop:"16px",fontWeight:"500",maxWidth:"280px",lineHeight:"1.5"},children:"Loading addresses..."})]}):(0,gi.jsx)("div",{className:"address-grid",children:0===e.length?(0,gi.jsx)("div",{className:"no-address-message",children:"You have no saved addresses. Add one below."}):e.map(t=>(0,gi.jsxs)("div",{className:"address-card",children:[(0,gi.jsxs)("div",{className:"address-card-header",children:[(0,gi.jsxs)("div",{children:[(0,gi.jsx)("span",{className:"label-badge",children:t.Label||"Address"}),t.IsDefault&&(0,gi.jsx)("span",{className:"default-badge",style:{marginLeft:8},children:"Default"})]}),(0,gi.jsxs)("div",{className:"address-card-actions",children:[(0,gi.jsxs)("button",{className:"btn-secondary-small",disabled:t.IsDefault||d===t.AddressID,onClick:()=>(async t=>{h(t),a("");try{const n=e.find(e=>e.AddressID===t);if(!n)return;await fi.put("/api/customer/addresses/".concat(t),{label:n.Label,houseNumber:n.HouseNumber,street:n.Street,barangay:n.Barangay,city:n.City,province:n.Province,region:n.Region,postalCode:n.PostalCode,country:n.Country||"Philippines",isDefault:!0}),await v()}catch(tR){a("Failed to set default address.")}finally{h(null)}})(t.AddressID),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:window.innerWidth<768?"4px":"6px",padding:window.innerWidth<768?"6px 10px":"8px 12px",fontSize:window.innerWidth<768?"12px":"13px",minHeight:window.innerWidth<768?"32px":"36px"},children:[d===t.AddressID&&(0,gi.jsx)(vl,{color:"#6b7280",height:window.innerWidth<768?10:12,width:window.innerWidth<768?10:12}),d===t.AddressID?"Setting...":"Set Default"]}),(0,gi.jsx)("button",{className:"btn-secondary-small",onClick:()=>{return m((e=t).AddressID),void g({label:e.Label||"",houseNumber:e.HouseNumber||"",street:e.Street||"",barangay:e.Barangay||"",city:e.City||"",province:e.Province||"",region:e.Region||"",postalCode:e.PostalCode||"",country:e.Country||"Philippines",isDefault:!!e.IsDefault});var e},children:"Edit"}),(0,gi.jsxs)("button",{className:"btn-danger-small",disabled:c===t.AddressID,onClick:()=>(async e=>{u(e),a("");try{await fi.delete("/api/customer/addresses/".concat(e)),await v()}catch(tR){a("Failed to delete address.")}finally{u(null)}})(t.AddressID),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:window.innerWidth<768?"4px":"6px",padding:window.innerWidth<768?"6px 10px":"8px 12px",fontSize:window.innerWidth<768?"12px":"13px",minHeight:window.innerWidth<768?"32px":"36px"},children:[c===t.AddressID&&(0,gi.jsx)(vl,{color:"#ffffff",height:window.innerWidth<768?10:12,width:window.innerWidth<768?10:12}),c===t.AddressID?"Deleting...":"Delete"]})]})]}),(0,gi.jsxs)("div",{className:"address-card-body",children:[(0,gi.jsx)("div",{className:"address-name",children:[t.FirstName,t.LastName].filter(Boolean).join(" ")||""}),(0,gi.jsx)("div",{className:"address-full",children:[t.HouseNumber,t.Street,t.Barangay,t.City,t.Province,t.Region,t.PostalCode,t.Country||"Philippines"].filter(Boolean).join(", ")}),t.PhoneNumber&&(0,gi.jsx)("div",{className:"address-phone",children:t.PhoneNumber})]})]},t.AddressID))}),(0,gi.jsxs)("div",{className:"address-form",style:{marginTop:24},children:[(0,gi.jsx)("h3",{style:{marginBottom:8},children:p?"Edit Address":"Add New Address"}),(0,gi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=["label","street","city","province","postalCode"];for(const t of e)if(!String(f[t]||"").trim())return!1;return!0})()){l(!0),a("");try{p?await fi.put("/api/customer/addresses/".concat(p),f):await fi.post("/api/customer/addresses",f),await v(),x()}catch(e){a("Failed to save address.")}finally{l(!1)}}else a("Please complete all required fields.")},children:[(0,gi.jsxs)("div",{className:"form-grid",children:[(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Label*"}),(0,gi.jsx)("input",{value:f.label,onChange:e=>y("label",e.target.value),placeholder:"Home, Office"})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"House Number"}),(0,gi.jsx)("input",{value:f.houseNumber,onChange:e=>y("houseNumber",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Street*"}),(0,gi.jsx)("input",{value:f.street,onChange:e=>y("street",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Barangay"}),(0,gi.jsx)("input",{value:f.barangay,onChange:e=>y("barangay",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"City*"}),(0,gi.jsx)("input",{value:f.city,onChange:e=>y("city",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Province*"}),(0,gi.jsx)("input",{value:f.province,onChange:e=>y("province",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Region"}),(0,gi.jsx)("input",{value:f.region,onChange:e=>y("region",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Postal Code*"}),(0,gi.jsx)("input",{value:f.postalCode,onChange:e=>y("postalCode",e.target.value)})]}),(0,gi.jsxs)("div",{className:"form-field",children:[(0,gi.jsx)("label",{children:"Country"}),(0,gi.jsx)("input",{value:f.country,onChange:e=>y("country",e.target.value)})]}),(0,gi.jsx)("div",{className:"form-field checkbox",children:(0,gi.jsxs)("label",{children:[(0,gi.jsx)("input",{type:"checkbox",checked:f.isDefault,onChange:e=>y("isDefault",e.target.checked)}),(0,gi.jsx)("span",{style:{marginLeft:6},children:"Set as default"})]})})]}),(0,gi.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12},children:[(0,gi.jsxs)("button",{className:"btn-primary",type:"submit",disabled:o,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:window.innerWidth<768?"6px":"8px",padding:window.innerWidth<768?"12px 16px":"12px 20px",fontSize:window.innerWidth<768?"14px":"16px",minHeight:window.innerWidth<768?"44px":"48px",transition:"all 0.2s ease"},children:[o&&(0,gi.jsx)(vl,{color:"#ffffff",height:window.innerWidth<768?14:16,width:window.innerWidth<768?14:16}),o?p?"Saving...":"Adding...":p?"Save Changes":"Add Address"]}),p&&(0,gi.jsx)("button",{type:"button",className:"btn-secondary",onClick:x,children:"Cancel"})]})]})]})]})},jN=e=>{let{stats:t,recentOrders:n,loading:i,formatPrice:r,onLogout:s}=e;const a=ne();return i?(0,gi.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",minHeight:"300px",textAlign:"center"},children:[(0,gi.jsx)(vl,{color:"#F0B21B",height:window.innerWidth<768?32:40,width:window.innerWidth<768?32:40}),(0,gi.jsx)("div",{style:{fontSize:window.innerWidth<768?"14px":"16px",color:"#6b7280",marginTop:"16px",fontWeight:"500",maxWidth:"280px",lineHeight:"1.5"},children:"Loading dashboard..."})]}):(0,gi.jsxs)("div",{className:"dashboard-tab",children:[(0,gi.jsxs)("div",{className:"stats-grid",children:[(0,gi.jsx)("div",{className:"stat-card",children:(0,gi.jsxs)("div",{className:"stat-content",children:[(0,gi.jsx)("div",{className:"stat-value",children:t.totalOrders}),(0,gi.jsx)("div",{className:"stat-label",children:"Total Orders"})]})}),(0,gi.jsx)("div",{className:"stat-card",children:(0,gi.jsxs)("div",{className:"stat-content",children:[(0,gi.jsx)("div",{className:"stat-value",children:r(t.totalSpent||0)}),(0,gi.jsx)("div",{className:"stat-label",children:"Total Spent"})]})})]}),(0,gi.jsxs)("div",{className:"dashboard-section",children:[(0,gi.jsxs)("div",{className:"section-header",children:[(0,gi.jsx)("h2",{className:"section-title",children:"Recent Orders"}),(0,gi.jsxs)("button",{className:"btn-primary",onClick:()=>a("/account?tab=orders"),children:[(0,gi.jsx)(Wl,{size:16}),"View All Orders"]})]}),n.length>0?(0,gi.jsx)("div",{className:"recent-orders",children:n.map(e=>{var t;return(0,gi.jsxs)("div",{className:"recent-order-card",children:[(0,gi.jsxs)("div",{className:"order-info",children:[(0,gi.jsxs)("div",{className:"order-number",children:["Order #",e.orderID]}),(0,gi.jsx)("div",{className:"order-date",children:new Date(e.orderDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,gi.jsx)("div",{className:"order-items-count",children:e.items?"".concat(e.items.length," item").concat(1!==e.items.length?"s":""):"1 item"})]}),(0,gi.jsx)("div",{className:"order-status",children:(0,gi.jsxs)("span",{className:"status-badge ".concat(null===(t=e.status)||void 0===t?void 0:t.toLowerCase()),children:[IN(e.status),e.status]})}),(0,gi.jsx)("div",{className:"order-total",children:r(parseFloat(e.totalAmount)||0)})]},e.orderID)})}):(0,gi.jsxs)("div",{className:"empty-state",children:[(0,gi.jsx)("p",{children:"No orders yet. Start shopping to see your orders here."}),(0,gi.jsx)("button",{className:"btn-primary",onClick:()=>a("/products"),children:"Browse Products"})]})]}),(0,gi.jsxs)("div",{className:"dashboard-actions",children:[(0,gi.jsxs)("button",{className:"btn-secondary",onClick:()=>a("/products"),children:[(0,gi.jsx)(Ul,{size:16}),"Continue Shopping"]}),(0,gi.jsxs)("button",{className:"btn-danger",onClick:s,children:[(0,gi.jsx)(Gl,{size:16}),"Logout"]})]})]})},IN=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"pending":case"processing":return(0,gi.jsx)(Ol,{size:14});case"shipped":return(0,gi.jsx)(Kl,{size:14});case"delivered":case"completed":return(0,gi.jsx)(Fl,{size:14});default:return(0,gi.jsx)(jl,{size:14})}},kN=()=>{var e,t;const{user:n,isAuthenticated:i,logout:s,loading:a}=xi(),{formatPrice:o}=Oi(),l=ne(),[c]=Ie(),[u,d]=(0,r.useState)("dashboard"),[h,p]=(0,r.useState)({totalOrders:0,totalSpent:0,pendingOrders:0,completedOrders:0}),[m,f]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[x,y]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{const e=c.get("tab");e&&["dashboard","profile","orders","addresses","payment","security"].includes(e)&&d(e)},[c]),(0,r.useEffect)(()=>{(async()=>{if(a||i){if(i)try{v(!0);const[e]=await Promise.all([fi.get("/api/customer/orders-with-items"),fi.get("/api/customer/addresses")]);if(e.success&&e.orders){const t=e.orders,n=t.length,i=t.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),r=t.filter(e=>"pending"===e.status||"processing"===e.status).length,s=t.filter(e=>"delivered"===e.status||"completed"===e.status).length;p({totalOrders:n,totalSpent:i,pendingOrders:r,completedOrders:s});const a=t.sort((e,t)=>new Date(t.orderDate)-new Date(e.orderDate));f(a.slice(0,3))}}catch(RT){}finally{v(!1)}}else l("/login")})()},[i,a,l]),a)return(0,gi.jsx)(kc,{isLoading:!0,text:"Loading your account..."});if(!i)return null;const _=()=>{s()},b=[{id:"dashboard",label:"Dashboard",icon:(0,gi.jsx)(Rl,{size:20}),component:()=>(0,gi.jsx)(jN,{stats:h,recentOrders:m,loading:g,formatPrice:o,onLogout:_})},{id:"profile",label:"Personal Information",icon:(0,gi.jsx)(Ll,{size:20}),component:PN},{id:"orders",label:"My Orders",icon:(0,gi.jsx)(jl,{size:20}),component:MN},{id:"addresses",label:"Addresses",icon:(0,gi.jsx)(Kl,{size:20}),component:LN},{id:"payment",label:"Payment Method",icon:(0,gi.jsx)(kl,{size:20}),component:()=>(0,gi.jsx)("div",{className:"coming-soon",children:"Payment Method - Coming Soon"})},{id:"security",label:"Password Manager",icon:(0,gi.jsx)(Bl,{size:20}),component:NN}],w=null===(e=b.find(e=>e.id===u))||void 0===e?void 0:e.component;return(0,gi.jsx)("div",{className:"account-page",children:(0,gi.jsxs)("div",{className:"account-container",children:[(0,gi.jsx)("div",{className:"account-header",children:(0,gi.jsxs)("div",{className:"welcome-section",children:[(0,gi.jsxs)("h1",{className:"welcome-title",children:["Welcome back, ",(null===n||void 0===n?void 0:n.firstName)||(null===n||void 0===n||null===(t=n.fullName)||void 0===t?void 0:t.split(" ")[0])||"User","!"]}),(0,gi.jsx)("p",{className:"welcome-subtitle",children:"Manage your account, track orders, and update your preferences"})]})}),(0,gi.jsx)("div",{className:"mobile-menu-toggle-container",children:(0,gi.jsx)("button",{className:"mobile-menu-toggle",onClick:()=>y(!x),"aria-label":"Toggle navigation menu",children:(0,gi.jsx)(Dl,{size:24,color:"#374151"})})}),(0,gi.jsxs)("div",{className:"account-layout",children:[(0,gi.jsxs)("div",{className:"account-sidebar ".concat(x?"mobile-menu-open":""),children:[(0,gi.jsx)("div",{className:"mobile-close-button",children:(0,gi.jsx)("button",{className:"close-btn",onClick:()=>y(!1),"aria-label":"Close menu",children:"\xd7"})}),(0,gi.jsx)("nav",{className:"account-nav",children:b.map(e=>(0,gi.jsxs)("button",{className:"account-nav-item ".concat(u===e.id?"active":""),onClick:()=>{d(e.id),l("/account?tab=".concat(e.id)),y(!1)},children:[(0,gi.jsx)("span",{className:"nav-icon",children:e.icon}),(0,gi.jsx)("span",{className:"nav-label",children:e.label})]},e.id))})]}),(0,gi.jsxs)("div",{className:"account-main",children:[x&&(0,gi.jsx)("div",{className:"mobile-menu-overlay",onClick:()=>y(!1)}),(0,gi.jsx)("div",{className:"account-content",children:w&&(0,gi.jsx)(w,{})})]})]})]})})},BN=[{path:"/checkout",element:(0,gi.jsx)(UP,{children:(0,gi.jsx)(ZP,{})})},{path:"/payment",element:(0,gi.jsx)(UP,{children:(0,gi.jsx)(vN,{})})},{path:"/order-success/:orderId",element:(0,gi.jsx)(UP,{children:(0,gi.jsx)(yN,{})})},{path:"/order-success",element:(0,gi.jsx)(UP,{children:(0,gi.jsx)(yN,{})})},{path:"/orders",element:(0,gi.jsx)(UP,{children:(0,gi.jsx)(_N,{})})},{path:"/account",element:(0,gi.jsx)(UP,{children:(0,gi.jsx)(kN,{})})}],DN=e=>{let{children:t,allowEmployee:n=!1}=e;const{user:i,isAuthenticated:r,loading:s}=xi();if(s)return(0,gi.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,gi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return(0,gi.jsx)(xe,{to:"/login",replace:!0});const a="Admin"===(null===i||void 0===i?void 0:i.role),o=n&&("Employee"===(null===i||void 0===i?void 0:i.role)||"Admin"===(null===i||void 0===i?void 0:i.role));return a||o?t:(0,gi.jsx)(xe,{to:"/",replace:!0})},ON={async getOrders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.status&&t.append("status",e.status),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset);return(await fi.get("/api/admin/orders?".concat(t.toString()))).data}catch(RT){throw console.error("Error fetching admin orders:",RT),RT}},async getOrderStats(){try{return(await fi.get("/api/admin/order-stats")).data}catch(RT){throw console.error("Error fetching order stats:",RT),RT}},async updateOrderStatus(e,t){try{return(await fi.put("/api/admin/orders/".concat(e,"/status"),{status:t})).data}catch(RT){throw console.error("Error updating order status:",RT),RT}},async getOrderDetails(e){try{return(await fi.get("/api/admin/orders/".concat(e))).data}catch(RT){throw console.error("Error fetching order details:",RT),RT}}},FN=()=>{const e=ne(),{user:t,logout:n}=xi(),[i,s]=(0,r.useState)({totalOrders:0,pendingOrders:0,processingOrders:0,shippedOrders:0,deliveredOrders:0,cancelledOrders:0,totalRevenue:0,averageOrderValue:0,recentOrders:0}),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)("");(0,r.useEffect)(()=>{h()},[]);const h=async()=>{try{c(!0),d("");const[e,t]=await Promise.all([ON.getOrderStats(),ON.getOrders({limit:5})]);e.success&&s(e.stats),t.success&&o(t.orders)}catch(e){console.error("Error fetching dashboard data:",e),d("Failed to load dashboard data")}finally{c(!1)}},p=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e||0);if(l)return(0,gi.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gi.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,gi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(u)return(0,gi.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gi.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:u})});return(0,gi.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,gi.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,gi.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),(0,gi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gi.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",(null===t||void 0===t?void 0:t.firstName)||(null===t||void 0===t?void 0:t.fullName)||"Admin"]}),(0,gi.jsx)("button",{onClick:()=>{n()},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors text-sm",children:"Logout"})]})]}),(0,gi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Orders"}),(0,gi.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:i.totalOrders}),(0,gi.jsx)("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Revenue"}),(0,gi.jsx)("p",{className:"text-3xl font-bold text-green-600",children:p(i.totalRevenue)}),(0,gi.jsx)("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pending Orders"}),(0,gi.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:i.pendingOrders}),(0,gi.jsx)("p",{className:"text-sm text-gray-600",children:"Awaiting processing"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Recent Orders"}),(0,gi.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:i.recentOrders}),(0,gi.jsx)("p",{className:"text-sm text-gray-600",children:"Last 7 days"})]})]}),(0,gi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,gi.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:i.pendingOrders}),(0,gi.jsx)("div",{className:"text-sm text-gray-600",children:"Pending"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,gi.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.processingOrders}),(0,gi.jsx)("div",{className:"text-sm text-gray-600",children:"Processing"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,gi.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:i.shippedOrders}),(0,gi.jsx)("div",{className:"text-sm text-gray-600",children:"Shipped"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,gi.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i.deliveredOrders}),(0,gi.jsx)("div",{className:"text-sm text-gray-600",children:"Delivered"})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,gi.jsx)("div",{className:"text-2xl font-bold text-red-600",children:i.cancelledOrders}),(0,gi.jsx)("div",{className:"text-sm text-gray-600",children:"Cancelled"})]})]}),(0,gi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gi.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Orders"}),(0,gi.jsx)("button",{onClick:()=>e("/admin/orders"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,gi.jsx)("div",{className:"space-y-3",children:a.length>0?a.map(e=>{return(0,gi.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,gi.jsxs)("div",{children:[(0,gi.jsxs)("span",{className:"text-gray-600",children:["Order #",e.OrderID]}),(0,gi.jsx)("div",{className:"text-xs text-gray-500",children:(n=e.OrderDate,new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,gi.jsx)("div",{className:"text-xs ".concat((t=e.Status,{Pending:"text-yellow-600",Processing:"text-blue-600",Shipped:"text-purple-600",Delivered:"text-green-600",Cancelled:"text-red-600"}[t]||"text-gray-600")),children:e.Status})]}),(0,gi.jsx)("span",{className:"text-green-600 font-medium",children:p(e.TotalAmount)})]},e.OrderID);var t,n}):(0,gi.jsx)("div",{className:"text-gray-500 text-center py-4",children:"No recent orders"})})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Actions"}),(0,gi.jsxs)("div",{className:"space-y-3",children:[(0,gi.jsx)("button",{onClick:()=>e("/admin/orders"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"View All Orders"}),(0,gi.jsx)("button",{onClick:()=>e("/admin/orders?status=Pending"),className:"w-full bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700 transition-colors",children:"Process Pending Orders"}),(0,gi.jsx)("button",{onClick:()=>e("/admin/products"),className:"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition-colors",children:"Manage Products"}),(0,gi.jsx)("button",{onClick:()=>e("/admin/customers"),className:"w-full bg-orange-600 text-white py-2 px-4 rounded hover:bg-orange-700 transition-colors",children:"View Customers"})]})]})]})]})},UN=()=>{const[e,t]=Ie(),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(e.get("status")||"all"),[d,h]=(0,r.useState)({total:0,limit:20,offset:0,currentPage:1});(0,r.useEffect)(()=>{p()},[c,d.offset]);const p=async()=>{try{a(!0),l("");const e=await ON.getOrders({status:"all"===c?void 0:c,limit:d.limit,offset:d.offset});e.success&&(i(e.orders),h(t=>Fe(Fe({},t),{},{total:e.total})))}catch(e){console.error("Error fetching orders:",e),l("Failed to load orders")}finally{a(!1)}},m=e=>{const t=(e-1)*d.limit;h(n=>Fe(Fe({},n),{},{offset:t,currentPage:e}))},f=Math.ceil(d.total/d.limit);return s?(0,gi.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gi.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,gi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,gi.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,gi.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,gi.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Orders Management"}),(0,gi.jsxs)("div",{className:"text-sm text-gray-600",children:["Total: ",d.total," orders"]})]}),o&&(0,gi.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:o}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,gi.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filter by Status"}),(0,gi.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","Pending","Processing","Shipped","Delivered","Cancelled"].map(e=>(0,gi.jsx)("button",{onClick:()=>(e=>{u(e),h(e=>Fe(Fe({},e),{},{offset:0,currentPage:1})),t("all"===e?{}:{status:e})})(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(c===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"all"===e?"All Orders":e},e))})]}),(0,gi.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,gi.jsx)("div",{className:"overflow-x-auto",children:(0,gi.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gi.jsx)("thead",{className:"bg-gray-50",children:(0,gi.jsxs)("tr",{children:[(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,gi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,gi.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(e=>{return(0,gi.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.OrderID]}),(0,gi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,gi.jsx)("div",{className:"text-sm text-gray-900",children:e.CustomerName}),(0,gi.jsx)("div",{className:"text-sm text-gray-500",children:e.CustomerEmail})]}),(0,gi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(i=e.OrderDate,new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,gi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gi.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((n=e.Status,{Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"}[n]||"bg-gray-100 text-gray-800")),children:e.Status})}),(0,gi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.PaymentMethod}),(0,gi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(t=e.TotalAmount,new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(t||0))}),(0,gi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,gi.jsx)("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),(0,gi.jsx)("button",{className:"text-green-600 hover:text-green-900",children:"Update"})]})]},e.OrderID);var t,n,i}):(0,gi.jsx)("tr",{children:(0,gi.jsx)("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"No orders found"})})})]})}),f>1&&(0,gi.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,gi.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,gi.jsx)("button",{onClick:()=>m(d.currentPage-1),disabled:1===d.currentPage,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,gi.jsx)("button",{onClick:()=>m(d.currentPage+1),disabled:d.currentPage===f,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,gi.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,gi.jsx)("div",{children:(0,gi.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,gi.jsx)("span",{className:"font-medium",children:d.offset+1})," ","to"," ",(0,gi.jsx)("span",{className:"font-medium",children:Math.min(d.offset+d.limit,d.total)})," ","of"," ",(0,gi.jsx)("span",{className:"font-medium",children:d.total})," ","results"]})}),(0,gi.jsx)("div",{children:(0,gi.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,gi.jsx)("button",{onClick:()=>m(d.currentPage-1),disabled:1===d.currentPage,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,f)},(e,t)=>{const n=t+1;return(0,gi.jsx)("button",{onClick:()=>m(n),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(d.currentPage===n?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:n},n)}),(0,gi.jsx)("button",{onClick:()=>m(d.currentPage+1),disabled:d.currentPage===f,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]})]})},zN=[{path:"/admin",element:(0,gi.jsx)(DN,{allowEmployee:!0,children:(0,gi.jsx)(FN,{})})},{path:"/admin/dashboard",element:(0,gi.jsx)(DN,{allowEmployee:!0,children:(0,gi.jsx)(FN,{})})},{path:"/admin/orders",element:(0,gi.jsx)(DN,{allowEmployee:!0,children:(0,gi.jsx)(UN,{})})}],HN=e=>e.map((e,t)=>(0,gi.jsx)(ye,{path:e.path,element:e.element},t)),GN=()=>(0,gi.jsxs)(be,{children:[HN(FP),HN(BN),HN(zN),(0,gi.jsx)(ye,{path:"*",element:(0,gi.jsx)(xe,{to:"/",replace:!0})})]});class WN{constructor(){this.currentTheme="default",this.themeClasses={default:"",dark:"theme-dark",christmas:"theme-christmas"},this.init()}async init(){try{const e=await fetch("".concat("https://designxcellinv-production.up.railway.app","/api/theme/public"));if(e.ok){const t=await e.json();t.success&&(this.currentTheme=t.activeTheme||"default",this.applyTheme(this.currentTheme))}else this.applyTheme("default")}catch(RT){this.applyTheme("default")}}applyTheme(e){Object.values(this.themeClasses).forEach(e=>{e&&document.body.classList.remove(e)}),this.themeClasses[e]&&document.body.classList.add(this.themeClasses[e]),this.currentTheme=e,localStorage.setItem("designxcel-theme",e),this.updateThemeIndicator(e),this.handleChristmasEffects(e),this.dispatchThemeChangeEvent(e)}async switchTheme(e){if(!this.themeClasses[e])return console.error("Invalid theme: ".concat(e)),!1;try{const t=await fetch("".concat("https://designxcellinv-production.up.railway.app","/api/theme/public"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({activeTheme:e})});if(t.ok){if((await t.json()).success)return this.applyTheme(e),!0}}catch(RT){return console.error("Failed to save theme to backend:",RT),this.applyTheme(e),!1}}getCurrentTheme(){return this.currentTheme}getAvailableThemes(){return Object.keys(this.themeClasses)}updateThemeIndicator(e){const t=document.getElementById("current-theme");t&&(t.textContent=e);const n=document.getElementById("theme-select");n&&(n.value=e)}loadFromStorage(){const e=localStorage.getItem("designxcel-theme");e&&this.themeClasses[e]&&this.applyTheme(e)}async refreshTheme(){await this.init()}dispatchThemeChangeEvent(e){const t=new CustomEvent("themeChanged",{detail:{theme:e}});document.dispatchEvent(t)}handleChristmasEffects(e){"christmas"===e?this.startChristmasSnowfall():this.stopChristmasSnowfall()}startChristmasSnowfall(){this.stopChristmasSnowfall();const e=document.createElement("div");e.className="christmas-snowfall",e.id="christmas-snowfall",document.body.appendChild(e),this.createChristmasSnowflakes()}stopChristmasSnowfall(){const e=document.getElementById("christmas-snowfall");e&&e.remove(),this.christmasSnowfallInterval&&(clearInterval(this.christmasSnowfallInterval),this.christmasSnowfallInterval=null)}createChristmasSnowflakes(){const e=["\u2744"],t=document.getElementById("christmas-snowfall");if(t&&(!window.matchMedia||!window.matchMedia("(prefers-reduced-motion: reduce)").matches)){for(let n=0;n<15;n++)setTimeout(()=>this.createSingleChristmasSnowflake(t,e),200*n);this.christmasSnowfallInterval=setInterval(()=>{this.createSingleChristmasSnowflake(t,e)},1e3)}}createSingleChristmasSnowflake(e,t){if(!e)return;const n=document.createElement("div");n.className="snowflake",n.textContent=t[Math.floor(Math.random()*t.length)],n.style.left=100*Math.random()+"%";const i=document.querySelector(".header-main");if(i){const e=i.getBoundingClientRect();n.style.top=e.top+"px"}else n.style.top="0px";const r=["small","medium","large"],s=r[Math.floor(Math.random()*r.length)];n.classList.add(s),n.style.animationDelay=2*Math.random()+"s",e.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},12e3)}setupThemeListeners(){const e=document.getElementById("theme-select");e&&e.addEventListener("change",e=>{this.switchTheme(e.target.value)});const t=document.getElementById("theme-form");t&&t.addEventListener("submit",async e=>{e.preventDefault();const t=new FormData(e.target).get("theme");t&&await this.switchTheme(t)})}}window.themeManager=new WN,window.testTheme=e=>{window.themeManager&&window.themeManager.applyTheme(e)},window.refreshTheme=()=>{window.themeManager&&window.themeManager.refreshTheme()};const VN=e=>{let{isActive:t=!1}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=["\u2744","\u2745","\u2746","\ud83c\udf84","\u2b50","\ud83c\udf1f"],a=()=>{if(!n.current)return;const e=document.createElement("div");e.className="snowflake",e.textContent=s[Math.floor(Math.random()*s.length)],e.style.left=100*Math.random()+"%";const t=document.querySelector(".header-main");if(t){const n=t.getBoundingClientRect();e.style.top=n.top+"px"}else e.style.top="0px";const i=["small","medium","large"],r=i[Math.floor(Math.random()*i.length)];e.classList.add(r),e.style.animationDelay=2*Math.random()+"s",n.current.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},12e3)},o=()=>{i.current&&(clearInterval(i.current),i.current=null),n.current&&(n.current.innerHTML="")};return(0,r.useEffect)(()=>(t?(()=>{if(!i.current&&(!window.matchMedia||!window.matchMedia("(prefers-reduced-motion: reduce)").matches)){for(let e=0;e<15;e++)setTimeout(()=>a(),200*e);i.current=setInterval(()=>{a()},1e3)}})():o(),()=>{o()}),[t]),t?(0,gi.jsx)("div",{ref:n,className:"christmas-snowfall","aria-hidden":"true"}):null};const JN=new class{constructor(){this.apiUrl="https://designxcellinv-production.up.railway.app",console.log("\ud83d\udd17 API Connection Test initialized with URL:",this.apiUrl)}async testConnection(){try{console.log("\ud83e\uddea Testing API connection...");const e=await fetch("".concat(this.apiUrl,"/api/health")),t=await e.json();console.log("\u2705 Health check response:",t);const n=await fi.get("/api/health");return console.log("\u2705 API Client response:",n),{success:!0,healthCheck:t,apiClient:n,apiUrl:this.apiUrl}}catch(RT){return console.error("\u274c API Connection test failed:",RT),{success:!1,error:RT.message,apiUrl:this.apiUrl}}}async testEndpoints(){const e=["/api/health","/api/products","/api/theme/public"],t={};for(const n of e)try{const e=await fetch("".concat(this.apiUrl).concat(n));t[n]={status:e.status,ok:e.ok,statusText:e.statusText},console.log("\u2705 ".concat(n,": ").concat(e.status," ").concat(e.statusText))}catch(RT){t[n]={error:RT.message},console.error("\u274c ".concat(n,": ").concat(RT.message))}return t}getConfig(){return{apiUrl:this.apiUrl,environment:"production",nodeEnv:"production",allEnvVars:{REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_ENVIRONMENT:"production",NODE_ENV:"production"}}}};function YN(){return(0,r.useEffect)(()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{let t=e;if(!t){const e=await fetch("".concat("https://designxcellinv-production.up.railway.app","/api/theme/public"));if(e.ok){const n=await e.json();n.success&&n.backgroundImage&&(t={imageUrl:n.backgroundImage})}}if(t&&t.imageUrl){const e=Sr(t.imageUrl);document.body.style.backgroundImage="url(".concat(e,")"),document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundAttachment="fixed"}}catch(RT){}}()},[]),null}function XN(){const[e,t]=(0,r.useState)("default");return(0,r.useEffect)(()=>{window.themeManager&&(window.themeManager.setupThemeListeners(),window.themeManager.init(),t(window.themeManager.getCurrentTheme()));const e=()=>{window.themeManager&&t(window.themeManager.getCurrentTheme())};return document.addEventListener("themeChanged",e),()=>{document.removeEventListener("themeChanged",e)}},[]),(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)(VN,{isActive:"christmas"===e}),"christmas"===e&&(0,gi.jsxs)(gi.Fragment,{children:[(0,gi.jsx)(Lr,{position:"top-left",icon:"tree",size:28}),(0,gi.jsx)(Lr,{position:"top-right",icon:"star",size:24}),(0,gi.jsx)(Lr,{position:"bottom-left",icon:"gift",size:26}),(0,gi.jsx)(Lr,{position:"bottom-right",icon:"bell",size:24})]})]})}const ZN=e=>{let{children:t}=e;return(0,gi.jsxs)("div",{className:"app",children:[(0,gi.jsx)(YN,{}),(0,gi.jsx)(XN,{}),(0,gi.jsx)(jr,{}),(0,gi.jsx)("main",{className:"main-content",children:t}),(0,gi.jsx)(Ir,{}),(0,gi.jsx)(Tl,{}),(0,gi.jsx)(Nl,{}),(0,gi.jsx)(lc,{})]})};function qN(e){let{children:t}=e;const{user:n,loading:i}=xi(),r=i?"loading":(null===n||void 0===n?void 0:n.id)||"guest";return(0,gi.jsx)(Pi,{userId:r,children:t})}function KN(e){let{children:t}=e;const{user:n,loading:i}=xi(),r=i?"loading":(null===n||void 0===n?void 0:n.id)||"guest";return(0,gi.jsx)(Yi,{userId:r,children:t})}const QN=function(){return(0,r.useEffect)(()=>{(async()=>{console.log("\ud83d\ude80 App starting - testing API connection...");const e=JN.getConfig();console.log("\ud83d\udccb API Configuration:",e);const t=await JN.testConnection();console.log("\ud83d\udd0d API Connection Test Result:",t),t.success||console.error("\u274c API Connection failed! Check the configuration.")})()},[]),(0,gi.jsx)(yi,{children:(0,gi.jsx)(Di,{children:(0,gi.jsx)(Wi,{children:(0,gi.jsx)(KN,{children:(0,gi.jsx)(qN,{children:(0,gi.jsx)(Me,{children:(0,gi.jsx)(ZN,{children:(0,gi.jsx)(GN,{})})})})})})})})},$N="https://designxcellinv-production.up.railway.app",eR={THEME_ACTIVE:"".concat($N,"/api/theme/public"),THEME_UPDATE:"".concat($N,"/api/theme/public"),BACKGROUND_IMAGE:"".concat($N,"/api/background-image"),LOGIN:"".concat($N,"/api/auth/login"),REGISTER:"".concat($N,"/api/auth/register"),LOGOUT:"".concat($N,"/api/auth/logout"),PROFILE:"".concat($N,"/api/auth/profile"),PRODUCTS:"".concat($N,"/api/products"),PRODUCT_BY_ID:e=>"".concat($N,"/api/products/").concat(e),CART:"".concat($N,"/api/cart"),CART_ADD:"".concat($N,"/api/cart/add"),CART_REMOVE:"".concat($N,"/api/cart/remove"),CART_UPDATE:"".concat($N,"/api/cart/update"),ORDERS:"".concat($N,"/api/orders"),ORDER_BY_ID:e=>"".concat($N,"/api/orders/").concat(e),USERS:"".concat($N,"/api/users"),USER_BY_ID:e=>"".concat($N,"/api/users/").concat(e),WEBSOCKET_URL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!1,REACT_APP_API_URL:"https://designxcellinv-production.up.railway.app",REACT_APP_APP_NAME:"DesignXcel",REACT_APP_DEBUG:"false",REACT_APP_ENABLE_ANALYTICS:"false",REACT_APP_ENABLE_CODE_SPLITTING:"true",REACT_APP_ENABLE_CSP:"true",REACT_APP_ENABLE_ERROR_REPORTING:"true",REACT_APP_ENABLE_HTTPS_ONLY:"true",REACT_APP_ENABLE_LAZY_LOADING:"true",REACT_APP_ENABLE_PERFORMANCE_MONITORING:"true",REACT_APP_ENABLE_SERVICE_WORKER:"true",REACT_APP_ENVIRONMENT:"production",REACT_APP_LOG_LEVEL:"error",REACT_APP_STRIPE_COUNTRY:"PH",REACT_APP_STRIPE_CURRENCY:"PHP",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51RCLlxPoc51pdmcaSH32LZIiLHJjHEmEkm3csrujxIKBcNa6gb6DG1KblYrBsRqtmWS5syIj9mT5P4UgWsprmQv500cFgYV6Sw",REACT_APP_VERSION:"1.0.0"}.REACT_APP_WEBSOCKET_URL||$N};a.createRoot(document.getElementById("root")).render((0,gi.jsx)(r.StrictMode,{children:(0,gi.jsx)(QN,{})})),fetch(eR.THEME_ACTIVE).then(e=>{if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(e=>{e.success&&e.activeTheme&&"default"!==e.activeTheme&&document.body.classList.add("theme-".concat(e.activeTheme))}).catch(e=>{}),window.addEventListener("themeChanged",e=>{document.body.classList.remove("theme-christmas"),e.detail&&e.detail.theme&&"default"!==e.detail.theme&&document.body.classList.add("theme-".concat(e.detail.theme)),window.dispatchEvent(new CustomEvent("backgroundImageUpdate",{detail:e.detail}))})})()})();